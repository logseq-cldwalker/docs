(function(){
shadow$provide[668]=function(ua,X,Ta,L){function y(db){for(var tb="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+db,$b=1;$b<arguments.length;$b++)tb+="\x26args[]\x3d"+encodeURIComponent(arguments[$b]);return"Minified React error #"+db+"; visit "+tb+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function W(db){if(Oa.call(Rc,db))return!0;if(Oa.call(Sc,db))return!1;if(Mc.test(db))return Rc[db]=!0;Sc[db]=!0;return!1}function x(db,
tb,$b,vc,ub,ra,la){this.acceptsBooleans=2===tb||3===tb||4===tb;this.attributeName=vc;this.attributeNamespace=ub;this.mustUseProperty=$b;this.propertyName=db;this.type=tb;this.sanitizeURL=ra;this.removeEmptyString=la}function t(db){return db[1].toUpperCase()}function b(db){if("boolean"===typeof db||"number"===typeof db)return""+db;db=""+db;var tb=sb.exec(db);if(tb){var $b="",vc,ub=0;for(vc=tb.index;vc<db.length;vc++){switch(db.charCodeAt(vc)){case 34:tb="\x26quot;";break;case 38:tb="\x26amp;";break;
case 39:tb="\x26#x27;";break;case 60:tb="\x26lt;";break;case 62:tb="\x26gt;";break;default:continue}ub!==vc&&($b+=db.substring(ub,vc));ub=vc+1;$b+=tb}db=ub!==vc?$b+db.substring(ub,vc):$b}return db}function q(db,tb){return{insertionMode:db,selectedValue:tb}}function D(db,tb,$b){switch(tb){case "select":return q(1,null!=$b.value?$b.value:$b.defaultValue);case "svg":return q(2,null);case "math":return q(3,null);case "foreignObject":return q(1,null);case "table":return q(4,null);case "thead":case "tbody":case "tfoot":return q(5,
null);case "colgroup":return q(7,null);case "tr":return q(6,null)}return 4<=db.insertionMode||0===db.insertionMode?q(1,null):db}function F(db,tb,$b){if("object"!==typeof $b)throw Error(y(62));tb=!0;for(var vc in $b)if(Oa.call($b,vc)){var ub=$b[vc];if(null!=ub&&"boolean"!==typeof ub&&""!==ub){if(0===vc.indexOf("--")){var ra=b(vc);ub=b((""+ub).trim())}else{ra=vc;var la=Zb.get(ra);void 0!==la?ra=la:(la=b(ra.replace(bc,"-$1").toLowerCase().replace(Rb,"-ms-")),Zb.set(ra,la),ra=la);ub="number"===typeof ub?
0===ub||Oa.call(bd,vc)?""+ub:ub+"px":b((""+ub).trim())}tb?(tb=!1,db.push(' style\x3d"',ra,":",ub)):db.push(";",ra,":",ub)}}tb||db.push('"')}function H(db,tb,$b,vc){switch($b){case "style":F(db,tb,vc);return;case "defaultValue":case "defaultChecked":case "innerHTML":case "suppressContentEditableWarning":case "suppressHydrationWarning":return}if(!(2<$b.length)||"o"!==$b[0]&&"O"!==$b[0]||"n"!==$b[1]&&"N"!==$b[1])if(tb=zc.hasOwnProperty($b)?zc[$b]:null,null!==tb){switch(typeof vc){case "function":case "symbol":return;
case "boolean":if(!tb.acceptsBooleans)return}$b=tb.attributeName;switch(tb.type){case 3:vc&&db.push(" ",$b,'\x3d""');break;case 4:!0===vc?db.push(" ",$b,'\x3d""'):!1!==vc&&db.push(" ",$b,'\x3d"',b(vc),'"');break;case 5:isNaN(vc)||db.push(" ",$b,'\x3d"',b(vc),'"');break;case 6:!isNaN(vc)&&1<=vc&&db.push(" ",$b,'\x3d"',b(vc),'"');break;default:tb.sanitizeURL&&(vc=""+vc),db.push(" ",$b,'\x3d"',b(vc),'"')}}else if(W($b)){switch(typeof vc){case "function":case "symbol":return;case "boolean":if(tb=$b.toLowerCase().slice(0,
5),"data-"!==tb&&"aria-"!==tb)return}db.push(" ",$b,'\x3d"',b(vc),'"')}}function Q(db,tb,$b){if(null!=tb){if(null!=$b)throw Error(y(60));if("object"!==typeof tb||!("__html"in tb))throw Error(y(61));tb=tb.__html;null!==tb&&void 0!==tb&&db.push(""+tb)}}function h(db){var tb="";pb.Children.forEach(db,function($b){null!=$b&&(tb+=$b)});return tb}function k(db,tb,$b,vc){db.push(a($b));var ub=$b=null,ra;for(ra in tb)if(Oa.call(tb,ra)){var la=tb[ra];if(null!=la)switch(ra){case "children":$b=la;break;case "dangerouslySetInnerHTML":ub=
la;break;default:H(db,vc,ra,la)}}db.push("\x3e");Q(db,ub,$b);return"string"===typeof $b?(db.push(b($b)),null):$b}function a(db){var tb=mb.get(db);if(void 0===tb){if(!Ub.test(db))throw Error(y(65,db));tb="\x3c"+db;mb.set(db,tb)}return tb}function l(db,tb,$b,vc,ub){switch(tb){case "select":db.push(a("select"));var ra=null,la=null;for(Ha in $b)if(Oa.call($b,Ha)){var f=$b[Ha];if(null!=f)switch(Ha){case "children":ra=f;break;case "dangerouslySetInnerHTML":la=f;break;case "defaultValue":case "value":break;
default:H(db,vc,Ha,f)}}db.push("\x3e");Q(db,la,ra);return ra;case "option":la=ub.selectedValue;db.push(a("option"));var ia=f=null,Sa=null,Ha=null;for(ra in $b)if(Oa.call($b,ra)){var ka=$b[ra];if(null!=ka)switch(ra){case "children":f=ka;break;case "selected":Sa=ka;break;case "dangerouslySetInnerHTML":Ha=ka;break;case "value":ia=ka;default:H(db,vc,ra,ka)}}if(null!=la)if($b=null!==ia?""+ia:h(f),fc(la))for(vc=0;vc<la.length;vc++){if(""+la[vc]===$b){db.push(' selected\x3d""');break}}else""+la===$b&&db.push(' selected\x3d""');
else Sa&&db.push(' selected\x3d""');db.push("\x3e");Q(db,Ha,f);return f;case "textarea":db.push(a("textarea"));Ha=la=ra=null;for(f in $b)if(Oa.call($b,f)&&(ia=$b[f],null!=ia))switch(f){case "children":Ha=ia;break;case "value":ra=ia;break;case "defaultValue":la=ia;break;case "dangerouslySetInnerHTML":throw Error(y(91));default:H(db,vc,f,ia)}null===ra&&null!==la&&(ra=la);db.push("\x3e");if(null!=Ha){if(null!=ra)throw Error(y(92));if(fc(Ha)&&1<Ha.length)throw Error(y(93));ra=""+Ha}"string"===typeof ra&&
"\n"===ra[0]&&db.push("\n");null!==ra&&db.push(b(""+ra));return null;case "input":db.push(a("input"));ia=Ha=f=ra=null;for(la in $b)if(Oa.call($b,la)&&(Sa=$b[la],null!=Sa))switch(la){case "children":case "dangerouslySetInnerHTML":throw Error(y(399,"input"));case "defaultChecked":ia=Sa;break;case "defaultValue":f=Sa;break;case "checked":Ha=Sa;break;case "value":ra=Sa;break;default:H(db,vc,la,Sa)}null!==Ha?H(db,vc,"checked",Ha):null!==ia&&H(db,vc,"checked",ia);null!==ra?H(db,vc,"value",ra):null!==f&&
H(db,vc,"value",f);db.push("/\x3e");return null;case "menuitem":db.push(a("menuitem"));for(var oa in $b)if(Oa.call($b,oa)&&(ra=$b[oa],null!=ra))switch(oa){case "children":case "dangerouslySetInnerHTML":throw Error(y(400));default:H(db,vc,oa,ra)}db.push("\x3e");return null;case "title":db.push(a("title"));ra=null;for(ka in $b)if(Oa.call($b,ka)&&(la=$b[ka],null!=la))switch(ka){case "children":ra=la;break;case "dangerouslySetInnerHTML":throw Error(y(434));default:H(db,vc,ka,la)}db.push("\x3e");return ra;
case "listing":case "pre":db.push(a(tb));la=ra=null;for(ia in $b)if(Oa.call($b,ia)&&(f=$b[ia],null!=f))switch(ia){case "children":ra=f;break;case "dangerouslySetInnerHTML":la=f;break;default:H(db,vc,ia,f)}db.push("\x3e");if(null!=la){if(null!=ra)throw Error(y(60));if("object"!==typeof la||!("__html"in la))throw Error(y(61));$b=la.__html;null!==$b&&void 0!==$b&&("string"===typeof $b&&0<$b.length&&"\n"===$b[0]?db.push("\n",$b):db.push(""+$b))}"string"===typeof ra&&"\n"===ra[0]&&db.push("\n");return ra;
case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":db.push(a(tb));for(var za in $b)if(Oa.call($b,za)&&(ra=$b[za],null!=ra))switch(za){case "children":case "dangerouslySetInnerHTML":throw Error(y(399,tb));default:H(db,vc,za,ra)}db.push("/\x3e");return null;case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return k(db,
$b,tb,vc);case "html":return 0===ub.insertionMode&&db.push("\x3c!DOCTYPE html\x3e"),k(db,$b,tb,vc);default:if(-1===tb.indexOf("-")&&"string"!==typeof $b.is)return k(db,$b,tb,vc);db.push(a(tb));la=ra=null;for(Sa in $b)if(Oa.call($b,Sa)&&(f=$b[Sa],null!=f))switch(Sa){case "children":ra=f;break;case "dangerouslySetInnerHTML":la=f;break;case "style":F(db,vc,f);break;case "suppressContentEditableWarning":case "suppressHydrationWarning":break;default:W(Sa)&&"function"!==typeof f&&"symbol"!==typeof f&&db.push(" ",
Sa,'\x3d"',b(f),'"')}db.push("\x3e");Q(db,la,ra);return ra}}function m(db,tb,$b){db.push('\x3c!--$?--\x3e\x3ctemplate id\x3d"');if(null===$b)throw Error(y(395));db.push($b);return db.push('"\x3e\x3c/template\x3e')}function w(db,tb,$b,vc){switch($b.insertionMode){case 0:case 1:return db.push('\x3cdiv hidden id\x3d"'),db.push(tb.segmentPrefix),tb=vc.toString(16),db.push(tb),db.push('"\x3e');case 2:return db.push('\x3csvg aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),db.push(tb.segmentPrefix),
tb=vc.toString(16),db.push(tb),db.push('"\x3e');case 3:return db.push('\x3cmath aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),db.push(tb.segmentPrefix),tb=vc.toString(16),db.push(tb),db.push('"\x3e');case 4:return db.push('\x3ctable hidden id\x3d"'),db.push(tb.segmentPrefix),tb=vc.toString(16),db.push(tb),db.push('"\x3e');case 5:return db.push('\x3ctable hidden\x3e\x3ctbody id\x3d"'),db.push(tb.segmentPrefix),tb=vc.toString(16),db.push(tb),db.push('"\x3e');case 6:return db.push('\x3ctable hidden\x3e\x3ctr id\x3d"'),
db.push(tb.segmentPrefix),tb=vc.toString(16),db.push(tb),db.push('"\x3e');case 7:return db.push('\x3ctable hidden\x3e\x3ccolgroup id\x3d"'),db.push(tb.segmentPrefix),tb=vc.toString(16),db.push(tb),db.push('"\x3e');default:throw Error(y(397));}}function I(db,tb){switch(tb.insertionMode){case 0:case 1:return db.push("\x3c/div\x3e");case 2:return db.push("\x3c/svg\x3e");case 3:return db.push("\x3c/math\x3e");case 4:return db.push("\x3c/table\x3e");case 5:return db.push("\x3c/tbody\x3e\x3c/table\x3e");
case 6:return db.push("\x3c/tr\x3e\x3c/table\x3e");case 7:return db.push("\x3c/colgroup\x3e\x3c/table\x3e");default:throw Error(y(397));}}function z(db){return JSON.stringify(db).replace(vb,function(tb){switch(tb){case "\x3c":return"\\u003c";case " ":return"\\u2028";case " ":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React");
}})}function r(db,tb){tb=void 0===tb?"":tb;return{bootstrapChunks:[],startInlineScript:"\x3cscript\x3e",placeholderPrefix:tb+"P:",segmentPrefix:tb+"S:",boundaryPrefix:tb+"B:",idPrefix:tb,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:db}}function g(db,tb,$b,vc){if($b.generateStaticMarkup)return db.push(b(tb)),!1;""===tb?db=vc:(vc&&db.push("\x3c!-- --\x3e"),db.push(b(tb)),db=!0);return db}function d(db){if(null==db)return null;
if("function"===typeof db)return db.displayName||db.name||null;if("string"===typeof db)return db;switch(db){case Gb:return"Fragment";case cb:return"Portal";case ec:return"Profiler";case Kb:return"StrictMode";case Pc:return"Suspense";case Qc:return"SuspenseList"}if("object"===typeof db)switch(db.$$typeof){case Hc:return(db.displayName||"Context")+".Consumer";case Ic:return(db._context.displayName||"Context")+".Provider";case ic:var tb=db.render;(db=db.displayName)||(db=tb.displayName||tb.name||"",
db=""!==db?"ForwardRef("+db+")":"ForwardRef");return db;case md:return tb=db.displayName||null,null!==tb?tb:d(db.type)||"Memo";case od:tb=db._payload;db=db._init;try{return d(db(tb))}catch($b){}}return null}function E(db,tb){db=db.contextTypes;if(!db)return Ob;var $b={},vc;for(vc in db)$b[vc]=tb[vc];return $b}function B(db,tb){if(db!==tb){db.context._currentValue2=db.parentValue;db=db.parent;var $b=tb.parent;if(null===db){if(null!==$b)throw Error(y(401));}else{if(null===$b)throw Error(y(401));B(db,
$b)}tb.context._currentValue2=tb.value}}function K(db){db.context._currentValue2=db.parentValue;db=db.parent;null!==db&&K(db)}function V(db){var tb=db.parent;null!==tb&&V(tb);db.context._currentValue2=db.value}function A(db,tb){db.context._currentValue2=db.parentValue;db=db.parent;if(null===db)throw Error(y(402));db.depth===tb.depth?B(db,tb):A(db,tb)}function O(db,tb){var $b=tb.parent;if(null===$b)throw Error(y(402));db.depth===$b.depth?B(db,$b):O(db,$b);tb.context._currentValue2=tb.value}function M(db){var tb=
kc;tb!==db&&(null===tb?V(db):null===db?K(tb):tb.depth===db.depth?B(tb,db):tb.depth>db.depth?A(tb,db):O(tb,db),kc=db)}function C(db,tb,$b,vc){var ub=void 0!==db.state?db.state:null;db.updater=pc;db.props=$b;db.state=ub;var ra={queue:[],replace:!1};db._reactInternals=ra;var la=tb.contextType;db.context="object"===typeof la&&null!==la?la._currentValue2:vc;la=tb.getDerivedStateFromProps;"function"===typeof la&&(la=la($b,ub),ub=null===la||void 0===la?ub:Bb({},ub,la),db.state=ub);if("function"!==typeof tb.getDerivedStateFromProps&&
"function"!==typeof db.getSnapshotBeforeUpdate&&("function"===typeof db.UNSAFE_componentWillMount||"function"===typeof db.componentWillMount))if(tb=db.state,"function"===typeof db.componentWillMount&&db.componentWillMount(),"function"===typeof db.UNSAFE_componentWillMount&&db.UNSAFE_componentWillMount(),tb!==db.state&&pc.enqueueReplaceState(db,db.state,null),null!==ra.queue&&0<ra.queue.length)if(tb=ra.queue,la=ra.replace,ra.queue=null,ra.replace=!1,la&&1===tb.length)db.state=tb[0];else{ra=la?tb[0]:
db.state;ub=!0;for(la=la?1:0;la<tb.length;la++){var f=tb[la];f="function"===typeof f?f.call(db,ra,$b,vc):f;null!=f&&(ub?(ub=!1,ra=Bb({},ra,f)):Bb(ra,f))}db.state=ra}else ra.queue=null}function P(db,tb,$b){var vc=db.id;db=db.overflow;var ub=32-Gc(vc)-1;vc&=~(1<<ub);$b+=1;var ra=32-Gc(tb)+ub;if(30<ra){var la=ub-ub%5;ra=(vc&(1<<la)-1).toString(32);vc>>=la;ub-=la;return{id:1<<32-Gc(tb)+ub|$b<<ub|vc,overflow:ra+db}}return{id:1<<ra|$b<<ub|vc,overflow:db}}function p(db){db>>>=0;return 0===db?32:31-(kb(db)/
Cb|0)|0}function J(db,tb){return db===tb&&(0!==db||1/db===1/tb)||db!==db&&tb!==tb}function R(){if(null===qb)throw Error(y(321));return qb}function T(){if(0<ab)throw Error(y(312));return{memoizedState:null,queue:null,next:null}}function S(){null===Fb?null===jb?(sc=!1,jb=Fb=T()):(sc=!0,Fb=jb):null===Fb.next?(sc=!1,Fb=Fb.next=T()):(sc=!0,Fb=Fb.next);return Fb}function ja(){Db=qb=null;Wb=!1;jb=null;ab=0;Fb=Ya=null}function aa(db,tb){return"function"===typeof tb?tb(db):tb}function ea(db,tb,$b){qb=R();
Fb=S();if(sc){var vc=Fb.queue;tb=vc.dispatch;if(null!==Ya&&($b=Ya.get(vc),void 0!==$b)){Ya.delete(vc);vc=Fb.memoizedState;do vc=db(vc,$b.action),$b=$b.next;while(null!==$b);Fb.memoizedState=vc;return[vc,tb]}return[Fb.memoizedState,tb]}db=db===aa?"function"===typeof tb?tb():tb:void 0!==$b?$b(tb):tb;Fb.memoizedState=db;db=Fb.queue={last:null,dispatch:null};db=db.dispatch=Y.bind(null,qb,db);return[Fb.memoizedState,db]}function ca(db,tb){qb=R();Fb=S();tb=void 0===tb?null:tb;if(null!==Fb){var $b=Fb.memoizedState;
if(null!==$b&&null!==tb){var vc=$b[1];a:if(null===vc)vc=!1;else{for(var ub=0;ub<vc.length&&ub<tb.length;ub++)if(!Nc(tb[ub],vc[ub])){vc=!1;break a}vc=!0}if(vc)return $b[0]}}db=db();Fb.memoizedState=[db,tb];return db}function Y(db,tb,$b){if(25<=ab)throw Error(y(301));if(db===qb)if(Wb=!0,db={action:$b,next:null},null===Ya&&(Ya=new Map),$b=Ya.get(tb),void 0===$b)Ya.set(tb,db);else{for(tb=$b;null!==tb.next;)tb=tb.next;tb.next=db}}function ha(){throw Error(y(394));}function da(){}function fa(db){console.error(db);
return null}function sa(){}function va(db,tb,$b,vc,ub,ra,la,f,ia){var Sa=[],Ha=new Set;tb={destination:null,responseState:tb,progressiveChunkSize:void 0===vc?12800:vc,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Ha,pingedTasks:Sa,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===ub?fa:ub,onAllReady:void 0===ra?sa:ra,onShellReady:void 0===la?sa:la,onShellError:void 0===f?sa:f,onFatalError:void 0===
ia?sa:ia};$b=xa(tb,0,null,$b,!1,!1);$b.parentFlushed=!0;db=qa(tb,db,null,$b,Ha,Ob,null,lc);Sa.push(db);return tb}function qa(db,tb,$b,vc,ub,ra,la,f){db.allPendingTasks++;null===$b?db.pendingRootTasks++:$b.pendingTasks++;var ia={node:tb,ping:function(){var Sa=db.pingedTasks;Sa.push(ia);1===Sa.length&&$a(db)},blockedBoundary:$b,blockedSegment:vc,abortSet:ub,legacyContext:ra,context:la,treeContext:f};ub.add(ia);return ia}function xa(db,tb,$b,vc,ub,ra){return{status:0,id:-1,index:tb,parentFlushed:!1,
chunks:[],children:[],formatContext:vc,boundary:$b,lastPushedText:ub,textEmbedded:ra}}function Ja(db,tb){db=db.onError(tb);if(null!=db&&"string"!==typeof db)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof db+'" instead');return db}function Ua(db,tb){var $b=db.onShellError;$b(tb);$b=db.onFatalError;$b(tb);null!==db.destination?(db.status=
2,db.destination.destroy(tb)):(db.status=1,db.fatalError=tb)}function ib(db,tb,$b,vc,ub){qb={};Db=tb;mc=0;for(db=$b(vc,ub);Wb;)Wb=!1,mc=0,ab+=1,Fb=null,db=$b(vc,ub);ja();return db}function Ea(db,tb,$b,vc){var ub=$b.render(),ra=vc.childContextTypes;if(null!==ra&&void 0!==ra){var la=tb.legacyContext;if("function"!==typeof $b.getChildContext)vc=la;else{$b=$b.getChildContext();for(var f in $b)if(!(f in ra))throw Error(y(108,d(vc)||"Unknown",f));vc=Bb({},la,$b)}tb.legacyContext=vc;ma(db,tb,ub);tb.legacyContext=
la}else ma(db,tb,ub)}function Na(db,tb){if(db&&db.defaultProps){tb=Bb({},tb);db=db.defaultProps;for(var $b in db)void 0===tb[$b]&&(tb[$b]=db[$b])}return tb}function Aa(db,tb,$b,vc,ub){if("function"===typeof $b)if($b.prototype&&$b.prototype.isReactComponent){ub=E($b,tb.legacyContext);var ra=$b.contextType;ra=new $b(vc,"object"===typeof ra&&null!==ra?ra._currentValue2:ub);C(ra,$b,vc,ub);Ea(db,tb,ra,$b)}else{ra=E($b,tb.legacyContext);ub=ib(db,tb,$b,vc,ra);var la=0!==mc;if("object"===typeof ub&&null!==
ub&&"function"===typeof ub.render&&void 0===ub.$$typeof)C(ub,$b,vc,ra),Ea(db,tb,ub,$b);else if(la){vc=tb.treeContext;tb.treeContext=P(vc,1,0);try{ma(db,tb,ub)}finally{tb.treeContext=vc}}else ma(db,tb,ub)}else if("string"===typeof $b){ub=tb.blockedSegment;ra=l(ub.chunks,$b,vc,db.responseState,ub.formatContext);ub.lastPushedText=!1;la=ub.formatContext;ub.formatContext=D(la,$b,vc);Pa(db,tb,ra);ub.formatContext=la;switch($b){case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "input":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":break;
default:ub.chunks.push("\x3c/",$b,"\x3e")}ub.lastPushedText=!1}else{switch($b){case Bc:case rb:case Kb:case ec:case Gb:ma(db,tb,vc.children);return;case Qc:ma(db,tb,vc.children);return;case Wc:throw Error(y(343));case Pc:a:{$b=tb.blockedBoundary;ub=tb.blockedSegment;ra=vc.fallback;vc=vc.children;la=new Set;var f={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:la,errorDigest:null},ia=xa(db,ub.chunks.length,f,ub.formatContext,
!1,!1);ub.children.push(ia);ub.lastPushedText=!1;var Sa=xa(db,0,null,ub.formatContext,!1,!1);Sa.parentFlushed=!0;tb.blockedBoundary=f;tb.blockedSegment=Sa;try{if(Pa(db,tb,vc),db.responseState.generateStaticMarkup||Sa.lastPushedText&&Sa.textEmbedded&&Sa.chunks.push("\x3c!-- --\x3e"),Sa.status=1,Ma(f,Sa),0===f.pendingTasks)break a}catch(Ha){Sa.status=4,f.forceClientRender=!0,f.errorDigest=Ja(db,Ha)}finally{tb.blockedBoundary=$b,tb.blockedSegment=ub}tb=qa(db,ra,$b,ia,la,tb.legacyContext,tb.context,tb.treeContext);
db.pingedTasks.push(tb)}return}if("object"===typeof $b&&null!==$b)switch($b.$$typeof){case ic:vc=ib(db,tb,$b.render,vc,ub);if(0!==mc){$b=tb.treeContext;tb.treeContext=P($b,1,0);try{ma(db,tb,vc)}finally{tb.treeContext=$b}}else ma(db,tb,vc);return;case md:$b=$b.type;vc=Na($b,vc);Aa(db,tb,$b,vc,ub);return;case Ic:ub=vc.children;$b=$b._context;vc=vc.value;ra=$b._currentValue2;$b._currentValue2=vc;la=kc;kc=vc={parent:la,depth:null===la?0:la.depth+1,context:$b,parentValue:ra,value:vc};tb.context=vc;ma(db,
tb,ub);db=kc;if(null===db)throw Error(y(403));vc=db.parentValue;db.context._currentValue2=vc===fd?db.context._defaultValue:vc;db=kc=db.parent;tb.context=db;return;case Hc:vc=vc.children;vc=vc($b._currentValue2);ma(db,tb,vc);return;case od:ub=$b._init;$b=ub($b._payload);vc=Na($b,vc);Aa(db,tb,$b,vc,void 0);return}throw Error(y(130,null==$b?$b:typeof $b,""));}}function ma(db,tb,$b){tb.node=$b;if("object"===typeof $b&&null!==$b){switch($b.$$typeof){case Eb:Aa(db,tb,$b.type,$b.props,$b.ref);return;case cb:throw Error(y(257));
case od:var vc=$b._init;$b=vc($b._payload);ma(db,tb,$b);return}if(fc($b)){Ga(db,tb,$b);return}null===$b||"object"!==typeof $b?vc=null:(vc=Zc&&$b[Zc]||$b["@@iterator"],vc="function"===typeof vc?vc:null);if(vc&&=vc.call($b)){$b=vc.next();if(!$b.done){var ub=[];do ub.push($b.value),$b=vc.next();while(!$b.done);Ga(db,tb,ub)}return}db=Object.prototype.toString.call($b);throw Error(y(31,"[object Object]"===db?"object with keys {"+Object.keys($b).join(", ")+"}":db));}"string"===typeof $b?(vc=tb.blockedSegment,
vc.lastPushedText=g(tb.blockedSegment.chunks,$b,db.responseState,vc.lastPushedText)):"number"===typeof $b&&(vc=tb.blockedSegment,vc.lastPushedText=g(tb.blockedSegment.chunks,""+$b,db.responseState,vc.lastPushedText))}function Ga(db,tb,$b){for(var vc=$b.length,ub=0;ub<vc;ub++){var ra=tb.treeContext;tb.treeContext=P(ra,vc,ub);try{Pa(db,tb,$b[ub])}finally{tb.treeContext=ra}}}function Pa(db,tb,$b){var vc=tb.blockedSegment.formatContext,ub=tb.legacyContext,ra=tb.context;try{return ma(db,tb,$b)}catch(ia){if(ja(),
"object"===typeof ia&&null!==ia&&"function"===typeof ia.then){$b=ia;var la=tb.blockedSegment,f=xa(db,la.chunks.length,null,la.formatContext,la.lastPushedText,!0);la.children.push(f);la.lastPushedText=!1;db=qa(db,tb.node,tb.blockedBoundary,f,tb.abortSet,tb.legacyContext,tb.context,tb.treeContext).ping;$b.then(db,db);tb.blockedSegment.formatContext=vc;tb.legacyContext=ub;tb.context=ra;M(ra)}else throw tb.blockedSegment.formatContext=vc,tb.legacyContext=ub,tb.context=ra,M(ra),ia;}}function Ca(db){var tb=
db.blockedBoundary;db=db.blockedSegment;db.status=3;Wa(this,tb,db)}function ta(db,tb,$b){var vc=db.blockedBoundary;db.blockedSegment.status=3;null===vc?(tb.allPendingTasks--,2!==tb.status&&(tb.status=2,null!==tb.destination&&tb.destination.push(null))):(vc.pendingTasks--,vc.forceClientRender||(vc.forceClientRender=!0,db=void 0===$b?Error(y(432)):$b,vc.errorDigest=tb.onError(db),vc.parentFlushed&&tb.clientRenderedBoundaries.push(vc)),vc.fallbackAbortableTasks.forEach(function(ub){return ta(ub,tb,$b)}),
vc.fallbackAbortableTasks.clear(),tb.allPendingTasks--,0===tb.allPendingTasks&&(vc=tb.onAllReady,vc()))}function Ma(db,tb){if(0===tb.chunks.length&&1===tb.children.length&&null===tb.children[0].boundary){var $b=tb.children[0];$b.id=tb.id;$b.parentFlushed=!0;1===$b.status&&Ma(db,$b)}else db.completedSegments.push(tb)}function Wa(db,tb,$b){if(null===tb){if($b.parentFlushed){if(null!==db.completedRootSegment)throw Error(y(389));db.completedRootSegment=$b}db.pendingRootTasks--;0===db.pendingRootTasks&&
(db.onShellError=sa,tb=db.onShellReady,tb())}else tb.pendingTasks--,tb.forceClientRender||(0===tb.pendingTasks?($b.parentFlushed&&1===$b.status&&Ma(tb,$b),tb.parentFlushed&&db.completedBoundaries.push(tb),tb.fallbackAbortableTasks.forEach(Ca,db),tb.fallbackAbortableTasks.clear()):$b.parentFlushed&&1===$b.status&&(Ma(tb,$b),1===tb.completedSegments.length&&tb.parentFlushed&&db.partialBoundaries.push(tb)));db.allPendingTasks--;0===db.allPendingTasks&&(db=db.onAllReady,db())}function $a(db){if(2!==db.status){var tb=
kc,$b=zb.current;zb.current=Za;var vc=nb;nb=db.responseState;try{var ub=db.pingedTasks,ra;for(ra=0;ra<ub.length;ra++){var la=ub[ra],f=db,ia=la.blockedSegment;if(0===ia.status){M(la.context);try{ma(f,la,la.node),f.responseState.generateStaticMarkup||ia.lastPushedText&&ia.textEmbedded&&ia.chunks.push("\x3c!-- --\x3e"),la.abortSet.delete(la),ia.status=1,Wa(f,la.blockedBoundary,ia)}catch(bb){if(ja(),"object"===typeof bb&&null!==bb&&"function"===typeof bb.then){var Sa=la.ping;bb.then(Sa,Sa)}else{la.abortSet.delete(la);
ia.status=4;var Ha=la.blockedBoundary,ka=bb,oa=Ja(f,ka);null===Ha?Ua(f,ka):(Ha.pendingTasks--,Ha.forceClientRender||(Ha.forceClientRender=!0,Ha.errorDigest=oa,Ha.parentFlushed&&f.clientRenderedBoundaries.push(Ha)));f.allPendingTasks--;if(0===f.allPendingTasks){var za=f.onAllReady;za()}}}finally{}}}ub.splice(0,ra);null!==db.destination&&gb(db,db.destination)}catch(bb){Ja(db,bb),Ua(db,bb)}finally{nb=vc,zb.current=$b,$b===Za&&M(tb)}}}function Qa(db,tb,$b){$b.parentFlushed=!0;switch($b.status){case 0:var vc=
$b.id=db.nextSegmentId++;$b.lastPushedText=!1;$b.textEmbedded=!1;db=db.responseState;tb.push('\x3ctemplate id\x3d"');tb.push(db.placeholderPrefix);db=vc.toString(16);tb.push(db);return tb.push('"\x3e\x3c/template\x3e');case 1:$b.status=2;var ub=!0;vc=$b.chunks;var ra=0;$b=$b.children;for(var la=0;la<$b.length;la++){for(ub=$b[la];ra<ub.index;ra++)tb.push(vc[ra]);ub=fb(db,tb,ub)}for(;ra<vc.length-1;ra++)tb.push(vc[ra]);ra<vc.length&&(ub=tb.push(vc[ra]));return ub;default:throw Error(y(390));}}function fb(db,
tb,$b){var vc=$b.boundary;if(null===vc)return Qa(db,tb,$b);vc.parentFlushed=!0;if(vc.forceClientRender)return db.responseState.generateStaticMarkup||(vc=vc.errorDigest,tb.push("\x3c!--$!--\x3e"),tb.push("\x3ctemplate"),vc&&(tb.push(' data-dgst\x3d"'),vc=b(vc),tb.push(vc),tb.push('"')),tb.push("\x3e\x3c/template\x3e")),Qa(db,tb,$b),db=db.responseState.generateStaticMarkup?!0:tb.push("\x3c!--/$--\x3e"),db;if(0<vc.pendingTasks){vc.rootSegmentID=db.nextSegmentId++;0<vc.completedSegments.length&&db.partialBoundaries.push(vc);
var ub=db.responseState,ra=ub.nextSuspenseID++;ub=ub.boundaryPrefix+ra.toString(16);vc=vc.id=ub;m(tb,db.responseState,vc);Qa(db,tb,$b);return tb.push("\x3c!--/$--\x3e")}if(vc.byteSize>db.progressiveChunkSize)return vc.rootSegmentID=db.nextSegmentId++,db.completedBoundaries.push(vc),m(tb,db.responseState,vc.id),Qa(db,tb,$b),tb.push("\x3c!--/$--\x3e");db.responseState.generateStaticMarkup||tb.push("\x3c!--$--\x3e");$b=vc.completedSegments;if(1!==$b.length)throw Error(y(391));fb(db,tb,$b[0]);return db=
db.responseState.generateStaticMarkup?!0:tb.push("\x3c!--/$--\x3e")}function lb(db,tb,$b){w(tb,db.responseState,$b.formatContext,$b.id);fb(db,tb,$b);return I(tb,$b.formatContext)}function Qb(db,tb,$b){for(var vc=$b.completedSegments,ub=0;ub<vc.length;ub++)Nb(db,tb,$b,vc[ub]);vc.length=0;db=db.responseState;vc=$b.id;$b=$b.rootSegmentID;tb.push(db.startInlineScript);db.sentCompleteBoundaryFunction?tb.push('$RC("'):(db.sentCompleteBoundaryFunction=!0,tb.push('function $RC(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);b.parentNode.removeChild(b);if(a){a\x3da.previousSibling;var f\x3da.parentNode,c\x3da.nextSibling,e\x3d0;do{if(c\x26\x268\x3d\x3d\x3dc.nodeType){var d\x3dc.data;if("/$"\x3d\x3d\x3dd)if(0\x3d\x3d\x3de)break;else e--;else"$"!\x3d\x3dd\x26\x26"$?"!\x3d\x3dd\x26\x26"$!"!\x3d\x3dd||e++}d\x3dc.nextSibling;f.removeChild(c);c\x3dd}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data\x3d"$";a._reactRetry\x26\x26a._reactRetry()}};$RC("'));
if(null===vc)throw Error(y(395));$b=$b.toString(16);tb.push(vc);tb.push('","');tb.push(db.segmentPrefix);tb.push($b);return tb.push('")\x3c/script\x3e')}function Nb(db,tb,$b,vc){if(2===vc.status)return!0;var ub=vc.id;if(-1===ub){if(-1===(vc.id=$b.rootSegmentID))throw Error(y(392));return lb(db,tb,vc)}lb(db,tb,vc);db=db.responseState;tb.push(db.startInlineScript);db.sentCompleteSegmentFunction?tb.push('$RS("'):(db.sentCompleteSegmentFunction=!0,tb.push('function $RS(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'));
tb.push(db.segmentPrefix);ub=ub.toString(16);tb.push(ub);tb.push('","');tb.push(db.placeholderPrefix);tb.push(ub);return tb.push('")\x3c/script\x3e')}function gb(db,tb){try{var $b=db.completedRootSegment;if(null!==$b&&0===db.pendingRootTasks){fb(db,tb,$b);db.completedRootSegment=null;var vc=db.responseState.bootstrapChunks;for($b=0;$b<vc.length-1;$b++)tb.push(vc[$b]);$b<vc.length&&tb.push(vc[$b])}var ub=db.clientRenderedBoundaries,ra;for(ra=0;ra<ub.length;ra++){var la=ub[ra];vc=tb;var f=db.responseState,
ia=la.id,Sa=la.errorDigest,Ha=la.errorMessage,ka=la.errorComponentStack;vc.push(f.startInlineScript);f.sentClientRenderFunction?vc.push('$RX("'):(f.sentClientRenderFunction=!0,vc.push('function $RX(b,c,d,e){var a\x3ddocument.getElementById(b);a\x26\x26(b\x3da.previousSibling,b.data\x3d"$!",a\x3da.dataset,c\x26\x26(a.dgst\x3dc),d\x26\x26(a.msg\x3dd),e\x26\x26(a.stck\x3de),b._reactRetry\x26\x26b._reactRetry())};$RX("'));if(null===ia)throw Error(y(395));vc.push(ia);vc.push('"');if(Sa||Ha||ka){vc.push(",");
var oa=z(Sa||"");vc.push(oa)}if(Ha||ka){vc.push(",");var za=z(Ha||"");vc.push(za)}if(ka){vc.push(",");var bb=z(ka);vc.push(bb)}if(!vc.push(")\x3c/script\x3e")){db.destination=null;ra++;ub.splice(0,ra);return}}ub.splice(0,ra);var Mb=db.completedBoundaries;for(ra=0;ra<Mb.length;ra++)if(!Qb(db,tb,Mb[ra])){db.destination=null;ra++;Mb.splice(0,ra);return}Mb.splice(0,ra);var uc=db.partialBoundaries;for(ra=0;ra<uc.length;ra++){var dd=uc[ra];a:{ub=db;la=tb;var xd=dd.completedSegments;for(f=0;f<xd.length;f++)if(!Nb(ub,
la,dd,xd[f])){f++;xd.splice(0,f);var oe=!1;break a}xd.splice(0,f);oe=!0}if(!oe){db.destination=null;ra++;uc.splice(0,ra);return}}uc.splice(0,ra);var Ge=db.completedBoundaries;for(ra=0;ra<Ge.length;ra++)if(!Qb(db,tb,Ge[ra])){db.destination=null;ra++;Ge.splice(0,ra);return}Ge.splice(0,ra)}finally{0===db.allPendingTasks&&0===db.pingedTasks.length&&0===db.clientRenderedBoundaries.length&&0===db.completedBoundaries.length&&tb.push(null)}}function La(db,tb){try{var $b=db.abortableTasks;$b.forEach(function(vc){return ta(vc,
db,tb)});$b.clear();null!==db.destination&&gb(db,db.destination)}catch(vc){Ja(db,vc),Ua(db,vc)}}function eb(){}function Xa(db,tb,$b,vc){var ub=!1,ra=null,la="",f={push:function(Sa){null!==Sa&&(la+=Sa);return!0},destroy:function(Sa){ub=!0;ra=Sa}},ia=!1;db=va(db,r($b,tb?tb.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},Infinity,eb,void 0,function(){ia=!0},void 0,void 0);$a(db);La(db,vc);if(1===db.status)db.status=2,f.destroy(db.fatalError);else if(2!==db.status&&null===db.destination){db.destination=
f;try{gb(db,f)}catch(Sa){Ja(db,Sa),Ua(db,Sa)}}if(ub)throw ra;if(!ia)throw Error(y(426));return la}var pb=X(67),Oa=Object.prototype.hasOwnProperty,Mc=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sc=
{},Rc={},zc={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(db){zc[db]=new x(db,0,!1,db,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(db){var tb=db[0];zc[tb]=new x(tb,1,!1,db[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(db){zc[db]=new x(db,2,!1,db.toLowerCase(),
null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(db){zc[db]=new x(db,2,!1,db,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(db){zc[db]=new x(db,3,!1,db.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(db){zc[db]=
new x(db,3,!0,db,null,!1,!1)});["capture","download"].forEach(function(db){zc[db]=new x(db,4,!1,db,null,!1,!1)});["cols","rows","size","span"].forEach(function(db){zc[db]=new x(db,6,!1,db,null,!1,!1)});["rowSpan","start"].forEach(function(db){zc[db]=new x(db,5,!1,db.toLowerCase(),null,!1,!1)});var cd=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(db){var tb=
db.replace(cd,t);zc[tb]=new x(tb,1,!1,db,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(db){var tb=db.replace(cd,t);zc[tb]=new x(tb,1,!1,db,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(db){var tb=db.replace(cd,t);zc[tb]=new x(tb,1,!1,db,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(db){zc[db]=new x(db,1,!1,db.toLowerCase(),null,!1,!1)});
zc.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(db){zc[db]=new x(db,1,!1,db.toLowerCase(),null,!0,!0)});var bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,
gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Va=["Webkit","ms","Moz","O"];Object.keys(bd).forEach(function(db){Va.forEach(function(tb){tb=tb+db.charAt(0).toUpperCase()+db.substring(1);bd[tb]=bd[db]})});var sb=/["'&<>]/,
bc=/([A-Z])/g,Rb=/^ms-/,fc=Array.isArray,Zb=new Map,Ub=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,mb=new Map,vb=/[<\u2028\u2029]/g,Bb=Object.assign,Eb=Symbol.for("react.element"),cb=Symbol.for("react.portal"),Gb=Symbol.for("react.fragment"),Kb=Symbol.for("react.strict_mode"),ec=Symbol.for("react.profiler"),Ic=Symbol.for("react.provider"),Hc=Symbol.for("react.context"),ic=Symbol.for("react.forward_ref"),Pc=Symbol.for("react.suspense"),Qc=Symbol.for("react.suspense_list"),md=Symbol.for("react.memo"),od=Symbol.for("react.lazy"),
Wc=Symbol.for("react.scope"),rb=Symbol.for("react.debug_trace_mode"),Bc=Symbol.for("react.legacy_hidden"),fd=Symbol.for("react.default_value"),Zc=Symbol.iterator,Ob={},kc=null,pc={isMounted:function(){return!1},enqueueSetState:function(db,tb){db=db._reactInternals;null!==db.queue&&db.queue.push(tb)},enqueueReplaceState:function(db,tb){db=db._reactInternals;db.replace=!0;db.queue=[tb]},enqueueForceUpdate:function(){}},lc={id:1,overflow:""},Gc=Math.clz32?Math.clz32:p,kb=Math.log,Cb=Math.LN2,Nc="function"===
typeof Object.is?Object.is:J,qb=null,Db=null,jb=null,Fb=null,sc=!1,Wb=!1,mc=0,Ya=null,ab=0,Za={readContext:function(db){return db._currentValue2},useContext:function(db){R();return db._currentValue2},useMemo:ca,useReducer:ea,useRef:function(db){qb=R();Fb=S();var tb=Fb.memoizedState;return null===tb?(db={current:db},Fb.memoizedState=db):tb},useState:function(db){return ea(aa,db)},useInsertionEffect:da,useLayoutEffect:function(){},useCallback:function(db,tb){return ca(function(){return db},tb)},useImperativeHandle:da,
useEffect:da,useDebugValue:da,useDeferredValue:function(db){R();return db},useTransition:function(){R();return[!1,ha]},useId:function(){var db=Db.treeContext,tb=db.overflow;db=db.id;db=(db&~(1<<32-Gc(db)-1)).toString(32)+tb;var $b=nb;if(null===$b)throw Error(y(404));tb=mc++;db=":"+$b.idPrefix+"R"+db;0<tb&&(db+="H"+tb.toString(32));return db+":"},useMutableSource:function(db,tb){R();return tb(db._source)},useSyncExternalStore:function(db,tb,$b){if(void 0===$b)throw Error(y(407));return $b()}},nb=null,
zb=pb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;L.renderToNodeStream=function(){throw Error(y(207));};L.renderToStaticMarkup=function(db,tb){return Xa(db,tb,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};L.renderToStaticNodeStream=function(){throw Error(y(208));};L.renderToString=function(db,
tb){return Xa(db,tb,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};L.version="18.3.1"};
shadow$provide[669]=function(ua,X,Ta,L){function y(Hb){for(var oc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Hb,Vc=1;Vc<arguments.length;Vc++)oc+="\x26args[]\x3d"+encodeURIComponent(arguments[Vc]);return"Minified React error #"+Hb+"; visit "+oc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function W(Hb,oc){if(0!==oc.length)if(512<oc.length)0<Va&&(Hb.enqueue(new Uint8Array(bd.buffer,0,Va)),bd=new Uint8Array(512),Va=
0),Hb.enqueue(oc);else{var Vc=bd.length-Va;Vc<oc.length&&(0===Vc?Hb.enqueue(bd):(bd.set(oc.subarray(0,Vc),Va),Hb.enqueue(bd),oc=oc.subarray(Vc)),bd=new Uint8Array(512),Va=0);bd.set(oc,Va);Va+=oc.length}}function x(Hb,oc){W(Hb,oc);return!0}function t(Hb){bd&&0<Va&&(Hb.enqueue(new Uint8Array(bd.buffer,0,Va)),bd=null,Va=0)}function b(Hb){return sb.encode(Hb)}function q(Hb){return sb.encode(Hb)}function D(Hb,oc){"function"===typeof Hb.error?Hb.error(oc):Hb.close()}function F(Hb){if(bc.call(Zb,Hb))return!0;
if(bc.call(fc,Hb))return!1;if(Rb.test(Hb))return Zb[Hb]=!0;fc[Hb]=!0;return!1}function H(Hb,oc,Vc,kd,ze,de,Ib){this.acceptsBooleans=2===oc||3===oc||4===oc;this.attributeName=kd;this.attributeNamespace=ze;this.mustUseProperty=Vc;this.propertyName=Hb;this.type=oc;this.sanitizeURL=de;this.removeEmptyString=Ib}function Q(Hb){return Hb[1].toUpperCase()}function h(Hb){if("boolean"===typeof Hb||"number"===typeof Hb)return""+Hb;Hb=""+Hb;var oc=Eb.exec(Hb);if(oc){var Vc="",kd,ze=0;for(kd=oc.index;kd<Hb.length;kd++){switch(Hb.charCodeAt(kd)){case 34:oc=
"\x26quot;";break;case 38:oc="\x26amp;";break;case 39:oc="\x26#x27;";break;case 60:oc="\x26lt;";break;case 62:oc="\x26gt;";break;default:continue}ze!==kd&&(Vc+=Hb.substring(ze,kd));ze=kd+1;Vc+=oc}Hb=ze!==kd?Vc+Hb.substring(ze,kd):Vc}return Hb}function k(Hb,oc,Vc,kd){return""+oc+("s"===Vc?"\\u0073":"\\u0053")+kd}function a(Hb,oc,Vc,kd,ze){Hb=void 0===Hb?"":Hb;oc=void 0===oc?ec:q('\x3cscript nonce\x3d"'+h(oc)+'"\x3e');var de=[];void 0!==Vc&&de.push(oc,b((""+Vc).replace(Qc,k)),Ic);if(void 0!==kd)for(Vc=
0;Vc<kd.length;Vc++)de.push(Hc,b(h(kd[Vc])),Pc);if(void 0!==ze)for(kd=0;kd<ze.length;kd++)de.push(ic,b(h(ze[kd])),Pc);return{bootstrapChunks:de,startInlineScript:oc,placeholderPrefix:q(Hb+"P:"),segmentPrefix:q(Hb+"S:"),boundaryPrefix:Hb+"B:",idPrefix:Hb,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function l(Hb,oc){return{insertionMode:Hb,selectedValue:oc}}function m(Hb){return l("http://www.w3.org/2000/svg"===Hb?2:"http://www.w3.org/1998/Math/MathML"===
Hb?3:0,null)}function w(Hb,oc,Vc){switch(oc){case "select":return l(1,null!=Vc.value?Vc.value:Vc.defaultValue);case "svg":return l(2,null);case "math":return l(3,null);case "foreignObject":return l(1,null);case "table":return l(4,null);case "thead":case "tbody":case "tfoot":return l(5,null);case "colgroup":return l(7,null);case "tr":return l(6,null)}return 4<=Hb.insertionMode||0===Hb.insertionMode?l(1,null):Hb}function I(Hb,oc,Vc,kd){if(""===oc)return kd;kd&&Hb.push(md);Hb.push(b(h(oc)));return!0}
function z(Hb,oc,Vc){if("object"!==typeof Vc)throw Error(y(62));oc=!0;for(var kd in Vc)if(bc.call(Vc,kd)){var ze=Vc[kd];if(null!=ze&&"boolean"!==typeof ze&&""!==ze){if(0===kd.indexOf("--")){var de=b(h(kd));ze=b(h((""+ze).trim()))}else{de=kd;var Ib=od.get(de);void 0!==Ib?de=Ib:(Ib=q(h(de.replace(cb,"-$1").toLowerCase().replace(Gb,"-ms-"))),od.set(de,Ib),de=Ib);ze="number"===typeof ze?0===ze||bc.call(vb,kd)?b(""+ze):b(ze+"px"):b(h((""+ze).trim()))}oc?(oc=!1,Hb.push(Wc,de,rb,ze)):Hb.push(Bc,de,rb,ze)}}oc||
Hb.push(Ob)}function r(Hb,oc,Vc,kd){switch(Vc){case "style":z(Hb,oc,kd);return;case "defaultValue":case "defaultChecked":case "innerHTML":case "suppressContentEditableWarning":case "suppressHydrationWarning":return}if(!(2<Vc.length)||"o"!==Vc[0]&&"O"!==Vc[0]||"n"!==Vc[1]&&"N"!==Vc[1])if(oc=Ub.hasOwnProperty(Vc)?Ub[Vc]:null,null!==oc){switch(typeof kd){case "function":case "symbol":return;case "boolean":if(!oc.acceptsBooleans)return}Vc=b(oc.attributeName);switch(oc.type){case 3:kd&&Hb.push(fd,Vc,kc);
break;case 4:!0===kd?Hb.push(fd,Vc,kc):!1!==kd&&Hb.push(fd,Vc,Zc,b(h(kd)),Ob);break;case 5:isNaN(kd)||Hb.push(fd,Vc,Zc,b(h(kd)),Ob);break;case 6:!isNaN(kd)&&1<=kd&&Hb.push(fd,Vc,Zc,b(h(kd)),Ob);break;default:oc.sanitizeURL&&(kd=""+kd),Hb.push(fd,Vc,Zc,b(h(kd)),Ob)}}else if(F(Vc)){switch(typeof kd){case "function":case "symbol":return;case "boolean":if(oc=Vc.toLowerCase().slice(0,5),"data-"!==oc&&"aria-"!==oc)return}Hb.push(fd,b(Vc),Zc,b(h(kd)),Ob)}}function g(Hb,oc,Vc){if(null!=oc){if(null!=Vc)throw Error(y(60));
if("object"!==typeof oc||!("__html"in oc))throw Error(y(61));oc=oc.__html;null!==oc&&void 0!==oc&&Hb.push(b(""+oc))}}function d(Hb){var oc="";cd.Children.forEach(Hb,function(Vc){null!=Vc&&(oc+=Vc)});return oc}function E(Hb,oc,Vc,kd){Hb.push(B(Vc));var ze=Vc=null,de;for(de in oc)if(bc.call(oc,de)){var Ib=oc[de];if(null!=Ib)switch(de){case "children":Vc=Ib;break;case "dangerouslySetInnerHTML":ze=Ib;break;default:r(Hb,kd,de,Ib)}}Hb.push(pc);g(Hb,ze,Vc);return"string"===typeof Vc?(Hb.push(b(h(Vc))),null):
Vc}function B(Hb){var oc=Nc.get(Hb);if(void 0===oc){if(!Cb.test(Hb))throw Error(y(65,Hb));oc=q("\x3c"+Hb);Nc.set(Hb,oc)}return oc}function K(Hb,oc,Vc,kd,ze){switch(oc){case "select":Hb.push(B("select"));var de=null,Ib=null;for(Ad in Vc)if(bc.call(Vc,Ad)){var ac=Vc[Ad];if(null!=ac)switch(Ad){case "children":de=ac;break;case "dangerouslySetInnerHTML":Ib=ac;break;case "defaultValue":case "value":break;default:r(Hb,kd,Ad,ac)}}Hb.push(pc);g(Hb,Ib,de);return de;case "option":Ib=ze.selectedValue;Hb.push(B("option"));
var Xc=ac=null,rd=null,Ad=null;for(de in Vc)if(bc.call(Vc,de)){var Sd=Vc[de];if(null!=Sd)switch(de){case "children":ac=Sd;break;case "selected":rd=Sd;break;case "dangerouslySetInnerHTML":Ad=Sd;break;case "value":Xc=Sd;default:r(Hb,kd,de,Sd)}}if(null!=Ib)if(Vc=null!==Xc?""+Xc:d(ac),Kb(Ib))for(kd=0;kd<Ib.length;kd++){if(""+Ib[kd]===Vc){Hb.push(Gc);break}}else""+Ib===Vc&&Hb.push(Gc);else rd&&Hb.push(Gc);Hb.push(pc);g(Hb,Ad,ac);return ac;case "textarea":Hb.push(B("textarea"));Ad=Ib=de=null;for(ac in Vc)if(bc.call(Vc,
ac)&&(Xc=Vc[ac],null!=Xc))switch(ac){case "children":Ad=Xc;break;case "value":de=Xc;break;case "defaultValue":Ib=Xc;break;case "dangerouslySetInnerHTML":throw Error(y(91));default:r(Hb,kd,ac,Xc)}null===de&&null!==Ib&&(de=Ib);Hb.push(pc);if(null!=Ad){if(null!=de)throw Error(y(92));if(Kb(Ad)&&1<Ad.length)throw Error(y(93));de=""+Ad}"string"===typeof de&&"\n"===de[0]&&Hb.push(kb);null!==de&&Hb.push(b(h(""+de)));return null;case "input":Hb.push(B("input"));Xc=Ad=ac=de=null;for(Ib in Vc)if(bc.call(Vc,
Ib)&&(rd=Vc[Ib],null!=rd))switch(Ib){case "children":case "dangerouslySetInnerHTML":throw Error(y(399,"input"));case "defaultChecked":Xc=rd;break;case "defaultValue":ac=rd;break;case "checked":Ad=rd;break;case "value":de=rd;break;default:r(Hb,kd,Ib,rd)}null!==Ad?r(Hb,kd,"checked",Ad):null!==Xc&&r(Hb,kd,"checked",Xc);null!==de?r(Hb,kd,"value",de):null!==ac&&r(Hb,kd,"value",ac);Hb.push(lc);return null;case "menuitem":Hb.push(B("menuitem"));for(var je in Vc)if(bc.call(Vc,je)&&(de=Vc[je],null!=de))switch(je){case "children":case "dangerouslySetInnerHTML":throw Error(y(400));
default:r(Hb,kd,je,de)}Hb.push(pc);return null;case "title":Hb.push(B("title"));de=null;for(Sd in Vc)if(bc.call(Vc,Sd)&&(Ib=Vc[Sd],null!=Ib))switch(Sd){case "children":de=Ib;break;case "dangerouslySetInnerHTML":throw Error(y(434));default:r(Hb,kd,Sd,Ib)}Hb.push(pc);return de;case "listing":case "pre":Hb.push(B(oc));Ib=de=null;for(Xc in Vc)if(bc.call(Vc,Xc)&&(ac=Vc[Xc],null!=ac))switch(Xc){case "children":de=ac;break;case "dangerouslySetInnerHTML":Ib=ac;break;default:r(Hb,kd,Xc,ac)}Hb.push(pc);if(null!=
Ib){if(null!=de)throw Error(y(60));if("object"!==typeof Ib||!("__html"in Ib))throw Error(y(61));Vc=Ib.__html;null!==Vc&&void 0!==Vc&&("string"===typeof Vc&&0<Vc.length&&"\n"===Vc[0]?Hb.push(kb,b(Vc)):Hb.push(b(""+Vc)))}"string"===typeof de&&"\n"===de[0]&&Hb.push(kb);return de;case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":Hb.push(B(oc));for(var ge in Vc)if(bc.call(Vc,ge)&&(de=Vc[ge],
null!=de))switch(ge){case "children":case "dangerouslySetInnerHTML":throw Error(y(399,oc));default:r(Hb,kd,ge,de)}Hb.push(lc);return null;case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return E(Hb,Vc,oc,kd);case "html":return 0===ze.insertionMode&&Hb.push(qb),E(Hb,Vc,oc,kd);default:if(-1===oc.indexOf("-")&&"string"!==typeof Vc.is)return E(Hb,Vc,oc,kd);Hb.push(B(oc));Ib=de=null;
for(rd in Vc)if(bc.call(Vc,rd)&&(ac=Vc[rd],null!=ac))switch(rd){case "children":de=ac;break;case "dangerouslySetInnerHTML":Ib=ac;break;case "style":z(Hb,kd,ac);break;case "suppressContentEditableWarning":case "suppressHydrationWarning":break;default:F(rd)&&"function"!==typeof ac&&"symbol"!==typeof ac&&Hb.push(fd,b(rd),Zc,b(h(ac)),Ob)}Hb.push(pc);g(Hb,Ib,de);return de}}function V(Hb,oc,Vc){W(Hb,mc);if(null===Vc)throw Error(y(395));W(Hb,Vc);return x(Hb,Ya)}function A(Hb,oc,Vc,kd){switch(Vc.insertionMode){case 0:case 1:return W(Hb,
$b),W(Hb,oc.segmentPrefix),W(Hb,b(kd.toString(16))),x(Hb,vc);case 2:return W(Hb,ra),W(Hb,oc.segmentPrefix),W(Hb,b(kd.toString(16))),x(Hb,la);case 3:return W(Hb,ia),W(Hb,oc.segmentPrefix),W(Hb,b(kd.toString(16))),x(Hb,Sa);case 4:return W(Hb,ka),W(Hb,oc.segmentPrefix),W(Hb,b(kd.toString(16))),x(Hb,oa);case 5:return W(Hb,bb),W(Hb,oc.segmentPrefix),W(Hb,b(kd.toString(16))),x(Hb,Mb);case 6:return W(Hb,dd),W(Hb,oc.segmentPrefix),W(Hb,b(kd.toString(16))),x(Hb,xd);case 7:return W(Hb,Ge),W(Hb,oc.segmentPrefix),
W(Hb,b(kd.toString(16))),x(Hb,Oe);default:throw Error(y(397));}}function O(Hb,oc){switch(oc.insertionMode){case 0:case 1:return x(Hb,ub);case 2:return x(Hb,f);case 3:return x(Hb,Ha);case 4:return x(Hb,za);case 5:return x(Hb,uc);case 6:return x(Hb,oe);case 7:return x(Hb,uf);default:throw Error(y(397));}}function M(Hb){return JSON.stringify(Hb).replace(Ui,function(oc){switch(oc){case "\x3c":return"\\u003c";case " ":return"\\u2028";case " ":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React");
}})}function C(Hb){if(null==Hb)return null;if("function"===typeof Hb)return Hb.displayName||Hb.name||null;if("string"===typeof Hb)return Hb;switch(Hb){case Xf:return"Fragment";case Pe:return"Portal";case mg:return"Profiler";case pg:return"StrictMode";case Kc:return"Suspense";case Dc:return"SuspenseList"}if("object"===typeof Hb)switch(Hb.$$typeof){case Vb:return(Hb.displayName||"Context")+".Consumer";case sg:return(Hb._context.displayName||"Context")+".Provider";case hc:var oc=Hb.render;(Hb=Hb.displayName)||
(Hb=oc.displayName||oc.name||"",Hb=""!==Hb?"ForwardRef("+Hb+")":"ForwardRef");return Hb;case id:return oc=Hb.displayName||null,null!==oc?oc:C(Hb.type)||"Memo";case vd:oc=Hb._payload;Hb=Hb._init;try{return C(Hb(oc))}catch(Vc){}}return null}function P(Hb,oc){Hb=Hb.contextTypes;if(!Hb)return Ce;var Vc={},kd;for(kd in Hb)Vc[kd]=oc[kd];return Vc}function p(Hb,oc){if(Hb!==oc){Hb.context._currentValue=Hb.parentValue;Hb=Hb.parent;var Vc=oc.parent;if(null===Hb){if(null!==Vc)throw Error(y(401));}else{if(null===
Vc)throw Error(y(401));p(Hb,Vc)}oc.context._currentValue=oc.value}}function J(Hb){Hb.context._currentValue=Hb.parentValue;Hb=Hb.parent;null!==Hb&&J(Hb)}function R(Hb){var oc=Hb.parent;null!==oc&&R(oc);Hb.context._currentValue=Hb.value}function T(Hb,oc){Hb.context._currentValue=Hb.parentValue;Hb=Hb.parent;if(null===Hb)throw Error(y(402));Hb.depth===oc.depth?p(Hb,oc):T(Hb,oc)}function S(Hb,oc){var Vc=oc.parent;if(null===Vc)throw Error(y(402));Hb.depth===Vc.depth?p(Hb,Vc):S(Hb,Vc);oc.context._currentValue=
oc.value}function ja(Hb){var oc=De;oc!==Hb&&(null===oc?R(Hb):null===Hb?J(oc):oc.depth===Hb.depth?p(oc,Hb):oc.depth>Hb.depth?T(oc,Hb):S(oc,Hb),De=Hb)}function aa(Hb,oc,Vc,kd){var ze=void 0!==Hb.state?Hb.state:null;Hb.updater=We;Hb.props=Vc;Hb.state=ze;var de={queue:[],replace:!1};Hb._reactInternals=de;var Ib=oc.contextType;Hb.context="object"===typeof Ib&&null!==Ib?Ib._currentValue:kd;Ib=oc.getDerivedStateFromProps;"function"===typeof Ib&&(Ib=Ib(Vc,ze),ze=null===Ib||void 0===Ib?ze:Kh({},ze,Ib),Hb.state=
ze);if("function"!==typeof oc.getDerivedStateFromProps&&"function"!==typeof Hb.getSnapshotBeforeUpdate&&("function"===typeof Hb.UNSAFE_componentWillMount||"function"===typeof Hb.componentWillMount))if(oc=Hb.state,"function"===typeof Hb.componentWillMount&&Hb.componentWillMount(),"function"===typeof Hb.UNSAFE_componentWillMount&&Hb.UNSAFE_componentWillMount(),oc!==Hb.state&&We.enqueueReplaceState(Hb,Hb.state,null),null!==de.queue&&0<de.queue.length)if(oc=de.queue,Ib=de.replace,de.queue=null,de.replace=
!1,Ib&&1===oc.length)Hb.state=oc[0];else{de=Ib?oc[0]:Hb.state;ze=!0;for(Ib=Ib?1:0;Ib<oc.length;Ib++){var ac=oc[Ib];ac="function"===typeof ac?ac.call(Hb,de,Vc,kd):ac;null!=ac&&(ze?(ze=!1,de=Kh({},de,ac)):Kh(de,ac))}Hb.state=de}else de.queue=null}function ea(Hb,oc,Vc){var kd=Hb.id;Hb=Hb.overflow;var ze=32-cg(kd)-1;kd&=~(1<<ze);Vc+=1;var de=32-cg(oc)+ze;if(30<de){var Ib=ze-ze%5;de=(kd&(1<<Ib)-1).toString(32);kd>>=Ib;ze-=Ib;return{id:1<<32-cg(oc)+ze|Vc<<ze|kd,overflow:de+Hb}}return{id:1<<de|Vc<<ze|kd,
overflow:Hb}}function ca(Hb){Hb>>>=0;return 0===Hb?32:31-(Ee(Hb)/Lf|0)|0}function Y(Hb,oc){return Hb===oc&&(0!==Hb||1/Hb===1/oc)||Hb!==Hb&&oc!==oc}function ha(){if(null===gf)throw Error(y(321));return gf}function da(){if(0<Mg)throw Error(y(312));return{memoizedState:null,queue:null,next:null}}function fa(){null===Vf?null===vf?(Dh=!1,vf=Vf=da()):(Dh=!0,Vf=vf):null===Vf.next?(Dh=!1,Vf=Vf.next=da()):(Dh=!0,Vf=Vf.next);return Vf}function sa(){Kg=gf=null;rg=!1;vf=null;Mg=0;Vf=Nh=null}function va(Hb,oc){return"function"===
typeof oc?oc(Hb):oc}function qa(Hb,oc,Vc){gf=ha();Vf=fa();if(Dh){var kd=Vf.queue;oc=kd.dispatch;if(null!==Nh&&(Vc=Nh.get(kd),void 0!==Vc)){Nh.delete(kd);kd=Vf.memoizedState;do kd=Hb(kd,Vc.action),Vc=Vc.next;while(null!==Vc);Vf.memoizedState=kd;return[kd,oc]}return[Vf.memoizedState,oc]}Hb=Hb===va?"function"===typeof oc?oc():oc:void 0!==Vc?Vc(oc):oc;Vf.memoizedState=Hb;Hb=Vf.queue={last:null,dispatch:null};Hb=Hb.dispatch=Ja.bind(null,gf,Hb);return[Vf.memoizedState,Hb]}function xa(Hb,oc){gf=ha();Vf=
fa();oc=void 0===oc?null:oc;if(null!==Vf){var Vc=Vf.memoizedState;if(null!==Vc&&null!==oc){var kd=Vc[1];a:if(null===kd)kd=!1;else{for(var ze=0;ze<kd.length&&ze<oc.length;ze++)if(!Qf(oc[ze],kd[ze])){kd=!1;break a}kd=!0}if(kd)return Vc[0]}}Hb=Hb();Vf.memoizedState=[Hb,oc];return Hb}function Ja(Hb,oc,Vc){if(25<=Mg)throw Error(y(301));if(Hb===gf)if(rg=!0,Hb={action:Vc,next:null},null===Nh&&(Nh=new Map),Vc=Nh.get(oc),void 0===Vc)Nh.set(oc,Hb);else{for(oc=Vc;null!==oc.next;)oc=oc.next;oc.next=Hb}}function Ua(){throw Error(y(394));
}function ib(){}function Ea(Hb){console.error(Hb);return null}function Na(){}function Aa(Hb,oc,Vc,kd,ze,de,Ib,ac,Xc){var rd=[],Ad=new Set;oc={destination:null,responseState:oc,progressiveChunkSize:void 0===kd?12800:kd,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Ad,pingedTasks:rd,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===ze?Ea:ze,onAllReady:void 0===de?Na:de,onShellReady:void 0===
Ib?Na:Ib,onShellError:void 0===ac?Na:ac,onFatalError:void 0===Xc?Na:Xc};Vc=Ga(oc,0,null,Vc,!1,!1);Vc.parentFlushed=!0;Hb=ma(oc,Hb,null,Vc,Ad,Ce,null,Ze);rd.push(Hb);return oc}function ma(Hb,oc,Vc,kd,ze,de,Ib,ac){Hb.allPendingTasks++;null===Vc?Hb.pendingRootTasks++:Vc.pendingTasks++;var Xc={node:oc,ping:function(){var rd=Hb.pingedTasks;rd.push(Xc);1===rd.length&&eb(Hb)},blockedBoundary:Vc,blockedSegment:kd,abortSet:ze,legacyContext:de,context:Ib,treeContext:ac};ze.add(Xc);return Xc}function Ga(Hb,
oc,Vc,kd,ze,de){return{status:0,id:-1,index:oc,parentFlushed:!1,chunks:[],children:[],formatContext:kd,boundary:Vc,lastPushedText:ze,textEmbedded:de}}function Pa(Hb,oc){Hb=Hb.onError(oc);if(null!=Hb&&"string"!==typeof Hb)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof Hb+'" instead');return Hb}function Ca(Hb,oc){var Vc=Hb.onShellError;
Vc(oc);Vc=Hb.onFatalError;Vc(oc);null!==Hb.destination?(Hb.status=2,D(Hb.destination,oc)):(Hb.status=1,Hb.fatalError=oc)}function ta(Hb,oc,Vc,kd,ze){gf={};Kg=oc;Kf=0;for(Hb=Vc(kd,ze);rg;)rg=!1,Kf=0,Mg+=1,Vf=null,Hb=Vc(kd,ze);sa();return Hb}function Ma(Hb,oc,Vc,kd){var ze=Vc.render(),de=kd.childContextTypes;if(null!==de&&void 0!==de){var Ib=oc.legacyContext;if("function"!==typeof Vc.getChildContext)kd=Ib;else{Vc=Vc.getChildContext();for(var ac in Vc)if(!(ac in de))throw Error(y(108,C(kd)||"Unknown",
ac));kd=Kh({},Ib,Vc)}oc.legacyContext=kd;Qa(Hb,oc,ze);oc.legacyContext=Ib}else Qa(Hb,oc,ze)}function Wa(Hb,oc){if(Hb&&Hb.defaultProps){oc=Kh({},oc);Hb=Hb.defaultProps;for(var Vc in Hb)void 0===oc[Vc]&&(oc[Vc]=Hb[Vc])}return oc}function $a(Hb,oc,Vc,kd,ze){if("function"===typeof Vc)if(Vc.prototype&&Vc.prototype.isReactComponent){ze=P(Vc,oc.legacyContext);var de=Vc.contextType;de=new Vc(kd,"object"===typeof de&&null!==de?de._currentValue:ze);aa(de,Vc,kd,ze);Ma(Hb,oc,de,Vc)}else{de=P(Vc,oc.legacyContext);
ze=ta(Hb,oc,Vc,kd,de);var Ib=0!==Kf;if("object"===typeof ze&&null!==ze&&"function"===typeof ze.render&&void 0===ze.$$typeof)aa(ze,Vc,kd,de),Ma(Hb,oc,ze,Vc);else if(Ib){kd=oc.treeContext;oc.treeContext=ea(kd,1,0);try{Qa(Hb,oc,ze)}finally{oc.treeContext=kd}}else Qa(Hb,oc,ze)}else if("string"===typeof Vc){ze=oc.blockedSegment;de=K(ze.chunks,Vc,kd,Hb.responseState,ze.formatContext);ze.lastPushedText=!1;Ib=ze.formatContext;ze.formatContext=w(Ib,Vc,kd);lb(Hb,oc,de);ze.formatContext=Ib;switch(Vc){case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "input":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":break;
default:ze.chunks.push(Db,b(Vc),jb)}ze.lastPushedText=!1}else{switch(Vc){case xe:case ee:case pg:case mg:case Xf:Qa(Hb,oc,kd.children);return;case Dc:Qa(Hb,oc,kd.children);return;case $d:throw Error(y(343));case Kc:a:{Vc=oc.blockedBoundary;ze=oc.blockedSegment;de=kd.fallback;kd=kd.children;Ib=new Set;var ac={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Ib,errorDigest:null},Xc=Ga(Hb,ze.chunks.length,ac,ze.formatContext,
!1,!1);ze.children.push(Xc);ze.lastPushedText=!1;var rd=Ga(Hb,0,null,ze.formatContext,!1,!1);rd.parentFlushed=!0;oc.blockedBoundary=ac;oc.blockedSegment=rd;try{if(lb(Hb,oc,kd),rd.lastPushedText&&rd.textEmbedded&&rd.chunks.push(md),rd.status=1,gb(ac,rd),0===ac.pendingTasks)break a}catch(Ad){rd.status=4,ac.forceClientRender=!0,ac.errorDigest=Pa(Hb,Ad)}finally{oc.blockedBoundary=Vc,oc.blockedSegment=ze}oc=ma(Hb,de,Vc,Xc,Ib,oc.legacyContext,oc.context,oc.treeContext);Hb.pingedTasks.push(oc)}return}if("object"===
typeof Vc&&null!==Vc)switch(Vc.$$typeof){case hc:kd=ta(Hb,oc,Vc.render,kd,ze);if(0!==Kf){Vc=oc.treeContext;oc.treeContext=ea(Vc,1,0);try{Qa(Hb,oc,kd)}finally{oc.treeContext=Vc}}else Qa(Hb,oc,kd);return;case id:Vc=Vc.type;kd=Wa(Vc,kd);$a(Hb,oc,Vc,kd,ze);return;case sg:ze=kd.children;Vc=Vc._context;kd=kd.value;de=Vc._currentValue;Vc._currentValue=kd;Ib=De;De=kd={parent:Ib,depth:null===Ib?0:Ib.depth+1,context:Vc,parentValue:de,value:kd};oc.context=kd;Qa(Hb,oc,ze);Hb=De;if(null===Hb)throw Error(y(403));
kd=Hb.parentValue;Hb.context._currentValue=kd===Ye?Hb.context._defaultValue:kd;Hb=De=Hb.parent;oc.context=Hb;return;case Vb:kd=kd.children;kd=kd(Vc._currentValue);Qa(Hb,oc,kd);return;case vd:ze=Vc._init;Vc=ze(Vc._payload);kd=Wa(Vc,kd);$a(Hb,oc,Vc,kd,void 0);return}throw Error(y(130,null==Vc?Vc:typeof Vc,""));}}function Qa(Hb,oc,Vc){oc.node=Vc;if("object"===typeof Vc&&null!==Vc){switch(Vc.$$typeof){case xf:$a(Hb,oc,Vc.type,Vc.props,Vc.ref);return;case Pe:throw Error(y(257));case vd:var kd=Vc._init;
Vc=kd(Vc._payload);Qa(Hb,oc,Vc);return}if(Kb(Vc)){fb(Hb,oc,Vc);return}null===Vc||"object"!==typeof Vc?kd=null:(kd=Td&&Vc[Td]||Vc["@@iterator"],kd="function"===typeof kd?kd:null);if(kd&&=kd.call(Vc)){Vc=kd.next();if(!Vc.done){var ze=[];do ze.push(Vc.value),Vc=kd.next();while(!Vc.done);fb(Hb,oc,ze)}return}Hb=Object.prototype.toString.call(Vc);throw Error(y(31,"[object Object]"===Hb?"object with keys {"+Object.keys(Vc).join(", ")+"}":Hb));}"string"===typeof Vc?(kd=oc.blockedSegment,kd.lastPushedText=
I(oc.blockedSegment.chunks,Vc,Hb.responseState,kd.lastPushedText)):"number"===typeof Vc&&(kd=oc.blockedSegment,kd.lastPushedText=I(oc.blockedSegment.chunks,""+Vc,Hb.responseState,kd.lastPushedText))}function fb(Hb,oc,Vc){for(var kd=Vc.length,ze=0;ze<kd;ze++){var de=oc.treeContext;oc.treeContext=ea(de,kd,ze);try{lb(Hb,oc,Vc[ze])}finally{oc.treeContext=de}}}function lb(Hb,oc,Vc){var kd=oc.blockedSegment.formatContext,ze=oc.legacyContext,de=oc.context;try{return Qa(Hb,oc,Vc)}catch(Xc){if(sa(),"object"===
typeof Xc&&null!==Xc&&"function"===typeof Xc.then){Vc=Xc;var Ib=oc.blockedSegment,ac=Ga(Hb,Ib.chunks.length,null,Ib.formatContext,Ib.lastPushedText,!0);Ib.children.push(ac);Ib.lastPushedText=!1;Hb=ma(Hb,oc.node,oc.blockedBoundary,ac,oc.abortSet,oc.legacyContext,oc.context,oc.treeContext).ping;Vc.then(Hb,Hb);oc.blockedSegment.formatContext=kd;oc.legacyContext=ze;oc.context=de;ja(de)}else throw oc.blockedSegment.formatContext=kd,oc.legacyContext=ze,oc.context=de,ja(de),Xc;}}function Qb(Hb){var oc=Hb.blockedBoundary;
Hb=Hb.blockedSegment;Hb.status=3;La(this,oc,Hb)}function Nb(Hb,oc,Vc){var kd=Hb.blockedBoundary;Hb.blockedSegment.status=3;null===kd?(oc.allPendingTasks--,2!==oc.status&&(oc.status=2,null!==oc.destination&&oc.destination.close())):(kd.pendingTasks--,kd.forceClientRender||(kd.forceClientRender=!0,Hb=void 0===Vc?Error(y(432)):Vc,kd.errorDigest=oc.onError(Hb),kd.parentFlushed&&oc.clientRenderedBoundaries.push(kd)),kd.fallbackAbortableTasks.forEach(function(ze){return Nb(ze,oc,Vc)}),kd.fallbackAbortableTasks.clear(),
oc.allPendingTasks--,0===oc.allPendingTasks&&(kd=oc.onAllReady,kd()))}function gb(Hb,oc){if(0===oc.chunks.length&&1===oc.children.length&&null===oc.children[0].boundary){var Vc=oc.children[0];Vc.id=oc.id;Vc.parentFlushed=!0;1===Vc.status&&gb(Hb,Vc)}else Hb.completedSegments.push(oc)}function La(Hb,oc,Vc){if(null===oc){if(Vc.parentFlushed){if(null!==Hb.completedRootSegment)throw Error(y(389));Hb.completedRootSegment=Vc}Hb.pendingRootTasks--;0===Hb.pendingRootTasks&&(Hb.onShellError=Na,oc=Hb.onShellReady,
oc())}else oc.pendingTasks--,oc.forceClientRender||(0===oc.pendingTasks?(Vc.parentFlushed&&1===Vc.status&&gb(oc,Vc),oc.parentFlushed&&Hb.completedBoundaries.push(oc),oc.fallbackAbortableTasks.forEach(Qb,Hb),oc.fallbackAbortableTasks.clear()):Vc.parentFlushed&&1===Vc.status&&(gb(oc,Vc),1===oc.completedSegments.length&&oc.parentFlushed&&Hb.partialBoundaries.push(oc)));Hb.allPendingTasks--;0===Hb.allPendingTasks&&(Hb=Hb.onAllReady,Hb())}function eb(Hb){if(2!==Hb.status){var oc=De,Vc=pf.current;pf.current=
ei;var kd=gh;gh=Hb.responseState;try{var ze=Hb.pingedTasks,de;for(de=0;de<ze.length;de++){var Ib=ze[de],ac=Hb,Xc=Ib.blockedSegment;if(0===Xc.status){ja(Ib.context);try{Qa(ac,Ib,Ib.node),Xc.lastPushedText&&Xc.textEmbedded&&Xc.chunks.push(md),Ib.abortSet.delete(Ib),Xc.status=1,La(ac,Ib.blockedBoundary,Xc)}catch(Be){if(sa(),"object"===typeof Be&&null!==Be&&"function"===typeof Be.then){var rd=Ib.ping;Be.then(rd,rd)}else{Ib.abortSet.delete(Ib);Xc.status=4;var Ad=Ib.blockedBoundary,Sd=Be,je=Pa(ac,Sd);null===
Ad?Ca(ac,Sd):(Ad.pendingTasks--,Ad.forceClientRender||(Ad.forceClientRender=!0,Ad.errorDigest=je,Ad.parentFlushed&&ac.clientRenderedBoundaries.push(Ad)));ac.allPendingTasks--;if(0===ac.allPendingTasks){var ge=ac.onAllReady;ge()}}}finally{}}}ze.splice(0,de);null!==Hb.destination&&Rc(Hb,Hb.destination)}catch(Be){Pa(Hb,Be),Ca(Hb,Be)}finally{gh=kd,pf.current=Vc,Vc===ei&&ja(oc)}}}function Xa(Hb,oc,Vc){Vc.parentFlushed=!0;switch(Vc.status){case 0:var kd=Vc.id=Hb.nextSegmentId++;Vc.lastPushedText=!1;Vc.textEmbedded=
!1;Hb=Hb.responseState;W(oc,Fb);W(oc,Hb.placeholderPrefix);Hb=b(kd.toString(16));W(oc,Hb);return x(oc,sc);case 1:Vc.status=2;var ze=!0;kd=Vc.chunks;var de=0;Vc=Vc.children;for(var Ib=0;Ib<Vc.length;Ib++){for(ze=Vc[Ib];de<ze.index;de++)W(oc,kd[de]);ze=pb(Hb,oc,ze)}for(;de<kd.length-1;de++)W(oc,kd[de]);de<kd.length&&(ze=x(oc,kd[de]));return ze;default:throw Error(y(390));}}function pb(Hb,oc,Vc){var kd=Vc.boundary;if(null===kd)return Xa(Hb,oc,Vc);kd.parentFlushed=!0;if(kd.forceClientRender)kd=kd.errorDigest,
x(oc,ab),W(oc,nb),kd&&(W(oc,db),W(oc,b(h(kd))),W(oc,zb)),x(oc,tb),Xa(Hb,oc,Vc);else if(0<kd.pendingTasks){kd.rootSegmentID=Hb.nextSegmentId++;0<kd.completedSegments.length&&Hb.partialBoundaries.push(kd);var ze=Hb.responseState,de=ze.nextSuspenseID++;ze=q(ze.boundaryPrefix+de.toString(16));kd=kd.id=ze;V(oc,Hb.responseState,kd);Xa(Hb,oc,Vc)}else if(kd.byteSize>Hb.progressiveChunkSize)kd.rootSegmentID=Hb.nextSegmentId++,Hb.completedBoundaries.push(kd),V(oc,Hb.responseState,kd.id),Xa(Hb,oc,Vc);else{x(oc,
Wb);Vc=kd.completedSegments;if(1!==Vc.length)throw Error(y(391));pb(Hb,oc,Vc[0])}return x(oc,Za)}function Oa(Hb,oc,Vc){A(oc,Hb.responseState,Vc.formatContext,Vc.id);pb(Hb,oc,Vc);return O(oc,Vc.formatContext)}function Mc(Hb,oc,Vc){for(var kd=Vc.completedSegments,ze=0;ze<kd.length;ze++)Sc(Hb,oc,Vc,kd[ze]);kd.length=0;Hb=Hb.responseState;kd=Vc.id;Vc=Vc.rootSegmentID;W(oc,Hb.startInlineScript);Hb.sentCompleteBoundaryFunction?W(oc,Hg):(Hb.sentCompleteBoundaryFunction=!0,W(oc,Cg));if(null===kd)throw Error(y(395));
Vc=b(Vc.toString(16));W(oc,kd);W(oc,Af);W(oc,Hb.segmentPrefix);W(oc,Vc);return x(oc,Rg)}function Sc(Hb,oc,Vc,kd){if(2===kd.status)return!0;var ze=kd.id;if(-1===ze){if(-1===(kd.id=Vc.rootSegmentID))throw Error(y(392));return Oa(Hb,oc,kd)}Oa(Hb,oc,kd);Hb=Hb.responseState;W(oc,Hb.startInlineScript);Hb.sentCompleteSegmentFunction?W(oc,Sf):(Hb.sentCompleteSegmentFunction=!0,W(oc,rf));W(oc,Hb.segmentPrefix);ze=b(ze.toString(16));W(oc,ze);W(oc,of);W(oc,Hb.placeholderPrefix);W(oc,ze);return x(oc,vg)}function Rc(Hb,
oc){bd=new Uint8Array(512);Va=0;try{var Vc=Hb.completedRootSegment;if(null!==Vc&&0===Hb.pendingRootTasks){pb(Hb,oc,Vc);Hb.completedRootSegment=null;var kd=Hb.responseState.bootstrapChunks;for(Vc=0;Vc<kd.length-1;Vc++)W(oc,kd[Vc]);Vc<kd.length&&x(oc,kd[Vc])}var ze=Hb.clientRenderedBoundaries,de;for(de=0;de<ze.length;de++){var Ib=ze[de];kd=oc;var ac=Hb.responseState,Xc=Ib.id,rd=Ib.errorDigest,Ad=Ib.errorMessage,Sd=Ib.errorComponentStack;W(kd,ac.startInlineScript);ac.sentClientRenderFunction?W(kd,fh):
(ac.sentClientRenderFunction=!0,W(kd,Ch));if(null===Xc)throw Error(y(395));W(kd,Xc);W(kd,ai);if(rd||Ad||Sd)W(kd,di),W(kd,b(M(rd||"")));if(Ad||Sd)W(kd,di),W(kd,b(M(Ad||"")));Sd&&(W(kd,di),W(kd,b(M(Sd))));if(!x(kd,oi)){Hb.destination=null;de++;ze.splice(0,de);return}}ze.splice(0,de);var je=Hb.completedBoundaries;for(de=0;de<je.length;de++)if(!Mc(Hb,oc,je[de])){Hb.destination=null;de++;je.splice(0,de);return}je.splice(0,de);t(oc);bd=new Uint8Array(512);Va=0;var ge=Hb.partialBoundaries;for(de=0;de<ge.length;de++){var Be=
ge[de];a:{ze=Hb;Ib=oc;var Pd=Be.completedSegments;for(ac=0;ac<Pd.length;ac++)if(!Sc(ze,Ib,Be,Pd[ac])){ac++;Pd.splice(0,ac);var ue=!1;break a}Pd.splice(0,ac);ue=!0}if(!ue){Hb.destination=null;de++;ge.splice(0,de);return}}ge.splice(0,de);var Ne=Hb.completedBoundaries;for(de=0;de<Ne.length;de++)if(!Mc(Hb,oc,Ne[de])){Hb.destination=null;de++;Ne.splice(0,de);return}Ne.splice(0,de)}finally{t(oc),0===Hb.allPendingTasks&&0===Hb.pingedTasks.length&&0===Hb.clientRenderedBoundaries.length&&0===Hb.completedBoundaries.length&&
oc.close()}}function zc(Hb,oc){try{var Vc=Hb.abortableTasks;Vc.forEach(function(kd){return Nb(kd,Hb,oc)});Vc.clear();null!==Hb.destination&&Rc(Hb,Hb.destination)}catch(kd){Pa(Hb,kd),Ca(Hb,kd)}}var cd=X(67),bd=null,Va=0,sb=new TextEncoder,bc=Object.prototype.hasOwnProperty,Rb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
fc={},Zb={},Ub={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Hb){Ub[Hb]=new H(Hb,0,!1,Hb,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Hb){var oc=Hb[0];Ub[oc]=new H(oc,1,!1,Hb[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Hb){Ub[Hb]=new H(Hb,2,!1,Hb.toLowerCase(),
null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Hb){Ub[Hb]=new H(Hb,2,!1,Hb,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Hb){Ub[Hb]=new H(Hb,3,!1,Hb.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(Hb){Ub[Hb]=
new H(Hb,3,!0,Hb,null,!1,!1)});["capture","download"].forEach(function(Hb){Ub[Hb]=new H(Hb,4,!1,Hb,null,!1,!1)});["cols","rows","size","span"].forEach(function(Hb){Ub[Hb]=new H(Hb,6,!1,Hb,null,!1,!1)});["rowSpan","start"].forEach(function(Hb){Ub[Hb]=new H(Hb,5,!1,Hb.toLowerCase(),null,!1,!1)});var mb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Hb){var oc=
Hb.replace(mb,Q);Ub[oc]=new H(oc,1,!1,Hb,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Hb){var oc=Hb.replace(mb,Q);Ub[oc]=new H(oc,1,!1,Hb,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Hb){var oc=Hb.replace(mb,Q);Ub[oc]=new H(oc,1,!1,Hb,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Hb){Ub[Hb]=new H(Hb,1,!1,Hb.toLowerCase(),null,!1,!1)});
Ub.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Hb){Ub[Hb]=new H(Hb,1,!1,Hb.toLowerCase(),null,!0,!0)});var vb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,
gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bb=["Webkit","ms","Moz","O"];Object.keys(vb).forEach(function(Hb){Bb.forEach(function(oc){oc=oc+Hb.charAt(0).toUpperCase()+Hb.substring(1);vb[oc]=vb[Hb]})});var Eb=/["'&<>]/,
cb=/([A-Z])/g,Gb=/^ms-/,Kb=Array.isArray,ec=q("\x3cscript\x3e"),Ic=q("\x3c/script\x3e"),Hc=q('\x3cscript src\x3d"'),ic=q('\x3cscript type\x3d"module" src\x3d"'),Pc=q('" async\x3d""\x3e\x3c/script\x3e'),Qc=/(<\/|<)(s)(cript)/gi,md=q("\x3c!-- --\x3e"),od=new Map,Wc=q(' style\x3d"'),rb=q(":"),Bc=q(";"),fd=q(" "),Zc=q('\x3d"'),Ob=q('"'),kc=q('\x3d""'),pc=q("\x3e"),lc=q("/\x3e"),Gc=q(' selected\x3d""'),kb=q("\n"),Cb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Nc=new Map,qb=q("\x3c!DOCTYPE html\x3e"),Db=q("\x3c/"),jb=
q("\x3e"),Fb=q('\x3ctemplate id\x3d"'),sc=q('"\x3e\x3c/template\x3e'),Wb=q("\x3c!--$--\x3e"),mc=q('\x3c!--$?--\x3e\x3ctemplate id\x3d"'),Ya=q('"\x3e\x3c/template\x3e'),ab=q("\x3c!--$!--\x3e"),Za=q("\x3c!--/$--\x3e"),nb=q("\x3ctemplate"),zb=q('"'),db=q(' data-dgst\x3d"');q(' data-msg\x3d"');q(' data-stck\x3d"');var tb=q("\x3e\x3c/template\x3e"),$b=q('\x3cdiv hidden id\x3d"'),vc=q('"\x3e'),ub=q("\x3c/div\x3e"),ra=q('\x3csvg aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),la=q('"\x3e'),f=q("\x3c/svg\x3e"),
ia=q('\x3cmath aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),Sa=q('"\x3e'),Ha=q("\x3c/math\x3e"),ka=q('\x3ctable hidden id\x3d"'),oa=q('"\x3e'),za=q("\x3c/table\x3e"),bb=q('\x3ctable hidden\x3e\x3ctbody id\x3d"'),Mb=q('"\x3e'),uc=q("\x3c/tbody\x3e\x3c/table\x3e"),dd=q('\x3ctable hidden\x3e\x3ctr id\x3d"'),xd=q('"\x3e'),oe=q("\x3c/tr\x3e\x3c/table\x3e"),Ge=q('\x3ctable hidden\x3e\x3ccolgroup id\x3d"'),Oe=q('"\x3e'),uf=q("\x3c/colgroup\x3e\x3c/table\x3e"),rf=q('function $RS(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),
Sf=q('$RS("'),of=q('","'),vg=q('")\x3c/script\x3e'),Cg=q('function $RC(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);b.parentNode.removeChild(b);if(a){a\x3da.previousSibling;var f\x3da.parentNode,c\x3da.nextSibling,e\x3d0;do{if(c\x26\x268\x3d\x3d\x3dc.nodeType){var d\x3dc.data;if("/$"\x3d\x3d\x3dd)if(0\x3d\x3d\x3de)break;else e--;else"$"!\x3d\x3dd\x26\x26"$?"!\x3d\x3dd\x26\x26"$!"!\x3d\x3dd||e++}d\x3dc.nextSibling;f.removeChild(c);c\x3dd}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data\x3d"$";a._reactRetry\x26\x26a._reactRetry()}};$RC("'),
Hg=q('$RC("'),Af=q('","'),Rg=q('")\x3c/script\x3e'),Ch=q('function $RX(b,c,d,e){var a\x3ddocument.getElementById(b);a\x26\x26(b\x3da.previousSibling,b.data\x3d"$!",a\x3da.dataset,c\x26\x26(a.dgst\x3dc),d\x26\x26(a.msg\x3dd),e\x26\x26(a.stck\x3de),b._reactRetry\x26\x26b._reactRetry())};$RX("'),fh=q('$RX("'),ai=q('"'),oi=q(")\x3c/script\x3e"),di=q(","),Ui=/[<\u2028\u2029]/g,Kh=Object.assign,xf=Symbol.for("react.element"),Pe=Symbol.for("react.portal"),Xf=Symbol.for("react.fragment"),pg=Symbol.for("react.strict_mode"),
mg=Symbol.for("react.profiler"),sg=Symbol.for("react.provider"),Vb=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),Kc=Symbol.for("react.suspense"),Dc=Symbol.for("react.suspense_list"),id=Symbol.for("react.memo"),vd=Symbol.for("react.lazy"),$d=Symbol.for("react.scope"),ee=Symbol.for("react.debug_trace_mode"),xe=Symbol.for("react.legacy_hidden"),Ye=Symbol.for("react.default_value"),Td=Symbol.iterator,Ce={},De=null,We={isMounted:function(){return!1},enqueueSetState:function(Hb,oc){Hb=
Hb._reactInternals;null!==Hb.queue&&Hb.queue.push(oc)},enqueueReplaceState:function(Hb,oc){Hb=Hb._reactInternals;Hb.replace=!0;Hb.queue=[oc]},enqueueForceUpdate:function(){}},Ze={id:1,overflow:""},cg=Math.clz32?Math.clz32:ca,Ee=Math.log,Lf=Math.LN2,Qf="function"===typeof Object.is?Object.is:Y,gf=null,Kg=null,vf=null,Vf=null,Dh=!1,rg=!1,Kf=0,Nh=null,Mg=0,ei={readContext:function(Hb){return Hb._currentValue},useContext:function(Hb){ha();return Hb._currentValue},useMemo:xa,useReducer:qa,useRef:function(Hb){gf=
ha();Vf=fa();var oc=Vf.memoizedState;return null===oc?(Hb={current:Hb},Vf.memoizedState=Hb):oc},useState:function(Hb){return qa(va,Hb)},useInsertionEffect:ib,useLayoutEffect:function(){},useCallback:function(Hb,oc){return xa(function(){return Hb},oc)},useImperativeHandle:ib,useEffect:ib,useDebugValue:ib,useDeferredValue:function(Hb){ha();return Hb},useTransition:function(){ha();return[!1,Ua]},useId:function(){var Hb=Kg.treeContext,oc=Hb.overflow;Hb=Hb.id;Hb=(Hb&~(1<<32-cg(Hb)-1)).toString(32)+oc;
var Vc=gh;if(null===Vc)throw Error(y(404));oc=Kf++;Hb=":"+Vc.idPrefix+"R"+Hb;0<oc&&(Hb+="H"+oc.toString(32));return Hb+":"},useMutableSource:function(Hb,oc){ha();return oc(Hb._source)},useSyncExternalStore:function(Hb,oc,Vc){if(void 0===Vc)throw Error(y(407));return Vc()}},gh=null,pf=cd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;L.renderToReadableStream=function(Hb,oc){return new Promise(function(Vc,kd){var ze,de,Ib=new Promise(function(Ad,Sd){de=Ad;ze=Sd}),ac=Aa(Hb,
a(oc?oc.identifierPrefix:void 0,oc?oc.nonce:void 0,oc?oc.bootstrapScriptContent:void 0,oc?oc.bootstrapScripts:void 0,oc?oc.bootstrapModules:void 0),m(oc?oc.namespaceURI:void 0),oc?oc.progressiveChunkSize:void 0,oc?oc.onError:void 0,de,function(){var Ad=new ReadableStream({type:"bytes",pull:function(Sd){if(1===ac.status)ac.status=2,D(Sd,ac.fatalError);else if(2!==ac.status&&null===ac.destination){ac.destination=Sd;try{Rc(ac,Sd)}catch(je){Pa(ac,je),Ca(ac,je)}}},cancel:function(){zc(ac)}},{highWaterMark:0});
Ad.allReady=Ib;Vc(Ad)},function(Ad){Ib.catch(function(){});kd(Ad)},ze);if(oc&&oc.signal){var Xc=oc.signal,rd=function(){zc(ac,Xc.reason);Xc.removeEventListener("abort",rd)};Xc.addEventListener("abort",rd)}eb(ac)})};L.version="18.3.1"};
shadow$provide[672]=function(ua,X,Ta,L){ua=X(668);X=X(669);L.version=ua.version;L.renderToString=ua.renderToString;L.renderToStaticMarkup=ua.renderToStaticMarkup;L.renderToNodeStream=ua.renderToNodeStream;L.renderToStaticNodeStream=ua.renderToStaticNodeStream;L.renderToReadableStream=X.renderToReadableStream};
shadow$provide[673]=function(ua,X,Ta,L){function y(){if(!Lb&&(Lb="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lb))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lb(Pb)}function W(c,n=0){return(gd[c[n+0]]+gd[c[n+1]]+gd[c[n+2]]+gd[c[n+3]]+"-"+gd[c[n+4]]+gd[c[n+5]]+"-"+gd[c[n+6]]+gd[c[n+7]]+"-"+gd[c[n+8]]+gd[c[n+9]]+"-"+gd[c[n+10]]+gd[c[n+11]]+gd[c[n+12]]+gd[c[n+13]]+gd[c[n+14]]+
gd[c[n+15]]).toLowerCase()}function x(c){let n=0;var N=0;for(var ba of c)n+=ba.w*ba.h,N=Math.max(N,ba.w);c.sort((Ia,hb)=>hb.h-Ia.h);N=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),N),h:Infinity}];let pa=ba=0;for(const Ia of c)for(c=N.length-1;0<=c;c--){var Ba=N[c];if(!(Ia.w>Ba.w||Ia.h>Ba.h)){Ia.x=Ba.x;Ia.y=Ba.y;pa=Math.max(pa,Ia.y+Ia.h);ba=Math.max(ba,Ia.x+Ia.w);Ia.w===Ba.w&&Ia.h===Ba.h?(Ba=N.pop(),c<N.length&&(N[c]=Ba)):Ia.h===Ba.h?(Ba.x+=Ia.w,Ba.w-=Ia.w):(Ia.w!==Ba.w&&N.push({x:Ba.x+Ia.w,y:Ba.y,
w:Ba.w-Ia.w,h:Ia.h}),Ba.y+=Ia.h,Ba.h-=Ia.h);break}}return{w:ba,h:pa,fill:n/(ba*pa)||0}}function t(c,...n){return{didIntersect:0<n.length,message:c,points:n}}function b(c,n,N=0){const ba=[c[0]+n[0]/2,c[1]+n[1]/2],pa=Hd.rotWith(c,ba,N),Ba=Hd.rotWith(Hd.add(c,[n[0],0]),ba,N),Ia=Hd.rotWith(Hd.add(c,n),ba,N);c=Hd.rotWith(Hd.add(c,[0,n[1]]),ba,N);return[["top",[pa,Ba]],["right",[Ba,Ia]],["bottom",[Ia,c]],["left",[c,pa]]]}function q(c,n,N,ba){const [pa,Ba]=c,[Ia,hb]=n,[yb,Yb]=N,[rc,Ac]=ba;return hb/Ia!==
(Ac-Yb)/(rc-yb)&&(n=Ia*(Ac-Yb)-hb*(rc-yb),0!==n&&(c=((Ba-Yb)*(rc-yb)-(pa-yb)*(Ac-Yb))/n,n=((Ba-Yb)*Ia-(pa-yb)*hb)/n,0<=c&&0<=n&&1>=n))?t("intersection",[pa+c*Ia,Ba+c*hb]):t("no intersection")}function D(c,n,N,ba,pa=0){return a(N,ba,pa,c,n)}function F(c,n,N,ba=0){const {minX:pa,minY:Ba,width:Ia,height:hb}=N;return D(c,n,[pa,Ba],[Ia,hb],ba)}function H(c,n,N,ba){var pa=Hd.sub(c,N);N=Hd.sub(ba,N);n=Hd.sub(n,c);ba=N[0]*pa[1]-N[1]*pa[0];pa=n[0]*pa[1]-n[1]*pa[0];N=N[1]*n[0]-N[0]*n[1];return 0===ba||0===
pa?t("coincident"):0===N?t("parallel"):0!==N&&(ba/=N,pa/=N,0<=ba&&1>=ba&&0<=pa&&1>=pa)?t("intersection",Hd.add(c,Hd.mul(n,ba))):t("no intersection")}function Q(c,n,N,ba){var pa=(n[0]-c[0])*(n[0]-c[0])+(n[1]-c[1])*(n[1]-c[1]),Ba=2*((n[0]-c[0])*(c[0]-N[0])+(n[1]-c[1])*(c[1]-N[1]));N=Ba*Ba-4*pa*(N[0]*N[0]+N[1]*N[1]+c[0]*c[0]+c[1]*c[1]-2*(N[0]*c[0]+N[1]*c[1])-ba*ba);if(0>N)return t("outside");if(0===N)return t("tangent");ba=Math.sqrt(N);N=(-Ba+ba)/(2*pa);pa=(-Ba-ba)/(2*pa);if((0>N||1<N)&&(0>pa||1<pa))return 0>
N&&0>pa||1<N&&1<pa?t("outside"):t("inside");Ba=[];0<=N&&1>=N&&Ba.push(Hd.lrp(c,n,N));0<=pa&&1>=pa&&Ba.push(Hd.lrp(c,n,pa));return t("intersection",...Ba)}function h(c,n,N,ba,pa,Ba=0){if(0===ba||0===pa||Hd.isEqual(c,n))return t("no intersection");ba=0>ba?ba:-ba;pa=0>pa?pa:-pa;c=Hd.sub(Hd.rotWith(c,N,-Ba),N);n=Hd.sub(Hd.rotWith(n,N,-Ba),N);var Ia=Hd.sub(n,c),hb=Ia[0]*Ia[0]/ba/ba+Ia[1]*Ia[1]/pa/pa;Ia=2*c[0]*Ia[0]/ba/ba+2*c[1]*Ia[1]/pa/pa;const yb=[];ba=Ia*Ia-4*hb*(c[0]*c[0]/ba/ba+c[1]*c[1]/pa/pa-1);
0===ba?yb.push(-Ia/2/hb):0<ba&&(ba=Math.sqrt(ba),yb.push((-Ia+ba)/2/hb),yb.push((-Ia-ba)/2/hb));hb=yb.filter(Yb=>0<=Yb&&1>=Yb).map(Yb=>Hd.add(N,Hd.add(c,Hd.mul(Hd.sub(n,c),Yb)))).map(Yb=>Hd.rotWith(Yb,N,Ba));return t("intersection",...hb)}function k(c,n,N){const ba=[];for(let pa=1;pa<N.length;pa++){const Ba=H(c,n,N[pa-1],N[pa]);Ba&&ba.push(...Ba.points)}return 0===ba.length?t("no intersection"):t("intersection",...N)}function a(c,n,N,ba,pa){return b(c,n,N).reduce((Ba,[Ia,[hb,yb]])=>{(hb=q(ba,pa,hb,
yb))&&Ba.push(t(Ia,...hb.points));return Ba},[]).filter(Ba=>Ba.didIntersect)}function l(c,n,N,ba){return b(c,n).reduce((pa,[Ba,[Ia,hb]])=>{(Ia=H(N,ba,Ia,hb))&&pa.push(t(Ba,...Ia.points));return pa},[]).filter(pa=>pa.didIntersect)}function m(c,n,N,ba){return b(c,n).reduce((pa,[Ba,[Ia,hb]])=>{(Ia=Q(Ia,hb,N,ba))&&pa.push(qg(Ef({},Ia),{message:Ba}));return pa},[]).filter(pa=>pa.didIntersect)}function w(c,n,N,ba,pa,Ba=0){return b(c,n).reduce((Ia,[hb,[yb,Yb]])=>{(yb=h(yb,Yb,N,ba,pa,Ba))&&Ia.push(qg(Ef({},
yb),{message:hb}));return Ia},[]).filter(Ia=>Ia.didIntersect)}function I(c,n,N){return b(c,n).reduce((ba,[pa,[Ba,Ia]])=>{Ba=k(Ba,Ia,N);Ba.didIntersect&&ba.push(t(pa,...Ba.points));return ba},[]).filter(ba=>ba.didIntersect)}function z(c,n,N){return b(c,n).reduce((ba,[pa,[Ba,Ia]])=>{{const hb=[];for(let yb=1;yb<N.length+1;yb++){const Yb=H(Ba,Ia,N[yb-1],N[yb%N.length]);Yb&&hb.push(...Yb.points)}Ba=0===hb.length?t("no intersection"):t("intersection",...N)}Ba.didIntersect&&ba.push(t(pa,...Ba.points));
return ba},[]).filter(ba=>ba.didIntersect)}function r(c,n,N,ba=0,pa,Ba){return n===N?m(pa,Ba,c,n):w(pa,Ba,c,n,N,ba)}function g(c,n,N){const {minX:ba,minY:pa,width:Ba,height:Ia}=c;return l([ba,pa],[Ba,Ia],n,N)}function d(c){for(var n=arguments.length,N=Array(1<n?n-1:0),ba=1;ba<n;ba++)N[ba-1]=arguments[ba];throw Error("number"===typeof c?"[MobX] minified error nr: "+c+(N.length?" "+N.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":
"[MobX] "+c);}function E(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof ua?ua:"undefined"!==typeof self?self:Ck}function B(){Xy||d("Proxy not available")}function K(c){var n=!1;return function(){if(!n)return n=!0,c.apply(this,arguments)}}function V(c){return"function"===typeof c}function A(c){switch(typeof c){case "string":case "symbol":case "number":return!0}return!1}function O(c){return null!==c&&"object"===typeof c}function M(c){if(!O(c))return!1;
c=Object.getPrototypeOf(c);if(null==c)return!0;c=Object.hasOwnProperty.call(c,"constructor")&&c.constructor;return"function"===typeof c&&c.toString()===Yy}function C(c){return(c=null==c?void 0:c.constructor)?"GeneratorFunction"===c.name||"GeneratorFunction"===c.displayName?!0:!1:!1}function P(c,n,N){Yk(c,n,{enumerable:!1,writable:!0,configurable:!0,value:N})}function p(c,n,N){Yk(c,n,{enumerable:!1,writable:!1,configurable:!0,value:N})}function J(c,n){var N="isMobX"+c;n.prototype[N]=!0;return function(ba){return O(ba)&&
!0===ba[N]}}function R(c){return c instanceof Map}function T(c){return c instanceof Set}function S(c){var n=Object.keys(c);if(!kv)return n;var N=Object.getOwnPropertySymbols(c);return N.length?[].concat(n,N.filter(function(ba){return xq.propertyIsEnumerable.call(c,ba)})):n}function ja(c){return null===c?null:"object"===typeof c?""+c:c}function aa(c,n){return xq.hasOwnProperty.call(c,n)}function ea(c,n){for(var N=0;N<n.length;N++){var ba=n[N];ba.enumerable=ba.enumerable||!1;ba.configurable=!0;"value"in
ba&&(ba.writable=!0);Object.defineProperty(c,ba.key,ba)}}function ca(c,n,N){n&&ea(c.prototype,n);N&&ea(c,N);Object.defineProperty(c,"prototype",{writable:!1});return c}function Y(){Y=Object.assign||function(c){for(var n=1;n<arguments.length;n++){var N=arguments[n],ba;for(ba in N)Object.prototype.hasOwnProperty.call(N,ba)&&(c[ba]=N[ba])}return c};return Y.apply(this,arguments)}function ha(c,n){c.prototype=Object.create(n.prototype);c.prototype.constructor=c;da(c,n)}function da(c,n){da=Object.setPrototypeOf||
function(N,ba){N.__proto__=ba;return N};return da(c,n)}function fa(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function sa(c,n){if(c){if("string"===typeof c)return va(c,n);var N=Object.prototype.toString.call(c).slice(8,-1);"Object"===N&&c.constructor&&(N=c.constructor.name);if("Map"===N||"Set"===N)return Array.from(c);if("Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return va(c,n)}}function va(c,n){if(null==
n||n>c.length)n=c.length;for(var N=0,ba=Array(n);N<n;N++)ba[N]=c[N];return ba}function qa(c,n){var N="undefined"!==typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(N)return(N=N.call(c)).next.bind(N);if(Array.isArray(c)||(N=sa(c))||n&&c&&"number"===typeof c.length){N&&(c=N);var ba=0;return function(){return ba>=c.length?{done:!0}:{done:!1,value:c[ba++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function xa(c){return Object.assign(function(n,N){Ja(n,N,c)},c)}function Ja(c,n,N){aa(c,Ll)||P(c,Ll,Y({},c[Ll]));N.annotationType_!==$y&&(c[Ll][n]=N)}function Ua(c){aa(c,Ll)||P(c,Ll,Y({},c[Ll]));return c[Ll]}function ib(c,n,N){void 0===n&&(n=gp);void 0===N&&(N=gp);c=new yq(c);n!==gp&&Wc(oz,c,n,void 0);N!==gp&&od(c,N);return c}function Ea(c,n,N){return kc(c)?c:Array.isArray(c)?Tg.array(c,{name:N}):M(c)?Tg.object(c,void 0,{name:N}):R(c)?Tg.map(c,{name:N}):T(c)?Tg.set(c,{name:N}):"function"!==typeof c||
Hc(c)||Ob(c)?c:C(c)?Dq(c):Cq(N,c)}function Na(c){return c}function Aa(c,n){return{annotationType_:c,options_:n,make_:ma,extend_:Ga}}function ma(c,n,N,ba){var pa;if(null!=(pa=this.options_)&&pa.bound)return null===this.extend_(c,n,N,!1)?0:1;if(ba===c.target_)return null===this.extend_(c,n,N,!1)?0:2;if(Hc(N.value))return 1;c=Pa(c,this,n,N,!1);Yk(ba,n,c);return 2}function Ga(c,n,N,ba){N=Pa(c,this,n,N);return c.defineProperty_(n,N,ba)}function Pa(c,n,N,ba,pa){var Ba,Ia,hb,yb,Yb,rc,Ac;void 0===pa&&(pa=
bg.safeDescriptors);ba=ba.value;if(null!=(Ba=n.options_)&&Ba.bound){var Yc;ba=ba.bind(null!=(Yc=c.proxy_)?Yc:c.target_)}return{value:Oa(null!=(Ia=null==(hb=n.options_)?void 0:hb.name)?Ia:N.toString(),ba,null!=(yb=null==(Yb=n.options_)?void 0:Yb.autoAction)?yb:!1,null!=(rc=n.options_)&&rc.bound?null!=(Ac=c.proxy_)?Ac:c.target_:void 0),configurable:pa?c.isPlainObject_:!0,enumerable:!1,writable:pa?!1:!0}}function Ca(c,n){return{annotationType_:c,options_:n,make_:ta,extend_:Ma}}function ta(c,n,N,ba){var pa;
if(ba===c.target_)return null===this.extend_(c,n,N,!1)?0:2;if(null!=(pa=this.options_)&&pa.bound&&(!aa(c.target_,n)||!Ob(c.target_[n]))&&null===this.extend_(c,n,N,!1))return 0;if(Ob(N.value))return 1;c=Wa(c,this,n,N,!1,!1);Yk(ba,n,c);return 2}function Ma(c,n,N,ba){var pa;N=Wa(c,this,n,N,null==(pa=this.options_)?void 0:pa.bound);return c.defineProperty_(n,N,ba)}function Wa(c,n,N,ba,pa,Ba){void 0===Ba&&(Ba=bg.safeDescriptors);n=ba.value;Ob(n)||(n=Dq(n));if(pa){var Ia;n=n.bind(null!=(Ia=c.proxy_)?Ia:
c.target_);n.isMobXFlow=!0}return{value:n,configurable:Ba?c.isPlainObject_:!0,enumerable:!1,writable:Ba?!1:!0}}function $a(c,n){return{annotationType_:c,options_:n,make_:Qa,extend_:fb}}function Qa(c,n,N){return null===this.extend_(c,n,N,!1)?0:1}function fb(c,n,N,ba){return c.defineComputedProperty_(n,Y({},this.options_,{get:N.get,set:N.set}),ba)}function lb(c,n){return{annotationType_:c,options_:n,make_:Qb,extend_:Nb}}function Qb(c,n,N){return null===this.extend_(c,n,N,!1)?0:1}function Nb(c,n,N,ba){var pa,
Ba;return c.defineObservableProperty_(n,N.value,null!=(pa=null==(Ba=this.options_)?void 0:Ba.enhancer)?pa:Ea,ba)}function gb(c){return{annotationType_:"true",options_:c,make_:La,extend_:eb}}function La(c,n,N,ba){var pa,Ba;if(N.get)return $g.make_(c,n,N,ba);if(N.set){N=Oa(n.toString(),N.set);if(ba===c.target_)return null===c.defineProperty_(n,{configurable:bg.safeDescriptors?c.isPlainObject_:!0,set:N})?0:2;Yk(ba,n,{configurable:!0,set:N});return 2}if(ba!==c.target_&&"function"===typeof N.value){var Ia;
if(C(N.value)){var hb;return(null!=(hb=this.options_)&&hb.autoBind?Dq.bound:Dq).make_(c,n,N,ba)}return(null!=(Ia=this.options_)&&Ia.autoBind?Cq.bound:Cq).make_(c,n,N,ba)}Ia=!1===(null==(pa=this.options_)?void 0:pa.deep)?Tg.ref:Tg;if("function"===typeof N.value&&null!=(Ba=this.options_)&&Ba.autoBind){var yb;N.value=N.value.bind(null!=(yb=c.proxy_)?yb:c.target_)}return Ia.make_(c,n,N,ba)}function eb(c,n,N,ba){var pa,Ba;if(N.get)return $g.extend_(c,n,N,ba);if(N.set)return c.defineProperty_(n,{configurable:bg.safeDescriptors?
c.isPlainObject_:!0,set:Oa(n.toString(),N.set)},ba);if("function"===typeof N.value&&null!=(pa=this.options_)&&pa.autoBind){var Ia;N.value=N.value.bind(null!=(Ia=c.proxy_)?Ia:c.target_)}return(!1===(null==(Ba=this.options_)?void 0:Ba.deep)?Tg.ref:Tg).extend_(c,n,N,ba)}function Xa(c){if(!0===c.deep)var n=Ea;else{if(!1===c.deep)c=Na;else{c=c.defaultDecorator;var N;c=c?null!=(n=null==(N=c.options_)?void 0:N.enhancer)?n:Ea:Ea}n=c}return n}function pb(c,n,N){if(A(n))Ja(c,n,lv);else return kc(c)?c:M(c)?
Tg.object(c,n,N):Array.isArray(c)?Tg.array(c,n):R(c)?Tg.map(c,n):T(c)?Tg.set(c,n):"object"===typeof c&&null!==c?c:Tg.box(c,n)}function Oa(c,n,N,ba){function pa(){a:{var Ba=ba||this,Ia=arguments,hb=bg.trackingDerivation,yb=!N||!hb;Ub();var Yb=bg.allowStateChanges;yb&&(Va(),Yb=Sc(!0));var rc=sb(!0),Ac=gz++,Yc=zr;zr=Ac;try{var ud=n.apply(Ba,Ia);break a}catch(Gd){var pd=Gd;throw Gd;}finally{zr!==Ac&&d(30),zr=Yc,void 0!==pd&&(bg.suppressReactionErrors=!0),bg.allowStateChanges=Yb,bg.allowStateReads=rc,
mb(),yb&&(bg.trackingDerivation=hb),bg.suppressReactionErrors=!1}ud=void 0}return ud}void 0===N&&(N=!1);pa.isMobxAction=!0;hz&&(qv.value=c,Object.defineProperty(pa,"name",qv));return pa}function Mc(c,n){c=Sc(c);try{return n()}finally{bg.allowStateChanges=c}}function Sc(c){var n=bg.allowStateChanges;bg.allowStateChanges=c;return n}function Rc(c){switch(c.dependenciesState_){case Ii.UP_TO_DATE_:return!1;case Ii.NOT_TRACKING_:case Ii.STALE_:return!0;case Ii.POSSIBLY_STALE_:for(var n=sb(!0),N=Va(),ba=
c.observing_,pa=ba.length,Ba=0;Ba<pa;Ba++){var Ia=ba[Ba];if(Bq(Ia)){if(bg.disableErrorBoundaries)Ia.get();else try{Ia.get()}catch(hb){return bg.trackingDerivation=N,bg.allowStateReads=n,!0}if(c.dependenciesState_===Ii.STALE_)return bg.trackingDerivation=N,bg.allowStateReads=n,!0}}bc(c);bg.trackingDerivation=N;bg.allowStateReads=n;return!1}}function zc(c,n,N){var ba=sb(!0);bc(c);c.newObserving_=Array(c.observing_.length+100);c.unboundDepsCount_=0;c.runId_=++bg.runId;var pa=bg.trackingDerivation;bg.trackingDerivation=
c;bg.inBatch++;if(!0===bg.disableErrorBoundaries)var Ba=n.call(N);else try{Ba=n.call(N)}catch(rc){Ba=new po(rc)}bg.inBatch--;bg.trackingDerivation=pa;var Ia=c.observing_;n=c.observing_=c.newObserving_;N=Ii.UP_TO_DATE_;pa=0;for(var hb=c.unboundDepsCount_,yb=0;yb<hb;yb++){var Yb=n[yb];0===Yb.diffValue_&&(Yb.diffValue_=1,pa!==yb&&(n[pa]=Yb),pa++);Yb.dependenciesState_>N&&(N=Yb.dependenciesState_)}n.length=pa;c.newObserving_=null;for(hb=Ia.length;hb--;)yb=Ia[hb],0===yb.diffValue_&&fc(yb,c),yb.diffValue_=
0;for(;pa--;)Ia=n[pa],1===Ia.diffValue_&&(Ia.diffValue_=0,hb=c,Ia.observers_.add(hb),Ia.lowestObserverState_>hb.dependenciesState_&&(Ia.lowestObserverState_=hb.dependenciesState_));N!==Ii.UP_TO_DATE_&&(c.dependenciesState_=N,c.onBecomeStale_());bg.allowStateReads=ba;return Ba}function cd(c){var n=c.observing_;c.observing_=[];for(var N=n.length;N--;)fc(n[N],c);c.dependenciesState_=Ii.NOT_TRACKING_}function bd(c){var n=Va();try{return c()}finally{bg.trackingDerivation=n}}function Va(){var c=bg.trackingDerivation;
bg.trackingDerivation=null;return c}function sb(c){var n=bg.allowStateReads;bg.allowStateReads=c;return n}function bc(c){if(c.dependenciesState_!==Ii.UP_TO_DATE_){c.dependenciesState_=Ii.UP_TO_DATE_;c=c.observing_;for(var n=c.length;n--;)c[n].lowestObserverState_=Ii.UP_TO_DATE_}}function Rb(){(bg.pendingReactions.length||bg.inBatch||bg.isRunningReactions)&&d(36);rv=!0;if(Br){var c=E();0===--c.__mobxInstanceCount&&(c.__mobxGlobals=void 0);bg=new Ar}}function fc(c,n){c.observers_["delete"](n);0===c.observers_.size&&
Zb(c)}function Zb(c){!1===c.isPendingUnobservation_&&(c.isPendingUnobservation_=!0,bg.pendingUnobservations.push(c))}function Ub(){bg.inBatch++}function mb(){if(0===--bg.inBatch){0<bg.inBatch||bg.isRunningReactions||Cr(Gb);for(var c=bg.pendingUnobservations,n=0;n<c.length;n++){var N=c[n];N.isPendingUnobservation_=!1;0===N.observers_.size&&(N.isBeingObserved_&&(N.isBeingObserved_=!1,N.onBUO()),N instanceof Aq&&N.suspend_())}bg.pendingUnobservations=[]}}function vb(c){var n=bg.trackingDerivation;if(null!==
n)return n.runId_!==c.lastAccessedBy_&&(c.lastAccessedBy_=n.runId_,n.newObserving_[n.unboundDepsCount_++]=c,!c.isBeingObserved_&&bg.trackingContext&&(c.isBeingObserved_=!0,c.onBO())),c.isBeingObserved_;0===c.observers_.size&&0<bg.inBatch&&Zb(c);return!1}function Bb(c){c.lowestObserverState_!==Ii.STALE_&&(c.lowestObserverState_=Ii.STALE_,c.observers_.forEach(function(n){if(n.dependenciesState_===Ii.UP_TO_DATE_)n.onBecomeStale_();n.dependenciesState_=Ii.STALE_}))}function Eb(c){c.lowestObserverState_!==
Ii.STALE_&&(c.lowestObserverState_=Ii.STALE_,c.observers_.forEach(function(n){n.dependenciesState_===Ii.POSSIBLY_STALE_?n.dependenciesState_=Ii.STALE_:n.dependenciesState_===Ii.UP_TO_DATE_&&(c.lowestObserverState_=Ii.UP_TO_DATE_)}))}function cb(c){c.lowestObserverState_===Ii.UP_TO_DATE_&&(c.lowestObserverState_=Ii.POSSIBLY_STALE_,c.observers_.forEach(function(n){n.dependenciesState_===Ii.UP_TO_DATE_&&(n.dependenciesState_=Ii.POSSIBLY_STALE_,n.onBecomeStale_())}))}function Gb(){bg.isRunningReactions=
!0;for(var c=bg.pendingReactions,n=0;0<c.length;){++n===lz&&(console.error("[mobx] cycle in reaction: "+c[0]),c.splice(0));for(var N=c.splice(0),ba=0,pa=N.length;ba<pa;ba++)N[ba].runReaction_()}bg.isRunningReactions=!1}function Kb(c){var n=Cr;Cr=function(N){return c(function(){return n(N)})}}function ec(c){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Ic(c){return function(n,N){if(V(n))return Oa(n.name||"\x3cunnamed action\x3e",n,c);if(V(N))return Oa(n,N,
c);if(A(N))return Ja(n,N,c?uv:tv);if(A(n))return xa(Aa(c?"autoAction":sv,{name:n,autoAction:c}))}}function Hc(c){return V(c)&&!0===c.isMobxAction}function ic(c,n){function N(){c(yb)}var ba,pa;void 0===n&&(n=Ys);var Ba=null!=(ba=null==(pa=n)?void 0:pa.name)?ba:"Autorun";if(n.scheduler||n.delay){var Ia=Pc(n),hb=!1;var yb=new jp(Ba,function(){hb||(hb=!0,Ia(function(){hb=!1;yb.isDisposed_||yb.track(N)}))},n.onError,n.requiresObservable)}else yb=new jp(Ba,function(){this.track(N)},n.onError,n.requiresObservable);
yb.schedule_();return yb.getDisposer_()}function Pc(c){return c.scheduler?c.scheduler:c.delay?function(n){return setTimeout(n,c.delay)}:nz}function Qc(c,n,N){function ba(){rc=!1;if(!pd.isDisposed_){var Gd=!1;pd.track(function(){var Qd=Mc(!1,function(){return c(pd)});Gd=Yb||!ud(Ac,Qd);Yc=Ac;Ac=Qd});Yb&&N.fireImmediately?Ia(Ac,Yc,pd):!Yb&&Gd&&Ia(Ac,Yc,pd);Yb=!1}}var pa;void 0===N&&(N=Ys);var Ba=null!=(pa=N.name)?pa:"Reaction",Ia=Eg(Ba,N.onError?md(N.onError,n):n),hb=!N.scheduler&&!N.delay,yb=Pc(N),
Yb=!0,rc=!1,Ac,Yc,ud=N.compareStructural?hp.structural:N.equals||hp["default"],pd=new jp(Ba,function(){Yb||hb?ba():rc||(rc=!0,yb(ba))},N.onError,N.requiresObservable);pd.schedule_();return pd.getDisposer_()}function md(c,n){return function(){try{return n.apply(this,arguments)}catch(N){c.call(this,N)}}}function od(c,n,N){return Wc(pz,c,n,N)}function Wc(c,n,N,ba){var pa="function"===typeof ba?ia(n,N):ia(n),Ba=V(ba)?ba:N,Ia=c+"L";pa[Ia]?pa[Ia].add(Ba):pa[Ia]=new Set([Ba]);return function(){var hb=pa[Ia];
hb&&(hb["delete"](Ba),0===hb.size&&delete pa[Ia])}}function rb(c){!0===c.isolateGlobalState&&Rb();var n=c.useProxies,N=c.enforceActions;void 0!==n&&(bg.useProxies="always"===n?!0:"never"===n?!1:"undefined"!==typeof Proxy);"ifavailable"===n&&(bg.verifyProxies=!0);void 0!==N&&(n="always"===N?"always":"observed"===N,bg.enforceActions=n,bg.allowStateChanges=!0===n||"always"===n?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(ba){ba in
c&&(bg[ba]=!!c[ba])});bg.allowStateReads=!bg.observableRequiresReaction;c.reactionScheduler&&Kb(c.reactionScheduler)}function Bc(c,n,N,ba){var pa=Zy(n),Ba=$b(c,ba)[Gh];Ub();try{yr(pa).forEach(function(Ia){Ba.extend_(Ia,pa[Ia],N?Ia in N?N[Ia]:!0:!0)})}finally{mb()}return c}function fd(c){var n={name:c.name_};c.observing_&&0<c.observing_.length&&(n.dependencies=Array.from(new Set(c.observing_)).map(fd));return n}function Zc(){this.message="FLOW_CANCELLED"}function Ob(c){return!0===(null==c?void 0:c.isMobXFlow)}
function kc(c,n){return c?void 0!==n?ub(c)?c[Gh].values_.has(n):!1:ub(c)||!!c[Gh]||Zs(c)||Dr(c)||Bq(c):!1}function pc(c){if(ub(c))return c[Gh].ownKeys_();d(38)}function lc(c,n,N){c.set(n,N);return N}function Gc(c,n){if(null==c||"object"!==typeof c||c instanceof Date||!kc(c))return c;if(jz(c)||Bq(c))return Gc(c.get(),n);if(n.has(c))return n.get(c);if(db(c)){var N=lc(n,c,Array(c.length));c.forEach(function(Ia,hb){N[hb]=Gc(Ia,n)});return N}if(qo(c)){var ba=lc(n,c,new Set);c.forEach(function(Ia){ba.add(Gc(Ia,
n))});return ba}if(kn(c)){var pa=lc(n,c,new Map);c.forEach(function(Ia,hb){pa.set(hb,Gc(Ia,n))});return pa}var Ba=lc(n,c,{});pc(c).forEach(function(Ia){xq.propertyIsEnumerable.call(c,Ia)&&(Ba[Ia]=Gc(c[Ia],n))});return Ba}function kb(c,n){return Gc(c,new Map)}function Cb(){d("trace() is not available in production builds");for(var c=!1,n=arguments.length,N=Array(n),ba=0;ba<n;ba++)N[ba]=arguments[ba];"boolean"===typeof N[N.length-1]&&(c=N.pop());a:{switch(N.length){case 0:n=bg.trackingDerivation;break a;
case 1:n=ia(N[0]);break a;case 2:n=ia(N[0],N[1]);break a}n=void 0}if(!n)return d("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");n.isTracing_===ip.NONE&&console.log("[mobx.trace] '"+n.name_+"' tracing enabled");n.isTracing_=c?ip.BREAK:ip.LOG}function Nc(c,n){void 0===n&&(n=void 0);Ub();try{return c.apply(n)}finally{mb()}}function qb(c){return void 0!==c.interceptors_&&0<c.interceptors_.length}function Db(c,
n){var N=c.interceptors_||(c.interceptors_=[]);N.push(n);return K(function(){var ba=N.indexOf(n);-1!==ba&&N.splice(ba,1)})}function jb(c,n){var N=Va();try{var ba=[].concat(c.interceptors_||[]);c=0;for(var pa=ba.length;c<pa&&((n=ba[c](n))&&!n.type&&d(14),n);c++);return n}finally{bg.trackingDerivation=N}}function Fb(c){return void 0!==c.changeListeners_&&0<c.changeListeners_.length}function sc(c,n){var N=c.changeListeners_||(c.changeListeners_=[]);N.push(n);return K(function(){var ba=N.indexOf(n);-1!==
ba&&N.splice(ba,1)})}function Wb(c,n){var N=Va();if(c=c.changeListeners_){c=c.slice();for(var ba=0,pa=c.length;ba<pa;ba++)c[ba](n);bg.trackingDerivation=N}}function mc(c,n,N){var ba=$b(c,N)[Gh];Ub();try{var pa;null!=(pa=n)?pa:n=Ua(c);yr(n).forEach(function(Ba){return ba.make_(Ba,n[Ba])})}finally{mb()}return c}function Ya(c,n,N,ba){void 0===N&&(N="ObservableArray");void 0===ba&&(ba=!1);B();n=new $s(N,n,ba,!1);p(n.values_,Gh,n);N=new Proxy(n.values_,tz);n.proxy_=N;c&&c.length&&(ba=Sc(!0),n.spliceWithArray_(0,
0,c),bg.allowStateChanges=ba);return N}function ab(c,n){"function"===typeof Array.prototype[c]&&(Er[c]=n(c))}function Za(c){return function(){var n=this[Gh];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);return n[c].apply(n,arguments)}}function nb(c){return function(n,N){var ba=this,pa=this[Gh];pa.atom_.reportObserved();return pa.dehanceValues_(pa.values_)[c](function(Ba,Ia){return n.call(N,Ba,Ia,ba)})}}function zb(c){return function(){var n=this,N=this[Gh];N.atom_.reportObserved();N=N.dehanceValues_(N.values_);
var ba=arguments[0];arguments[0]=function(pa,Ba,Ia){return ba(pa,Ba,Ia,n)};return N[c].apply(N,arguments)}}function db(c){return O(c)&&uz(c[Gh])}function tb(c){if(R(c)||kn(c))return c;if(Array.isArray(c))return new Map(c);if(M(c)){var n=new Map,N;for(N in c)n.set(N,c[N]);return n}return d(21,c)}function $b(c,n){var N;if(aa(c,Gh))return c;var ba=null!=(N=null==n?void 0:n.name)?N:"ObservableObject";N=Av;var pa=new Map;ba=String(ba);var Ba;var Ia=n?null!=(Ba=n.defaultDecorator)?Ba:gb(n):void 0;n=new N(c,
pa,ba,Ia);P(c,Gh,n);return c}function vc(c){return zv[c]||(zv[c]={get:function(){return this[Gh].getObservablePropValue_(c)},set:function(n){return this[Gh].setObservablePropValue_(c,n)}})}function ub(c){return O(c)?Bz(c[Gh]):!1}function ra(c){return{enumerable:!1,configurable:!0,get:function(){return this[Gh].get_(c)},set:function(n){this[Gh].set_(c,n)}}}function la(c){if(c>at){for(var n=at;n<c+100;n++)Yk(bt.prototype,""+n,ra(n));at=c}}function f(c,n,N){return new bt(c,n,N)}function ia(c,n){if("object"===
typeof c&&null!==c){if(db(c))return void 0!==n&&d(23),c[Gh].atom_;if(qo(c))return c[Gh];if(kn(c)){if(void 0===n)return c.keysAtom_;var N=c.data_.get(n)||c.hasMap_.get(n);N||d(25,n,Ha(c));return N}if(ub(c)){if(!n)return d(26);(N=c[Gh].values_.get(n))||d(27,n,Ha(c));return N}if(Zs(c)||Bq(c)||Dr(c))return c}else if(V(c)&&Dr(c[Gh]))return c[Gh];d(28)}function Sa(c,n){c||d(29);if(void 0!==n)return Sa(ia(c,n));if(Zs(c)||Bq(c)||Dr(c)||kn(c)||qo(c))return c;if(c[Gh])return c[Gh];d(24,c)}function Ha(c,n){if(void 0!==
n)c=ia(c,n);else{if(Hc(c))return c.name;c=ub(c)||kn(c)||qo(c)?Sa(c):ia(c)}return c.name_}function ka(c,n,N){void 0===N&&(N=-1);return oa(c,n,N)}function oa(c,n,N,ba,pa){if(c===n)return 0!==c||1/c===1/n;if(null==c||null==n)return!1;if(c!==c)return n!==n;var Ba=typeof c;if("function"!==Ba&&"object"!==Ba&&"object"!=typeof n)return!1;Ba=Cv.call(c);if(Ba!==Cv.call(n))return!1;switch(Ba){case "[object RegExp]":case "[object String]":return""+c===""+n;case "[object Number]":return+c!==+c?+n!==+n:0===+c?
1/+c===1/n:+c===+n;case "[object Date]":case "[object Boolean]":return+c===+n;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(c)===Symbol.valueOf.call(n);case "[object Map]":case "[object Set]":0<=N&&N++}c=za(c);n=za(n);Ba="[object Array]"===Ba;if(!Ba){if("object"!=typeof c||"object"!=typeof n)return!1;var Ia=c.constructor,hb=n.constructor;if(Ia!==hb&&!(V(Ia)&&Ia instanceof Ia&&V(hb)&&hb instanceof hb)&&"constructor"in c&&"constructor"in n)return!1}if(0===N)return!1;
0>N&&(N=-1);ba=ba||[];pa=pa||[];for(Ia=ba.length;Ia--;)if(ba[Ia]===c)return pa[Ia]===n;ba.push(c);pa.push(n);if(Ba){Ia=c.length;if(Ia!==n.length)return!1;for(;Ia--;)if(!oa(c[Ia],n[Ia],N-1,ba,pa))return!1}else{Ba=Object.keys(c);Ia=Ba.length;if(Object.keys(n).length!==Ia)return!1;for(;Ia--;)if(hb=Ba[Ia],!aa(n,hb)||!oa(c[hb],n[hb],N-1,ba,pa))return!1}ba.pop();pa.pop();return!0}function za(c){return db(c)?c.slice():R(c)||kn(c)||T(c)||qo(c)?Array.from(c.entries()):c}function bb(c){c[Symbol.iterator]=Mb;
return c}function Mb(){return this}function uc(c,n){const N=new Set(n),ba=Object.values(c),pa=new Set(ba.filter(Ba=>N.has(Ba.toId)||N.has(Ba.fromId)));c=pa.size;for(n=-1;0!==n;)pa.forEach(Ba=>{Ba=Ba.fromId;for(const Ia of ba)Ia.fromId===Ba&&pa.add(Ia),Ia.toId===Ba&&pa.add(Ia)}),n=pa.size-c,c=pa.size;return Array.from(pa.values())}function dd(c,n,N,ba,pa,Ba,Ia,hb){if(pa=n.getBindingPoint(pa,Ba,Ia,hb))return{id:ba,type:"line",fromId:c.id,toId:n.id,handleId:N,point:te.toFixed(pa.point),distance:pa.distance}}
function xd(c,n){const N=c.getCenter(),ba=n.getCenter();var pa=Se();pa=qg(Ef({},Eq.defaultProps),{id:pa,type:Eq.id,parentId:c.props.parentId,point:N});c=dd(pa,c,"start",Se(),N,N,te.uni(te.sub(ba,N)),!1);n=dd(pa,n,"end",Se(),ba,ba,te.uni(te.sub(N,ba)),!1);return c&&n?(pa.handles.start.point=[0,0],pa.handles.end.point=te.sub(ba,N),pa.handles.start.bindingId=c.id,pa.handles.end.bindingId=n.id,[pa,[c,n]]):null}function oe(){return new Kz}function Ge(){return new WeakMap}function Oe(c){if(!c)return jt(null);
var n=c.constructor;if(n===Object)return c===Object.prototype?{}:jt(c);if(~Iz.call(n).indexOf("[native code]"))try{return new n}catch(N){}return jt(c)}function uf(c){var n="";c.global&&(n+="g");c.ignoreCase&&(n+="i");c.multiline&&(n+="m");c.unicode&&(n+="u");c.sticky&&(n+="y");return n}function rf(c){return c.flags}function Sf(c){c=Jz.call(c);return c.substring(8,c.length-1)}function of(c){return c[Symbol.toStringTag]||Sf(c)}function vg(c){return ow(c).concat(kt(c))}function Cg(c,n,N){for(var ba=
Rz(c),pa=0,Ba=ba.length,Ia,hb;pa<Ba;++pa)if(Ia=ba[pa],"callee"!==Ia&&"caller"!==Ia)if(hb=Pz(c,Ia)){hb.get||hb.set||(hb.value=N.copier(hb.value,N));try{Oz(n,Ia,hb)}catch(yb){n[Ia]=hb.value}}else n[Ia]=N.copier(c[Ia],N);return n}function Hg(c,n){var N=new n.Constructor;n.cache.set(c,N);c.forEach(function(ba,pa){N.set(pa,n.copier(ba,n))});return N}function Af(c,n){var N=Oe(n.prototype);n.cache.set(c,N);for(var ba in c)qw.call(c,ba)&&(N[ba]=n.copier(c[ba],n));return N}function Rg(c,n){var N=Oe(n.prototype);
n.cache.set(c,N);for(var ba in c)qw.call(c,ba)&&(N[ba]=n.copier(c[ba],n));ba=kt(c);for(var pa=0,Ba=ba.length,Ia;pa<Ba;++pa)Ia=ba[pa],Qz.call(c,Ia)&&(N[Ia]=n.copier(c[Ia],n));return N}function Ch(c,n){return new n.Constructor(c.valueOf())}function fh(c,n){return c}function ai(c,n){var N=new n.Constructor;n.cache.set(c,N);c.forEach(function(ba){N.add(n.copier(ba,n))});return N}function oi(c){function n(Ba,Ia){Ia.prototype=Ia.Constructor=void 0;if(!Ba||"object"!==typeof Ba)return Ba;if(Ia.cache.has(Ba))return Ia.cache.get(Ba);
Ia.prototype=Ba.__proto__||Tz(Ba);Ia.Constructor=Ia.prototype&&Ia.prototype.constructor;if(!Ia.Constructor||Ia.Constructor===Object)return pa(Ba,Ia);if(Sz(Ba))return ba(Ba,Ia);var hb=N[Nz(Ba)];return hb?hb(Ba,Ia):"function"===typeof Ba.then?Ba:pa(Ba,Ia)}c=lt({},sw,c);var N={Arguments:c.object,Array:c.array,ArrayBuffer:c.arrayBuffer,Blob:c.blob,Boolean:Ch,DataView:c.dataView,Date:c.date,Error:c.error,Float32Array:c.arrayBuffer,Float64Array:c.arrayBuffer,Int8Array:c.arrayBuffer,Int16Array:c.arrayBuffer,
Int32Array:c.arrayBuffer,Map:c.map,Number:Ch,Object:c.object,Promise:fh,RegExp:c.regExp,Set:c.set,String:Ch,WeakMap:fh,WeakSet:fh,Uint8Array:c.arrayBuffer,Uint8ClampedArray:c.arrayBuffer,Uint16Array:c.arrayBuffer,Uint32Array:c.arrayBuffer,Uint64Array:c.arrayBuffer},ba=N.Array,pa=N.Object;return function(Ba){return n(Ba,{Constructor:void 0,cache:Lz(),copier:n,prototype:void 0})}}function di(c,n){return(0,Xz.default)(c,n,{arrayMerge:(N,ba,pa)=>ba})}function Ui(c,n,N,ba=!1){const [pa,Ba]=n,[Ia,hb]=N;
c=Ia+(c-pa)/(Ba-pa)*(hb-Ia);return ba?Ia<hb?Math.max(Math.min(c,hb),Ia):Math.max(Math.min(c,Ia),hb):c}function Kh(c,n){return new Promise((N,ba)=>{if("video"===n){const pa=document.createElement("video");pa.addEventListener("loadedmetadata",function(){N([this.videoWidth,this.videoHeight])},!1);pa.src=c}else if("image"===n){const pa=new Image;pa.onload=()=>N([pa.width,pa.height]);pa.src=c;pa.onerror=Ba=>ba(Ba)}else"pdf"===n&&N([595,842])})}function xf(c){return Object.values(Ka).includes(c)}function Pe(c,
n){return xf(c)||null==c?`var(--ls-wb-${n}-color-${c?c:"default"})`:c}function Xf(){var c;null==(c=document.getElementById("__textLabelMeasure"))||c.remove();c=document.createElement("pre");c.id="__textLabelMeasure";Object.assign(c.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",
font:"var(--ls-font-family)"});c.tabIndex=-1;document.body.appendChild(c);return c}function pg(c,n,N=0){var ba,pa,Ba;if(!c)return[16,32];let Ia;Ia="string"===typeof n?n:`${null!=(ba=n.fontStyle)?ba:"normal"} ${null!=(pa=n.fontVariant)?pa:"normal"} ${null!=(Ba=n.fontWeight)?Ba:"normal"} ${n.fontSize}px/${n.fontSize*n.lineHeight}px ${n.fontFamily}`;if(!mt.has(`${c}-${Ia}-${N}`)){if(!on)return[10,10];on.parentNode||document.body.appendChild(on);on.innerHTML=`${c}&#8203;`;on.style.font=Ia;on.style.padding=
N+"px";n=on.getBoundingClientRect();mt.set(`${c}-${Ia}-${N}`,[Math.ceil(n.width||1),Math.ceil(n.height||1)])}return mt.get(`${c}-${Ia}-${N}`)}function mg(c){try{if("string"!==typeof c||!xc.test(c))throw TypeError("Invalid UUID");let n;const N=new Uint8Array(16);N[0]=(n=parseInt(c.slice(0,8),16))>>>24;N[1]=n>>>16&255;N[2]=n>>>8&255;N[3]=n&255;N[4]=(n=parseInt(c.slice(9,13),16))>>>8;N[5]=n&255;N[6]=(n=parseInt(c.slice(14,18),16))>>>8;N[7]=n&255;N[8]=(n=parseInt(c.slice(19,23),16))>>>8;N[9]=n&255;N[10]=
(n=parseInt(c.slice(24,36),16))/1099511627776&255;N[11]=n/4294967296&255;N[12]=n>>>24&255;N[13]=n>>>16&255;N[14]=n>>>8&255;N[15]=n&255;return!0}catch(n){return!1}}function sg(c,n=0,N){let ba;return function(...pa){null==N||N(...pa);clearTimeout(ba);ba=setTimeout(()=>c.apply(pa),n)}}function Vb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function hc(){var c,n,N;return(null==(N=null==(n=null==(c=null==window?void 0:window.logseq)?void 0:c.api)?void 0:n.get_state_from_store)?void 0:
N.call(n,"ui/developer-mode?"))||!1}function Kc(c){return!!c}function Dc(c=0){return new Promise(n=>setTimeout(n,c))}function id(c="noid"){nt[c]||(nt[c]=vw.createContext({}));return nt[c]}function vd(c="noid"){return vw.useContext(id(c))}function $d(c){const {callbacks:n}=vd(),N=uw.useRef(-1);return uw.useMemo(()=>{const ba=pa=>{var Ba,Ia;const {order:hb=0}=pa;if(!hb){var yb=pa.target;yb.removeEventListener("pointerup",ba);yb.releasePointerCapture(pa.pointerId);null==(Ba=n.onPointerUp)||Ba.call(n,
{type:"selection",handle:c,order:hb},pa);Ba=Date.now();yb=Ba-N.current;300<yb?N.current=Ba:300>=yb&&(null==(Ia=n.onDoubleClick)||Ia.call(n,{type:"selection",handle:c,order:hb},pa),N.current=-1);pa.order=hb+1}};return{onPointerDown:pa=>{var Ba;const {order:Ia=0}=pa;if(!Ia){var hb=ee(pa.currentTarget);hb.setPointerCapture(pa.pointerId);hb.addEventListener("pointerup",ba);null==(Ba=n.onPointerDown)||Ba.call(n,{type:"selection",handle:c,order:Ia},pa);pa.order=Ia+1}},onPointerMove:pa=>{var Ba;const {order:Ia=
0}=pa;Ia||(null==(Ba=n.onPointerMove)||Ba.call(n,{type:"selection",handle:c,order:Ia},pa),pa.order=Ia+1)},onPointerEnter:pa=>{var Ba;const {order:Ia=0}=pa;Ia||(null==(Ba=n.onPointerEnter)||Ba.call(n,{type:"selection",handle:c,order:Ia},pa),pa.order=Ia+1)},onPointerLeave:pa=>{var Ba;const {order:Ia=0}=pa;Ia||(null==(Ba=n.onPointerLeave)||Ba.call(n,{type:"selection",handle:c,order:Ia},pa),pa.order=Ia+1)},onKeyDown:pa=>{var Ba;null==(Ba=n.onKeyDown)||Ba.call(n,{type:"selection",handle:c,order:-1},pa)},
onKeyUp:pa=>{var Ba;null==(Ba=n.onKeyUp)||Ba.call(n,{type:"selection",handle:c,order:-1},pa)}}},[n])}function ee(c){var n;if(null==(n=c.namespaceURI)?0:n.endsWith("svg")){if(c.parentElement)return ee(c.parentElement);throw Error("Could not find a parent element of an HTML type!");}return c}function xe(c,n,N){const ba=Gq.useRef(!1),pa=Gq.useCallback(()=>{var Ba;if(ba.current){const Ia=null==(Ba=c.current)?void 0:Ba.getBoundingClientRect();Ia&&(Ba={minX:Ia.left,maxX:Ia.left+Ia.width,minY:Ia.top,maxY:Ia.top+
Ia.height,width:Ia.width,height:Ia.height},n.updateBounds(Ba),null==N||N(Ba))}else ba.current=!0},[c,N]);Gq.useEffect(()=>{const Ba=c.current?$z(c.current):document,Ia=sg(pa,100);Ba.addEventListener("scroll",Ia);window.addEventListener("resize",Ia);return()=>{Ba.removeEventListener("scroll",Ia);window.removeEventListener("resize",Ia)}},[]);Gq.useLayoutEffect(()=>{const Ba=new ResizeObserver(Ia=>{Ia[0].contentRect&&pa()});c.current&&Ba.observe(c.current);return()=>{Ba.disconnect()}},[c]);Gq.useEffect(()=>
{pa();setTimeout(()=>{var Ba,Ia;null==(Ia=null==(Ba=c.current)?void 0:Ba.querySelector(".tl-canvas"))||Ia.focus()})},[c])}function Ye(c,n){return Object.keys(n).reduce((N,ba)=>{const pa=n[ba];return pa?N+`${`--${c}-${ba}`}: ${pa};
`:N},"")}function Td(c,n,N=".logseq-tldraw"){ot.useLayoutEffect(()=>{const ba=document.createElement("style"),pa=Ye(c,n);ba.setAttribute("id",`${c}-theme`);ba.setAttribute("data-selector",N);ba.innerHTML=`
        ${N} {
          ${pa}
        }
      `;document.head.appendChild(ba);return()=>{ba&&document.head.contains(ba)&&document.head.removeChild(ba)}},[c,n,N])}function Ce(c,n){ot.useLayoutEffect(()=>{if(pt.get(c))return()=>{};const N=document.createElement("style");N.innerHTML=n;N.setAttribute("id",c);document.head.appendChild(N);pt.set(c,N);return()=>{N&&document.head.contains(N)&&(document.head.removeChild(N),pt.delete(c))}},[c,n])}function De(c,n){const N=ot.useMemo(()=>Ef(Ef({},aA),c),[c]);Td("tl",N,n);Ce("tl-canvas",bA)}function We(c=
"noid"){qt[c]||(qt[c]=xw.createContext({}));return qt[c]}function Ze(c="noid"){return xw.useContext(We(c))}function cg(){const c=Ze(),{callbacks:n}=vd(),N=ww.useRef(-1);return ww.useMemo(()=>({onPointerDown:ba=>{var pa,Ba,Ia;if(!c.settings.penMode||"pen"===ba.pointerType&&ba.isPrimary){var {order:hb=0}=ba;hb||null==(pa=ba.currentTarget)||pa.setPointerCapture(ba.pointerId);ba.isPrimary&&(null==(Ba=n.onPointerDown)||Ba.call(n,{type:"canvas",order:hb},ba),pa=Date.now(),Ba=pa-N.current,300<Ba?N.current=
pa:300>=Ba&&(null==(Ia=n.onDoubleClick)||Ia.call(n,{type:"canvas",order:hb},ba),N.current=-1))}},onPointerMove:ba=>{var pa;if(!c.settings.penMode||"pen"===ba.pointerType&&ba.isPrimary){var {order:Ba=0}=ba;null==(pa=n.onPointerMove)||pa.call(n,{type:"canvas",order:Ba},ba)}},onPointerUp:ba=>{var pa,Ba;if(!c.settings.penMode||"pen"===ba.pointerType&&ba.isPrimary){var {order:Ia=0}=ba;Ia||null==(pa=ba.currentTarget)||pa.releasePointerCapture(ba.pointerId);null==(Ba=n.onPointerUp)||Ba.call(n,{type:"canvas",
order:Ia},ba)}},onPointerEnter:ba=>{var pa;if(!c.settings.penMode||"pen"===ba.pointerType&&ba.isPrimary){var {order:Ba=0}=ba;null==(pa=n.onPointerEnter)||pa.call(n,{type:"canvas",order:Ba},ba)}},onPointerLeave:ba=>{var pa;if(!c.settings.penMode||"pen"===ba.pointerType&&ba.isPrimary){var {order:Ba=0}=ba;null==(pa=n.onPointerLeave)||pa.call(n,{type:"canvas",order:Ba},ba)}},onDrop:ba=>Zh(this,null,function*(){ba.preventDefault();"clientX"in ba&&c.drop(ba.dataTransfer,[ba.clientX,ba.clientY])}),onDragOver:ba=>
{ba.preventDefault()},onTouchEnd:ba=>{let pa=c.selectedTool.id;"pencil"!==pa&&"highlighter"!==pa||ba.preventDefault()}}),[n])}function Ee(c,n,N){return 0===n||Infinity===Math.abs(n)?Math.pow(c,5*N):c*n*N/(n+N*c)}function Lf(c,n,N,ba=.15){return 0===ba?Math.max(n,Math.min(c,N)):c<n?-Ee(n-c,N-n,ba)+n:c>N?+Ee(c-N,N-n,ba)+N:c}function Qf(c,[n,N],[ba,pa]){const [[Ba,Ia],[hb,yb]]=c;return[Lf(n,Ba,Ia,ba),Lf(N,hb,yb,pa)]}function gf(c,n,N){n in c?Object.defineProperty(c,n,{value:N,enumerable:!0,configurable:!0,
writable:!0}):c[n]=N;return c}function Kg(c,n){var N=Object.keys(c);if(Object.getOwnPropertySymbols){var ba=Object.getOwnPropertySymbols(c);n&&(ba=ba.filter(function(pa){return Object.getOwnPropertyDescriptor(c,pa).enumerable}));N.push.apply(N,ba)}return N}function vf(c){for(var n=1;n<arguments.length;n++){var N=null!=arguments[n]?arguments[n]:{};n%2?Kg(Object(N),!0).forEach(function(ba){gf(c,ba,N[ba])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(N)):
Kg(Object(N)).forEach(function(ba){Object.defineProperty(c,ba,Object.getOwnPropertyDescriptor(N,ba))})}return c}function Vf(c){return c?c[0].toUpperCase()+c.slice(1):""}function Dh(c=!1,n){return c&&!cA.includes(n)}function rg(c,n="",N=!1){const ba=yw[c];n=ba?ba[n]||n:n;return"on"+Vf(c)+Vf(n)+(Dh(N,n)?"Capture":"")}function Kf(c){c=c.substring(2).toLowerCase();const n=!!~c.indexOf("passive");n&&(c=c.replace("passive",""));var N=dA.includes(c)?"capturecapture":"capture";(N=!!~c.indexOf(N))&&(c=c.replace("capture",
""));return{device:c,capture:N,passive:n}}function Nh(c,n=""){const N=yw[c];return c+(N?N[n]||n:n)}function Mg(c){return"touches"in c?"touch":"pointerType"in c?c.pointerType:"mouse"}function ei(c){return Array.from(c.touches).filter(n=>{var N,ba;return n.target===c.currentTarget||(null===(N=c.currentTarget)||void 0===N?void 0:null===(ba=N.contains)||void 0===ba?void 0:ba.call(N,n.target))})}function gh(c){return"touches"in c?("touchend"===c.type||"touchcancel"===c.type?c.changedTouches:c.targetTouches)[0]:
c}function pf(c,n){const N=n.clientX-c.clientX,ba=n.clientY-c.clientY;return{angle:-(180*Math.atan2(N,ba))/Math.PI,distance:Math.hypot(N,ba),origin:[(n.clientX+c.clientX)/2,(n.clientY+c.clientY)/2]}}function Hb(c){return ei(c).map(n=>n.identifier)}function oc(c,n){const [N,ba]=Array.from(c.touches).filter(pa=>n.includes(pa.identifier));return pf(N,ba)}function Vc(c){const n=gh(c);return"touches"in c?n.identifier:n.pointerId}function kd(c){c=gh(c);return[c.clientX,c.clientY]}function ze(c){let {deltaX:n,
deltaY:N,deltaMode:ba}=c;1===ba?(n*=40,N*=40):2===ba&&(n*=800,N*=800);return[n,N]}function de(c,...n){return"function"===typeof c?c(...n):c}function Ib(){}function ac(...c){return 0===c.length?Ib:1===c.length?c[0]:function(){let n;for(const N of c)n=N.apply(this,arguments)||n;return n}}function Xc([c,n],N){c=Math.abs(c);n=Math.abs(n);if(c>n&&c>N)return"x";if(n>c&&n>N)return"y"}function rd(c){const [n,N]=c.overflow,[ba,pa]=c._delta,[Ba,Ia]=c._direction;if(0>n&&0<ba&&0>Ba||0<n&&0>ba&&0<Ba)c._movement[0]=
c._movementBound[0];if(0>N&&0<pa&&0>Ia||0<N&&0>pa&&0<Ia)c._movement[1]=c._movementBound[1]}function Ad(c){rt.set(c.key,c.engine);st.set(c.key,c.resolver)}function Sd(c={},n){const N={};for(const [ba,pa]of Object.entries(n))switch(typeof pa){case "function":N[ba]=pa.call(N,c[ba],ba,c);break;case "object":N[ba]=Sd(c[ba],pa);break;case "boolean":pa&&(N[ba]=c[ba])}return N}function je(c,n,N={}){const {target:ba,eventOptions:pa,window:Ba,enabled:Ia,transform:hb}=c;var yb=AA;if(null==c)c={};else{if(null==
c)var Yb={};else{Yb={};var rc=Object.keys(c),Ac;for(Ac=0;Ac<rc.length;Ac++){var Yc=rc[Ac];0<=yb.indexOf(Yc)||(Yb[Yc]=c[Yc])}}if(Object.getOwnPropertySymbols)for(Ac=Object.getOwnPropertySymbols(c),Yc=0;Yc<Ac.length;Yc++)rc=Ac[Yc],0<=yb.indexOf(rc)||Object.prototype.propertyIsEnumerable.call(c,rc)&&(Yb[rc]=c[rc]);c=Yb}N.shared=Sd({target:ba,eventOptions:pa,window:Ba,enabled:Ia,transform:hb},zA);if(n){var ud=st.get(n);N[n]=Sd(vf({shared:N.shared},c),ud)}else for(ud in c)(n=st.get(ud))&&(N[ud]=Sd(vf({shared:N.shared},
c[ud]),n));return N}function ge(c,n){c.gestures.add(n);c.gestureEventStores[n]=new Gw(c,n);c.gestureTimeoutStores[n]=new BA}function Be(c,n,N,ba,pa,Ba){if(c.has(N)&&rt.has(ba)){var Ia=N+"Start",hb=N+"End";pa[ba]=yb=>{let Yb=void 0;if(yb.first&&Ia in n)n[Ia](yb);N in n&&(Yb=n[N](yb));if(yb.last&&hb in n)n[hb](yb);return Yb};Ba[ba]=Ba[ba]||{}}}function Pd(c,n={},N,ba){const pa=tt.default.useMemo(()=>new CA(c),[]);pa.applyHandlers(c,ba);pa.applyConfig(n,N);tt.default.useEffect(pa.effect.bind(pa));tt.default.useEffect(()=>
pa.clean.bind(pa),[]);if(void 0===n.target)return pa.bind.bind(pa)}function ue(c){c.forEach(Ad);return function(n,N){N=N||{};const ba={},pa={},Ba=new Set;for(let Yc in n)DA.test(Yc)?(Ba.add(RegExp.lastMatch),pa[Yc]=n[Yc]):ba[Yc]=n[Yc];const [Ia,hb,yb]=[pa,ba,Ba];n={};Be(yb,Ia,"onDrag","drag",n,N);Be(yb,Ia,"onWheel","wheel",n,N);Be(yb,Ia,"onScroll","scroll",n,N);Be(yb,Ia,"onPinch","pinch",n,N);Be(yb,Ia,"onMove","move",n,N);Be(yb,Ia,"onHover","hover",n,N);const {handlers:Yb,nativeHandlers:rc,config:Ac}=
{handlers:n,config:N,nativeHandlers:hb};return Pd(Yb,Ac,void 0,rc)}}function Ne(c,n){return ue([tA,wA,xA,yA,vA,uA])(c,n||{})}function xb(c){const {viewport:n,inputs:N,callbacks:ba}=vd(),pa=Jr.useRef(void 0),Ba=Jr.useRef([0,0]),Ia=Jr.useRef(0),hb=Jr.useMemo(()=>({onWheel:yb=>{var Yb;({event:yb}=yb);yb.preventDefault();const {deltaY:rc,deltaX:Ac}=yb;var Yc=0;if(yb.ctrlKey||yb.metaKey){Yc=Math.sign(yb.deltaY);let Qd=rc;10<Math.abs(yb.deltaY)&&(Qd=10*Yc);Yc=Qd}const [ud,pd,Gd]=[Ac,rc,Yc];"pinching"===
N.state||Ia.current>=yb.timeStamp||(Ia.current=yb.timeStamp,(yb.altKey||yb.ctrlKey||yb.metaKey)&&0===yb.buttons?(Yc=n.bounds,yb=null!=(Yb=N.currentScreenPoint)?Yb:[Yc.width/2,Yc.height/2],Yb=n.camera.zoom,n.onZoom(yb,Yb-Gd/100*Yb)):(Yb=te.mul(yb.shiftKey&&!Vb()?[pd,0]:[ud,pd],.8),te.isEqual(Yb,[0,0])||n.panCamera(Yb)))},onPinchStart:({event:yb,delta:Yb,offset:rc,origin:Ac})=>{var Yc;const ud=c.current;yb instanceof WheelEvent||!(yb.target===ud||null!=ud&&ud.contains(yb.target))||(null==(Yc=ba.onPinchStart)||
Yc.call(ba,{type:"canvas",order:0,delta:[...Yb,rc[0]],offset:rc,point:te.sub(Ac,N.containerOffset)},yb),pa.current=Ac,Ba.current=[0,0])},onPinchEnd:({event:yb,offset:Yb,origin:rc})=>{var Ac;const Yc=c.current;yb instanceof WheelEvent||!(yb.target===Yc||null!=Yc&&Yc.contains(yb.target))||"pinching"!==N.state||(null==(Ac=ba.onPinchEnd)||Ac.call(ba,{type:"canvas",order:0,delta:[0,0,Yb[0]],offset:Yb,point:te.sub(rc,N.containerOffset)},yb),Ba.current=[0,0])},onPinch:({event:yb,offset:Yb,origin:rc})=>{var Ac,
Yc=c.current;if(!(yb instanceof WheelEvent)&&(yb.target===Yc||null!=Yc&&Yc.contains(yb.target))){pa.current||(pa.current=rc);Yc=te.sub(pa.current,rc);var ud=te.sub(Yc,Ba.current);null==(Ac=ba.onPinch)||Ac.call(ba,{type:"canvas",order:0,delta:[...ud,Yb[0]],offset:Yb,point:te.sub(rc,N.containerOffset)},yb);Ba.current=Yc}}}),[ba]);Ne(hb,{target:c,eventOptions:{passive:!1},pinch:{from:[n.camera.zoom,n.camera.zoom],scaleBounds:()=>({from:n.camera.zoom,max:xl.maxZoom,min:xl.minZoom})}})}function yc(c,n,
N,ba){ut.useLayoutEffect(()=>{c.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[n.minX,n.minY,N,n.rotation]);ut.useLayoutEffect(()=>{const pa=c.current;pa.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;pa.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);ut.useLayoutEffect(()=>{const pa=c.current;void 0!==ba&&(pa.style.zIndex=ba.toString())},[ba])}function wc(c,n){const {onPersist:N,onError:ba,onMount:pa,onCreateAssets:Ba,onCreateShapes:Ia,onDeleteAssets:hb,onDeleteShapes:yb,
onDrop:Yb,onPaste:rc,onCopy:Ac,onCanvasDBClick:Yc}=n;Iw.useLayoutEffect(()=>{const ud=[];if(c)return window.tlapps=window.tlapps||{},window.tlapps[c.uuid]=c,pa&&pa(c,null),()=>{ud.forEach(pd=>pd());window.tlapps&&delete window.tlapps[c.uuid]}},[c]);Iw.useLayoutEffect(()=>{const ud=[];N&&ud.push(c.subscribe("persist",N));ba&&ud.push(c.subscribe("error",ba));Ia&&ud.push(c.subscribe("create-shapes",Ia));Ba&&ud.push(c.subscribe("create-assets",Ba));yb&&ud.push(c.subscribe("delete-shapes",yb));hb&&ud.push(c.subscribe("delete-assets",
hb));Yb&&ud.push(c.subscribe("drop",Yb));rc&&ud.push(c.subscribe("paste",rc));Ac&&ud.push(c.subscribe("copy",Ac));Yc&&ud.push(c.subscribe("canvas-dbclick",Yc));return()=>ud.forEach(pd=>pd())},[c,N,ba])}function Uc(c){if("app"in c)return c.app;const [n]=Jw.useState(()=>new Yz(c.model,c.Shapes,c.Tools,c.readOnly));Jw.useLayoutEffect(()=>()=>{n.dispose()},[n]);return n}function jd(c,n){EA.useEffect(()=>{"model"in n&&n.model&&c.loadDocumentModel(n.model)},[n.model])}function wd(c){const n=vd(),{viewport:{bounds:N}}=
n;FA.useEffect(()=>{const ba=Ia=>{Ia.preventDefault()},pa=Ia=>{if(0!==Ia.touches.length){var hb=Ia.touches[0].pageX,yb=Ia.touches[0].radiusX||0;(10>hb-yb||hb+yb>N.width-10)&&Ia.preventDefault()}},Ba=c.current;if(!Ba)return()=>{};Ba.addEventListener("touchstart",ba,{passive:!0});Ba.addEventListener("gestureend",ba,{passive:!0});Ba.addEventListener("gesturechange",ba,{passive:!0});Ba.addEventListener("gesturestart",ba,{passive:!0});Ba.addEventListener("touchstart",pa,{passive:!0});return()=>{Ba&&(Ba.removeEventListener("touchstart",
ba),Ba.removeEventListener("gestureend",ba),Ba.removeEventListener("gesturechange",ba),Ba.removeEventListener("gesturestart",ba),Ba.removeEventListener("touchstart",pa))}},[c,N.width])}function Dd(c,n){const {inputs:N,callbacks:ba}=vd();return GA.useMemo(()=>({onPointerDown:pa=>{var Ba,Ia;const {order:hb=0}=pa;hb||null==(Ba=pa.currentTarget)||Ba.setPointerCapture(pa.pointerId);Ba=c.props.handles[n];null==(Ia=ba.onPointerDown)||Ia.call(ba,{type:"handle",shape:c,handle:Ba,id:n,order:hb},pa);pa.order=
hb+1},onPointerMove:pa=>{var Ba;const {order:Ia=0}=pa,hb=c.props.handles[n];null==(Ba=ba.onPointerMove)||Ba.call(ba,{type:"handle",shape:c,handle:hb,id:n,order:Ia},pa);pa.order=Ia+1},onPointerUp:pa=>{var Ba,Ia;const {order:hb=0}=pa;hb||null==(Ba=pa.currentTarget)||Ba.releasePointerCapture(pa.pointerId);Ba=c.props.handles[n];null==(Ia=ba.onPointerUp)||Ia.call(ba,{type:"handle",shape:c,handle:Ba,id:n,order:hb},pa);pa.order=hb+1},onPointerEnter:pa=>{var Ba;const {order:Ia=0}=pa,hb=c.props.handles[n];
null==(Ba=ba.onPointerEnter)||Ba.call(ba,{type:"handle",shape:c,handle:hb,id:n,order:Ia},pa);pa.order=Ia+1},onPointerLeave:pa=>{var Ba;const {order:Ia=0}=pa,hb=c.props.handles[n];null==(Ba=ba.onPointerLeave)||Ba.call(ba,{type:"handle",shape:c,handle:hb,id:n,order:Ia},pa);pa.order=Ia+1},onKeyUp:pa=>{var Ba;const Ia=c.props.handles[n];null==(Ba=ba.onKeyUp)||Ba.call(ba,{type:"handle",shape:c,handle:Ia,id:n,order:-1},pa)},onKeyDown:pa=>{var Ba;const Ia=c.props.handles[n];null==(Ba=ba.onKeyDown)||Ba.call(ba,
{type:"handle",shape:c,handle:Ia,id:n,order:-1},pa)}}),[c.id,N,ba])}function Cd(c,n,N=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${n})${N?" scale(-1,-1) translate(0, -32)":""}'>`+c.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Vd(c,n,N=0){HA.useEffect(()=>{const ba=c.current;ba&&(ba.style.cursor=IA[n](Fh.radiansToDegrees(N)))},
[n,N])}function ae(c){const {viewport:n}=vd(),N=Ze();JA.useLayoutEffect(()=>ic(()=>{const ba=sg(()=>{var pa;null==(pa=c.current)||pa.style.setProperty("--tl-zoom",n.camera.zoom.toString())},200);"pinching"!==N.inputs.state&&null!=n.camera.zoom&&ba()}),[])}function ke(c,n=0){const [N,ba]=(0,Kw.useState)(c);(0,Kw.useEffect)(()=>{let pa=!1;const Ba=setTimeout(()=>{pa||ba(c)},n);return()=>{pa=!0;clearTimeout(Ba)}},[c,n]);return N}function re(){const c=Ze();Lw.useEffect(()=>{Qc(()=>Ef({},c.viewport.camera),
()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+c.currentPageId,JSON.stringify(c.viewport.camera))})},[c.viewport.camera]);Lw.useEffect(()=>{var n;const N=JSON.parse(null!=(n=window.sessionStorage.getItem("logseq.tldraw.camera:"+c.currentPageId))?n:"null");N?c.viewport.update(N):c.selectedIds.size?c.api.zoomToSelection():c.api.zoomToFit()},[c])}function Ie(c){c()}function Ke(c){return fd(ia(c,void 0))}function Ae(c){return{reaction:c,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+
LA}}function Je(c){var n=new Map,N=1,ba=new c(function(pa){var Ba=n.get(pa);Ba&&(Ba.reaction.dispose(),n.delete(pa))});return{addReactionToTrack:function(pa,Ba,Ia){var hb=N++;ba.register(Ia,hb,pa);pa.current=Ae(Ba);pa.current.finalizationRegistryCleanupToken=hb;n.set(hb,pa.current);return pa.current},recordReactionAsCommitted:function(pa){ba.unregister(pa);pa.current&&pa.current.finalizationRegistryCleanupToken&&n.delete(pa.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function Ue(){function c(){void 0===ba&&(ba=setTimeout(n,1E4))}function n(){ba=void 0;var pa=Date.now();N.forEach(function(Ba){var Ia=Ba.current;Ia&&pa>=Ia.cleanAt&&(Ia.reaction.dispose(),Ba.current=null,N.delete(Ba))});0<N.size&&c()}var N=new Set,ba;return{addReactionToTrack:function(pa,Ba,Ia){pa.current=Ae(Ba);N.add(pa);c();return pa.current},recordReactionAsCommitted:function(pa){N.delete(pa)},forceCleanupTimerToRunNowForTests:function(){ba&&(clearTimeout(ba),
n())},resetCleanupScheduleForTests:function(){var pa;if(0<N.size){try{for(var Ba=MA(N),Ia=Ba.next();!Ia.done;Ia=Ba.next()){var hb=Ia.value,yb=hb.current;yb&&(yb.reaction.dispose(),hb.current=null)}}catch(rc){var Yb={error:rc}}finally{try{Ia&&!Ia.done&&(pa=Ba.return)&&pa.call(Ba)}finally{if(Yb)throw Yb.error;}}N.clear()}ba&&(clearTimeout(ba),ba=void 0)}}}function tf(){return new PA}function Uf(c,n){void 0===n&&(n="observed");var N=Ow(Jq.default.useState(tf),1)[0],ba=Ow(Jq.default.useState(),2)[1],
pa=Jq.default.useRef(null);if(!pa.current)var Ba=new jp("observer".concat(n),function(){Ia.mounted?ba([]):Ia.changedBeforeMount=!0}),Ia=NA(pa,Ba,N);N=pa.current.reaction;Jq.default.useDebugValue(N,Ke);Jq.default.useEffect(function(){OA(pa);pa.current?(pa.current.mounted=!0,pa.current.changedBeforeMount&&(pa.current.changedBeforeMount=!1,ba([]))):(pa.current={reaction:new jp("observer".concat(n),function(){ba([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},ba([]));return function(){pa.current.reaction.dispose();
pa.current=null}},[]);var hb,yb;N.track(function(){try{hb=c()}catch(Yb){yb=Yb}});if(yb)throw yb;return hb}function he(c,n){var N;if(Rw&&c.$$typeof===Rw)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");n=null!==(N=null===n||void 0===n?void 0:n.forwardRef)&&void 0!==N?N:!1;var ba=c,pa=c.displayName||c.name;if(Qw&&c.$$typeof===Qw&&(n=!0,ba=c.render,"function"!==
typeof ba))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");N=function(Ba,Ia){return Uf(function(){return ba(Ba,Ia)},pa)};""!==pa&&(N.displayName=pa);c.contextTypes&&(N.contextTypes=c.contextTypes);n&&(N=(0,sp.forwardRef)(N));N=(0,sp.memo)(N);xg(c,N);return N}function xg(c,n){Object.keys(c).forEach(function(N){QA[N]||Object.defineProperty(n,N,Object.getOwnPropertyDescriptor(c,N))})}function lg(c){var n=c.render;c=c.children||n;return"function"!==typeof c?null:Uf(c)}
function fg(c){const n=Ze(),{callbacks:N}=vd(),ba=Sw.useRef(!1);Sw.useEffect(()=>{const pa=yb=>{var Yb,rc;if(null==(Yb=c.current)?0:Yb.contains(document.activeElement))null==(rc=N.onKeyDown)||rc.call(N,{type:"canvas",order:-1},yb),ba.current=yb.shiftKey},Ba=yb=>{var Yb,rc;if(null==(Yb=c.current)?0:Yb.contains(document.activeElement))null==(rc=N.onKeyUp)||rc.call(N,{type:"canvas",order:-1},yb),ba.current=yb.shiftKey},Ia=yb=>{var Yb,rc,Ac;!n.editingShape&&(null==(Yb=c.current)?0:Yb.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(Ac=null==(rc=document.activeElement)?void 0:rc.tagName)?Ac:"")&&(yb.preventDefault(),n.paste(yb,ba.current))},hb=yb=>{var Yb,rc,Ac;!n.editingShape&&0<n.selectedShapes.size&&(null==(Yb=c.current)?0:Yb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(Ac=null==(rc=document.activeElement)?void 0:rc.tagName)?Ac:"")&&(yb.preventDefault(),n.copy())};window.addEventListener("keydown",pa);window.addEventListener("keyup",Ba);document.addEventListener("paste",
Ia);document.addEventListener("copy",hb);return()=>{window.removeEventListener("keydown",pa);window.removeEventListener("keyup",Ba);document.removeEventListener("paste",Ia);document.removeEventListener("copy",hb)}},[])}function Ig(c){const n=Ze(),{inputs:N,callbacks:ba}=vd(),pa=Xw.useRef(-1);return Xw.useMemo(()=>({onPointerDown:Ba=>{var Ia,hb;if(!n.settings.penMode||"pen"===Ba.pointerType&&Ba.isPrimary){var {order:yb=0}=Ba;yb||null==(Ia=Ba.currentTarget)||Ia.setPointerCapture(Ba.pointerId);null==
(hb=ba.onPointerDown)||hb.call(ba,{type:"shape",shape:c,order:yb},Ba);Ba.order=yb+1}},onPointerMove:Ba=>{var Ia;if(!n.settings.penMode||"pen"===Ba.pointerType&&Ba.isPrimary){var {order:hb=0}=Ba;null==(Ia=ba.onPointerMove)||Ia.call(ba,{type:"shape",shape:c,order:hb},Ba);Ba.order=hb+1}},onPointerUp:Ba=>{var Ia,hb,yb;if(!n.settings.penMode||"pen"===Ba.pointerType&&Ba.isPrimary){var {order:Yb=0}=Ba;Yb||null==(Ia=Ba.currentTarget)||Ia.releasePointerCapture(Ba.pointerId);null==(hb=ba.onPointerUp)||hb.call(ba,
{type:"shape",shape:c,order:Yb},Ba);Ia=Date.now();hb=Ia-pa.current;300<hb?pa.current=Ia:300>=hb&&(null==(yb=ba.onDoubleClick)||yb.call(ba,{type:"shape",shape:c,order:Yb},Ba),pa.current=-1);Ba.order=Yb+1}},onPointerEnter:Ba=>{var Ia;if(!n.settings.penMode||"pen"===Ba.pointerType&&Ba.isPrimary){var {order:hb=0}=Ba;null==(Ia=ba.onPointerEnter)||Ia.call(ba,{type:"shape",shape:c,order:hb},Ba);Ba.order=hb+1}},onPointerLeave:Ba=>{var Ia;if(!n.settings.penMode||"pen"===Ba.pointerType&&Ba.isPrimary){var {order:hb=
0}=Ba;null==(Ia=ba.onPointerLeave)||Ia.call(ba,{type:"shape",shape:c,order:hb},Ba);Ba.order=hb+1}},onKeyUp:Ba=>{var Ia;null==(Ia=ba.onKeyUp)||Ia.call(ba,{type:"shape",shape:c,order:-1},Ba)},onKeyDown:Ba=>{var Ia;null==(Ia=ba.onKeyDown)||Ia.call(ba,{type:"shape",shape:c,order:-1},Ba)}}),[c.id,N,ba])}function yh(c){var {viewport:n,inputs:N,callbacks:ba,components:pa}=c;c=Yi(c,["viewport","inputs","callbacks","components"]);return(0,ox.jsx)(jB,{id:c.id,viewport:n,inputs:N,callbacks:ba,components:pa,
meta:c.meta,children:(0,ox.jsx)(fB,Ef({},c))})}function Oh(c){var {side:n,content:N,sideOffset:ba=10}=c;c=Yi(c,["side","content","sideOffset"]);return N?(0,vo.jsx)(Lq.TooltipProvider,{delayDuration:300,children:(0,vo.jsxs)(Lq.Tooltip,{children:[(0,vo.jsx)(Lq.TooltipTrigger,{asChild:!0,children:c.children}),(0,vo.jsxs)(Lq.TooltipContent,qg(Ef({sideOffset:ba,side:n},c),{children:[N,(0,vo.jsx)(Lq.TooltipArrow,{className:"popper-arrow"})]}))]})}):(0,vo.jsx)(vo.Fragment,{children:c.children})}function Bh(c){var {className:n,
tooltip:N,tooltipSide:ba}=c;c=Yi(c,["className","tooltip","tooltipSide"]);return(0,px.jsx)(Oh,{content:N,side:ba,children:(0,px.jsx)("button",Ef({className:"tl-button "+(null!=n?n:"")},c))})}function Jg(c){var {toggle:n=!0,pressed:N,onPressedChange:ba,className:pa,tooltip:Ba}=c;c=Yi(c,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,Ft.jsx)(Oh,{content:Ba,children:(0,Ft.jsx)("div",{className:"inline-flex",children:(0,Ft.jsx)(pB.Toggle,qg(Ef({},c),{"data-toggle":n,className:"tl-button"+
(pa?" "+pa:""),pressed:N,onPressedChange:ba}))})})}function yf(c){var {side:n,align:N,alignOffset:ba,label:pa,children:Ba,border:Ia}=c;c=Yi(c,"side align alignOffset label children border".split(" "));return(0,Ur.jsxs)(Vr.Popover,{children:[(0,Ur.jsx)(Vr.PopoverTrigger,qg(Ef({},c),{"data-border":Ia,className:"tl-button tl-popover-trigger-button",children:pa})),(0,Ur.jsxs)(Vr.PopoverContent,{className:"w-auto p-1",align:N,alignOffset:ba,side:n,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),
children:[Ba,(0,Ur.jsx)(Vr.PopoverArrow,{className:"popper-arrow"})]})]})}function Vh(c){function n(Yb){return Yb?(0,bk.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Yb},children:(0,bk.jsx)("div",{className:`w-full h-full bg-${Yb}-500`})}):(0,bk.jsx)("div",{className:"tl-color-bg",children:(0,bk.jsx)(hh,{name:"color-swatch"})})}var {color:N,opacity:ba,popoverSide:pa,setColor:Ba,setOpacity:Ia}=c;c=Yi(c,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:hb}}=
tx.default.useContext(vi),yb=tx.default.useMemo(()=>{let Yb="";return sg(rc=>{Ba(Yb)},100,rc=>{Yb=rc.target.value})},[]);return(0,bk.jsx)(yf,qg(Ef({},c),{border:!0,side:pa,label:(0,bk.jsx)(Oh,{content:hb("whiteboard/color"),side:pa,sideOffset:14,children:n(N)}),children:(0,bk.jsxs)("div",{className:"p-1",children:[(0,bk.jsx)("div",{className:"tl-color-palette",children:Object.values(Ka).map(Yb=>(0,bk.jsx)("button",{className:`tl-color-drip m-1${Yb===N?" active":""}`,onClick:()=>Ba(Yb),children:n(Yb)},
Yb))}),(0,bk.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,bk.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${xf(N)?"":"active"}`,children:(0,bk.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,bk.jsx)("input",Ef({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(N)?N:"#000000",onChange:yb,style:{opacity:xf(N)?0:1}},c))})}),(0,bk.jsx)("label",{htmlFor:"tl-custom-color-input",className:"text-xs cursor-pointer",
children:hb("whiteboard/select-custom-color")})]}),Ia&&(0,bk.jsx)("div",{className:"mx-1 my-2",children:(0,bk.jsxs)(Wr.Slider,{defaultValue:[null!=ba?ba:0],onValueCommit:Yb=>Ia(Yb[0]),max:1,step:.1,"aria-label":hb("whiteboard/opacity"),className:"tl-slider-root",children:[(0,bk.jsx)(Wr.SliderTrack,{className:"tl-slider-track",children:(0,bk.jsx)(Wr.SliderRange,{className:"tl-slider-range"})}),(0,bk.jsx)(Wr.SliderThumb,{className:"tl-slider-thumb"})]})})]})}))}function yi(c){var {options:n,tooltip:N,
popoverSide:ba,compact:pa=!1,value:Ba,onValueChange:Ia}=c;c=Yi(c,"options tooltip popoverSide compact value onValueChange".split(" "));const [hb,yb]=xB.useState(!1);return(0,Fm.jsx)("div",qg(Ef({},c),{children:(0,Fm.jsxs)(vp.Select,{open:hb,onOpenChange:yb,value:Ba,onValueChange:Ia,children:[(0,Fm.jsx)(Oh,{content:N,side:ba,children:(0,Fm.jsxs)(vp.SelectTrigger,{className:`tl-select-trigger ${pa?"compact":""}`,children:[(0,Fm.jsx)(vp.SelectValue,{}),!pa&&(0,Fm.jsx)(vp.SelectIcon,{asChild:!0,children:(0,Fm.jsx)(zB,
{className:"h-4 w-4 opacity-50"})})]})}),(0,Fm.jsx)(vp.SelectContent,{className:"min-w-min",side:ba,position:"popper",sideOffset:14,align:"center",onKeyDown:Yb=>Yb.stopPropagation(),children:n.map(Yb=>(0,Fm.jsx)(vp.SelectItem,{value:Yb.value,children:Yb.label},Yb.value))})]})}))}function Hi(c){var {scaleLevel:n,compact:N,popoverSide:ba}=c;Yi(c,["scaleLevel","compact","popoverSide"]);const pa=Ze();({handlers:{t:c}}=AB.default.useContext(vi));const Ba=[{label:N?"XS":c("whiteboard/extra-small"),value:"xs"},
{label:N?"SM":c("whiteboard/small"),value:"sm"},{label:N?"MD":c("whiteboard/medium"),value:"md"},{label:N?"LG":c("whiteboard/large"),value:"lg"},{label:N?"XL":c("whiteboard/extra-large"),value:"xl"},{label:N?"XXL":c("whiteboard/huge"),value:"xxl"}];return(0,BB.jsx)(yi,{tooltip:c("whiteboard/scale-level"),options:Ba,value:n,popoverSide:ba,compact:N,onValueChange:Ia=>{pa.api.setScaleLevel(Ia)}})}function Ni(c,n){return function(N){return c(n(N))}}function Oj(c,n){return n(c)}function jk(c,n){return function(N){return c(n,
N)}}function Fj(c,n){return function(){return c(n)}}function Pj(c,n){n(c);return c}function Ph(){for(var c=arguments.length,n=Array(c),N=0;N<c;N++)n[N]=arguments[N];return n}function Gj(c){c()}function Qj(c){return function(){return c}}function Ki(){for(var c=arguments.length,n=Array(c),N=0;N<c;N++)n[N]=arguments[N];return function(){n.map(Gj)}}function fj(){}function fi(c,n){return c(1,n)}function Rj(c,n){c(0,n)}function Wj(c){c(2)}function Jk(c){return c(4)}function Sg(c,n){return fi(c,jk(n,0))}
function Sj(c,n){var N=c(1,function(ba){N();n(ba)});return N}function dh(){var c=[];return function(n,N){switch(n){case 2:c.splice(0,c.length);break;case 1:return c.push(N),function(){var ba=c.indexOf(N);-1<ba&&c.splice(ba,1)};case 0:c.slice().forEach(function(ba){ba(N)});break;default:throw Error("unrecognized action "+n);}}}function ag(c){var n=c,N=dh();return function(ba,pa){switch(ba){case 1:pa(n);break;case 0:n=pa;break;case 4:return n}return N(ba,pa)}}function Jl(c){var n,N;return function(ba,
pa){switch(ba){case 1:if(pa){if(N===pa)break;n&&n();N=pa;return n=c(1,pa)}n&&n();return fj;case 2:n&&n();N=null;break;default:throw Error("unrecognized action "+ba);}}}function Oi(c){return Pj(dh(),function(n){return Sg(c,n)})}function gj(c,n){return Pj(ag(n),function(N){return Sg(c,N)})}function zj(){for(var c=arguments.length,n=Array(c),N=0;N<c;N++)n[N]=arguments[N];return function(ba){return n.reduceRight(Oj,ba)}}function $f(c){for(var n=arguments.length,N=Array(1<n?n-1:0),ba=1;ba<n;ba++)N[ba-
1]=arguments[ba];var pa=zj.apply(void 0,N);return function(Ba,Ia){switch(Ba){case 1:return fi(c,pa(Ia));case 2:c(2);break;default:throw Error("unrecognized action "+Ba);}}}function zk(c,n){return c===n}function vh(c){void 0===c&&(c=zk);var n;return function(N){return function(ba){c(n,ba)||(n=ba,N(ba))}}}function Ah(c){return function(n){return function(N){c(N)&&n(N)}}}function Fg(c){return function(n){return Ni(n,c)}}function Jj(c){return function(n){return function(){return n(c)}}}function zi(c,
n){return function(N){return function(ba){return N(n=c(n,ba))}}}function gk(c){return function(n){return function(N){0<c?c--:n(N)}}}function hk(c){var n,N;return function(ba){return function(pa){n=pa;N||=setTimeout(function(){N=void 0;ba(n)},c)}}}function Fl(c){var n,N;return function(ba){return function(pa){n=pa;N&&clearTimeout(N);N=setTimeout(function(){ba(n)},c)}}}function xh(){for(var c=arguments.length,n=Array(c),N=0;N<c;N++)n[N]=arguments[N];var ba=Array(n.length),pa=0,Ba=null,Ia=Math.pow(2,
n.length)-1;n.forEach(function(hb,yb){var Yb=Math.pow(2,yb);fi(hb,function(rc){var Ac=pa;pa|=Yb;ba[yb]=rc;Ac!==Ia&&pa===Ia&&Ba&&(Ba(),Ba=null)})});return function(hb){return function(yb){var Yb=function(){return hb([yb].concat(ba))};pa===Ia?Yb():Ba=Yb}}}function Am(){for(var c=arguments.length,n=Array(c),N=0;N<c;N++)n[N]=arguments[N];return function(ba,pa){switch(ba){case 1:return Ki.apply(void 0,n.map(function(Ba){return Ba(1,pa)}));case 2:break;default:throw Error("unrecognized action "+ba);}}}
function Mh(c,n){void 0===n&&(n=zk);return $f(c,vh(n))}function Ci(){for(var c=dh(),n=arguments.length,N=Array(n),ba=0;ba<n;ba++)N[ba]=arguments[ba];var pa=Array(N.length),Ba=0,Ia=Math.pow(2,N.length)-1;N.forEach(function(hb,yb){var Yb=Math.pow(2,yb);fi(hb,function(rc){pa[yb]=rc;Ba|=Yb;Ba===Ia&&c(0,pa)})});return function(hb,yb){switch(hb){case 1:return Ba===Ia&&yb(pa),c(1,yb);case 2:c(2);break;default:throw Error("unrecognized action "+hb);}}}function rh(c,n,N){void 0===n&&(n=[]);N=(void 0===N?{singleton:!0}:
N).singleton;return{id:Symbol(),constructor:c,dependencies:n,singleton:N}}function Kj(c){var n=new Map;return function pa(ba){var Ba=ba.id,Ia=ba.constructor,hb=ba.dependencies;if((ba=ba.singleton)&&n.has(Ba))return n.get(Ba);Ia=Ia(hb.map(function(yb){return pa(yb)}));ba&&n.set(Ba,Ia);return Ia}(c)}function kl(c,n){if(null==c)return{};var N={},ba=Object.keys(c),pa;for(pa=0;pa<ba.length;pa++){var Ba=ba[pa];0<=n.indexOf(Ba)||(N[Ba]=c[Ba])}return N}function tl(c,n){if(c){if("string"===typeof c)return fn(c,
n);var N=Object.prototype.toString.call(c).slice(8,-1);"Object"===N&&c.constructor&&(N=c.constructor.name);if("Map"===N||"Set"===N)return Array.from(c);if("Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return fn(c,n)}}function fn(c,n){if(null==n||n>c.length)n=c.length;for(var N=0,ba=Array(n);N<n;N++)ba[N]=c[N];return ba}function gm(c,n){var N="undefined"!==typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(N)return(N=N.call(c)).next.bind(N);if(Array.isArray(c)||(N=tl(c))||
n&&c&&"number"===typeof c.length){N&&(c=N);var ba=0;return function(){return ba>=c.length?{done:!0}:{done:!1,value:c[ba++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function bp(c,n){for(var N={},ba={},pa=0,Ba=c.length;pa<Ba;)ba[c[pa]]=1,pa+=1;for(var Ia in n)ba.hasOwnProperty(Ia)||(N[Ia]=n[Ia]);return N}function tc(c,n,N){function ba(Ac,Yc){Ac.propsReady&&(0,Ac.propsReady)(0,!1);for(var ud=
gm(Ia),pd;!(pd=ud()).done;)pd=pd.value,(0,Ac[n.required[pd]])(0,Yc[pd]);for(ud=gm(hb);!(pd=ud()).done;)if(pd=pd.value,pd in Yc)(0,Ac[n.optional[pd]])(0,Yc[pd]);Ac.propsReady&&(0,Ac.propsReady)(0,!0)}function pa(Ac){return yb.reduce(function(Yc,ud){Yc[ud]=function(pd){(0,Ac[n.methods[ud]])(0,pd)};return Yc},{})}function Ba(Ac){return Yb.reduce(function(Yc,ud){Yc[ud]=Jl(Ac[n.events[ud]]);return Yc},{})}var Ia=Object.keys(n.required||{}),hb=Object.keys(n.optional||{}),yb=Object.keys(n.methods||{}),Yb=
Object.keys(n.events||{}),rc=(0,Lk.createContext)({});return{Component:(0,Lk.forwardRef)(function(Ac,Yc){var ud=Ac.children,pd=kl(Ac,GB),Gd=(0,Lk.useState)(function(){return Pj(Kj(c),function(hd){return ba(hd,pd)})})[0],Qd=(0,Lk.useState)(Fj(Ba,Gd))[0];Xr(function(){for(var hd=gm(Yb),sd;!(sd=hd()).done;)if(sd=sd.value,sd in pd)(0,Qd[sd])(1,pd[sd]);return function(){Object.values(Qd).map(Wj)}},[pd,Qd,Gd]);Xr(function(){ba(Gd,pd)});(0,Lk.useImperativeHandle)(Yc,Qj(pa(Gd)));return(0,Lk.createElement)(rc.Provider,
{value:Gd},N?(0,Lk.createElement)(N,bp([].concat(Ia,hb,Yb),pd),ud):ud)}),usePublisher:function(Ac){return(0,Lk.useCallback)(jk(Rj,(0,Lk.useContext)(rc)[Ac]),[Ac])},useEmitterValue:function(Ac){var Yc=(0,Lk.useContext)(rc)[Ac];Ac=(0,Lk.useState)(Fj(Jk,Yc));var ud=Ac[0],pd=Ac[1];Xr(function(){return fi(Yc,function(Gd){Gd!==ud&&pd(Qj(Gd))})},[Yc,ud]);return ud},useEmitter:function(Ac,Yc){var ud=(0,Lk.useContext)(rc)[Ac];Xr(function(){return ud(1,Yc)},[Yc,ud])}}}function Fa(){return Fa=Object.assign||
function(c){for(var n=1;n<arguments.length;n++){var N=arguments[n],ba;for(ba in N)Object.prototype.hasOwnProperty.call(N,ba)&&(c[ba]=N[ba])}return c},Fa.apply(this,arguments)}function Ec(c,n){if(null==c)return{};var N,ba,pa={},Ba=Object.keys(c);for(ba=0;ba<Ba.length;ba++)0<=n.indexOf(N=Ba[ba])||(pa[N]=c[N]);return pa}function Fc(c,n){(null==n||n>c.length)&&(n=c.length);for(var N=0,ba=Array(n);N<n;N++)ba[N]=c[N];return ba}function Tb(c,n){var N="undefined"!=typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];
if(N)return(N=N.call(c)).next.bind(N);if(Array.isArray(c)||(N=function(pa,Ba){if(pa){if("string"==typeof pa)return Fc(pa,Ba);var Ia=Object.prototype.toString.call(pa).slice(8,-1);return"Object"===Ia&&pa.constructor&&(Ia=pa.constructor.name),"Map"===Ia||"Set"===Ia?Array.from(pa):"Arguments"===Ia||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ia)?Fc(pa,Ba):void 0}}(c))||n&&c&&"number"==typeof c.length){N&&(c=N);var ba=0;return function(){return ba>=c.length?{done:!0}:{done:!1,value:c[ba++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Lc(c,n){void 0===n&&(n=!0);var N=(0,Uh.useRef)(null),ba=function(Ba){};if("undefined"!=typeof ResizeObserver){var pa=new ResizeObserver(function(Ba){Ba=Ba[0].target;null!==Ba.offsetParent&&c(Ba)});ba=function(Ba){Ba&&n?(pa.observe(Ba),N.current=Ba):(N.current&&pa.unobserve(N.current),N.current=null)}}return{ref:N,callbackRef:ba}}function qc(c,n){return void 0===n&&(n=!0),Lc(c,n).callbackRef}function Xb(c,n,N,ba,pa,Ba,Ia){return Lc(function(hb){for(var yb=function(Ac,Yc,ud,pd){ud=Ac.length;
if(0===ud)return null;for(var Gd=[],Qd=0;Qd<ud;Qd++){var hd=Ac.item(Qd);if(hd&&void 0!==hd.dataset.index){var sd=parseInt(hd.dataset.index),yd=parseFloat(hd.dataset.knownSize),Rd=Yc(hd,"offsetHeight");if(0===Rd&&pd("Zero-sized element, this should not happen",{child:hd},dk.ERROR),Rd!==yd)hd=Gd[Gd.length-1],0===Gd.length||hd.size!==Rd||hd.endIndex!==sd-1?Gd.push({startIndex:sd,endIndex:sd,size:Rd}):Gd[Gd.length-1].endIndex++}}return Gd}(hb.children,n,0,pa),Yb=hb.parentElement;!Yb.dataset.virtuosoScroller;)Yb=
Yb.parentElement;var rc="window"===Yb.firstElementChild.dataset.viewportType;ba({scrollTop:Math.max(Ia?Ia.scrollTop:rc?window.pageYOffset||document.documentElement.scrollTop:Yb.scrollTop,0),scrollHeight:Ia?Ia.scrollHeight:rc?document.documentElement.scrollHeight:Yb.scrollHeight,viewportHeight:Ia?Ia.offsetHeight:rc?window.innerHeight:Yb.offsetHeight});null==Ba||Ba(function(Ac,Yc,ud){return"normal"===Yc||null!=Yc&&Yc.endsWith("px")||ud("row-gap was not resolved to pixel value correctly",Yc,dk.WARN),
"normal"===Yc?0:parseInt(null!=Yc?Yc:"0",10)}(0,getComputedStyle(hb).rowGap,pa));null!==yb&&c(yb)},N)}function Sb(c,n){return Math.round(c.getBoundingClientRect()[n])}function Oc(c,n,N,ba,pa){void 0===ba&&(ba=fj);var Ba=(0,Uh.useRef)(null),Ia=(0,Uh.useRef)(null),hb=(0,Uh.useRef)(null),yb=(0,Uh.useRef)(!1),Yb=(0,Uh.useCallback)(function(rc){rc=rc.target;var Ac=rc===window||rc===document,Yc=Ac?window.pageYOffset||document.documentElement.scrollTop:rc.scrollTop,ud=Ac?document.documentElement.scrollHeight:
rc.scrollHeight,pd=Ac?window.innerHeight:rc.offsetHeight;rc=function(){c({scrollTop:Math.max(Yc,0),scrollHeight:ud,viewportHeight:pd})};yb.current?(0,HB.flushSync)(rc):rc();yb.current=!1;null!==Ia.current&&(Yc===Ia.current||0>=Yc||Yc===ud-pd)&&(Ia.current=null,n(!0),hb.current&&(clearTimeout(hb.current),hb.current=null))},[c,n]);return(0,Uh.useEffect)(function(){var rc=pa||Ba.current;return ba(pa||Ba.current),Yb({target:rc}),rc.addEventListener("scroll",Yb,{passive:!0}),function(){ba(null);rc.removeEventListener("scroll",
Yb)}},[Ba,Yb,N,ba,pa]),{scrollerRef:Ba,scrollByCallback:function(rc){yb.current=!0;Ba.current.scrollBy(rc)},scrollToCallback:function(rc){var Ac=Ba.current;if(Ac&&!("offsetHeight"in Ac&&0===Ac.offsetHeight)){var Yc,ud,pd,Gd="smooth"===rc.behavior;if(Ac===window?(ud=Math.max(Sb(document.documentElement,"height"),document.documentElement.scrollHeight),Yc=window.innerHeight,pd=document.documentElement.scrollTop):(ud=Ac.scrollHeight,Yc=Sb(Ac,"height"),pd=Ac.scrollTop),rc.top=Math.ceil(Math.max(Math.min(ud-
Yc,rc.top),0)),1.01>Math.abs(Yc-ud)||rc.top===pd)return c({scrollTop:pd,scrollHeight:ud,viewportHeight:Yc}),void(Gd&&n(!0));Gd?(Ia.current=rc.top,hb.current&&clearTimeout(hb.current),hb.current=setTimeout(function(){hb.current=null;Ia.current=null;n(!0)},1E3)):Ia.current=null;Ac.scrollTo(rc)}}}}function ad(c,n,N,ba,pa){return void 0===ba&&(ba=qi),void 0===pa&&(pa=qi),{k:c,v:n,lvl:N,l:ba,r:pa}}function qd(c,n){if(c===qi)return qi;var N=c.k,ba=c.l,pa=c.r;if(n===N){if(ba===qi)return pa;if(pa===qi)return ba;
n=Re(ba);return Ng(df(c,{k:n[0],v:n[1],l:Bf(ba)}))}return Ng(df(c,n<N?{l:qd(ba,n)}:{r:qd(pa,n)}))}function Fd(c,n,N){return(void 0===N&&(N="k"),c===qi)?[-Infinity,void 0]:c[N]===n?[c.k,c.v]:c[N]<n?(n=Fd(c.r,n,N),-Infinity===n[0]?[c.k,c.v]:n):Fd(c.l,n,N)}function Ld(c,n,N){return c===qi?ad(n,N,1):n===c.k?df(c,{k:n,v:N}):Mf(gg(df(c,n<c.k?{l:Ld(c.l,n,N)}:{r:Ld(c.r,n,N)})))}function Yd(c,n,N){if(c===qi)return[];var ba=c.k,pa=c.v,Ba=c.r,Ia=[];return ba>n&&(Ia=Ia.concat(Yd(c.l,n,N))),ba>=n&&ba<=N&&Ia.push({k:ba,
v:pa}),ba<=N&&(Ia=Ia.concat(Yd(Ba,n,N))),Ia}function ye(c){return c===qi?[]:[].concat(ye(c.l),[{k:c.k,v:c.v}],ye(c.r))}function Re(c){return c.r===qi?[c.k,c.v]:Re(c.r)}function Bf(c){return c.r===qi?c.l:Ng(df(c,{r:Bf(c.r)}))}function df(c,n){return ad(void 0!==n.k?n.k:c.k,void 0!==n.v?n.v:c.v,void 0!==n.lvl?n.lvl:c.lvl,void 0!==n.l?n.l:c.l,void 0!==n.r?n.r:c.r)}function Pg(c){return c===qi||c.lvl>c.r.lvl}function Ng(c){var n=c.l,N=c.r,ba=c.lvl;if(N.lvl>=ba-1&&n.lvl>=ba-1)return c;if(ba>N.lvl+1){if(Pg(n))return gg(df(c,
{lvl:ba-1}));if(n===qi||n.r===qi)throw Error("Unexpected empty nodes");return df(n.r,{l:df(n,{r:n.r.l}),r:df(c,{l:n.r.r,lvl:ba-1}),lvl:ba})}if(Pg(c))return Mf(df(c,{lvl:ba-1}));if(N===qi||N.l===qi)throw Error("Unexpected empty nodes");n=N.l;var pa=Pg(n)?N.lvl-1:N.lvl;return df(n,{l:df(c,{r:n.l,lvl:ba-1}),r:Mf(df(N,{l:n.r,lvl:pa})),lvl:n.lvl+1})}function Vg(c,n,N){return c===qi?[]:Dg(Yd(c,Fd(c,n)[0],N),function(ba){return{index:ba.k,value:ba.v}})}function Dg(c,n){var N=c.length;if(0===N)return[];var ba=
n(c[0]),pa=ba.index;ba=ba.value;for(var Ba=[],Ia=1;Ia<N;Ia++){var hb=n(c[Ia]),yb=hb.index;hb=hb.value;Ba.push({start:pa,end:yb-1,value:ba});pa=yb;ba=hb}return Ba.push({start:pa,end:Infinity,value:ba}),Ba}function Mf(c){var n=c.r,N=c.lvl;return n===qi||n.r===qi||n.lvl!==N||n.r.lvl!==N?c:df(n,{l:df(c,{r:n.l}),lvl:N+1})}function gg(c){var n=c.l;return n===qi||n.lvl!==c.lvl?c:df(n,{r:df(c,{l:n.r})})}function mh(c,n,N,ba){void 0===ba&&(ba=0);for(var pa=c.length-1;ba<=pa;){var Ba=Math.floor((ba+pa)/2),
Ia=N(c[Ba],n);if(0===Ia)return Ba;if(-1===Ia){if(2>pa-ba)return Ba-1;pa=Ba-1}else{if(pa===ba)return Ba;ba=Ba+1}}throw Error("Failed binary finding record in array - "+c.join(",")+", searched for "+n);}function ph(c){var n=c.size,N=c.startIndex,ba=c.endIndex;return function(pa){return pa.start===N&&(pa.end===ba||Infinity===pa.end)&&pa.value===n}}function Gf(c,n){c=c.index;return n===c?0:n<c?-1:1}function pi(c,n){c=c.offset;return n===c?0:n<c?-1:1}function Eh(c){return{index:c.index,value:c}}function ji(c,
n,N,ba){var pa=0,Ba=0,Ia=0,hb;0!==n?(Ia=c[hb=mh(c,n-1,Gf)].offset,Ba=Fd(N,n-1),pa=Ba[0],Ba=Ba[1],c.length&&c[hb].size===Fd(N,n)[1]&&--hb,c=c.slice(0,hb+1)):c=[];for(n=Tb(Vg(N,n,Infinity));!(N=n()).done;)hb=N.value,N=hb.start,hb=hb.value,pa=N-pa,Ia=pa*Ba+Ia+pa*ba,c.push({offset:Ia,size:hb,index:N}),pa=N,Ba=hb;return{offsetTree:c,lastIndex:pa,lastOffset:Ia,lastSize:Ba}}function th(c,n){var N=n[0],ba=n[1],pa=n[3];0<N.length&&(0,n[2])("received item sizes",N,dk.DEBUG);var Ba=c.sizeTree;n=Ba;var Ia=0;
if(0<ba.length&&Ba===qi&&2===N.length){var hb=N[0].size,yb=N[1].size;n=ba.reduce(function(rc,Ac){return Ld(Ld(rc,Ac,hb),Ac+1,yb)},n)}else N=function(rc,Ac){var Yc,ud=rc===qi?0:Infinity;for(Ac=Tb(Ac);!(Yc=Ac()).done;){var pd=Yc.value;Yc=pd.size;var Gd=pd.startIndex,Qd=pd.endIndex;if(ud=Math.min(ud,Gd),rc===qi)rc=Ld(rc,0,Yc);else{var hd=Vg(rc,Gd-1,Qd+1);if(!hd.some(ph(pd))){var sd,yd=pd=!1;for(hd=Tb(hd);!(sd=hd()).done;){var Rd=sd.value;sd=Rd.start;var Id=Rd.end;Rd=Rd.value;pd?(Qd>=sd||Yc===Rd)&&(rc=
qd(rc,sd)):(yd=Rd!==Yc,pd=!0);Id>Qd&&Qd>=sd&&Rd!==Yc&&(rc=Ld(rc,Qd+1,Rd))}yd&&(rc=Ld(rc,Gd,Yc))}}}return[rc,ud]}(n,N),n=N[0],Ia=N[1];if(n===Ba)return c;c=ji(c.offsetTree,Ia,n,pa);var Yb=c.offsetTree;return{sizeTree:n,offsetTree:Yb,lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:ba.reduce(function(rc,Ac){return Ld(rc,Ac,Zi(Ac,Yb,pa))},qi),groupIndices:ba}}function Zi(c,n,N){if(0===n.length)return 0;n=n[mh(n,c,Gf)];c-=n.index;c=n.size*c+(c-1)*N+n.offset;return 0<c?
c+N:c}function Ih(c,n,N){if(void 0!==c.groupIndex)return n.groupIndices[c.groupIndex]+1;c=Di("LAST"===c.index?N:c.index,n);return Math.max(0,c,Math.min(N,c))}function Di(c,n){if(n.groupOffsetTree===qi)return c;for(var N=0;n.groupIndices[N]<=c+N;)N++;return c+N}function pj(c){c="number"==typeof c?{index:c}:c;return c.align||(c.align="start"),c.behavior&&LB||(c.behavior="auto"),c.offset||(c.offset=0),c}function Pn(c){return!!c&&("smooth"===c?"smooth":"auto")}function ll(c){return c.reduce(function(n,
N){return n.groupIndices.push(n.totalCount),n.totalCount+=N+1,n},{totalCount:0,groupIndices:[]})}function Pm(c,n){return!(!c||c[0]!==n[0]||c[1]!==n[1])}function Gk(c,n){return!(!c||c.startIndex!==n.startIndex||c.endIndex!==n.endIndex)}function Qn(c,n,N){return"number"==typeof c?"up"===N&&"top"===n||"down"===N&&"bottom"===n?c:0:"up"===N?"top"===n?c.main:c.reverse:"bottom"===n?c.main:c.reverse}function qr(c,n,N){if(0===c.length)return[];if(n.groupOffsetTree===qi)return c.map(function(yb){return Fa({},
yb,{index:yb.index+N,originalIndex:yb.index})});var ba,pa=[],Ba=Vg(n.groupOffsetTree,c[0].index,c[c.length-1].index),Ia=void 0,hb=0;for(c=Tb(c);!(ba=c()).done;)ba=ba.value,(!Ia||Ia.end<ba.index)&&(Ia=Ba.shift(),hb=n.groupIndices.indexOf(Ia.start)),pa.push(Fa({},ba.index===Ia.start?{type:"group",index:hb}:{index:ba.index-(hb+1)+N,groupIndex:hb},{size:ba.size,offset:ba.offset,originalIndex:ba.index,data:ba.data}));return pa}function Ko(c,n,N,ba,pa,Ba){var Ia=0,hb=0;0<c.length&&(Ia=c[0].offset,hb=c[c.length-
1],hb=hb.offset+hb.size);var yb=N-pa.lastIndex,Yb=Ia;ba=pa.lastOffset+yb*pa.lastSize+(yb-1)*ba-hb;return{items:qr(c,pa,Ba),topItems:qr(n,pa,Ba),topListHeight:n.reduce(function(rc,Ac){return Ac.size+rc},0),offsetTop:Ia,offsetBottom:ba,top:Yb,bottom:hb,totalCount:N,firstItemIndex:Ba}}function Qm(c){var n,N=!1;return function(){return N||(N=!0,n=c()),n}}function Rm(c,n){var N=(0,Uh.useRef)(null),ba=(0,Uh.useCallback)(function(yb){if(null!==yb&&yb.offsetParent){var Yb=yb.getBoundingClientRect();yb=Yb.width;
if(n){var rc=n.getBoundingClientRect();Yb=Yb.top-rc.top;rc=rc.height-Math.max(0,Yb);Yb+=n.scrollTop}else rc=window.innerHeight-Math.max(0,Yb.top),Yb=Yb.top+window.pageYOffset;N.current={offsetTop:Yb,visibleHeight:rc,visibleWidth:yb};c(N.current)}},[c,n]),pa=Lc(ba),Ba=pa.callbackRef,Ia=pa.ref,hb=(0,Uh.useCallback)(function(){ba(Ia.current)},[ba,Ia]);return(0,Uh.useEffect)(function(){if(n){n.addEventListener("scroll",hb);var yb=new ResizeObserver(hb);return yb.observe(n),function(){n.removeEventListener("scroll",
hb);yb.unobserve(n)}}return window.addEventListener("scroll",hb),window.addEventListener("resize",hb),function(){window.removeEventListener("scroll",hb);window.removeEventListener("resize",hb)}},[hb,n]),Ba}function um(c){return c}function Vj(c,n){var N=dh();return fi(N,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+n,"color: red;","color: inherit;","color: blue;")}),Sg(N,c),N}function tj(c,n){if("string"!=typeof c)return{context:n}}function uq(c){var n=c.usePublisher,
N=c.useEmitter,ba=c.useEmitterValue;return sh.memo(function(pa){var Ba=pa.style,Ia=pa.children;pa=Ec(pa,ZB);var hb=n("scrollContainerState"),yb=ba("ScrollerComponent"),Yb=n("smoothScrollTargetReached"),rc=ba("scrollerRef"),Ac=ba("context");hb=Oc(hb,Yb,yb,rc);Yb=hb.scrollerRef;rc=hb.scrollByCallback;return N("scrollTo",hb.scrollToCallback),N("scrollBy",rc),(0,Uh.createElement)(yb,Fa({ref:Yb,style:Fa({},fC,Ba),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},pa,tj(yb,Ac)),
Ia)})}function fm(c){var n=c.usePublisher,N=c.useEmitter,ba=c.useEmitterValue;return sh.memo(function(pa){var Ba=pa.style,Ia=pa.children;pa=Ec(pa,$B);var hb=n("windowScrollContainerState"),yb=ba("ScrollerComponent"),Yb=n("smoothScrollTargetReached"),rc=ba("totalListHeight"),Ac=ba("deviation"),Yc=ba("customScrollParent"),ud=ba("context");Yb=Oc(hb,Yb,yb,fj,Yc);var pd=Yb.scrollerRef;hb=Yb.scrollByCallback;Yb=Yb.scrollToCallback;return IB(function(){return pd.current=Yc||window,function(){pd.current=
null}},[pd,Yc]),N("windowScrollTo",Yb),N("scrollBy",hb),(0,Uh.createElement)(yb,Fa({style:Fa({position:"relative"},Ba,0!==rc?{height:rc+Ac}:{}),"data-virtuoso-scroller":!0},pa,tj(yb,ud)),Ia)})}function Zo(c,n,N){return Array.from({length:n-c+1}).map(function(ba,pa){return{index:pa+c,data:null==N?void 0:N[pa+c]}})}function pq(c,n){return c&&c.column===n.column&&c.row===n.row}function em(c,n,N,ba){var pa=N.height;return void 0===pa||0===ba.length?{top:0,bottom:0}:{top:ym(c,n,N,ba[0].index),bottom:ym(c,
n,N,ba[ba.length-1].index)+pa}}function ym(c,n,N,ba){var pa=n.column;c=zp(1,$r((c.width+pa)/(N.width+pa)));ba=$r(ba/c);N=ba*N.height+zp(0,ba-1)*n.row;return 0<N?N+n.row:N}function Um(c,n,N){return"normal"===n||null!=n&&n.endsWith("px")||N(c+" was not resolved to pixel value correctly",n,dk.WARN),"normal"===n?0:parseInt(null!=n?n:"0",10)}function ml(){ml=Object.assign?Object.assign.bind():function(c){for(var n=1;n<arguments.length;n++){var N=arguments[n],ba;for(ba in N)Object.prototype.hasOwnProperty.call(N,
ba)&&(c[ba]=N[ba])}return c};return ml.apply(this,arguments)}function Xl(c,n){Xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,ba){N.__proto__=ba;return N};return Xl(c,n)}function rl(c,n){c.prototype=Object.create(n.prototype);c.prototype.constructor=c;Xl(c,n)}function fo(c){fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)};return fo(c)}function ho(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}function Tm(c,n,N){Tm=ho()?Reflect.construct.bind():function(ba,pa,Ba){var Ia=[null];Ia.push.apply(Ia,pa);ba=new (Function.bind.apply(ba,Ia));Ba&&Xl(ba,Ba.prototype);return ba};return Tm.apply(null,arguments)}function kq(c){var n="function"===typeof Map?new Map:void 0;kq=function(N){function ba(){return Tm(N,arguments,fo(this).constructor)}if(null===N||
-1===Function.toString.call(N).indexOf("[native code]"))return N;if("function"!==typeof N)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(N))return n.get(N);n.set(N,ba)}ba.prototype=Object.create(N.prototype,{constructor:{value:ba,enumerable:!1,writable:!0,configurable:!0}});return Xl(ba,N)};return kq(c)}function Ss(c,n,N){return Math.round(255*c)+","+Math.round(255*n)+","+Math.round(255*N)}function Gl(c,n,N,ba){void 0===ba&&(ba=Ss);if(0===
n)return ba(N,N,N);c=(c%360+360)%360/60;var pa=(1-Math.abs(2*N-1))*n,Ba=pa*(1-Math.abs(c%2-1)),Ia=n=0,hb=0;0<=c&&1>c?(n=pa,Ia=Ba):1<=c&&2>c?(n=Ba,Ia=pa):2<=c&&3>c?(Ia=pa,hb=Ba):3<=c&&4>c?(Ia=Ba,hb=pa):4<=c&&5>c?(n=Ba,hb=pa):5<=c&&6>c&&(n=pa,hb=Ba);N-=pa/2;return ba(n+N,Ia+N,hb+N)}function Ts(c){if("string"!==typeof c)throw new km(3);if("string"===typeof c){var n=c.toLowerCase();c=Kx[n]?"#"+Kx[n]:c}if(c.match(KC))return{red:parseInt(""+c[1]+c[2],16),green:parseInt(""+c[3]+c[4],16),blue:parseInt(""+
c[5]+c[6],16)};if(c.match(LC))return n=parseFloat((parseInt(""+c[7]+c[8],16)/255).toFixed(2)),{red:parseInt(""+c[1]+c[2],16),green:parseInt(""+c[3]+c[4],16),blue:parseInt(""+c[5]+c[6],16),alpha:n};if(c.match(MC))return{red:parseInt(""+c[1]+c[1],16),green:parseInt(""+c[2]+c[2],16),blue:parseInt(""+c[3]+c[3],16)};if(c.match(NC))return n=parseFloat((parseInt(""+c[4]+c[4],16)/255).toFixed(2)),{red:parseInt(""+c[1]+c[1],16),green:parseInt(""+c[2]+c[2],16),blue:parseInt(""+c[3]+c[3],16),alpha:n};if(n=Tt.exec(c))return{red:parseInt(""+
n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10)};if(n=OC.exec(c.substring(0,50)))return{red:parseInt(""+n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:1<parseFloat(""+n[4])?parseFloat(""+n[4])/100:parseFloat(""+n[4])};var N=PC.exec(c);if(N){n=parseInt(""+N[1],10);var ba=parseInt(""+N[2],10)/100;N=parseInt(""+N[3],10)/100;n="rgb("+Gl(n,ba,N)+")";ba=Tt.exec(n);if(!ba)throw new km(4,c,n);return{red:parseInt(""+ba[1],10),green:parseInt(""+ba[2],10),blue:parseInt(""+
ba[3],10)}}if(n=QC.exec(c.substring(0,50))){ba=parseInt(""+n[1],10);N=parseInt(""+n[2],10)/100;var pa=parseInt(""+n[3],10)/100;ba="rgb("+Gl(ba,N,pa)+")";N=Tt.exec(ba);if(!N)throw new km(4,c,ba);return{red:parseInt(""+N[1],10),green:parseInt(""+N[2],10),blue:parseInt(""+N[3],10),alpha:1<parseFloat(""+n[4])?parseFloat(""+n[4])/100:parseFloat(""+n[4])}}throw new km(5);}function Ik(c){c=c.toString(16);return 1===c.length?"0"+c:c}function jh(c,n,N){return Ut("#"+Ik(Math.round(255*c))+Ik(Math.round(255*
n))+Ik(Math.round(255*N)))}function rr(c,n,N){if("number"===typeof c&&"number"===typeof n&&"number"===typeof N)return Ut("#"+Ik(c)+Ik(n)+Ik(N));if("object"===typeof c&&void 0===n&&void 0===N)return Ut("#"+Ik(c.red)+Ik(c.green)+Ik(c.blue));throw new km(6);}function qq(c){if("object"!==typeof c)throw new km(8);if("number"===typeof c.red&&"number"===typeof c.green&&"number"===typeof c.blue&&"number"===typeof c.alpha){if("object"===typeof c)c=1<=c.alpha?rr(c.red,c.green,c.blue):"rgba("+c.red+","+c.green+
","+c.blue+","+c.alpha+")";else throw new km(7);return c}if("number"===typeof c.red&&"number"===typeof c.green&&"number"===typeof c.blue&&("number"!==typeof c.alpha||"undefined"===typeof c.alpha))return rr(c);if("number"===typeof c.hue&&"number"===typeof c.saturation&&"number"===typeof c.lightness&&"number"===typeof c.alpha){if("object"===typeof c)c=1<=c.alpha?Gl(c.hue,c.saturation,c.lightness,jh):"rgba("+Gl(c.hue,c.saturation,c.lightness)+","+c.alpha+")";else throw new km(2);return c}if("number"===
typeof c.hue&&"number"===typeof c.saturation&&"number"===typeof c.lightness&&("number"!==typeof c.alpha||"undefined"===typeof c.alpha)){if("object"===typeof c)c=Gl(c.hue,c.saturation,c.lightness,jh);else throw new km(1);return c}throw new km(8);}function Oo(c,n,N){return function(){var ba=N.concat(Array.prototype.slice.call(arguments));return ba.length>=n?c.apply(this,ba):Oo(c,n,ba)}}function $o(c,n){if("transparent"===n)return n;n=Ts(n);var N=n.red/255,ba=n.green/255,pa=n.blue/255,Ba=Math.max(N,
ba,pa),Ia=Math.min(N,ba,pa),hb=(Ba+Ia)/2;if(Ba===Ia)n=void 0!==n.alpha?{hue:0,saturation:0,lightness:hb,alpha:n.alpha}:{hue:0,saturation:0,lightness:hb};else{var yb=Ba-Ia;Ia=.5<hb?yb/(2-Ba-Ia):yb/(Ba+Ia);switch(Ba){case N:N=(ba-pa)/yb+(ba<pa?6:0);break;case ba:N=(pa-N)/yb+2;break;default:N=(N-ba)/yb+4}N*=60;n=void 0!==n.alpha?{hue:N,saturation:Ia,lightness:hb,alpha:n.alpha}:{hue:N,saturation:Ia,lightness:hb}}hb=ml;c=n.lightness-parseFloat(c);return qq(hb({},n,{lightness:Math.max(0,Math.min(1,c))}))}
function Vk(c,n){var N;void 0!==n.strokeWidth&&(n.strokeWidth=Math.max(n.strokeWidth,1));void 0!==n.opacity&&(n.opacity=Math.min(1,Math.max(n.opacity,0)));let ba=null!=(N=n.fill)?N:c.props.fill;void 0===ba||xf(ba)||"var(--ls-secondary-background-color)"===ba||n.noFill||!Bo.includes(c.props.type)||(c=RC(.3,ba),n.stroke=c);return n}function rq({strokeWidth:c,size:n,mode:N}){return"svg"===N?(0,Lx.jsx)("rect",{className:"tl-binding-indicator",x:c,y:c,rx:2,ry:2,width:Math.max(0,n[0]-2*c),height:Math.max(0,
n[1]-2*c),strokeWidth:4*c}):(0,Lx.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Sm(){const c=Ze();return"panning"===c.inputs.state||"pinching"===c.inputs.state}function Mo({left:c,middle:n,right:N,stroke:ba,strokeWidth:pa}){return(0,$t.jsxs)("g",{children:[(0,$t.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${c} L ${n} ${N}`}),(0,$t.jsx)("path",{d:`M ${c} L ${n} ${N}`,fill:"none",
stroke:ba,strokeWidth:pa,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Wl(c,n,N){n=Q(c,n,c,N).points;if(!n)return console.warn("Could not find an intersection for the arrow head."),{left:c,right:c};n=(N=n[0])?te.rotWith(N,c,Math.PI/6):c;c=N?te.rotWith(N,c,-Math.PI/6):c;return{left:n,right:c}}function tm(c,n,N){const {left:ba,right:pa}=Wl(c,n,N);return`M ${ba} L ${c} ${pa}`}function Aj(c,n,N,ba,pa){c=c.strokeWidth;var Ba=te.dist(n,N);c=Math.min(Ba/3,16*c);Ba=[];Ba.push(`M ${n} L ${N}`);
ba&&Ba.push(tm(n,N,c));pa&&Ba.push(tm(N,n,c));return Ba.join(" ")}function ap({id:c,bounds:n,labelSize:N,offset:ba,scale:pa=1}){return(0,fs.jsx)("defs",{children:(0,fs.jsxs)("mask",{id:c+"_clip",children:[(0,fs.jsx)("rect",{x:-100,y:-100,width:n.width+200,height:n.height+200,fill:"white"}),(0,fs.jsx)("rect",{x:n.width/2-N[0]/2*pa+((null==ba?void 0:ba[0])||0),y:n.height/2-N[1]/2*pa+((null==ba?void 0:ba[1])||0),width:N[0]*pa,height:N[1]*pa,rx:4*pa,ry:4*pa,fill:"black"})]})})}function Wk(c,n,N,ba=pa=>
pa){return c*ba(.5-n*(.5-N))}function ur(c){return[-c[0],-c[1]]}function Kk(c,n){return[c[0]+n[0],c[1]+n[1]]}function yj(c,n){return[c[0]-n[0],c[1]-n[1]]}function ik(c,n){return[c[0]*n,c[1]*n]}function ko(c){return[c[1],-c[0]]}function Us(c,n){return c[0]===n[0]&&c[1]===n[1]}function zm(c){return c[0]*c[0]+c[1]*c[1]}function dn(c){var n=Math.hypot(c[0],c[1]);return[c[0]/n,c[1]/n]}function sr(c,n){return Math.hypot(c[1]-n[1],c[0]-n[0])}function Ak(c,n,N){let ba=Math.sin(N);N=Math.cos(N);let pa=c[0]-
n[0];c=c[1]-n[1];return[pa*N-c*ba+n[0],pa*ba+c*N+n[1]]}function Kl(c,n,N){return Kk(c,ik(yj(n,c),N))}function en(c,n,N){return Kk(c,ik(n,N))}function tq(c,n={}){let {size:N=16,smoothing:ba=.5,thinning:pa=.5,simulatePressure:Ba=!0,easing:Ia=If=>If,start:hb={},end:yb={},last:Yb=!1}=n,{cap:rc=!0,easing:Ac=If=>If*(2-If)}=hb,{cap:Yc=!0,easing:ud=If=>--If*If*If+1}=yb;if(0===c.length||0>=N)return[];var pd=c[c.length-1].runningLength;let Gd=!1===hb.taper?0:!0===hb.taper?Math.max(N,pd):hb.taper,Qd=!1===yb.taper?
0:!0===yb.taper?Math.max(N,pd):yb.taper;var hd=Math.pow(N*ba,2);n=[];let sd=[];var yd=c.slice(0,10).reduce((If,zf)=>{var Yf=zf.pressure;Ba&&(zf=Fp(1,zf.distance/N),Yf=Fp(1,1-zf),Yf=Fp(1,If+.275*(Yf-If)*zf));return(If+Yf)/2},c[0].pressure),Rd=Wk(N,pa,c[c.length-1].pressure,Ia),Id;let Ve=c[0].vector;var Xe=c[0].point;let hg=Xe;var kf=Xe;let Rf=hg;var Lg=!1;for(var ah=0;ah<c.length;ah++){var {pressure:Gg}=c[ah];let {point:If,vector:zf,distance:Yf,runningLength:ch}=c[ah];if(ah<c.length-1&&3>pd-ch)continue;
pa?(Ba&&(Rd=Fp(1,Yf/N),Gg=Fp(1,1-Rd),Gg=Fp(1,yd+.275*(Gg-yd)*Rd)),Rd=Wk(N,pa,Gg,Ia)):Rd=N/2;void 0===Id&&(Id=Rd);var bh=ch<Gd?Ac(ch/Gd):1,Df=pd-ch<Qd?ud((pd-ch)/Qd):1;Rd=Math.max(.01,Rd*Math.min(bh,Df));Df=(ah<c.length-1?c[ah+1]:c[ah]).vector;let Hh=ah<c.length-1?zf[0]*Df[0]+zf[1]*Df[1]:1;bh=null!==Hh&&0>Hh;if(0>zf[0]*Ve[0]+zf[1]*Ve[1]&&!Lg||bh){Xe=ik(ko(Ve),Rd);for(let Wi=1/13,$h=0;1>=$h;$h+=Wi)kf=Ak(yj(If,Xe),If,Uq*$h),n.push(kf),Rf=Ak(Kk(If,Xe),If,Uq*-$h),sd.push(Rf);Xe=kf;hg=Rf;bh&&(Lg=!0)}else(Lg=
!1,ah===c.length-1)?(Gg=ik(ko(zf),Rd),n.push(yj(If,Gg)),sd.push(Kk(If,Gg))):(yd=ik(ko(Kl(Df,zf,Hh)),Rd),kf=yj(If,yd),(1>=ah||zm(yj(Xe,kf))>hd)&&(n.push(kf),Xe=kf),Rf=Kk(If,yd),(1>=ah||zm(yj(hg,Rf))>hd)&&(sd.push(Rf),hg=Rf),yd=Gg,Ve=zf)}pd=c[0].point.slice(0,2);hd=1<c.length?c[c.length-1].point.slice(0,2):Kk(c[0].point,[1,1]);kf=[];Lg=[];if(1===c.length){if(!Gd&&!Qd||Yb){c=en(pd,dn(ko(yj(pd,hd))),-(Id||Rd));n=[];for(let If=1/13,zf=If;1>=zf;zf+=If)n.push(Ak(c,pd,2*Uq*zf));return n}}else{if(!(Gd||Qd&&
1===c.length))if(rc)for(let If=1/13,zf=If;1>=zf;zf+=If)Id=Ak(sd[0],pd,Uq*zf),kf.push(Id);else ah=yj(n[0],sd[0]),Id=ik(ah,.5),ah=ik(ah,.51),kf.push(yj(pd,Id),yj(pd,ah),Kk(pd,ah),Kk(pd,Id));Id=ko(ur(c[c.length-1].vector));if(Qd||Gd&&1===c.length)Lg.push(hd);else if(Yc){c=en(hd,Id,Rd);for(let If=1/29,zf=If;1>zf;zf+=If)Lg.push(Ak(c,hd,3*Uq*zf))}else Lg.push(Kk(hd,ik(Id,Rd)),Kk(hd,ik(Id,.99*Rd)),yj(hd,ik(Id,.99*Rd)),yj(hd,ik(Id,Rd)))}return n.concat(Lg,sd.reverse(),kf)}function Ws(c,n={}){var N;let {streamline:ba=
.5,size:pa=16,last:Ba=!1}=n;if(0===c.length)return[];n=.15+.85*(1-ba);c=Array.isArray(c[0])?c:c.map(({x:Ac,y:Yc,pressure:ud=.5})=>[Ac,Yc,ud]);if(2===c.length){var Ia=c[1];c=c.slice(0,-1);for(var hb=1;5>hb;hb++)c.push(Kl(c[0],Ia,hb/4))}1===c.length&&(c=[...c,[...Kk(c[0],[1,1]),...c[0].slice(2)]]);Ia=[{point:[c[0][0],c[0][1]],pressure:0<=c[0][2]?c[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];hb=!1;let yb=0,Yb=Ia[0],rc=c.length-1;for(let Ac=1;Ac<c.length;Ac++){let Yc=Ba&&Ac===rc?c[Ac].slice(0,
2):Kl(Yb.point,c[Ac],n);if(Us(Yb.point,Yc))continue;let ud=sr(Yc,Yb.point);if(yb+=ud,Ac<rc&&!hb){if(yb<pa)continue;hb=!0}Yb={point:Yc,pressure:0<=c[Ac][2]?c[Ac][2]:.5,vector:dn(yj(Yb.point,Yc)),distance:ud,runningLength:yb};Ia.push(Yb)}return Ia[0].vector=(null==(N=Ia[1])?void 0:N.vector)||[0,0],Ia}function cp(c,n=4/3){return(new sq(c)).exportAsSVG(n)}function dp(c,n=4/3){return(new sq(c)).generatePreviewJsx(void 0,n)}function ul({id:c,type:n,onRemove:N,showContent:ba}){const pa=Ze(),{handlers:Ba}=
vx.default.useContext(vi),Ia=Ba.t;return(0,Xi.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,Xi.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,Xi.jsx)(wx,{id:c,showReferenceContent:ba})}),(0,Xi.jsx)("div",{className:"flex-1"}),Ba.getBlockPageName(c)!==pa.currentPage.name&&(0,Xi.jsx)(Bh,{tooltip:Ia("whiteboard/open-page"),type:"button",onClick:()=>null==Ba?void 0:Ba.redirectToPage(c),children:(0,Xi.jsx)(hh,
{name:"open-as-page"})}),(0,Xi.jsx)(Bh,{tooltip:Ia("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==Ba?void 0:Ba.sidebarAddBlock(c,"B"===n?"block":"page"),children:(0,Xi.jsx)(hh,{name:"move-to-sidebar-right"})}),N&&(0,Xi.jsx)(Bh,{className:"tl-shape-links-panel-item-remove-button",tooltip:Ia("whiteboard/remove-link"),type:"button",onClick:N,children:(0,Xi.jsx)(hh,{name:"x",className:"!translate-y-0"})})]})}function Bk({options:c,value:n,onValueChange:N}){return(0,yn.jsx)(is.ToggleGroup,
{type:"single",value:n,onValueChange:N,children:c.map(ba=>(0,yn.jsx)(Oh,{content:ba.tooltip,children:(0,yn.jsx)("div",{className:"inline-flex",children:(0,yn.jsx)(is.ToggleGroupItem,{className:"tl-button",value:ba.value,disabled:ba.value===n,children:(0,yn.jsx)(hh,{name:ba.icon})})})},ba.value))})}function ui({options:c,value:n,onValueChange:N}){return(0,yn.jsx)(is.ToggleGroup,{className:"inline-flex",type:"multiple",value:n,onValueChange:N,children:c.map(ba=>(0,yn.jsx)(is.ToggleGroupItem,{className:"tl-button",
value:ba.value,children:(0,yn.jsx)(hh,{name:ba.icon})},ba.value))})}function sk(c){return Ze().selectedShapesArray.filter(n=>!n.props.isLocked).filter(n=>{var N;return null==(N=qj[n.props.type])?void 0:N.includes(c)})}function vq(c){var n;c=c.match(/\.[0-9a-z]+$/i);if(!c)return"unknown";const N=c[0].toLowerCase();[c]=null!=(n=Object.entries(ps).find(([,ba])=>ba.includes(N)))?n:["unknown",null];return c}function Xk(...c){return(...n)=>Zh(this,null,function*(){for(const N of c){const ba=yield N(...n);
if(ba&&0<ba.length)return ba}return null})}function Bm(c,n){return Zh(this,null,function*(){return c.types.includes(n)?c instanceof DataTransfer?c.getData(n):yield(yield c.getType(n)).text():null})}function vr(){const {handlers:c}=Mp.useContext(vi);return Mp.useCallback((n,N)=>Zh(this,null,function*(){if(N.shiftKey&&1===n.selectedShapesArray.length){var ba=yield navigator.clipboard.read();let pa;0<ba.length&&(ba=(yield(yield ba[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(ba)&&
40===ba.length?(ba=ba.slice(2,-2),mg(ba)&&(pa=ba)):/^\[\[.*\]\]$/.test(ba)&&(pa=ba.slice(2,-2)));if(pa){n.selectedShapesArray[0].update({refs:[pa]});n.persist();return}}qs(n,N,c)}),[])}function tk(){const c=vr();return Lp.useCallback((n,N)=>Zh(this,[n,N],function*(ba,{dataTransfer:pa,point:Ba}){c(ba,{point:Ba,shiftKey:!1,dataTransfer:pa,fromDrop:!0})}),[])}function wr(){const {handlers:c}=ru.useContext(vi);return ru.useCallback((n,{text:N,html:ba})=>{c.copyToClipboard(N,ba)},[])}function xr(){return rs.default.useCallback(c=>
Zh(this,null,function*(){setTimeout(()=>{c.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var hm=Object.create,vl=Object.defineProperty,ep=Object.defineProperties,gn=Object.getOwnPropertyDescriptor,lo=Object.getOwnPropertyDescriptors,hn=Object.getOwnPropertyNames,fp=Object.getOwnPropertySymbols,wq=Object.getPrototypeOf,mo=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,Cm=(c,n,N)=>n in c?vl(c,n,{enumerable:!0,configurable:!0,writable:!0,value:N}):
c[n]=N,Ef=(c,n)=>{for(var N in n||={})mo.call(n,N)&&Cm(c,N,n[N]);if(fp)for(N of fp(n))jn.call(n,N)&&Cm(c,N,n[N]);return c},qg=(c,n)=>ep(c,lo(n)),Yi=(c,n)=>{var N={},ba;for(ba in c)mo.call(c,ba)&&0>n.indexOf(ba)&&(N[ba]=c[ba]);if(null!=c&&fp)for(ba of fp(c))0>n.indexOf(ba)&&jn.call(c,ba)&&(N[ba]=c[ba]);return N},no=(c,n)=>function(){return n||(0,c[hn(c)[0]])((n={exports:{}}).exports,n),n.exports},uk=(c,n,N,ba)=>{if(n&&"object"===typeof n||"function"===typeof n)for(let pa of hn(n))mo.call(c,pa)||pa===
N||vl(c,pa,{get:()=>n[pa],enumerable:!(ba=gn(n,pa))||ba.enumerable});return c},Of=(c,n,N)=>(N=null!=c?hm(wq(c)):{},uk(!n&&c&&c.__esModule?N:vl(N,"default",{value:c,enumerable:!0}),c)),we=(c,n,N,ba)=>{for(var pa=1<ba?void 0:ba?gn(n,N):n,Ba=c.length-1,Ia;0<=Ba;Ba--)if(Ia=c[Ba])pa=(ba?Ia(n,N,pa):Ia(pa))||pa;ba&&pa&&vl(n,N,pa);return pa},Ab=(c,n,N)=>{Cm(c,"symbol"!==typeof n?n+"":n,N);return N},Zh=(c,n,N)=>new Promise((ba,pa)=>{var Ba=yb=>{try{hb(N.next(yb))}catch(Yb){pa(Yb)}},Ia=yb=>{try{hb(N.throw(yb))}catch(Yb){pa(Yb)}},
hb=yb=>yb.done?ba(yb.value):Promise.resolve(yb.value).then(Ba,Ia);hb((N=N.apply(c,n)).next())}),G=no({["../../node_modules/rbush/rbush.min.js"](c,n){!function(N,ba){"object"==typeof c&&"undefined"!=typeof n?n.exports=ba():"function"==typeof define&&define.amd?define(ba):(N=N||self).RBush=ba()}(c,function(){function N(hd,sd,yd,Rd,Id){!function ah(Xe,hg,kf,Rf,Lg){for(;Rf>kf;){if(600<Rf-kf){var Gg=Rf-kf+1,bh=hg-kf+1,Df=Math.log(Gg),If=.5*Math.exp(2*Df/3);Df=.5*Math.sqrt(Df*If*(Gg-If)/Gg)*(0>bh-Gg/2?
-1:1);ah(Xe,hg,Math.max(kf,Math.floor(hg-bh*If/Gg+Df)),Math.min(Rf,Math.floor(hg+(Gg-bh)*If/Gg+Df)),Lg)}Gg=Xe[hg];bh=kf;If=Rf;ba(Xe,kf,hg);for(0<Lg(Xe[Rf],Gg)&&ba(Xe,kf,Rf);bh<If;){ba(Xe,bh,If);bh++;for(If--;0>Lg(Xe[bh],Gg);)bh++;for(;0<Lg(Xe[If],Gg);)If--}0===Lg(Xe[kf],Gg)?ba(Xe,kf,If):ba(Xe,++If,Rf);If<=hg&&(kf=If+1);hg<=If&&(Rf=If-1)}}(hd,sd,yd||0,Rd||hd.length-1,Id||pa)}function ba(hd,sd,yd){var Rd=hd[sd];hd[sd]=hd[yd];hd[yd]=Rd}function pa(hd,sd){return hd<sd?-1:hd>sd?1:0}function Ba(hd,sd){Ia(hd,
0,hd.children.length,sd,hd)}function Ia(hd,sd,yd,Rd,Id){Id||=pd(null);Id.minX=1/0;Id.minY=1/0;Id.maxX=-1/0;for(Id.maxY=-1/0;sd<yd;sd++){var Ve=hd.children[sd];hb(Id,hd.leaf?Rd(Ve):Ve)}return Id}function hb(hd,sd){return hd.minX=Math.min(hd.minX,sd.minX),hd.minY=Math.min(hd.minY,sd.minY),hd.maxX=Math.max(hd.maxX,sd.maxX),hd.maxY=Math.max(hd.maxY,sd.maxY),hd}function yb(hd,sd){return hd.minX-sd.minX}function Yb(hd,sd){return hd.minY-sd.minY}function rc(hd){return(hd.maxX-hd.minX)*(hd.maxY-hd.minY)}
function Ac(hd){return hd.maxX-hd.minX+(hd.maxY-hd.minY)}function Yc(hd,sd){return hd.minX<=sd.minX&&hd.minY<=sd.minY&&sd.maxX<=hd.maxX&&sd.maxY<=hd.maxY}function ud(hd,sd){return sd.minX<=hd.maxX&&sd.minY<=hd.maxY&&sd.maxX>=hd.minX&&sd.maxY>=hd.minY}function pd(hd){return{children:hd,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Gd(hd,sd,yd,Rd,Id){for(var Ve=[sd,yd];Ve.length;)if(!((yd=Ve.pop())-(sd=Ve.pop())<=Rd)){var Xe=sd+Math.ceil((yd-sd)/Rd/2)*Rd;N(hd,Xe,sd,yd,Id);Ve.push(sd,
Xe,Xe,yd)}}var Qd=function(hd){void 0===hd&&(hd=9);this._maxEntries=Math.max(4,hd);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return Qd.prototype.all=function(){return this._all(this.data,[])},Qd.prototype.search=function(hd){var sd=this.data,yd=[];if(!ud(hd,sd))return yd;for(var Rd=this.toBBox,Id=[];sd;){for(var Ve=0;Ve<sd.children.length;Ve++){var Xe=sd.children[Ve],hg=sd.leaf?Rd(Xe):Xe;ud(hd,hg)&&(sd.leaf?yd.push(Xe):Yc(hd,hg)?this._all(Xe,yd):Id.push(Xe))}sd=Id.pop()}return yd},
Qd.prototype.collides=function(hd){var sd=this.data;if(!ud(hd,sd))return!1;for(var yd=[];sd;){for(var Rd=0;Rd<sd.children.length;Rd++){var Id=sd.children[Rd],Ve=sd.leaf?this.toBBox(Id):Id;if(ud(hd,Ve)){if(sd.leaf||Yc(hd,Ve))return!0;yd.push(Id)}}sd=yd.pop()}return!1},Qd.prototype.load=function(hd){if(!hd||!hd.length)return this;if(hd.length<this._minEntries){for(var sd=0;sd<hd.length;sd++)this.insert(hd[sd]);return this}hd=this._build(hd.slice(),0,hd.length-1,0);this.data.children.length?this.data.height===
hd.height?this._splitRoot(this.data,hd):(this.data.height<hd.height&&(sd=this.data,this.data=hd,hd=sd),this._insert(hd,this.data.height-hd.height-1,!0)):this.data=hd;return this},Qd.prototype.insert=function(hd){return hd&&this._insert(hd,this.data.height-1),this},Qd.prototype.clear=function(){return this.data=pd([]),this},Qd.prototype.remove=function(hd,sd){if(!hd)return this;for(var yd,Rd,Id,Ve=this.data,Xe=this.toBBox(hd),hg=[],kf=[];Ve||hg.length;){if(Ve||(Ve=hg.pop(),Rd=hg[hg.length-1],yd=kf.pop(),
Id=!0),Ve.leaf){a:{var Rf=hd;var Lg=Ve.children,ah=sd;if(ah){for(var Gg=0;Gg<Lg.length;Gg++)if(ah(Rf,Lg[Gg])){Rf=Gg;break a}Rf=-1}else Rf=Lg.indexOf(Rf)}if(-1!==Rf)return Ve.children.splice(Rf,1),hg.push(Ve),this._condense(hg),this}Id||Ve.leaf||!Yc(Ve,Xe)?Rd?(yd++,Ve=Rd.children[yd],Id=!1):Ve=null:(hg.push(Ve),kf.push(yd),yd=0,Rd=Ve,Ve=Ve.children[0])}return this},Qd.prototype.toBBox=function(hd){return hd},Qd.prototype.compareMinX=function(hd,sd){return hd.minX-sd.minX},Qd.prototype.compareMinY=
function(hd,sd){return hd.minY-sd.minY},Qd.prototype.toJSON=function(){return this.data},Qd.prototype.fromJSON=function(hd){return this.data=hd,this},Qd.prototype._all=function(hd,sd){for(var yd=[];hd;)hd.leaf?sd.push.apply(sd,hd.children):yd.push.apply(yd,hd.children),hd=yd.pop();return sd},Qd.prototype._build=function(hd,sd,yd,Rd){var Id,Ve=yd-sd+1,Xe=this._maxEntries;if(Ve<=Xe)return Ba(Id=pd(hd.slice(sd,yd+1)),this.toBBox),Id;Rd||(Rd=Math.ceil(Math.log(Ve)/Math.log(Xe)),Xe=Math.ceil(Ve/Math.pow(Xe,
Rd-1)));(Id=pd([])).leaf=!1;Id.height=Rd;Ve=Math.ceil(Ve/Xe);Xe=Ve*Math.ceil(Math.sqrt(Xe));for(Gd(hd,sd,yd,Xe,this.compareMinX);sd<=yd;sd+=Xe){var hg=Math.min(sd+Xe-1,yd);Gd(hd,sd,hg,Ve,this.compareMinY);for(var kf=sd;kf<=hg;kf+=Ve)Id.children.push(this._build(hd,kf,Math.min(kf+Ve-1,hg),Rd-1))}return Ba(Id,this.toBBox),Id},Qd.prototype._chooseSubtree=function(hd,sd,yd,Rd){for(;Rd.push(sd),!sd.leaf&&Rd.length-1!==yd;){for(var Id=1/0,Ve=1/0,Xe=void 0,hg=0;hg<sd.children.length;hg++){var kf=sd.children[hg],
Rf=rc(kf),Lg=(ah=hd,Gg=kf,(Math.max(Gg.maxX,ah.maxX)-Math.min(Gg.minX,ah.minX))*(Math.max(Gg.maxY,ah.maxY)-Math.min(Gg.minY,ah.minY))-Rf);Lg<Ve?(Ve=Lg,Id=Rf<Id?Rf:Id,Xe=kf):Lg===Ve&&Rf<Id&&(Id=Rf,Xe=kf)}sd=Xe||sd.children[0]}var ah,Gg;return sd},Qd.prototype._insert=function(hd,sd,yd){yd=yd?hd:this.toBBox(hd);var Rd=[],Id=this._chooseSubtree(yd,this.data,sd,Rd);Id.children.push(hd);for(hb(Id,yd);0<=sd&&Rd[sd].children.length>this._maxEntries;)this._split(Rd,sd),sd--;this._adjustParentBBoxes(yd,Rd,
sd)},Qd.prototype._split=function(hd,sd){var yd=hd[sd],Rd=yd.children.length,Id=this._minEntries;this._chooseSplitAxis(yd,Id,Rd);Rd=this._chooseSplitIndex(yd,Id,Rd);Rd=pd(yd.children.splice(Rd,yd.children.length-Rd));Rd.height=yd.height;Rd.leaf=yd.leaf;Ba(yd,this.toBBox);Ba(Rd,this.toBBox);sd?hd[sd-1].children.push(Rd):this._splitRoot(yd,Rd)},Qd.prototype._splitRoot=function(hd,sd){this.data=pd([hd,sd]);this.data.height=hd.height+1;this.data.leaf=!1;Ba(this.data,this.toBBox)},Qd.prototype._chooseSplitIndex=
function(hd,sd,yd){for(var Rd,Id,Ve,Xe,hg,kf,Rf,Lg=1/0,ah=1/0,Gg=sd;Gg<=yd-sd;Gg++){var bh=Ia(hd,0,Gg,this.toBBox),Df=Ia(hd,Gg,yd,this.toBBox),If=(Id=bh,Ve=Df,Xe=void 0,hg=void 0,kf=void 0,Rf=void 0,Xe=Math.max(Id.minX,Ve.minX),hg=Math.max(Id.minY,Ve.minY),kf=Math.min(Id.maxX,Ve.maxX),Rf=Math.min(Id.maxY,Ve.maxY),Math.max(0,kf-Xe)*Math.max(0,Rf-hg));bh=rc(bh)+rc(Df);If<Lg?(Lg=If,Rd=Gg,ah=bh<ah?bh:ah):If===Lg&&bh<ah&&(ah=bh,Rd=Gg)}return Rd||yd-sd},Qd.prototype._chooseSplitAxis=function(hd,sd,yd){var Rd=
hd.leaf?this.compareMinX:yb,Id=hd.leaf?this.compareMinY:Yb;this._allDistMargin(hd,sd,yd,Rd)<this._allDistMargin(hd,sd,yd,Id)&&hd.children.sort(Rd)},Qd.prototype._allDistMargin=function(hd,sd,yd,Rd){hd.children.sort(Rd);Rd=this.toBBox;for(var Id=Ia(hd,0,sd,Rd),Ve=Ia(hd,yd-sd,yd,Rd),Xe=Ac(Id)+Ac(Ve),hg=sd;hg<yd-sd;hg++){var kf=hd.children[hg];hb(Id,hd.leaf?Rd(kf):kf);Xe+=Ac(Id)}for(yd=yd-sd-1;yd>=sd;yd--)Id=hd.children[yd],hb(Ve,hd.leaf?Rd(Id):Id),Xe+=Ac(Ve);return Xe},Qd.prototype._adjustParentBBoxes=
function(hd,sd,yd){for(;0<=yd;yd--)hb(sd[yd],hd)},Qd.prototype._condense=function(hd){for(var sd=hd.length-1,yd=void 0;0<=sd;sd--)0===hd[sd].children.length?0<sd?(yd=hd[sd-1].children).splice(yd.indexOf(hd[sd]),1):this.clear():Ba(hd[sd],this.toBBox)},Qd})}}),Z=no({["../../node_modules/fast-deep-equal/index.js"](c,n){n.exports=function Ba(ba,pa){if(ba===pa)return!0;if(ba&&pa&&"object"==typeof ba&&"object"==typeof pa){if(ba.constructor!==pa.constructor)return!1;var Ia;if(Array.isArray(ba)){var hb=ba.length;
if(hb!=pa.length)return!1;for(Ia=hb;0!==Ia--;)if(!Ba(ba[Ia],pa[Ia]))return!1;return!0}if(ba.constructor===RegExp)return ba.source===pa.source&&ba.flags===pa.flags;if(ba.valueOf!==Object.prototype.valueOf)return ba.valueOf()===pa.valueOf();if(ba.toString!==Object.prototype.toString)return ba.toString()===pa.toString();var yb=Object.keys(ba);hb=yb.length;if(hb!==Object.keys(pa).length)return!1;for(Ia=hb;0!==Ia--;)if(!Object.prototype.hasOwnProperty.call(pa,yb[Ia]))return!1;for(Ia=hb;0!==Ia--;)if(hb=
yb[Ia],!Ba(ba[hb],pa[hb]))return!1;return!0}return ba!==ba&&pa!==pa}}}),ya=no({["../../../../node_modules/deepmerge/dist/cjs.js"](c,n){function N(Ac,Yc){return!1!==Yc.clone&&Yc.isMergeableObject(Ac)?yb(Array.isArray(Ac)?[]:{},Ac,Yc):Ac}function ba(Ac,Yc,ud){return Ac.concat(Yc).map(function(pd){return N(pd,ud)})}function pa(Ac){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(Ac).filter(function(Yc){return Object.propertyIsEnumerable.call(Ac,Yc)}):[]}function Ba(Ac){return Object.keys(Ac).concat(pa(Ac))}
function Ia(Ac,Yc){try{return Yc in Ac}catch(ud){return!1}}function hb(Ac,Yc,ud){var pd={};ud.isMergeableObject(Ac)&&Ba(Ac).forEach(function(Gd){pd[Gd]=N(Ac[Gd],ud)});Ba(Yc).forEach(function(Gd){if(!Ia(Ac,Gd)||Object.hasOwnProperty.call(Ac,Gd)&&Object.propertyIsEnumerable.call(Ac,Gd))if(Ia(Ac,Gd)&&ud.isMergeableObject(Yc[Gd])){if(ud.customMerge){var Qd=ud.customMerge(Gd);Qd="function"===typeof Qd?Qd:yb}else Qd=yb;pd[Gd]=Qd(Ac[Gd],Yc[Gd],ud)}else pd[Gd]=N(Yc[Gd],ud)});return pd}function yb(Ac,Yc,ud){ud=
ud||{};ud.arrayMerge=ud.arrayMerge||ba;ud.isMergeableObject=ud.isMergeableObject||Yb;ud.cloneUnlessOtherwiseSpecified=N;var pd=Array.isArray(Yc),Gd=Array.isArray(Ac);return pd!==Gd?N(Yc,ud):pd?ud.arrayMerge(Ac,Yc,ud):hb(Ac,Yc,ud)}var Yb=function(Ac){var Yc;if(Yc=!!Ac&&"object"===typeof Ac)Yc=Object.prototype.toString.call(Ac),Yc=!("[object RegExp]"===Yc||"[object Date]"===Yc||Ac.$$typeof===rc);return Yc},rc="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;yb.all=function(Ac,
Yc){if(!Array.isArray(Ac))throw Error("first argument should be an array");return Ac.reduce(function(ud,pd){return yb(ud,pd,Yc)},{})};n.exports=yb}}),wa={};((c,n)=>{for(var N in n)vl(c,N,{get:n[N],enumerable:!0})})(wa,{App:()=>ar,PreviewManager:()=>sq,generateJSXFromModel:()=>dp,generateSVGFromModel:()=>cp});Ta.exports=(c=>uk(vl({},"__esModule",{value:!0}),c))(wa);var Ka=(c=>{c.Yellow="yellow";c.Red="red";c.Pink="pink";c.Green="green";c.Blue="blue";c.Purple="purple";c.Gray="gray";c.Default="";return c})(Ka||
{}),ob=(c=>{c.Box="box";c.Ellipse="ellipse";c.Polygon="polygon";return c})(ob||{}),Lb,Pb=new Uint8Array(16),xc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gd=[];for(let c=0;256>c;++c)gd.push((c+256).toString(16).slice(1));var zd,be,fe=0,me=0,Se=function(c,n,N){N=n&&N||0;const ba=n||Array(16);c=c||{};let pa=c.node||zd;var Ba=void 0!==c.clockseq?c.clockseq:be;if(null==pa||null==Ba){var Ia=c.random||(c.rng||y)();null==pa&&(pa=
zd=[Ia[0]|1,Ia[1],Ia[2],Ia[3],Ia[4],Ia[5]]);null==Ba&&(Ba=be=(Ia[6]<<8|Ia[7])&16383)}Ia=void 0!==c.msecs?c.msecs:Date.now();let hb=void 0!==c.nsecs?c.nsecs:me+1;const yb=Ia-fe+(hb-me)/1E4;0>yb&&void 0===c.clockseq&&(Ba=Ba+1&16383);(0>yb||Ia>fe)&&void 0===c.nsecs&&(hb=0);if(1E4<=hb)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");fe=Ia;me=hb;be=Ba;Ia+=122192928E5;c=(1E4*(Ia&268435455)+hb)%4294967296;ba[N++]=c>>>24&255;ba[N++]=c>>>16&255;ba[N++]=c>>>8&255;ba[N++]=c&255;c=Ia/4294967296*
1E4&268435455;ba[N++]=c>>>8&255;ba[N++]=c&255;ba[N++]=c>>>24&15|16;ba[N++]=c>>>16&255;ba[N++]=Ba>>>8|128;ba[N++]=Ba&255;for(Ba=0;6>Ba;++Ba)ba[N+Ba]=pa[Ba];return n||W(ba)},hf=class{static clamp(c,n,N){return Math.max(n,"undefined"!==typeof N?Math.min(c,N):c)}static clampV(c,n,N){return c.map(ba=>N?hf.clamp(ba,n,N):hf.clamp(ba,n))}static cross(c,n,N){return(n[0]-c[0])*(N[1]-c[1])-(N[0]-c[0])*(n[1]-c[1])}static snap(c,n=1){return[Math.round(c[0]/n)*n,Math.round(c[1]/n)*n]}},Hd=hf;Hd.neg=c=>[-c[0],-c[1]];
Hd.add=(c,n)=>[c[0]+n[0],c[1]+n[1]];Hd.addScalar=(c,n)=>[c[0]+n,c[1]+n];Hd.sub=(c,n)=>[c[0]-n[0],c[1]-n[1]];Hd.subScalar=(c,n)=>[c[0]-n,c[1]-n];Hd.vec=(c,n)=>[n[0]-c[0],n[1]-c[1]];Hd.mul=(c,n)=>[c[0]*n,c[1]*n];Hd.mulV=(c,n)=>[c[0]*n[0],c[1]*n[1]];Hd.div=(c,n)=>[c[0]/n,c[1]/n];Hd.divV=(c,n)=>[c[0]/n[0],c[1]/n[1]];Hd.per=c=>[c[1],-c[0]];Hd.dpr=(c,n)=>c[0]*n[0]+c[1]*n[1];Hd.cpr=(c,n)=>c[0]*n[1]-n[0]*c[1];Hd.len2=c=>c[0]*c[0]+c[1]*c[1];Hd.len=c=>Math.hypot(c[0],c[1]);Hd.pry=(c,n)=>hf.dpr(c,n)/hf.len(n);
Hd.uni=c=>hf.div(c,hf.len(c));Hd.normalize=c=>hf.uni(c);Hd.tangent=(c,n)=>hf.uni(hf.sub(c,n));Hd.dist2=(c,n)=>hf.len2(hf.sub(c,n));Hd.dist=(c,n)=>Math.hypot(c[1]-n[1],c[0]-n[0]);Hd.fastDist=(c,n)=>{c=[n[0]-c[0],n[1]-c[1]];n=[Math.abs(c[0]),Math.abs(c[1])];let N=1/Math.max(n[0],n[1]);N*=1.29289-(n[0]+n[1])*N*.29289;return[c[0]*N,c[1]*N]};Hd.ang=(c,n)=>Math.atan2(hf.cpr(c,n),hf.dpr(c,n));Hd.angle=(c,n)=>Math.atan2(n[1]-c[1],n[0]-c[0]);Hd.med=(c,n)=>hf.mul(hf.add(c,n),.5);Hd.rot=(c,n=0)=>[c[0]*Math.cos(n)-
c[1]*Math.sin(n),c[0]*Math.sin(n)+c[1]*Math.cos(n)];Hd.rotWith=(c,n,N=0)=>{if(0===N)return c;const ba=Math.sin(N);N=Math.cos(N);const pa=c[0]-n[0];c=c[1]-n[1];return[pa*N-c*ba+n[0],pa*ba+c*N+n[1]]};Hd.isEqual=(c,n)=>c[0]===n[0]&&c[1]===n[1];Hd.lrp=(c,n,N)=>hf.add(c,hf.mul(hf.sub(n,c),N));Hd.int=(c,n,N,ba,pa=1)=>{N=(hf.clamp(N,ba)-N)/(ba-N);return hf.add(hf.mul(c,1-N),hf.mul(n,pa))};Hd.ang3=(c,n,N)=>{c=hf.vec(n,c);n=hf.vec(n,N);return hf.ang(c,n)};Hd.abs=c=>[Math.abs(c[0]),Math.abs(c[1])];Hd.rescale=
(c,n)=>{const N=hf.len(c);return[n*c[0]/N,n*c[1]/N]};Hd.isLeft=(c,n,N)=>(n[0]-c[0])*(N[1]-c[1])-(N[0]-c[0])*(n[1]-c[1]);Hd.clockwise=(c,n,N)=>0<hf.isLeft(c,n,N);Hd.toFixed=c=>c.map(n=>Math.round(100*n)/100);Hd.nearestPointOnLineThroughPoint=(c,n,N)=>hf.add(c,hf.mul(n,hf.pry(hf.sub(N,c),n)));Hd.distanceToLineThroughPoint=(c,n,N)=>hf.dist(N,hf.nearestPointOnLineThroughPoint(c,n,N));Hd.nearestPointOnLineSegment=(c,n,N,ba=!0)=>{const pa=hf.uni(hf.sub(n,c));N=hf.add(c,hf.mul(pa,hf.pry(hf.sub(N,c),pa)));
if(ba){if(N[0]<Math.min(c[0],n[0]))return c[0]<n[0]?c:n;if(N[0]>Math.max(c[0],n[0]))return c[0]>n[0]?c:n;if(N[1]<Math.min(c[1],n[1]))return c[1]<n[1]?c:n;if(N[1]>Math.max(c[1],n[1]))return c[1]>n[1]?c:n}return N};Hd.distanceToLineSegment=(c,n,N,ba=!0)=>hf.dist(N,hf.nearestPointOnLineSegment(c,n,N,ba));Hd.nudge=(c,n,N)=>hf.isEqual(c,n)?c:hf.add(c,hf.mul(hf.uni(hf.sub(n,c)),N));Hd.nudgeAtAngle=(c,n,N)=>[Math.cos(n)*N+c[0],Math.sin(n)*N+c[1]];Hd.toPrecision=(c,n=4)=>[+c[0].toPrecision(n),+c[1].toPrecision(n)];
Hd.pointsBetween=(c,n,N=6)=>Array.from(Array(N)).map((ba,pa)=>{ba=pa/(N-1);pa=Math.min(1,.5+Math.abs(.5-ba));return[...hf.lrp(c,n,ba),pa]});Hd.slope=(c,n)=>c[0]===n[0]?NaN:(c[1]-n[1])/(c[0]-n[0]);Hd.toAngle=c=>{c=Math.atan2(c[1],c[0]);return 0>c?c+2*Math.PI:c};Hd.max=(...c)=>[Math.max(...c.map(n=>n[0])),Math.max(...c.map(n=>n[1]))];Hd.min=(...c)=>[Math.min(...c.map(n=>n[0])),Math.min(...c.map(n=>n[1]))];var te=Hd,Qe=class{static getRectangleSides(c,n,N=0){const ba=[c[0]+n[0]/2,c[1]+n[1]/2],pa=Hd.rotWith(c,
ba,N),Ba=Hd.rotWith(Hd.add(c,[n[0],0]),ba,N),Ia=Hd.rotWith(Hd.add(c,n),ba,N);c=Hd.rotWith(Hd.add(c,[0,n[1]]),ba,N);return[["top",[pa,Ba]],["right",[Ba,Ia]],["bottom",[Ia,c]],["left",[c,pa]]]}static getBoundsSides(c){return Qe.getRectangleSides([c.minX,c.minY],[c.width,c.height])}static expandBounds(c,n){return{minX:c.minX-n,minY:c.minY-n,maxX:c.maxX+n,maxY:c.maxY+n,width:c.width+2*n,height:c.height+2*n}}static boundsCollide(c,n){return!(c.maxX<n.minX||c.minX>n.maxX||c.maxY<n.minY||c.minY>n.maxY)}static boundsContain(c,
n){return Array.isArray(n)?c.minX<n[0]&&c.minY<n[1]&&c.maxY>n[1]&&c.maxX>n[0]:c.minX<n.minX&&c.minY<n.minY&&c.maxY>n.maxY&&c.maxX>n.maxX}static boundsContained(c,n){return Qe.boundsContain(n,c)}static boundsAreEqual(c,n){return!(n.maxX!==c.maxX||n.minX!==c.minX||n.maxY!==c.maxY||n.minY!==c.minY)}static getBoundsFromPoints(c,n=0){let N=Infinity,ba=Infinity,pa=-Infinity,Ba=-Infinity;if(2>c.length)ba=N=0,Ba=pa=1;else for(const Ia of c)N=Math.min(Ia[0],N),ba=Math.min(Ia[1],ba),pa=Math.max(Ia[0],pa),Ba=
Math.max(Ia[1],Ba);return 0!==n?Qe.getBoundsFromPoints(c.map(Ia=>Hd.rotWith(Ia,[(N+pa)/2,(ba+Ba)/2],n))):{minX:N,minY:ba,maxX:pa,maxY:Ba,width:Math.max(1,pa-N),height:Math.max(1,Ba-ba)}}static centerBounds(c,n){const N=Qe.getBoundsCenter(c);return Qe.translateBounds(c,[n[0]-N[0],n[1]-N[1]])}static snapBoundsToGrid(c,n){const N=Math.round(c.minX/n)*n,ba=Math.round(c.minY/n)*n,pa=Math.round(c.maxX/n)*n;c=Math.round(c.maxY/n)*n;return{minX:N,minY:ba,maxX:pa,maxY:c,width:Math.max(1,pa-N),height:Math.max(1,
c-ba)}}static translateBounds(c,n){return{minX:c.minX+n[0],minY:c.minY+n[1],maxX:c.maxX+n[0],maxY:c.maxY+n[1],width:c.width,height:c.height}}static multiplyBounds(c,n){const N=Qe.getBoundsCenter(c);return Qe.centerBounds({minX:c.minX*n,minY:c.minY*n,maxX:c.maxX*n,maxY:c.maxY*n,width:c.width*n,height:c.height*n},[N[0]*n,N[1]*n])}static divideBounds(c,n){const N=Qe.getBoundsCenter(c);return Qe.centerBounds({minX:c.minX/n,minY:c.minY/n,maxX:c.maxX/n,maxY:c.maxY/n,width:c.width/n,height:c.height/n},[N[0]/
n,N[1]/n])}static getRotatedBounds(c,n=0){c=Qe.getRotatedCorners(c,n);let N=n=Infinity,ba=-Infinity,pa=-Infinity;for(const Ba of c)n=Math.min(Ba[0],n),N=Math.min(Ba[1],N),ba=Math.max(Ba[0],ba),pa=Math.max(Ba[1],pa);return{minX:n,minY:N,maxX:ba,maxY:pa,width:Math.max(1,ba-n),height:Math.max(1,pa-N),rotation:0}}static getRotatedEllipseBounds(c,n,N,ba,pa=0){var Ba=Math.cos(pa);const Ia=Math.sin(pa);pa=Math.hypot(N*Ba,ba*Ia);Ba=Math.hypot(N*Ia,ba*Ba);return{minX:c+N-pa,minY:n+ba-Ba,maxX:c+N+pa,maxY:n+
ba+Ba,width:2*pa,height:2*Ba}}static getExpandedBounds(c,n){const N=Math.min(c.minX,n.minX),ba=Math.min(c.minY,n.minY),pa=Math.max(c.maxX,n.maxX);c=Math.max(c.maxY,n.maxY);return{minX:N,minY:ba,maxX:pa,maxY:c,width:Math.abs(pa-N),height:Math.abs(c-ba)}}static getCommonBounds(c){if(2>c.length)return c[0];let n=c[0];for(let N=1;N<c.length;N++)n=Qe.getExpandedBounds(n,c[N]);return n}static getRotatedCorners(c,n=0){const N=[c.minX+c.width/2,c.minY+c.height/2];c=[[c.minX,c.minY],[c.maxX,c.minY],[c.maxX,
c.maxY],[c.minX,c.maxY]];return n?c.map(ba=>Hd.rotWith(ba,N,n)):c}static getTransformedBoundingBox(c,n,N,ba=0,pa=!1){const [Ba,Ia]=[c.minX,c.minY],[hb,yb]=[c.maxX,c.maxY];let [Yb,rc]=[c.minX,c.minY],[Ac,Yc]=[c.maxX,c.maxY];if("center"===n)return{minX:Yb+N[0],minY:rc+N[1],maxX:Ac+N[0],maxY:Yc+N[1],width:Ac-Yb,height:Yc-rc,scaleX:1,scaleY:1};const [ud,pd]=Hd.rot(N,-ba);switch(n){case "top_edge":case "top_left_corner":case "top_right_corner":rc+=pd;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Yc+=
pd}switch(n){case "left_edge":case "top_left_corner":case "bottom_left_corner":Yb+=ud;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":Ac+=ud}var Gd=hb-Ba;const Qd=yb-Ia;var hd=(Ac-Yb)/Gd,sd=(Yc-rc)/Qd;c=0>hd;N=0>sd;var yd=Math.abs(Ac-Yb),Rd=Math.abs(Yc-rc);if(pa)switch(pa=Gd/Qd,Gd=pa<yd/Rd,sd=1/pa*(0>sd?1:-1)*yd,hd=Rd*(0>hd?1:-1)*pa,n){case "top_left_corner":Gd?rc=Yc+sd:Yb=Ac+hd;break;case "top_right_corner":Gd?rc=Yc+sd:Ac=Yb-hd;break;case "bottom_right_corner":Gd?Yc=rc-
sd:Ac=Yb-hd;break;case "bottom_left_corner":Gd?Yc=rc-sd:Yb=Ac+hd;break;case "bottom_edge":case "top_edge":yd=(Yb+Ac)/2;Rd*=pa;Yb=yd-Rd/2;Ac=yd+Rd/2;break;case "left_edge":case "right_edge":Rd=(rc+Yc)/2,yd/=pa,rc=Rd-yd/2,Yc=Rd+yd/2}if(0!==ba%(2*Math.PI)){yd=[0,0];Rd=Hd.med([Ba,Ia],[hb,yb]);hd=Hd.med([Yb,rc],[Ac,Yc]);switch(n){case "top_left_corner":yd=Hd.sub(Hd.rotWith([Ac,Yc],hd,ba),Hd.rotWith([hb,yb],Rd,ba));break;case "top_right_corner":yd=Hd.sub(Hd.rotWith([Yb,Yc],hd,ba),Hd.rotWith([Ba,yb],Rd,
ba));break;case "bottom_right_corner":yd=Hd.sub(Hd.rotWith([Yb,rc],hd,ba),Hd.rotWith([Ba,Ia],Rd,ba));break;case "bottom_left_corner":yd=Hd.sub(Hd.rotWith([Ac,rc],hd,ba),Hd.rotWith([hb,Ia],Rd,ba));break;case "top_edge":yd=Hd.sub(Hd.rotWith(Hd.med([Yb,Yc],[Ac,Yc]),hd,ba),Hd.rotWith(Hd.med([Ba,yb],[hb,yb]),Rd,ba));break;case "left_edge":yd=Hd.sub(Hd.rotWith(Hd.med([Ac,rc],[Ac,Yc]),hd,ba),Hd.rotWith(Hd.med([hb,Ia],[hb,yb]),Rd,ba));break;case "bottom_edge":yd=Hd.sub(Hd.rotWith(Hd.med([Yb,rc],[Ac,rc]),
hd,ba),Hd.rotWith(Hd.med([Ba,Ia],[hb,Ia]),Rd,ba));break;case "right_edge":yd=Hd.sub(Hd.rotWith(Hd.med([Yb,rc],[Yb,Yc]),hd,ba),Hd.rotWith(Hd.med([Ba,Ia],[Ba,yb]),Rd,ba))}[Yb,rc]=Hd.sub([Yb,rc],yd);[Ac,Yc]=Hd.sub([Ac,Yc],yd)}Ac<Yb&&([Ac,Yb]=[Yb,Ac]);Yc<rc&&([Yc,rc]=[rc,Yc]);return{minX:Yb,minY:rc,maxX:Ac,maxY:Yc,width:Ac-Yb,height:Yc-rc,scaleX:(Ac-Yb)/(hb-Ba||1)*(c?-1:1),scaleY:(Yc-rc)/(yb-Ia||1)*(N?-1:1)}}static getTransformAnchor(c,n,N){let ba=c;switch(c){case "top_left_corner":ba=n&&N?"bottom_right_corner":
n?"top_right_corner":N?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":ba=n&&N?"bottom_left_corner":n?"top_left_corner":N?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":ba=n&&N?"top_left_corner":n?"bottom_left_corner":N?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":ba=n&&N?"top_right_corner":n?"bottom_right_corner":N?"top_left_corner":"top_right_corner"}return ba}static getRelativeTransformedBoundingBox(c,n,N,ba,pa){ba=c.minX+
(ba?n.maxX-N.maxX:N.minX-n.minX)/n.width*c.width;pa=c.minY+(pa?n.maxY-N.maxY:N.minY-n.minY)/n.height*c.height;const Ba=N.width/n.width*c.width;c=N.height/n.height*c.height;return{minX:ba,minY:pa,maxX:ba+Ba,maxY:pa+c,width:Ba,height:c}}static getRotatedSize(c,n){const N=Hd.div(c,2);c=[[0,0],[c[0],0],c,[0,c[1]]].map(ba=>Hd.rotWith(ba,N,n));c=Qe.getBoundsFromPoints(c);return[c.width,c.height]}static getBoundsCenter(c){return[c.minX+c.width/2,c.minY+c.height/2]}static getBoundsWithCenter(c){const n=Qe.getBoundsCenter(c);
return qg(Ef({},c),{midX:n[0],midY:n[1]})}static getCommonTopLeft(c){const n=[Infinity,Infinity];c.forEach(N=>{n[0]=Math.min(n[0],N[0]);n[1]=Math.min(n[1],N[1])});return n}static getTLSnapPoints(c,n,N){const ba=Ef({},c);c=[0,0];const pa=[],Ba={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},Ia=["midX","minX","maxX"],hb=["midY","minY","maxY"];n=n.map(Yc=>{const ud=Ia.flatMap((Gd,
Qd)=>Ia.map((hd,sd)=>{const yd=ba[Gd]-Yc[hd];return{f:Gd,t:hd,gap:yd,distance:Math.abs(yd),isCareful:0===Qd||3===Qd+sd}})),pd=hb.flatMap((Gd,Qd)=>hb.map((hd,sd)=>{const yd=ba[Gd]-Yc[hd];return{f:Gd,t:hd,gap:yd,distance:Math.abs(yd),isCareful:0===Qd||3===Qd+sd}}));return[Yc,ud,pd]});let yb=Infinity,Yb=Infinity,rc=Infinity,Ac=Infinity;n.forEach(([,Yc,ud])=>{Yc.forEach(pd=>{pd.distance<N&&pd.distance<rc&&(rc=pd.distance,yb=pd.gap)});ud.forEach(pd=>{pd.distance<N&&pd.distance<Ac&&(Ac=pd.distance,Yb=pd.gap)})});
n.forEach(([Yc,ud,pd])=>{Infinity!==yb&&ud.forEach(Gd=>{2>Math.abs(Gd.gap-yb)&&(Ba[Gd.f]=qg(Ef({},Ba[Gd.f]),{isSnapped:!0,to:Yc[Gd.t],B:Yc,distance:Gd.distance}))});Infinity!==Yb&&pd.forEach(Gd=>{2>Math.abs(Gd.gap-Yb)&&(Ba[Gd.f]=qg(Ef({},Ba[Gd.f]),{isSnapped:!0,to:Yc[Gd.t],B:Yc,distance:Gd.distance}))})});c[0]=Infinity===yb?0:yb;c[1]=Infinity===Yb?0:Yb;ba.minX-=c[0];ba.midX-=c[0];ba.maxX-=c[0];ba.minY-=c[1];ba.midY-=c[1];ba.maxY-=c[1];Ia.forEach(Yc=>{Yc=Ba[Yc];if(Yc.isSnapped){var {id:ud,B:pd}=Yc;
Yc=ba[ud];pa.push("minX"===ud?[[Yc,ba.midY],[Yc,pd.minY],[Yc,pd.maxY]]:[[Yc,ba.minY],[Yc,ba.maxY],[Yc,pd.minY],[Yc,pd.maxY]])}});hb.forEach(Yc=>{Yc=Ba[Yc];if(Yc.isSnapped){var {id:ud,B:pd}=Yc;Yc=ba[ud];pa.push("midY"===ud?[[ba.midX,Yc],[pd.minX,Yc],[pd.maxX,Yc]]:[[ba.minX,Yc],[ba.maxX,Yc],[pd.minX,Yc],[pd.maxX,Yc]])}});return{offset:c,snapLines:pa}}static ensureRatio(c,n){const {width:N,height:ba}=c,pa=Ef({},c);N/ba<n?(pa.width=ba*n,pa.maxX+=N-c.width):(pa.height=N/n,pa.maxY+=ba-c.height);return pa}static getDistributions(c,
n){var N=c.map(Ba=>{const Ia=Ba.getBounds();return{id:Ba.id,point:[Ia.minX,Ia.minY],bounds:Ia,center:Ba.getCenter()}});c=N.length;var ba=Qe.getCommonBounds(N.map(({bounds:Ba})=>Ba));const pa=[];switch(n){case "horizontal":n=N.reduce((Ba,Ia)=>Ba+Ia.bounds.width,0);if(n>ba.width){const Ba=N.sort((Yb,rc)=>Yb.bounds.minX-rc.bounds.minX)[0],Ia=N.sort((Yb,rc)=>rc.bounds.maxX-Yb.bounds.maxX)[0];ba=N.filter(Yb=>Yb!==Ba&&Yb!==Ia).sort((Yb,rc)=>Yb.center[0]-rc.center[0]);const hb=(Ia.center[0]-Ba.center[0])/
(c-1),yb=Ba.center[0]+hb;ba.forEach(({id:Yb,point:rc,bounds:Ac},Yc)=>{pa.push({id:Yb,prev:rc,next:[yb+hb*Yc-Ac.width/2,Ac.minY]})})}else{N=N.sort((hb,yb)=>hb.center[0]-yb.center[0]);let Ba=ba.minX;const Ia=(ba.width-n)/(c-1);N.forEach(({id:hb,point:yb,bounds:Yb})=>{pa.push({id:hb,prev:yb,next:[Ba,Yb.minY]});Ba+=Yb.width+Ia})}break;case "vertical":if(n=N.reduce((Ba,Ia)=>Ba+Ia.bounds.height,0),n>ba.height){const Ba=N.sort((Yb,rc)=>Yb.bounds.minY-rc.bounds.minY)[0],Ia=N.sort((Yb,rc)=>rc.bounds.maxY-
Yb.bounds.maxY)[0];ba=N.filter(Yb=>Yb!==Ba&&Yb!==Ia).sort((Yb,rc)=>Yb.center[1]-rc.center[1]);const hb=(Ia.center[1]-Ba.center[1])/(c-1),yb=Ba.center[1]+hb;ba.forEach(({id:Yb,point:rc,bounds:Ac},Yc)=>{pa.push({id:Yb,prev:rc,next:[Ac.minX,yb+hb*Yc-Ac.height/2]})})}else{N=N.sort((hb,yb)=>hb.center[1]-yb.center[1]);let Ba=ba.minY;const Ia=(ba.height-n)/(c-1);N.forEach(({id:hb,point:yb,bounds:Yb})=>{pa.push({id:hb,prev:yb,next:[Yb.minX,Ba]});Ba+=Yb.height+Ia})}}return pa}static getPackedDistributions(c){const n=
Qe.getCommonBounds(c.map(({bounds:pa})=>pa)),N=[n.minX,n.minY],ba=Object.fromEntries(c.map(pa=>[pa.id,[pa.bounds.minX,pa.bounds.minY]]));c=c.filter(pa=>{var Ba,Ia,hb,yb;return!((null==(Ia=null==(Ba=pa.props.handles)?void 0:Ba.start)?0:Ia.bindingId)||(null==(yb=null==(hb=pa.props.handles)?void 0:hb.end)?0:yb.bindingId))}).map(pa=>{const Ba=pa.getBounds();return{id:pa.id,w:Ba.width+16,h:Ba.height+16,x:Ba.minX,y:Ba.minY}});x(c);return c.map(({id:pa,x:Ba,y:Ia})=>({id:pa,prev:ba[pa],next:[Ba+N[0],Ia+N[1]]}))}},
mi=class{static pointInCircle(c,n,N){return Hd.dist(c,n)<=N}static pointInEllipse(c,n,N,ba,pa=0){pa=pa||0;var Ba=Math.cos(pa);pa=Math.sin(pa);n=Hd.sub(c,n);c=Ba*n[0]+pa*n[1];Ba=pa*n[0]-Ba*n[1];return 1>=c*c/(N*N)+Ba*Ba/(ba*ba)}static pointInRect(c,n){return!(c[0]<n[0]||c[0]>c[0]+n[0]||c[1]<n[1]||c[1]>c[1]+n[1])}static pointInPolygon(c,n){let N=0;n.forEach((ba,pa)=>{pa=n[(pa+1)%n.length];ba[1]<=c[1]?pa[1]>c[1]&&0<Hd.cross(ba,pa,c)&&(N+=1):pa[1]<=c[1]&&0>Hd.cross(ba,pa,c)&&--N});return 0!==N}static pointInBounds(c,
n){return!(c[0]<n.minX||c[0]>n.maxX||c[1]<n.minY||c[1]>n.maxY)}static pointInPolyline(c,n,N=3){for(let ba=1;ba<n.length;ba++)if(Hd.distanceToLineSegment(n[ba-1],n[ba],c)<N)return!0;return!1}static _getSqSegDist(c,n,N){let ba=n[0];n=n[1];let pa=N[0]-ba,Ba=N[1]-n;if(0!==pa||0!==Ba){const Ia=((c[0]-ba)*pa+(c[1]-n)*Ba)/(pa*pa+Ba*Ba);1<Ia?(ba=N[0],n=N[1]):0<Ia&&(ba+=pa*Ia,n+=Ba*Ia)}pa=c[0]-ba;Ba=c[1]-n;return pa*pa+Ba*Ba}static _simplifyStep(c,n,N,ba,pa){let Ba=ba,Ia=-1;for(let hb=n+1;hb<N;hb++){const yb=
mi._getSqSegDist(c[hb],c[n],c[N]);yb>Ba&&(Ia=hb,Ba=yb)}-1<Ia&&Ba>ba&&(1<Ia-n&&mi._simplifyStep(c,n,Ia,ba,pa),pa.push(c[Ia]),1<N-Ia&&mi._simplifyStep(c,Ia,N,ba,pa))}static simplify2(c,n=1){if(2>=c.length)return c;n*=n;var N=c[0],ba=c[1];const pa=[N];for(let Ba=1,Ia=c.length;Ba<Ia;Ba++)ba=c[Ba],(ba[0]-N[0])*(ba[0]-N[0])+(ba[1]-N[1])*(ba[1]-N[1])>n&&(pa.push(ba),N=ba);N!==ba&&pa.push(ba);N=pa.length-1;ba=[pa[0]];mi._simplifyStep(pa,0,N,n,ba);ba.push(pa[N],c[c.length-1]);return ba}static pointNearToPolyline(c,
n,N=8){const ba=n.length;for(let pa=1;pa<ba;pa++)if(Hd.distanceToLineSegment(n[pa-1],n[pa],c)<N)return!0;return!1}},uh=mi;Ab(uh,"simplify",(c,n=1)=>{var N=c.length;const ba=c[0],pa=c[N-1],[Ba,Ia]=ba,[hb,yb]=pa;if(2<N){let Yb=0,rc=0;const Ac=Hd.len2([yb-Ia,hb-Ba]);for(let Yc=1;Yc<N-1;Yc++){const [ud,pd]=c[Yc],Gd=Math.pow(ud*(yb-Ia)+Ba*(pd-yb)+hb*(Ia-pd),2)/Ac;Yb>Gd||(Yb=Gd,rc=Yc)}if(Yb>n)return N=mi.simplify(c.slice(0,rc+1),n),c=mi.simplify(c.slice(rc+1),n),N.concat(c.slice(1))}return[ba,pa]});var Wh=
Math.PI,gi=Wh/2,Qg=2*Wh,Ai={},hi={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Fh=class{static circleFromThreePoints(c,n,N){const [ba,
pa]=c,[Ba,Ia]=n,[hb,yb]=N;n=ba*(Ia-yb)-pa*(Ba-hb)+Ba*yb-hb*Ia;c=-((ba*ba+pa*pa)*(yb-Ia)+(Ba*Ba+Ia*Ia)*(pa-yb)+(hb*hb+yb*yb)*(Ia-pa))/(2*n);n=-((ba*ba+pa*pa)*(Ba-hb)+(Ba*Ba+Ia*Ia)*(hb-ba)+(hb*hb+yb*yb)*(ba-Ba))/(2*n);return[c,n,Math.hypot(c-ba,n-pa)]}static perimeterOfEllipse(c,n){const N=Math.pow(c-n,2)/Math.pow(c+n,2);return Wh*(c+n)*(1+3*N/(10+Math.sqrt(4-3*N)))}static shortAngleDist(c,n){c=(n-c)%Qg;return 2*c%Qg-c}static longAngleDist(c,n){return Qg-Fh.shortAngleDist(c,n)}static lerpAngles(c,n,
N){return c+Fh.shortAngleDist(c,n)*N}static angleDelta(c,n){return Fh.shortAngleDist(c,n)}static getSweep(c,n,N){return Fh.angleDelta(te.angle(c,n),te.angle(c,N))}static clampRadians(c){return(Qg+c)%Qg}static snapAngleToSegments(c,n){n=Qg/n;c=Math.floor((Fh.clampRadians(c)+n/2)/n)*n%Qg;c<Wh&&(c+=Qg);c>Wh&&(c-=Qg);return c}static isAngleBetween(c,n,N){if(N===c||N===n)return!0;n=(n-c+gi)%gi;return n<=Wh!==(N-c+gi)%gi>n}static degreesToRadians(c){return c*Wh/180}static radiansToDegrees(c){return 180*
c/Wh}static getArcLength(c,n,N,ba){c=Fh.getSweep(c,N,ba);return c/Qg*Qg*n}static getSweepFlag(c,n,N){N=te.angle(c,N);return 0<(te.angle(c,n)-N+3*Wh)%Qg-Wh?0:1}static getLargeArcFlag(c,n,N){c=te.angle(N,c);n=(te.angle(N,n)-c+3*Wh)%Qg-Wh;return Math.abs(n)>gi?0:1}static getArcDashOffset(c,n,N,ba,pa){const Ba=Fh.getSweepFlag(c,N,ba);n=Fh.getArcLength(c,n,N,ba);return-(0>Ba?n:Qg*c[2]-n)/2+pa}static getEllipseDashOffset(c,n){return-(Qg*c[2])/2+-n}static radiansToCardinalDirection(c){return c<.25*Math.PI?
"north":c<.75*Math.PI?"east":c<1.25*Math.PI?"south":c<1.75*Math.PI?"west":"north"}},ni=class{static getPolygonCentroid(c){var n=c.map(N=>N[0]);c=c.map(N=>N[1]);n=Math.min(...n)+Math.max(...n);c=Math.min(...c)+Math.max(...c);return[n?n/2:0,c?c/2:0]}};Ab(ni,"getEdges",c=>{const n=c.length;return c.map((N,ba)=>[N,c[(ba+1)%n]])});Ab(ni,"getEdgeOutwardNormal",(c,n)=>te.per(te.uni(te.sub(n,c))));Ab(ni,"getEdgeInwardNormal",(c,n)=>te.neg(ni.getEdgeOutwardNormal(c,n)));Ab(ni,"getOffsetEdge",(c,n,N)=>{N=te.mul(te.per(te.uni(te.sub(n,
c))),N);return[te.add(c,N),te.add(n,N)]});Ab(ni,"getOffsetEdges",(c,n)=>c.map(([N,ba])=>ni.getOffsetEdge(N,ba,n)));Ab(ni,"getOffsetPolygon",(c,n)=>{if(1>c.length)throw Error("Expected at least one point.");if(1===c.length)return c=c[0],[te.add(c,[-n,-n]),te.add(c,[n,-n]),te.add(c,[n,n]),te.add(c,[-n,n])];if(2===c.length){const [N,ba]=c;return[...ni.getOffsetEdge(N,ba,n),...ni.getOffsetEdge(ba,N,n)]}return ni.getOffsetEdges(ni.getEdges(c),n).flatMap((N,ba,pa)=>{{ba=pa[(ba+1)%pa.length];const Ba=Hd.slope(N[0],
N[1]);pa=Hd.slope(ba[0],ba[1]);Ba!==pa?Number.isNaN(Ba)&&!Number.isNaN(pa)?N=[N[0][0],(N[0][0]-ba[0][0])*pa+ba[0][1]]:Number.isNaN(pa)&&!Number.isNaN(Ba)?N=[ba[0][0],(ba[0][0]-N[0][0])*Ba+N[0][1]]:(N=(Ba*N[0][0]-pa*ba[0][0]+ba[0][1]-N[0][1])/(Ba-pa),N=[N,pa*(N-ba[0][0])+ba[0][1]]):N=void 0}if(void 0===N)throw Error("Expected an intersection");return N})});Ab(ni,"getPolygonVertices",(c,n,N=0,ba=1)=>{c=te.div(c,2);const [pa,Ba]=[Math.max(1,c[0]-N),Math.max(1,c[1]-N)];N=[];for(let Yb=0,rc=Qg/n;Yb<n;Yb++){var Ia=
(-gi+Yb*rc)%Qg,hb=(-gi+(Yb+1)*rc)%Qg;Ia=te.add(c,[pa*Math.cos(Ia),Ba*Math.sin(Ia)]);hb=te.add(c,[pa*Math.cos(hb),Ba*Math.sin(hb)]);var yb=te.med(Ia,hb);yb=te.nudge(yb,c,te.dist(c,yb)*(1-ba));N.push(Ia,yb,hb)}return N});Ab(ni,"getTriangleVertices",(c,n=0,N=1)=>{const [ba,pa]=c;var Ba=1-N;c=[ba/2,n/2];N=[ba-n,pa-n];n=[n/2,pa-n];const Ia=ni.getPolygonCentroid([c,N,n]),hb=te.med(c,N),yb=te.med(N,n),Yb=te.med(n,c),rc=te.dist(hb,Ia)*Ba,Ac=te.dist(yb,Ia)*Ba;Ba*=te.dist(Yb,Ia);return[c,rc?te.nudge(hb,Ia,
rc):hb,N,Ac?te.nudge(yb,Ia,Ac):yb,n,Ba?te.nudge(Yb,Ia,Ba):Yb]});Ab(ni,"getStarVertices",(c,n,N,ba=1)=>{const pa=te.div(n,2),Ba=te.mul(pa,ba/2),Ia=Qg/N/2;return Array.from(Array(2*N)).map((hb,yb)=>{hb=-gi+yb*Ia;const [Yb,rc]=yb%2?Ba:pa;return te.add(c,[Yb*Math.cos(hb),rc*Math.sin(hb)])})});var Xj=class{static getCurvedPathForPolygon(c){if(3>c.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const n=["M",...c[0].slice(0,2),"Q"],N=c.length;for(let ba=1;ba<N;ba++){const [pa,Ba]=c[ba],
[Ia,hb]=c[(ba+1)%N];n.push(pa,Ba,(pa+Ia)/2,(Ba+hb)/2)}n.push("Z");return n.join(" ")}static getCurvedPathForPoints(c){if(3>c.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const n=["M",...c[0].slice(0,2),"Q"],N=c.length;for(let ba=1;ba<N-1;ba++){const [pa,Ba]=c[ba],[Ia,hb]=c[ba+1];n.push(pa,Ba,(pa+Ia)/2,(Ba+hb)/2)}return n.join(" ")}static getSvgPathFromStroke(c,n=!0){const N=c.length;if(4>N)return"";let ba=c[0],pa=c[1];var Ba=c[2];Ba=`M${ba[0].toFixed(2)},${ba[1].toFixed(2)} Q${pa[0].toFixed(2)},${pa[1].toFixed(2)} ${((pa[0]+
Ba[0])/2).toFixed(2)},${((pa[1]+Ba[1])/2).toFixed(2)} T`;for(let Ia=2,hb=N-1;Ia<hb;Ia++)ba=c[Ia],pa=c[Ia+1],Ba+=`${((ba[0]+pa[0])/2).toFixed(2)},${((ba[1]+pa[1])/2).toFixed(2)} `;n&&(Ba+="Z");return Ba}static getSvgPathFromStrokePoints(c,n=!1){const N=c.length;if(4>N)return"";let ba=c[0].point,pa=c[1].point;var Ba=c[2].point;Ba=`M${ba[0].toFixed(2)},${ba[1].toFixed(2)} Q${pa[0].toFixed(2)},${pa[1].toFixed(2)} ${((pa[0]+Ba[0])/2).toFixed(2)},${((pa[1]+Ba[1])/2).toFixed(2)} T`;for(let Ia=2,hb=N-1;Ia<
hb;Ia++)ba=c[Ia].point,pa=c[Ia+1].point,Ba+=`${((ba[0]+pa[0])/2).toFixed(2)},${((ba[1]+pa[1])/2).toFixed(2)} `;n&&(Ba+="Z");return Ba}};Ab(Xj,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Ck={},Dm=Object.assign,wl=Object.getOwnPropertyDescriptor,Yk=Object.defineProperty,xq=Object.prototype,Xs=[];Object.freeze(Xs);var Ys={};Object.freeze(Ys);var Xy="undefined"!==typeof Proxy,Yy=Object.toString(),gp=function(){},kv="undefined"!==typeof Object.getOwnPropertySymbols,yr="undefined"!==
typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:kv?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:Object.getOwnPropertyNames,Zy=Object.getOwnPropertyDescriptors||function(c){var n={};yr(c).forEach(function(N){n[N]=wl(c,N)});return n},Ll=Symbol("mobx-stored-annotations"),Gh=Symbol("mobx administration"),yq=function(){function c(N){void 0===N&&(N="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=
this.diffValue_=0;this.lowestObserverState_=Ii.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=N}var n=c.prototype;n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(N){return N()})};n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(N){return N()})};n.reportObserved=function(){return vb(this)};n.reportChanged=function(){Ub();Bb(this);mb()};n.toString=function(){return this.name_};return c}(),Zs=J("Atom",yq),hp={identity:function(c,n){return c===n},structural:function(c,n){return ka(c,
n)},"default":function(c,n){return Object.is?Object.is(c,n):c===n?0!==c||1/c===1/n:c!==c&&n!==n},shallow:function(c,n){return ka(c,n,1)}},$y="override",az=gb(),zq={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(zq);var lv=lb("observable"),bz=lb("observable.ref",{enhancer:Na}),cz=lb("observable.shallow",{enhancer:function(c,n,N){if(void 0===c||null===c||ub(c)||db(c)||kn(c)||qo(c))return c;if(Array.isArray(c))return Tg.array(c,{name:N,deep:!1});if(M(c))return Tg.object(c,void 0,
{name:N,deep:!1});if(R(c))return Tg.map(c,{name:N,deep:!1});if(T(c))return Tg.set(c,{name:N,deep:!1})}}),dz=lb("observable.struct",{enhancer:function(c,n){return ka(c,n)?n:c}}),mv=xa(lv);Object.assign(pb,mv);var ez={box:function(c,n){n=n||zq;return new oo(c,Xa(n),n.name,!0,n.equals)},array:function(c,n){n=n||zq;return(!1===bg.useProxies||!1===n.proxy?f:Ya)(c,Xa(n),n.name)},map:function(c,n){n=n||zq;return new xv(c,Xa(n),n.name)},set:function(c,n){n=n||zq;return new yv(c,Xa(n),n.name)},object:function(c,
n,N){if(!1===bg.useProxies||!1===(null==N?void 0:N.proxy))N=$b({},N);else{var ba={},pa,Ba;B();ba=$b(ba,N);N=null!=(Ba=(pa=ba[Gh]).proxy_)?Ba:pa.proxy_=new Proxy(ba,sz)}return Bc(N,c,n)},ref:xa(bz),shallow:xa(cz),deep:mv,struct:xa(dz)},Tg=Dm(pb,ez),nv=$a("computed"),fz=$a("computed.struct",{equals:hp.structural}),$g=function(c,n){if(A(n))return Ja(c,n,nv);if(M(c))return xa($a("computed",c));n=M(n)?n:{};n.get=c;n.name||(n.name=c.name||"");return new Aq(n)};Object.assign($g,nv);$g.struct=xa(fz);var ov,
pv,zr=0,gz=1,hz=null!=(ov=null==(pv=wl(function(){},"name"))?void 0:pv.configurable)?ov:!1,qv={value:"action",configurable:!0,writable:!1,enumerable:!1};var iz=Symbol.toPrimitive;var oo=function(c){function n(ba,pa,Ba,Ia,hb){void 0===Ba&&(Ba="ObservableValue");void 0===hb&&(hb=hp["default"]);Ia=c.call(this,Ba)||this;Ia.enhancer=void 0;Ia.hasUnreportedChange_=!1;Ia.interceptors_=void 0;Ia.changeListeners_=void 0;Ia.value_=void 0;Ia.dehancer=void 0;Ia.enhancer=pa;Ia.name_=Ba;Ia.equals=hb;Ia.value_=
pa(ba,void 0,Ba);return Ia}ha(n,c);var N=n.prototype;N.dehanceValue=function(ba){return void 0!==this.dehancer?this.dehancer(ba):ba};N.set=function(ba){ba=this.prepareNewValue_(ba);ba!==bg.UNCHANGED&&this.setNewValue_(ba)};N.prepareNewValue_=function(ba){if(qb(this)){ba=jb(this,{object:this,type:im,newValue:ba});if(!ba)return bg.UNCHANGED;ba=ba.newValue}ba=this.enhancer(ba,this.value_,this.name_);return this.equals(this.value_,ba)?bg.UNCHANGED:ba};N.setNewValue_=function(ba){var pa=this.value_;this.value_=
ba;this.reportChanged();Fb(this)&&Wb(this,{type:im,object:this,newValue:ba,oldValue:pa})};N.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};N.intercept_=function(ba){return Db(this,ba)};N.observe_=function(ba,pa){pa&&ba({observableKind:"value",debugObjectName:this.name_,object:this,type:im,newValue:this.value_,oldValue:void 0});return sc(this,ba)};N.raw=function(){return this.value_};N.toJSON=function(){return this.get()};N.toString=function(){return this.name_+"["+this.value_+
"]"};N.valueOf=function(){return ja(this.get())};N[iz]=function(){return this.valueOf()};return n}(yq),jz=J("ObservableValue",oo);var kz=Symbol.toPrimitive;var Aq=function(){function c(N){this.dependenciesState_=Ii.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Ii.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new po(null);this.triggeredBy_=
this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=ip.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;N.get||d(31);this.derivation=N.get;this.name_=N.name||"ComputedValue";N.set&&(this.setter_=Oa("ComputedValue-setter",N.set));this.equals_=N.equals||(N.compareStructural||N.struct?hp.structural:hp["default"]);this.scope_=N.context;this.requiresReaction_=N.requiresReaction;this.keepAlive_=
!!N.keepAlive}var n=c.prototype;n.onBecomeStale_=function(){cb(this)};n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(N){return N()})};n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(N){return N()})};n.get=function(){this.isComputing_&&d(32,this.name_,this.derivation);if(0!==bg.inBatch||0!==this.observers_.size||this.keepAlive_){if(vb(this),Rc(this)){var N=bg.trackingContext;this.keepAlive_&&!N&&(bg.trackingContext=this);this.trackAndCompute()&&Eb(this);bg.trackingContext=N}}else Rc(this)&&
(this.warnAboutUntrackedRead_(),Ub(),this.value_=this.computeValue_(!1),mb());N=this.value_;if(N instanceof po)throw N.cause;return N};n.set=function(N){if(this.setter_){this.isRunningSetter_&&d(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,N)}finally{this.isRunningSetter_=!1}}else d(34,this.name_)};n.trackAndCompute=function(){var N=this.value_,ba=this.dependenciesState_===Ii.NOT_TRACKING_,pa=this.computeValue_(!0);if(N=ba||N instanceof po||pa instanceof po||!this.equals_(N,
pa))this.value_=pa;return N};n.computeValue_=function(N){this.isComputing_=!0;var ba=Sc(!1);if(N)var pa=zc(this,this.derivation,this.scope_);else if(!0===bg.disableErrorBoundaries)pa=this.derivation.call(this.scope_);else try{pa=this.derivation.call(this.scope_)}catch(Ba){pa=new po(Ba)}bg.allowStateChanges=ba;this.isComputing_=!1;return pa};n.suspend_=function(){this.keepAlive_||(cd(this),this.value_=void 0)};n.observe_=function(N,ba){var pa=this,Ba=!0,Ia=void 0;return ic(function(){var hb=pa.get();
if(!Ba||ba){var yb=Va();N({observableKind:"computed",debugObjectName:pa.name_,type:im,object:pa,newValue:hb,oldValue:Ia});bg.trackingDerivation=yb}Ba=!1;Ia=hb})};n.warnAboutUntrackedRead_=function(){};n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};n.valueOf=function(){return ja(this.get())};n[kz]=function(){return this.valueOf()};return c}(),Bq=J("ComputedValue",Aq),Ii;(function(c){c[c.NOT_TRACKING_=-1]="NOT_TRACKING_";c[c.UP_TO_DATE_=0]="UP_TO_DATE_";c[c.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";c[c.STALE_=2]="STALE_"})(Ii||={});var ip;(function(c){c[c.NONE=0]="NONE";c[c.LOG=1]="LOG";c[c.BREAK=2]="BREAK"})(ip||={});var po=function(c){this.cause=void 0;this.cause=c},Ar=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];
this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Br=!0,rv=!1,bg=function(){var c=E();0<c.__mobxInstanceCount&&!c.__mobxGlobals&&(Br=!1);c.__mobxGlobals&&c.__mobxGlobals.version!==(new Ar).version&&(Br=!1);if(Br){if(c.__mobxGlobals)return c.__mobxInstanceCount+=1,c.__mobxGlobals.UNCHANGED||(c.__mobxGlobals.UNCHANGED=
{}),c.__mobxGlobals;c.__mobxInstanceCount=1;return c.__mobxGlobals=new Ar}setTimeout(function(){rv||d(35)},1);return new Ar}(),jp=function(){function c(N,ba,pa,Ba){void 0===N&&(N="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Ii.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=ip.NONE;
this.name_=N;this.onInvalidate_=ba;this.errorHandler_=pa;this.requiresObservable_=Ba}var n=c.prototype;n.onBecomeStale_=function(){this.schedule_()};n.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,bg.pendingReactions.push(this),0<bg.inBatch||bg.isRunningReactions||Cr(Gb))};n.isScheduled=function(){return this.isScheduled_};n.runReaction_=function(){if(!this.isDisposed_){Ub();this.isScheduled_=!1;var N=bg.trackingContext;bg.trackingContext=this;if(Rc(this)){this.isTrackPending_=!0;
try{this.onInvalidate_()}catch(ba){this.reportExceptionInDerivation_(ba)}}bg.trackingContext=N;mb()}};n.track=function(N){if(!this.isDisposed_){Ub();this.isRunning_=!0;var ba=bg.trackingContext;bg.trackingContext=this;N=zc(this,N,void 0);bg.trackingContext=ba;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&cd(this);N instanceof po&&this.reportExceptionInDerivation_(N.cause);mb()}};n.reportExceptionInDerivation_=function(N){var ba=this;if(this.errorHandler_)this.errorHandler_(N,this);else{if(bg.disableErrorBoundaries)throw N;
bg.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",N);bg.globalReactionErrorHandlers.forEach(function(pa){return pa(N,ba)})}};n.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Ub(),cd(this),mb()))};n.getDisposer_=function(){var N=this.dispose.bind(this);N[Gh]=this;return N};n.toString=function(){return"Reaction["+this.name_+"]"};n.trace=function(N){void 0===N&&(N=!1);Cb(this,N)};return c}(),lz=100,Cr=function(c){return c()},Dr=J("Reaction",jp),
sv="action",tv=Aa(sv),mz=Aa("action.bound",{bound:!0}),uv=Aa("autoAction",{autoAction:!0}),vv=Aa("autoAction.bound",{autoAction:!0,bound:!0}),Eg=Ic(!1);Object.assign(Eg,tv);var Cq=Ic(!0);Object.assign(Cq,uv);Eg.bound=xa(mz);Cq.bound=xa(vv);var nz=function(c){return c()},oz="onBO",pz="onBUO",qz=0;Zc.prototype=Object.create(Error.prototype);var wv=Ca("flow"),rz=Ca("flow.bound",{bound:!0}),Dq=Object.assign(function(c,n){if(A(n))return Ja(c,n,wv);var N=c.name||"\x3cunnamed flow\x3e";n=function(){var ba=
arguments,pa=++qz,Ba=Eg(N+" - runid: "+pa+" - init",c).apply(this,ba),Ia,hb=void 0;ba=new Promise(function(yb,Yb){function rc(pd){hb=void 0;try{var Gd=Eg(N+" - runid: "+pa+" - yield "+ud++,Ba.next).call(Ba,pd)}catch(Qd){return Yb(Qd)}Yc(Gd)}function Ac(pd){hb=void 0;try{var Gd=Eg(N+" - runid: "+pa+" - yield "+ud++,Ba["throw"]).call(Ba,pd)}catch(Qd){return Yb(Qd)}Yc(Gd)}function Yc(pd){if(V(null==pd?void 0:pd.then))pd.then(Yc,Yb);else{if(pd.done)return yb(pd.value);hb=Promise.resolve(pd.value);return hb.then(rc,
Ac)}}var ud=0;Ia=Yb;rc(void 0)});ba.cancel=Eg(N+" - runid: "+pa+" - cancel",function(){try{if(hb){var yb=hb;V(yb.cancel)&&yb.cancel()}var Yb=Ba["return"](void 0),rc=Promise.resolve(Yb.value);rc.then(gp,gp);V(rc.cancel)&&rc.cancel();Ia(new Zc)}catch(Ac){Ia(Ac)}});return ba};n.isMobXFlow=!0;return n},wv);Dq.bound=xa(rz);var sz={has:function(c,n){return c[Gh].has_(n)},get:function(c,n){return c[Gh].get_(n)},set:function(c,n,N){var ba;return A(n)?null!=(ba=c[Gh].set_(n,N,!0))?ba:!0:!1},deleteProperty:function(c,
n){var N;return A(n)?null!=(N=c[Gh].delete_(n,!0))?N:!0:!1},defineProperty:function(c,n,N){var ba;return null!=(ba=c[Gh].defineProperty_(n,N))?ba:!0},ownKeys:function(c){return c[Gh].ownKeys_()},preventExtensions:function(c){d(13)}},im="update",tz={get:function(c,n){var N=c[Gh];return n===Gh?N:"length"===n?N.getArrayLength_():"string"!==typeof n||isNaN(n)?aa(Er,n)?Er[n]:c[n]:N.get_(parseInt(n))},set:function(c,n,N){var ba=c[Gh];"length"===n&&ba.setArrayLength_(N);"symbol"===typeof n||isNaN(n)?c[n]=
N:ba.set_(parseInt(n),N);return!0},preventExtensions:function(){d(15)}},$s=function(){function c(N,ba,pa,Ba){void 0===N&&(N="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=pa;this.legacyMode_=Ba;this.atom_=new yq(N);this.enhancer_=function(Ia,hb){return ba(Ia,hb,"ObservableArray[..]")}}var n=c.prototype;n.dehanceValue_=function(N){return void 0!==
this.dehancer?this.dehancer(N):N};n.dehanceValues_=function(N){return void 0!==this.dehancer&&0<N.length?N.map(this.dehancer):N};n.intercept_=function(N){return Db(this,N)};n.observe_=function(N,ba){void 0===ba&&(ba=!1);ba&&N({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return sc(this,N)};n.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};
n.setArrayLength_=function(N){("number"!==typeof N||isNaN(N)||0>N)&&d("Out of range: "+N);var ba=this.values_.length;if(N!==ba)if(N>ba){for(var pa=Array(N-ba),Ba=0;Ba<N-ba;Ba++)pa[Ba]=void 0;this.spliceWithArray_(ba,0,pa)}else this.spliceWithArray_(N,ba-N)};n.updateArrayLength_=function(N,ba){N!==this.lastKnownLength_&&d(16);this.lastKnownLength_+=ba;this.legacyMode_&&0<ba&&la(N+ba+1)};n.spliceWithArray_=function(N,ba,pa){var Ba=this,Ia=this.values_.length;void 0===N?N=0:N>Ia?N=Ia:0>N&&(N=Math.max(0,
Ia+N));ba=1===arguments.length?Ia-N:void 0===ba||null===ba?0:Math.max(0,Math.min(ba,Ia-N));void 0===pa&&(pa=Xs);if(qb(this)){var hb=jb(this,{object:this.proxy_,type:"splice",index:N,removedCount:ba,added:pa});if(!hb)return Xs;ba=hb.removedCount;pa=hb.added}pa=0===pa.length?pa:pa.map(function(yb){return Ba.enhancer_(yb,void 0)});this.legacyMode_&&this.updateArrayLength_(Ia,pa.length-ba);Ia=this.spliceItemsIntoValues_(N,ba,pa);0===ba&&0===pa.length||this.notifyArraySplice_(N,pa,Ia);return this.dehanceValues_(Ia)};
n.spliceItemsIntoValues_=function(N,ba,pa){if(1E4>pa.length){var Ba;return(Ba=this.values_).splice.apply(Ba,[N,ba].concat(pa))}Ba=this.values_.slice(N,N+ba);var Ia=this.values_.slice(N+ba);this.values_.length+=pa.length-ba;for(ba=0;ba<pa.length;ba++)this.values_[N+ba]=pa[ba];for(ba=0;ba<Ia.length;ba++)this.values_[N+pa.length+ba]=Ia[ba];return Ba};n.notifyArrayChildUpdate_=function(N,ba,pa){var Ba=!this.owned_&&!1,Ia=Fb(this);N=Ia||Ba?{observableKind:"array",object:this.proxy_,type:im,debugObjectName:this.atom_.name_,
index:N,newValue:ba,oldValue:pa}:null;this.atom_.reportChanged();Ia&&Wb(this,N)};n.notifyArraySplice_=function(N,ba,pa){var Ba=!this.owned_&&!1,Ia=Fb(this);N=Ia||Ba?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:N,removed:pa,added:ba,removedCount:pa.length,addedCount:ba.length}:null;this.atom_.reportChanged();Ia&&Wb(this,N)};n.get_=function(N){if(this.legacyMode_&&N>=this.values_.length)console.warn("[mobx] Out of bounds read: "+N);else return this.atom_.reportObserved(),
this.dehanceValue_(this.values_[N])};n.set_=function(N,ba){var pa=this.values_;this.legacyMode_&&N>pa.length&&d(17,N,pa.length);if(N<pa.length){var Ba=pa[N];if(qb(this)){ba=jb(this,{type:im,object:this.proxy_,index:N,newValue:ba});if(!ba)return;ba=ba.newValue}ba=this.enhancer_(ba,Ba);ba!==Ba&&(pa[N]=ba,this.notifyArrayChildUpdate_(N,ba,Ba))}else{N=Array(N+1-pa.length);for(Ba=0;Ba<N.length-1;Ba++)N[Ba]=void 0;N[N.length-1]=ba;this.spliceWithArray_(pa.length,0,N)}};return c}(),Er={clear:function(){return this.splice(0)},
replace:function(c){var n=this[Gh];return n.spliceWithArray_(0,n.values_.length,c)},toJSON:function(){return this.slice()},splice:function(c,n){for(var N=arguments.length,ba=Array(2<N?N-2:0),pa=2;pa<N;pa++)ba[pa-2]=arguments[pa];N=this[Gh];switch(arguments.length){case 0:return[];case 1:return N.spliceWithArray_(c);case 2:return N.spliceWithArray_(c,n)}return N.spliceWithArray_(c,n,ba)},spliceWithArray:function(c,n,N){return this[Gh].spliceWithArray_(c,n,N)},push:function(){for(var c=this[Gh],n=arguments.length,
N=Array(n),ba=0;ba<n;ba++)N[ba]=arguments[ba];c.spliceWithArray_(c.values_.length,0,N);return c.values_.length},pop:function(){return this.splice(Math.max(this[Gh].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var c=this[Gh],n=arguments.length,N=Array(n),ba=0;ba<n;ba++)N[ba]=arguments[ba];c.spliceWithArray_(0,0,N);return c.values_.length},reverse:function(){bg.trackingDerivation&&d(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){bg.trackingDerivation&&
d(37,"sort");var c=this.slice();c.sort.apply(c,arguments);this.replace(c);return this},remove:function(c){var n=this[Gh];c=n.dehanceValues_(n.values_).indexOf(c);return-1<c?(this.splice(c,1),!0):!1}};ab("concat",Za);ab("flat",Za);ab("includes",Za);ab("indexOf",Za);ab("join",Za);ab("lastIndexOf",Za);ab("slice",Za);ab("toString",Za);ab("toLocaleString",Za);ab("every",nb);ab("filter",nb);ab("find",nb);ab("findIndex",nb);ab("flatMap",nb);ab("forEach",nb);ab("map",nb);ab("some",nb);ab("reduce",zb);ab("reduceRight",
zb);var uz=J("ObservableArrayAdministration",$s),vz={};var wz=Symbol.iterator;var xz=Symbol.toStringTag;var xv=function(){function c(N,ba,pa){var Ba=this;void 0===ba&&(ba=Ea);void 0===pa&&(pa="ObservableMap");this.name_=this.enhancer_=void 0;this[Gh]=vz;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=ba;this.name_=pa;V(Map)||d(18);this.keysAtom_=ib("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Mc(!0,function(){Ba.merge(N)})}
var n=c.prototype;n.has_=function(N){return this.data_.has(N)};n.has=function(N){var ba=this;if(!bg.trackingDerivation)return this.has_(N);var pa=this.hasMap_.get(N);if(!pa){var Ba=pa=new oo(this.has_(N),Na,"ObservableMap.key?",!1);this.hasMap_.set(N,Ba);od(Ba,function(){return ba.hasMap_["delete"](N)})}return pa.get()};n.set=function(N,ba){var pa=this.has_(N);if(qb(this)){ba=jb(this,{type:pa?im:"add",object:this,newValue:ba,name:N});if(!ba)return this;ba=ba.newValue}pa?this.updateValue_(N,ba):this.addValue_(N,
ba);return this};n["delete"]=function(N){var ba=this;if(qb(this)&&!jb(this,{type:"delete",object:this,name:N}))return!1;if(this.has_(N)){var pa=Fb(this),Ba=pa?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(N).value_,name:N}:null;Nc(function(){var Ia;ba.keysAtom_.reportChanged();null==(Ia=ba.hasMap_.get(N))||Ia.setNewValue_(!1);ba.data_.get(N).setNewValue_(void 0);ba.data_["delete"](N)});pa&&Wb(this,Ba);return!0}return!1};n.updateValue_=function(N,
ba){var pa=this.data_.get(N);ba=pa.prepareNewValue_(ba);if(ba!==bg.UNCHANGED){var Ba=Fb(this);N=Ba?{observableKind:"map",debugObjectName:this.name_,type:im,object:this,oldValue:pa.value_,name:N,newValue:ba}:null;pa.setNewValue_(ba);Ba&&Wb(this,N)}};n.addValue_=function(N,ba){var pa=this;Nc(function(){var hb,yb=new oo(ba,pa.enhancer_,"ObservableMap.key",!1);pa.data_.set(N,yb);ba=yb.value_;null==(hb=pa.hasMap_.get(N))||hb.setNewValue_(!0);pa.keysAtom_.reportChanged()});var Ba=Fb(this),Ia=Ba?{observableKind:"map",
debugObjectName:this.name_,type:"add",object:this,name:N,newValue:ba}:null;Ba&&Wb(this,Ia)};n.get=function(N){return this.has(N)?this.dehanceValue_(this.data_.get(N).get()):this.dehanceValue_(void 0)};n.dehanceValue_=function(N){return void 0!==this.dehancer?this.dehancer(N):N};n.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};n.values=function(){var N=this,ba=this.keys();return bb({next:function(){var pa=ba.next(),Ba=pa.done;pa=pa.value;return{done:Ba,value:Ba?void 0:N.get(pa)}}})};
n.entries=function(){var N=this,ba=this.keys();return bb({next:function(){var pa=ba.next(),Ba=pa.done;pa=pa.value;return{done:Ba,value:Ba?void 0:[pa,N.get(pa)]}}})};n[wz]=function(){return this.entries()};n.forEach=function(N,ba){for(var pa=qa(this),Ba;!(Ba=pa()).done;)Ba=Ba.value,N.call(ba,Ba[1],Ba[0],this)};n.merge=function(N){var ba=this;kn(N)&&(N=new Map(N));Nc(function(){M(N)?S(N).forEach(function(pa){return ba.set(pa,N[pa])}):Array.isArray(N)?N.forEach(function(pa){return ba.set(pa[0],pa[1])}):
R(N)?(N.constructor!==Map&&d(19,N),N.forEach(function(pa,Ba){return ba.set(Ba,pa)})):null!==N&&void 0!==N&&d(20,N)});return this};n.clear=function(){var N=this;Nc(function(){bd(function(){for(var ba=qa(N.keys()),pa;!(pa=ba()).done;)N["delete"](pa.value)})})};n.replace=function(N){var ba=this;Nc(function(){for(var pa=tb(N),Ba=new Map,Ia=!1,hb=qa(ba.data_.keys()),yb;!(yb=hb()).done;)if(yb=yb.value,!pa.has(yb))if(ba["delete"](yb))Ia=!0;else{var Yb=ba.data_.get(yb);Ba.set(yb,Yb)}for(pa=qa(pa.entries());!(hb=
pa()).done;)yb=hb.value,hb=yb[0],Yb=yb[1],yb=ba.data_.has(hb),ba.set(hb,Yb),ba.data_.has(hb)&&(Yb=ba.data_.get(hb),Ba.set(hb,Yb),yb||(Ia=!0));if(!Ia)if(ba.data_.size!==Ba.size)ba.keysAtom_.reportChanged();else for(Ia=ba.data_.keys(),pa=Ba.keys(),hb=Ia.next(),yb=pa.next();!hb.done;){if(hb.value!==yb.value){ba.keysAtom_.reportChanged();break}hb=Ia.next();yb=pa.next()}ba.data_=Ba});return this};n.toString=function(){return"[object ObservableMap]"};n.toJSON=function(){return Array.from(this)};n.observe_=
function(N,ba){return sc(this,N)};n.intercept_=function(N){return Db(this,N)};ca(c,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:xz,get:function(){return"Map"}}]);return c}(),kn=J("ObservableMap",xv),yz={};var zz=Symbol.iterator;var Az=Symbol.toStringTag;var yv=function(){function c(N,ba,pa){void 0===ba&&(ba=Ea);void 0===pa&&(pa="ObservableSet");this.name_=void 0;this[Gh]=yz;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=
this.atom_=void 0;this.name_=pa;V(Set)||d(22);this.atom_=ib(this.name_);this.enhancer_=function(Ba,Ia){return ba(Ba,Ia,pa)};N&&this.replace(N)}var n=c.prototype;n.dehanceValue_=function(N){return void 0!==this.dehancer?this.dehancer(N):N};n.clear=function(){var N=this;Nc(function(){bd(function(){for(var ba=qa(N.data_.values()),pa;!(pa=ba()).done;)N["delete"](pa.value)})})};n.forEach=function(N,ba){for(var pa=qa(this),Ba;!(Ba=pa()).done;)Ba=Ba.value,N.call(ba,Ba,Ba,this)};n.add=function(N){var ba=
this;if(qb(this)&&!jb(this,{type:"add",object:this,newValue:N}))return this;if(!this.has(N)){Nc(function(){ba.data_.add(ba.enhancer_(N,void 0));ba.atom_.reportChanged()});var pa=Fb(this),Ba=pa?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:N}:null;pa&&Wb(this,Ba)}return this};n["delete"]=function(N){var ba=this;if(qb(this)&&!jb(this,{type:"delete",object:this,oldValue:N}))return!1;if(this.has(N)){var pa=Fb(this),Ba=pa?{observableKind:"set",debugObjectName:this.name_,
type:"delete",object:this,oldValue:N}:null;Nc(function(){ba.atom_.reportChanged();ba.data_["delete"](N)});pa&&Wb(this,Ba);return!0}return!1};n.has=function(N){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(N))};n.entries=function(){var N=0,ba=Array.from(this.keys()),pa=Array.from(this.values());return bb({next:function(){var Ba=N;N+=1;return Ba<pa.length?{value:[ba[Ba],pa[Ba]],done:!1}:{done:!0}}})};n.keys=function(){return this.values()};n.values=function(){this.atom_.reportObserved();
var N=this,ba=0,pa=Array.from(this.data_.values());return bb({next:function(){return ba<pa.length?{value:N.dehanceValue_(pa[ba++]),done:!1}:{done:!0}}})};n.replace=function(N){var ba=this;qo(N)&&(N=new Set(N));Nc(function(){Array.isArray(N)?(ba.clear(),N.forEach(function(pa){return ba.add(pa)})):T(N)?(ba.clear(),N.forEach(function(pa){return ba.add(pa)})):null!==N&&void 0!==N&&d("Cannot initialize set from "+N)});return this};n.observe_=function(N,ba){return sc(this,N)};n.intercept_=function(N){return Db(this,
N)};n.toJSON=function(){return Array.from(this)};n.toString=function(){return"[object ObservableSet]"};n[zz]=function(){return this.values()};ca(c,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:Az,get:function(){return"Set"}}]);return c}(),qo=J("ObservableSet",yv),zv=Object.create(null),Av=function(){function c(N,ba,pa,Ba){void 0===ba&&(ba=new Map);void 0===Ba&&(Ba=az);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=
this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=N;this.values_=ba;this.name_=pa;this.defaultAnnotation_=Ba;this.keysAtom_=new yq("ObservableObject.keys");this.isPlainObject_=M(this.target_)}var n=c.prototype;n.getObservablePropValue_=function(N){return this.values_.get(N).get()};n.setObservablePropValue_=function(N,ba){var pa=this.values_.get(N);if(pa instanceof Aq)return pa.set(ba),!0;if(qb(this)){ba=jb(this,{type:im,object:this.proxy_||
this.target_,name:N,newValue:ba});if(!ba)return null;ba=ba.newValue}ba=pa.prepareNewValue_(ba);if(ba!==bg.UNCHANGED){var Ba=Fb(this);N=Ba?{type:im,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:pa.value_,name:N,newValue:ba}:null;pa.setNewValue_(ba);Ba&&Wb(this,N)}return!0};n.get_=function(N){bg.trackingDerivation&&!aa(this.target_,N)&&this.has_(N);return this.target_[N]};n.set_=function(N,ba,pa){void 0===pa&&(pa=!1);if(aa(this.target_,N)){if(this.values_.has(N))return this.setObservablePropValue_(N,
ba);if(pa)return Reflect.set(this.target_,N,ba);this.target_[N]=ba;return!0}return this.extend_(N,{value:ba,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,pa)};n.has_=function(N){if(!bg.trackingDerivation)return N in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var ba=this.pendingKeys_.get(N);ba||(ba=new oo(N in this.target_,Na,"ObservableObject.key?",!1),this.pendingKeys_.set(N,ba));return ba.get()};n.make_=function(N,ba){!0===ba&&(ba=this.defaultAnnotation_);if(!1!==
ba){if(!(N in this.target_)){var pa;if(null!=(pa=this.target_[Ll])&&pa[N])return;d(1,ba.annotationType_,this.name_+"."+N.toString())}for(pa=this.target_;pa&&pa!==xq;){var Ba=wl(pa,N);if(Ba){Ba=ba.make_(this,N,Ba,pa);if(0===Ba)return;if(1===Ba)break}pa=Object.getPrototypeOf(pa)}var Ia;null==(Ia=this.target_[Ll])?!0:delete Ia[N]}};n.extend_=function(N,ba,pa,Ba){void 0===Ba&&(Ba=!1);!0===pa&&(pa=this.defaultAnnotation_);if(!1===pa)return this.defineProperty_(N,ba,Ba);if(ba=pa.extend_(this,N,ba,Ba)){var Ia;
null==(Ia=this.target_[Ll])?!0:delete Ia[N]}return ba};n.defineProperty_=function(N,ba,pa){void 0===pa&&(pa=!1);try{Ub();var Ba=this.delete_(N);if(!Ba)return Ba;if(qb(this)){var Ia=jb(this,{object:this.proxy_||this.target_,name:N,type:"add",newValue:ba.value});if(!Ia)return null;var hb=Ia.newValue;ba.value!==hb&&(ba=Y({},ba,{value:hb}))}if(pa){if(!Reflect.defineProperty(this.target_,N,ba))return!1}else Yk(this.target_,N,ba);this.notifyPropertyAddition_(N,ba.value)}finally{mb()}return!0};n.defineObservableProperty_=
function(N,ba,pa,Ba){void 0===Ba&&(Ba=!1);try{Ub();var Ia=this.delete_(N);if(!Ia)return Ia;if(qb(this)){var hb=jb(this,{object:this.proxy_||this.target_,name:N,type:"add",newValue:ba});if(!hb)return null;ba=hb.newValue}var yb=vc(N),Yb={configurable:bg.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:yb.get,set:yb.set};if(Ba){if(!Reflect.defineProperty(this.target_,N,Yb))return!1}else Yk(this.target_,N,Yb);var rc=new oo(ba,pa,"ObservableObject.key",!1);this.values_.set(N,rc);this.notifyPropertyAddition_(N,
rc.value_)}finally{mb()}return!0};n.defineComputedProperty_=function(N,ba,pa){void 0===pa&&(pa=!1);try{Ub();var Ba=this.delete_(N);if(!Ba)return Ba;if(qb(this)&&!jb(this,{object:this.proxy_||this.target_,name:N,type:"add",newValue:void 0}))return null;ba.name||(ba.name="ObservableObject.key");ba.context=this.proxy_||this.target_;var Ia=vc(N),hb={configurable:bg.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Ia.get,set:Ia.set};if(pa){if(!Reflect.defineProperty(this.target_,N,hb))return!1}else Yk(this.target_,
N,hb);this.values_.set(N,new Aq(ba));this.notifyPropertyAddition_(N,void 0)}finally{mb()}return!0};n.delete_=function(N,ba){void 0===ba&&(ba=!1);if(!aa(this.target_,N))return!0;if(qb(this)&&!jb(this,{object:this.proxy_||this.target_,name:N,type:"remove"}))return null;try{var pa,Ba;Ub();var Ia=Fb(this),hb=this.values_.get(N),yb=void 0;if(!hb&&Ia){var Yb;yb=null==(Yb=wl(this.target_,N))?void 0:Yb.value}if(ba){if(!Reflect.deleteProperty(this.target_,N))return!1}else delete this.target_[N];hb&&(this.values_["delete"](N),
hb instanceof oo&&(yb=hb.value_),Bb(hb));this.keysAtom_.reportChanged();null==(pa=this.pendingKeys_)||null==(Ba=pa.get(N))||Ba.set(N in this.target_);if(Ia){var rc={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:yb,name:N};Ia&&Wb(this,rc)}}finally{mb()}return!0};n.observe_=function(N,ba){return sc(this,N)};n.intercept_=function(N){return Db(this,N)};n.notifyPropertyAddition_=function(N,ba){var pa,Ba,Ia=Fb(this);Ia&&(ba=Ia?{type:"add",observableKind:"object",
debugObjectName:this.name_,object:this.proxy_||this.target_,name:N,newValue:ba}:null,Ia&&Wb(this,ba));null==(pa=this.pendingKeys_)||null==(Ba=pa.get(N))||Ba.set(!0);this.keysAtom_.reportChanged()};n.ownKeys_=function(){this.keysAtom_.reportObserved();return yr(this.target_)};n.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return c}(),Bz=J("ObservableObjectAdministration",Av),Cz=ra(0),at=0,Bv=function(){};(function(c,n){Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,
n):void 0!==c.prototype.__proto__?c.prototype.__proto__=n:c.prototype=n})(Bv,Array.prototype);var bt=function(c,n,N){function ba(Ba,Ia,hb,yb){void 0===hb&&(hb="ObservableArray");void 0===yb&&(yb=!1);var Yb=c.call(this)||this;Ia=new $s(hb,Ia,yb,!0);Ia.proxy_=fa(Yb);p(fa(Yb),Gh,Ia);Ba&&Ba.length&&(Ia=Sc(!0),Yb.spliceWithArray(0,0,Ba),bg.allowStateChanges=Ia);Object.defineProperty(fa(Yb),"0",Cz);return Yb}ha(ba,c);var pa=ba.prototype;pa.concat=function(){this[Gh].atom_.reportObserved();for(var Ba=arguments.length,
Ia=Array(Ba),hb=0;hb<Ba;hb++)Ia[hb]=arguments[hb];return Array.prototype.concat.apply(this.slice(),Ia.map(function(yb){return db(yb)?yb.slice():yb}))};pa[N]=function(){var Ba=this,Ia=0;return bb({next:function(){return Ia<Ba.length?{value:Ba[Ia++],done:!1}:{done:!0,value:void 0}}})};ca(ba,[{key:"length",get:function(){return this[Gh].getArrayLength_()},set:function(Ba){this[Gh].setArrayLength_(Ba)}},{key:n,get:function(){return"Array"}}]);return ba}(Bv,Symbol.toStringTag,Symbol.iterator);Object.entries(Er).forEach(function(c){var n=
c[0];c=c[1];"concat"!==n&&P(bt.prototype,n,c)});la(1E3);var Cv=xq.toString;["Symbol","Map","Set"].forEach(function(c){"undefined"===typeof E()[c]&&d("MobX requires global '"+c+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:ec,extras:{getDebugName:Ha},$mobx:Gh});var Dz=X(299),Yj=class{constructor(c){Ab(this,"props");Ab(this,"aspectRatio");Ab(this,"type");Ab(this,"hideCloneHandles",!1);Ab(this,"hideResizeHandles",!1);
Ab(this,"hideRotateHandle",!1);Ab(this,"hideContextBar",!1);Ab(this,"hideSelectionDetail",!1);Ab(this,"hideSelection",!1);Ab(this,"canChangeAspectRatio",!0);Ab(this,"canUnmount",!0);Ab(this,"canResize",[!0,!0]);Ab(this,"canScale",!0);Ab(this,"canFlip",!0);Ab(this,"canEdit",!1);Ab(this,"canBind",!1);Ab(this,"nonce");Ab(this,"bindingDistance",4);Ab(this,"isDirty",!1);Ab(this,"lastSerialized");Ab(this,"getCenter",()=>Qe.getBoundsCenter(this.bounds));Ab(this,"getRotatedBounds",()=>{const {bounds:Ba,props:{rotation:Ia}}=
this;return Ia?Qe.getBoundsFromPoints(Qe.getRotatedCorners(Ba,Ia)):Ba});Ab(this,"hitTestPoint",Ba=>{var Ia=this.rotatedBounds;if(!this.props.rotation)return uh.pointInBounds(Ba,Ia);Ia=Qe.getRotatedCorners(Ia,this.props.rotation);return uh.pointInPolygon(Ba,Ia)});Ab(this,"hitTestLineSegment",(Ba,Ia)=>{const hb=Qe.getBoundsFromPoints([Ba,Ia]),{rotatedBounds:yb,props:{rotation:Yb=0}}=this;return Qe.boundsContain(yb,hb)||Yb?k(Ba,Ia,Qe.getRotatedCorners(this.bounds)).didIntersect:0<g(yb,Ba,Ia).length});
Ab(this,"hitTestBounds",Ba=>{const {rotatedBounds:Ia,props:{rotation:hb=0}}=this,yb=Qe.getRotatedCorners(this.bounds,hb);return Qe.boundsContain(Ba,Ia)||0<z([Ba.minX,Ba.minY],[Ba.width,Ba.height],yb).length});Ab(this,"getExpandedBounds",()=>Qe.expandBounds(this.getBounds(),this.bindingDistance));Ab(this,"getBindingPoint",(Ba,Ia,hb,yb)=>{var Yb=this.getBounds(),rc=this.getExpandedBounds();if(uh.pointInBounds(Ba,rc)){var Ac=F(Ia,hb,rc).filter(Yc=>Yc.didIntersect).map(Yc=>Yc.points[0]);if(Ac.length)return hb=
this.getCenter(),Ac=Ac.sort((Yc,ud)=>te.dist(ud,Ia)-te.dist(Yc,Ia))[0],Ac=te.med(Ba,Ac),yb?(yb=2>te.dist(Ba,hb)?hb:Ba,Yb=0):(yb=2>te.distanceToLineSegment(Ba,Ac,hb)?hb:Ac,Yb=uh.pointInBounds(Ba,Yb)?this.bindingDistance:Math.max(this.bindingDistance,Qe.getBoundsSides(Yb).map(Yc=>te.distanceToLineSegment(Yc[1][0],Yc[1][1],Ba)).sort((Yc,ud)=>Yc-ud)[0])),rc=te.divV(te.sub(yb,[rc.minX,rc.minY]),[rc.width,rc.height]),{point:te.clampV(rc,0,1),distance:Yb}}});Ab(this,"getSerialized",()=>kb(qg(Ef({},this.props),
{type:this.type,nonce:this.nonce})));Ab(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Nc(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});Ab(this,"validateProps",Ba=>Ba);Ab(this,"update",(Ba,Ia=!1,hb=!1)=>{Ia||this.isDirty||this.setIsDirty(!0);Ia||hb||this.incNonce();Object.assign(this.props,this.validateProps(Ba));return this});Ab(this,"clone",
()=>new this.constructor(this.serialized));Ab(this,"onResetBounds",Ba=>this);Ab(this,"scale",[1,1]);Ab(this,"onResizeStart",Ba=>{var Ia;this.scale=[...(null!=(Ia=this.props.scale)?Ia:[1,1])];return this});Ab(this,"onResize",(Ba,Ia)=>{const {bounds:hb,rotation:yb,scale:[Yb,rc]}=Ia;Ba=[...this.scale];0>Yb&&(Ba[0]*=-1);0>rc&&(Ba[1]*=-1);this.update({point:[hb.minX,hb.minY],scale:Ba,rotation:yb});return this});Ab(this,"onHandleChange",(Ba,{id:Ia,delta:hb})=>{if(void 0!==Ba.handles){var yb=so(Ba.handles);
yb[Ia]=qg(Ef({},yb[Ia]),{point:te.add(hb,Ba.handles[Ia].point)});var Yb=Qe.getCommonTopLeft(Object.values(yb).map(rc=>rc.point));Object.values(yb).forEach(rc=>{rc.point=te.sub(rc.point,Yb)});this.update({point:te.add(Ba.point,Yb),handles:yb})}});var n,N;const ba=this.constructor.id,pa=null!=(n=this.constructor.defaultProps)?n:{};this.type=ba;this.props=Ef(Ef({scale:[1,1]},pa),c);this.nonce=null!=(N=c.nonce)?N:Date.now();mc(this)}get id(){return this.props.id}setNonce(c){this.nonce=c}incNonce(){this.nonce++}setIsDirty(c){this.isDirty=
c}setLastSerialized(c){this.lastSerialized=c}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(c){c=this.getBounds();const {stroke:n,strokeWidth:N,strokeType:ba,opacity:pa,fill:Ba,noFill:Ia,borderRadius:hb}=this.props;return(0,Dz.jsx)("rect",{fill:Ia?"none":Pe(Ba,"background"),stroke:Pe(n,"stroke"),strokeWidth:null!=N?N:2,strokeDasharray:"dashed"===ba?"8 2":
void 0,fillOpacity:null!=pa?pa:.2,width:c.width,height:c.height,rx:hb,ry:hb})}};Ab(Yj,"type");we([Tg],Yj.prototype,"props",2);we([Tg],Yj.prototype,"canResize",2);we([Tg],Yj.prototype,"nonce",2);we([Tg],Yj.prototype,"isDirty",2);we([Tg],Yj.prototype,"lastSerialized",2);we([$g],Yj.prototype,"id",1);we([Eg],Yj.prototype,"setNonce",1);we([Eg],Yj.prototype,"incNonce",1);we([Eg],Yj.prototype,"setIsDirty",1);we([Eg],Yj.prototype,"setLastSerialized",1);we([$g],Yj.prototype,"center",1);we([$g],Yj.prototype,
"bounds",1);we([$g],Yj.prototype,"rotatedBounds",1);we([$g],Yj.prototype,"serialized",1);we([Eg],Yj.prototype,"update",2);var wk=class extends Yj{constructor(c={}){super(c);Ab(this,"canBind",!0);Ab(this,"getBounds",()=>{const [n,N]=this.props.point,[ba,pa]=this.props.size;return{minX:n,minY:N,maxX:n+ba,maxY:N+pa,width:ba,height:pa}});Ab(this,"getRotatedBounds",()=>Qe.getBoundsFromPoints(Qe.getRotatedCorners(this.bounds,this.props.rotation)));Ab(this,"onResize",(n,N)=>{const {bounds:ba,rotation:pa,
scale:[Ba,Ia]}=N;n=[...this.scale];0>Ba&&(n[0]*=-1);0>Ia&&(n[1]*=-1);this.update({point:[ba.minX,ba.minY],scale:n,rotation:pa});return this.update({rotation:pa,point:[ba.minX,ba.minY],size:[Math.max(1,ba.width),Math.max(1,ba.height)],scale:n})});Ab(this,"validateProps",n=>{void 0!==n.size&&(n.size[0]=Math.max(n.size[0],1),n.size[1]=Math.max(n.size[1],1));return n});mc(this)}};Ab(wk,"id","box");Ab(wk,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var kp=class extends Yj{constructor(c=
{}){super(c);Ab(this,"getBounds",()=>{const {pointBounds:n,props:{point:N}}=this;return Qe.translateBounds(n,N)});Ab(this,"getRotatedBounds",()=>{const {props:{rotation:n,point:N},bounds:ba,rotatedPoints:pa}=this;return n?Qe.translateBounds(Qe.getBoundsFromPoints(pa),N):ba});Ab(this,"normalizedPoints",[]);Ab(this,"isResizeFlippedX",!1);Ab(this,"isResizeFlippedY",!1);Ab(this,"onResizeStart",()=>{var n;const {bounds:N,props:{points:ba}}=this;this.scale=[...(null!=(n=this.props.scale)?n:[1,1])];const pa=
[N.width,N.height];this.normalizedPoints=ba.map(Ba=>Hd.divV(Ba,pa));return this});Ab(this,"onResize",(n,N)=>{const {bounds:ba,scale:[pa,Ba]}=N,Ia=[ba.width,ba.height];n=[...this.scale];0>pa&&(n[0]*=-1);0>Ba&&(n[1]*=-1);return this.update(pa||Ba?{point:[ba.minX,ba.minY],points:this.normalizedPoints.map(hb=>Hd.mulV(hb,Ia).concat(hb[2])),scale:n}:{point:[ba.minX,ba.minY],points:this.normalizedPoints.map(hb=>Hd.mulV(hb,Ia).concat(hb[2]))})});Ab(this,"hitTestPoint",n=>{const {props:{points:N,point:ba}}=
this;return uh.pointNearToPolyline(Hd.sub(n,ba),N)});Ab(this,"hitTestLineSegment",(n,N)=>{const {bounds:ba,props:{points:pa,point:Ba}}=this;if(uh.pointInBounds(n,ba)||uh.pointInBounds(N,ba)||0<g(ba,n,N).length){const Ia=Hd.sub(n,Ba),hb=Hd.sub(N,Ba);return k(Ia,hb,pa).didIntersect||!!pa.find(yb=>5>Hd.dist(Ia,yb)||5>Hd.dist(hb,yb))}return!1});Ab(this,"hitTestBounds",n=>{const {rotatedBounds:N,props:{points:ba,point:pa}}=this,Ba=Qe.translateBounds(n,Hd.neg(pa));return Qe.boundsContain(n,N)||ba.every(Ia=>
uh.pointInBounds(Ia,Ba))||Qe.boundsCollide(n,N)&&0<I([Ba.minX,Ba.minY],[Ba.width,Ba.height],ba).length});mc(this)}get pointBounds(){const {props:{points:c}}=this;return Qe.getBoundsFromPoints(c)}get rotatedPoints(){const {props:{point:c,points:n,rotation:N},center:ba}=this;if(!N)return n;const pa=Hd.sub(ba,c);return n.map(Ba=>Hd.rotWith(Ba,pa,N))}};Ab(kp,"id","draw");Ab(kp,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});we([$g],kp.prototype,"pointBounds",
1);we([$g],kp.prototype,"rotatedPoints",1);var ct=class extends wk{constructor(c={}){super(c);Ab(this,"getBounds",()=>{const {props:{point:[n,N],size:[ba,pa]}}=this;return Qe.getRotatedEllipseBounds(n,N,ba/2,pa/2,0)});Ab(this,"getRotatedBounds",()=>{const {props:{point:[n,N],size:[ba,pa],rotation:Ba}}=this;return Qe.getRotatedEllipseBounds(n,N,ba/2,pa/2,Ba)});Ab(this,"hitTestPoint",n=>{const {props:{size:N,rotation:ba},center:pa}=this;return uh.pointInEllipse(n,pa,N[0],N[1],ba||0)});Ab(this,"hitTestLineSegment",
(n,N)=>{const {props:{size:[ba,pa],rotation:Ba=0},center:Ia}=this;return h(n,N,Ia,ba,pa,Ba).didIntersect});Ab(this,"hitTestBounds",n=>{const {props:{size:[N,ba],rotation:pa=0},rotatedBounds:Ba}=this;var Ia;if(!(Ia=Qe.boundsContain(n,Ba))){const {minX:hb,minY:yb,width:Yb,height:rc}=n;Ia=0<r(this.center,N/2,ba/2,pa,[hb,yb],[Yb,rc]).length}return Ia});mc(this)}};Ab(ct,"id","ellipse");Ab(ct,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var dt=class extends wk{constructor(c=
{}){super(c);Ab(this,"onResetBounds",n=>{const {clipping:N,size:ba,point:pa}=this.props;if(N){const [Ba,Ia,hb,yb]=Array.isArray(N)?N:[N,N,N,N];return this.update({clipping:0,point:[pa[0]-yb,pa[1]-Ba],size:[ba[0]+(yb-Ia),ba[1]+(Ba-hb)]})}if(n.asset){const {size:[Ba,Ia]}=n.asset;this.update({clipping:0,point:[pa[0]+ba[0]/2-Ba/2,pa[1]+ba[1]/2-Ia/2],size:[Ba,Ia]})}return this});Ab(this,"onResize",(n,N)=>{const {bounds:ba,clip:pa,scale:Ba}=N;({clipping:N}=this.props);const {clipping:Ia}=n;if(pa){const {point:[hb,
yb],size:[Yb,rc]}=n,[Ac,Yc,ud,pd]=Ia?Array.isArray(Ia)?Ia:[Ia,Ia,Ia,Ia]:[0,0,0,0];N=[Ac+(ba.minY-yb),Yc+(ba.maxX-(hb+Yb)),ud+(ba.maxY-(yb+rc)),pd+(ba.minX-hb)]}else void 0!==Ia&&(N=Array.isArray(Ia)?Ia:[Ia,Ia,Ia,Ia],N=[N[0]*Ba[1],N[1]*Ba[0],N[2]*Ba[1],N[3]*Ba[0]]);if(N&&Array.isArray(N)){const hb=N;hb.every((yb,Yb)=>0===Yb||yb===hb[Yb-1])&&(N=hb[0])}return this.update({point:[ba.minX,ba.minY],size:[Math.max(1,ba.width),Math.max(1,ba.height)],clipping:N})});mc(this)}};Ab(dt,"id","ellipse");Ab(dt,"defaultProps",
{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Dv=class extends Yj{constructor(c={}){super(c);Ab(this,"getBounds",()=>{const {points:n,props:{point:N}}=this;return Qe.translateBounds(Qe.getBoundsFromPoints(n),N)});Ab(this,"getRotatedBounds",()=>{const {rotatedPoints:n,props:{point:N}}=this;return Qe.translateBounds(Qe.getBoundsFromPoints(n),N)});Ab(this,"normalizedHandles",[]);Ab(this,"onResizeStart",()=>{var n;const {props:{handles:N},
bounds:ba}=this;this.scale=[...(null!=(n=this.props.scale)?n:[1,1])];const pa=[ba.width,ba.height];this.normalizedHandles=Object.values(N).map(Ba=>Hd.divV(Ba.point,pa));return this});Ab(this,"onResize",(n,N)=>{const {bounds:ba,scale:[pa,Ba]}=N,{props:{handles:Ia},normalizedHandles:hb}=this,yb=[ba.width,ba.height];n=[...this.scale];0>pa&&(n[0]*=-1);0>Ba&&(n[1]*=-1);return this.update({point:[ba.minX,ba.minY],handles:Object.values(Ia).map((Yb,rc)=>qg(Ef({},Yb),{point:Hd.mulV(hb[rc],yb)})),scale:n})});
Ab(this,"hitTestPoint",n=>{const {points:N}=this;return uh.pointNearToPolyline(Hd.sub(n,this.props.point),N)});Ab(this,"hitTestLineSegment",(n,N)=>{const {bounds:ba,points:pa,props:{point:Ba}}=this;if(uh.pointInBounds(n,ba)||uh.pointInBounds(N,ba)||0<g(ba,n,N).length){const Ia=Hd.sub(n,Ba),hb=Hd.sub(N,Ba);return k(Ia,hb,pa).didIntersect||!!pa.find(yb=>5>Hd.dist(Ia,yb)||5>Hd.dist(hb,yb))}return!1});Ab(this,"hitTestBounds",n=>{const {rotatedBounds:N,points:ba,props:{point:pa}}=this,Ba=Qe.translateBounds(n,
Hd.neg(pa));return Qe.boundsContain(n,N)||ba.every(Ia=>uh.pointInBounds(Ia,Ba))||Qe.boundsCollide(n,N)&&0<I([Ba.minX,Ba.minY],[Ba.width,Ba.height],ba).length});Ab(this,"validateProps",n=>{n.point&&(n.point=[0,0]);void 0!==n.handles&&1>Object.values(n.handles).length&&(n.handles=Dv.defaultProps.handles);return n});mc(this)}get points(){return Object.values(this.props.handles).map(c=>c.point)}get centroid(){const {points:c}=this;return ni.getPolygonCentroid(c)}get rotatedPoints(){const {centroid:c,
props:{handles:n,rotation:N}}=this;return N?Object.values(n).map(ba=>Hd.rotWith(ba.point,c,N)):this.points}},lp=Dv;Ab(lp,"id","polyline");Ab(lp,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});we([$g],lp.prototype,"points",1);we([$g],lp.prototype,"centroid",1);we([$g],lp.prototype,"rotatedPoints",1);var Ev=class extends lp{constructor(c={}){super(c);Ab(this,"hideResizeHandles",!0);Ab(this,"hideRotateHandle",!0);Ab(this,"validateProps",n=>{n.point&&(n.point=[0,
0]);void 0!==n.handles&&1>Object.values(n.handles).length&&(n.handles=Ev.defaultProps.handles);return n});Ab(this,"getHandlesChange",(n,N)=>{var ba=di(n.handles,N);ba=di(ba,{start:{point:te.toFixed(ba.start.point)},end:{point:te.toFixed(ba.end.point)}});if(!te.isEqual(ba.start.point,ba.end.point)){N={point:n.point,handles:so(ba)};n=n.point;ba=Qe.translateBounds(Qe.getBoundsFromPoints(Object.values(ba).map(Ba=>Ba.point)),N.point);var pa=te.sub([ba.minX,ba.minY],n);te.isEqual(pa,[0,0])||(Object.values(N.handles).forEach(Ba=>
{Ba.point=te.toFixed(te.sub(Ba.point,pa))}),N.point=te.toFixed(te.add(N.point,pa)));return N}});mc(this)}},Eq=Ev;Ab(Eq,"id","line");Ab(Eq,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var ln=class extends wk{constructor(c={}){super(c);Ab(this,"getRotatedBounds",()=>{const {rotatedVertices:n,props:{point:N},offset:ba}=this;return Qe.translateBounds(Qe.getBoundsFromPoints(n),Hd.add(N,ba))});
Ab(this,"hitTestPoint",n=>{const {vertices:N}=this;return uh.pointInPolygon(Hd.add(n,this.props.point),N)});Ab(this,"hitTestLineSegment",(n,N)=>{const {vertices:ba,props:{point:pa}}=this;return k(Hd.sub(n,pa),Hd.sub(N,pa),ba).didIntersect});Ab(this,"hitTestBounds",n=>{const {rotatedBounds:N,offset:ba,rotatedVertices:pa,props:{point:Ba}}=this,Ia=Qe.translateBounds(n,Hd.neg(Hd.add(Ba,ba)));return Qe.boundsContain(n,N)||pa.every(hb=>uh.pointInBounds(hb,Ia))||0<z([Ia.minX,Ia.minY],[Ia.width,Ia.height],
pa).length});Ab(this,"validateProps",n=>{n.point&&(n.point=[0,0]);void 0!==n.sides&&3>n.sides&&(n.sides=3);return n});mc(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:c},vertices:n}=this;return n.map(N=>Hd.add(N,c))}get centroid(){const {vertices:c}=this;return ni.getPolygonCentroid(c)}get rotatedVertices(){const {vertices:c,centroid:n,props:{rotation:N}}=this;return N?c.map(ba=>Hd.rotWith(ba,n,N)):c}get offset(){const {props:{size:[c,n]}}=this,N=Qe.getBoundsCenter(Qe.getBoundsFromPoints(this.vertices));
return Hd.sub(Hd.div([c,n],2),N)}getVertices(c=0){const {ratio:n,sides:N,size:ba}=this.props;return 3===N?ni.getTriangleVertices(ba,c,n):ni.getPolygonVertices(ba,N,c,n)}};Ab(ln,"id","polygon");Ab(ln,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});we([$g],ln.prototype,"vertices",1);we([$g],ln.prototype,"pageVertices",1);we([$g],ln.prototype,"centroid",1);we([$g],ln.prototype,"rotatedVertices",1);we([$g],ln.prototype,"offset",1);
var et=class extends wk{constructor(c={}){super(c);Ab(this,"canEdit",!0);Ab(this,"canFlip",!1);mc(this)}};Ab(et,"id","text");Ab(et,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Fr=class extends wk{constructor(c={}){super(c);Ab(this,"canEdit",!1);Ab(this,"canFlip",!1);Ab(this,"getBounds",()=>0===this.shapes.length?(Ze().deleteShapes([this.id]),{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Qe.getCommonBounds(this.shapes.map(n=>n.getBounds())));
mc(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};Ab(Fr,"id","group");Ab(Fr,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});we([$g],Fr.prototype,"shapes",1);var mp=class{constructor(){Ab(this,"_id");Ab(this,"_initial");Ab(this,"_states");Ab(this,"_isActive",!1);Ab(this,"cursor");Ab(this,"_disposables",[]);Ab(this,"children",new Map([]));Ab(this,"registerStates",N=>{N.forEach(ba=>
this.children.set(ba.id,new ba(this,this)));return this});Ab(this,"deregisterStates",N=>{N.forEach(ba=>{var pa;null==(pa=this.children.get(ba.id))||pa.dispose();this.children.delete(ba.id)});return this});Ab(this,"currentState",{});Ab(this,"transition",(N,ba={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${N}.`);const pa=this.children.get(N),Ba=this.currentState;if(!pa)throw Error(`Could not find a state named ${N}.`);Nc(()=>{this.currentState?(Ba._events.onExit(qg(Ef({},
ba),{toId:N})),Ba.dispose(),this.setCurrentState(pa),this._events.onTransition(qg(Ef({},ba),{fromId:Ba.id,toId:N})),pa._events.onEnter(qg(Ef({},ba),{fromId:Ba.id}))):(this.currentState=pa,pa._events.onEnter(qg(Ef({},ba),{fromId:""})))});return this});Ab(this,"isIn",N=>{N=N.split(".").reverse();let ba=this;for(;0<N.length;){const pa=N.pop();if(!pa)return!0;if(ba.currentState.id===pa){if(0===N.length)return!0;ba=ba.currentState}else break}return!1});Ab(this,"isInAny",(...N)=>N.some(this.isIn));Ab(this,
"forwardEvent",(N,...ba)=>{var pa,Ba;(null==(Ba=null==(pa=this.currentState)?void 0:pa._events)?0:Ba[N])&&Nc(()=>{var Ia;return null==(Ia=this.currentState._events)?void 0:Ia[N](...ba)})});Ab(this,"_events",{onTransition:N=>{var ba;null==(ba=this.onTransition)||ba.call(this,N)},onEnter:N=>{var ba;this._isActive=!0;this.initial&&this.transition(this.initial,N);null==(ba=this.onEnter)||ba.call(this,N)},onExit:N=>{var ba,pa,Ba;this._isActive=!1;null==(pa=null==(ba=this.currentState)?void 0:ba.onExit)||
pa.call(ba,{toId:"parent"});null==(Ba=this.onExit)||Ba.call(this,N)},onPointerDown:(N,ba)=>{var pa;null==(pa=this.onPointerDown)||pa.call(this,N,ba);this.forwardEvent("onPointerDown",N,ba)},onPointerUp:(N,ba)=>{var pa;null==(pa=this.onPointerUp)||pa.call(this,N,ba);this.forwardEvent("onPointerUp",N,ba)},onPointerMove:(N,ba)=>{var pa;null==(pa=this.onPointerMove)||pa.call(this,N,ba);this.forwardEvent("onPointerMove",N,ba)},onPointerEnter:(N,ba)=>{var pa;null==(pa=this.onPointerEnter)||pa.call(this,
N,ba);this.forwardEvent("onPointerEnter",N,ba)},onPointerLeave:(N,ba)=>{var pa;null==(pa=this.onPointerLeave)||pa.call(this,N,ba);this.forwardEvent("onPointerLeave",N,ba)},onDoubleClick:(N,ba)=>{var pa;null==(pa=this.onDoubleClick)||pa.call(this,N,ba);this.forwardEvent("onDoubleClick",N,ba)},onKeyDown:(N,ba)=>{var pa;this._events.onModifierKey(N,ba);null==(pa=this.onKeyDown)||pa.call(this,N,ba);this.forwardEvent("onKeyDown",N,ba)},onKeyUp:(N,ba)=>{var pa;this._events.onModifierKey(N,ba);null==(pa=
this.onKeyUp)||pa.call(this,N,ba);this.forwardEvent("onKeyUp",N,ba)},onPinchStart:(N,ba)=>{var pa;null==(pa=this.onPinchStart)||pa.call(this,N,ba);this.forwardEvent("onPinchStart",N,ba)},onPinch:(N,ba)=>{var pa;null==(pa=this.onPinch)||pa.call(this,N,ba);this.forwardEvent("onPinch",N,ba)},onPinchEnd:(N,ba)=>{var pa;null==(pa=this.onPinchEnd)||pa.call(this,N,ba);this.forwardEvent("onPinchEnd",N,ba)},onModifierKey:(N,ba)=>{switch(ba.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(N,
ba)}}});Ab(this,"onEnter");Ab(this,"onExit");Ab(this,"onTransition");Ab(this,"onPointerDown");Ab(this,"onPointerUp");Ab(this,"onPointerMove");Ab(this,"onPointerEnter");Ab(this,"onPointerLeave");Ab(this,"onDoubleClick");Ab(this,"onKeyDown");Ab(this,"onKeyUp");Ab(this,"onPinchStart");Ab(this,"onPinch");Ab(this,"onPinchEnd");const c=this.constructor.initial,n=this.constructor.states;this._id=this.constructor.id;this._initial=c;this._states=n}dispose(){this._disposables.forEach(c=>c());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(c=>[c,...c.descendants])}setCurrentState(c){this.currentState=c}};Ab(mp,"id");Ab(mp,"shortcuts");we([Tg],mp.prototype,"currentState",2);we([Eg],mp.prototype,"setCurrentState",1);var ft=class extends mp{constructor(c,n){var N,ba;super();Ab(this,"_root");Ab(this,
"_parent");Ab(this,"children",new Map([]));Ab(this,"registerStates",pa=>{pa.forEach(Ba=>this.children.set(Ba.id,new Ba(this,this._root)));return this});Ab(this,"deregisterStates",pa=>{pa.forEach(Ba=>{var Ia;null==(Ia=this.children.get(Ba.id))||Ia.dispose();this.children.delete(Ba.id)});return this});this._parent=c;this._root=n;this.states&&0<this.states.length&&(this.registerStates(this.states),c=null!=(N=this.initial)?N:this.states[0].id,N=this.children.get(c))&&(this.setCurrentState(N),null==(ba=
this.currentState)||ba._events.onEnter({fromId:"initial"}));mc(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};Ab(ft,"cursor");var mn=class extends ft{constructor(){super(...arguments);Ab(this,"isLocked",!1);Ab(this,"previous");Ab(this,"onEnter",({fromId:c})=>{this.previous=c;this.cursor&&this.app.cursors.setCursor(this.cursor)});Ab(this,"onTransition",c=>
{({toId:c}=c);c=this.children.get(c);this.app.cursors.reset();c.cursor?this.app.cursors.setCursor(c.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},ii=class extends ft{get app(){return this.root}get tool(){return this.parent}},Fv=class extends ii{constructor(){super(...arguments);Ab(this,"cursor","crosshair");Ab(this,"creatingShape");Ab(this,"aspectRatio");Ab(this,"initialBounds",{});Ab(this,"onEnter",()=>{const {currentPage:c,inputs:{originPoint:n,currentPoint:N}}=
this.app;var {Shape:ba}=this.tool;ba=new ba({id:Se(),type:ba.id,parentId:c.id,point:[...n],fill:this.app.settings.color,stroke:this.app.settings.color,size:te.abs(te.sub(N,n))});this.initialBounds={minX:n[0],minY:n[1],maxX:n[0]+1,maxY:n[1]+1,width:1,height:1};ba.canChangeAspectRatio||(ba.aspectRatio?(this.aspectRatio=ba.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+
this.initialBounds.height);this.creatingShape=ba;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(ba);this.app.setSelectedShapes([ba])});Ab(this,"onPointerMove",c=>{if(!c.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:n}=this,{currentPoint:N,originPoint:ba,shiftKey:pa}=this.app.inputs;c=pa||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio;n=Qe.getTransformedBoundingBox(n,
"bottom_right_corner",te.sub(N,ba),0,c);this.app.settings.snapToGrid&&!c&&(n=Qe.snapBoundsToGrid(n,8));this.creatingShape.update({point:[n.minX,n.minY],size:[n.width,n.height]})}});Ab(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");
this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};Ab(Fv,"id","creating");var Gv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("pointing")});Ab(this,"onPinchStart",(...c)=>{var n,N;this.app.transition("select",{returnTo:this.app.currentState.id});null==(N=(n=this.app._events).onPinchStart)||N.call(n,...c)});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};Ab(Gv,"id",
"idle");var Hv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});Ab(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ab(Hv,"id","pointing");var Em=class extends mn{constructor(){super(...arguments);Ab(this,"cursor","crosshair")}};Ab(Em,"id","box");Ab(Em,"states",[Gv,Hv,Fv]);Ab(Em,
"initial","idle");var Iv=class extends ii{constructor(){super(...arguments);Ab(this,"shape",{});Ab(this,"points",[[0,0,.5]]);Ab(this,"persistDebounced",sg(this.app.persist,200));Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});Ab(this,"onEnter",()=>{var c;const {Shape:n,previousShape:N}=this.tool;var {originPoint:ba}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&N){this.shape=N;var {shape:pa}=this;var Ba=pa.props.points[pa.props.points.length-
1];const hb=Hd.sub(ba,pa.props.point).concat(null!=(c=ba[2])?c:.5);this.points=[...pa.props.points,Ba,Ba];const yb=Math.ceil(Hd.dist(Ba,ba)/16);for(let Yb=0,rc=Yb/(yb-1);Yb<yb;Yb++){c=this.points;ba=c.push;pa=Hd.lrp(Ba,hb,rc);var Ia=Ba[2];ba.call(c,pa.concat.call(pa,Ia+(hb[2]-Ia)*rc))}this.addNextPoint(hb)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(Ba=ba[2])?Ba:.5]],this.shape=new n({id:Se(),type:n.id,parentId:this.app.currentPage.id,point:ba.slice(0,2),points:this.points,isComplete:!1,
fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});Ab(this,"onPointerMove",()=>{const {shape:c}=this,{currentPoint:n,previousPoint:N}=this.app.inputs;Hd.isEqual(N,n)||this.addNextPoint(Hd.sub(n,c.props.point).concat(n[2]))});Ab(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?
uh.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let c=this.app.selectedTool.id;"pencil"===c||"highlighter"===c?this.persistDebounced():this.app.persist()});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(c){const {shape:n}=this,N=Hd.min(c,[0,0]);this.points.push(c);
0>N[0]||0>N[1]?(this.points=this.points.map(ba=>Hd.sub(ba,N).concat(ba[2])),n.update({point:Hd.add(n.props.point,N),points:this.points})):n.update({points:this.points})}};Ab(Iv,"id","creating");var Jv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerDown",(c,n)=>{c.order||this.app.readOnly||this.tool.transition("creating")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};
Ab(Jv,"id","idle");var Kv=class extends ii{constructor(){super(...arguments);Ab(this,"origin",[0,0]);Ab(this,"prevDelta",[0,0]);Ab(this,"onEnter",c=>{this.prevDelta=c.info.delta;this.origin=c.info.point});Ab(this,"onPinch",c=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])});Ab(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Ab(Kv,"id","pinching");var Fq=class extends mn{constructor(){super(...arguments);Ab(this,"cursor","crosshair");Ab(this,"simplify",!0);Ab(this,"simplifyTolerance",
1);Ab(this,"previousShape");Ab(this,"onPinchStart",(c,n)=>{this.transition("pinching",{info:c,event:n})})}};Ab(Fq,"id","draw");Ab(Fq,"states",[Jv,Iv,Kv]);Ab(Fq,"initial","idle");var Lv=class extends ii{constructor(){super(...arguments);Ab(this,"points",[[0,0,.5]]);Ab(this,"hitShapes",new Set);Ab(this,"onEnter",()=>{const {originPoint:c}=this.app.inputs;this.points=[c];this.hitShapes.clear()});Ab(this,"onPointerMove",()=>{const {currentPoint:c,previousPoint:n}=this.app.inputs;Hd.isEqual(n,c)||(this.points.push(c),
this.app.shapesInViewport.filter(N=>N.hitTestLineSegment(n,c)).forEach(N=>this.hitShapes.add(N)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});Ab(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};Ab(Lv,"id","erasing");var Mv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerDown",
(c,n)=>{c.order||this.tool.transition("pointing")});Ab(this,"onPinchStart",(...c)=>{var n,N;this.app.transition("select",{returnTo:this.app.currentState.id});null==(N=(n=this.app._events).onPinchStart)||N.call(n,...c)});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};Ab(Mv,"id","idle");var Nv=class extends ii{constructor(){super(...arguments);Ab(this,"onEnter",()=>{const {currentPoint:c}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(n=>
n.hitTestPoint(c)))});Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});Ab(this,"onPointerUp",()=>{const c=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(c);this.tool.transition("idle")})}};Ab(Nv,"id","pointing");var Gr=class extends mn{constructor(){super(...arguments);Ab(this,"cursor","crosshair")}};Ab(Gr,"id","erase");Ab(Gr,"states",[Mv,Nv,Lv]);Ab(Gr,
"initial","idle");var gt=class extends ii{constructor(){super(...arguments);Ab(this,"handle",{});Ab(this,"handleId","end");Ab(this,"currentShape",{});Ab(this,"initialShape",{});Ab(this,"bindableShapeIds",[]);Ab(this,"startBindingShapeId");Ab(this,"newStartBindingId","");Ab(this,"draggedBindingId","");Ab(this,"onPointerMove",()=>{const {inputs:{shiftKey:c,previousPoint:n,originPoint:N,currentPoint:ba,modKey:pa,altKey:Ba},settings:{snapToGrid:Ia}}=this.app;var hb=this.app.getShapeById(this.initialShape.id),
{handles:yb}=this.initialShape,Yb=this.handleId,rc="start"===this.handleId?"end":"start";if(!te.isEqual(n,ba)){var Ac=te.sub(ba,N);if(c){var Yc=yb[rc].point,ud=te.add(yb[Yb].point,Ac),pd=te.angle(Yc,ud);Yc=te.rotWith(ud,Yc,Fh.snapAngleToSegments(pd,24)-pd);Ac=te.add(Ac,te.sub(Yc,ud))}Ac=te.add(yb[Yb].point,Ac);yb={[Yb]:qg(Ef({},yb[Yb]),{point:Ia?te.snap(Ac,8):te.toFixed(Ac),bindingId:void 0})};var Gd=this.currentShape.getHandlesChange(this.initialShape,yb);if(Gd){yb=di(hb.props,Gd);var Qd={},hd;Yb=
yb.handles[Yb];rc=yb.handles[rc];if(this.startBindingShapeId){var sd;if(Ac=this.app.getShapeById(this.startBindingShapeId)){ud=Ac.getCenter();Yc=yb.handles.end;var yd=te.add(yb.handles.start.point,yb.point);te.isEqual(yd,ud)&&yd[1]++;pd=Ac.hitTestPoint(ba);yd=te.uni(te.sub(yd,ud));const Rd=void 0!==this.app.currentPage.bindings[this.newStartBindingId];pa||Ac.hitTestPoint(te.add(yb.point,Yc.point))||(sd=dd(hb.props,Ac,"start",this.newStartBindingId,ud,ud,yd,pd));sd&&!Rd?(Qd[this.newStartBindingId]=
sd,yb.handles.start.bindingId=sd.id):!sd&&Rd&&(console.log("removing start binding"),delete Qd[this.newStartBindingId],yb.handles.start.bindingId=void 0)}}if(!pa){sd=te.add(rc.point,yb.point);rc=te.add(Yb.point,yb.point);Yb=te.uni(te.sub(rc,sd));const Rd=te.add(yb.point,yb.handles.start.point),Id=te.add(yb.point,yb.handles.end.point);Ac=this.bindableShapeIds.map(Ve=>this.app.getShapeById(Ve)).sort((Ve,Xe)=>Xe.nonce-Ve.nonce).filter(Ve=>![Rd,Id].every(Xe=>Ve.hitTestPoint(Xe)));for(const Ve of Ac)if(hd=
dd(hb.props,Ve,this.handleId,this.draggedBindingId,rc,sd,Yb,Ba))break}hd?(Qd[this.draggedBindingId]=hd,yb=di(yb,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(hb=hb.props.handles[this.handleId].bindingId,void 0!==hb&&(delete Qd[hb],yb=di(yb,{handles:{[this.handleId]:{bindingId:void 0}}})));Gd=this.currentShape.getHandlesChange(yb,yb.handles);Nc(()=>{var Rd;if(Gd){this.currentShape.update(Gd);this.app.currentPage.updateBindings(Qd);const Id=Object.values(null!=(Rd=Gd.handles)?Rd:
{}).map(Ve=>Ve.bindingId).map(Ve=>this.app.currentPage.bindings[Ve]).filter(Boolean).flatMap(Ve=>[Ve.toId,Ve.fromId].filter(Boolean));this.app.setBindingShapes(Id)}})}}});Ab(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});Ab(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};Ab(gt,"id","creating");var Ov=class extends gt{constructor(){super(...arguments);Ab(this,"onEnter",()=>{var c;this.app.history.pause();this.newStartBindingId=Se();this.draggedBindingId=Se();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:n}=this.tool;const {originPoint:N}=this.app.inputs;n=new n(qg(Ef({},n.defaultProps),{id:Se(),type:n.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?te.snap(N,8):N,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=kb(n.props);this.currentShape=n;this.app.currentPage.addShapes(n);this.app.setSelectedShapes([n]);if(this.startBindingShapeId=null==(c=this.bindableShapeIds.map(ba=>this.app.getShapeById(ba)).filter(ba=>uh.pointInBounds(N,ba.bounds))[0])?void 0:c.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};Ab(Ov,"id","creating");
var Pv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("pointing")});Ab(this,"onPinchStart",(...c)=>{var n,N;this.app.transition("select",{returnTo:this.app.currentState.id});null==(N=(n=this.app._events).onPinchStart)||N.call(n,...c)});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}});Ab(this,"onPointerEnter",c=>{if(!c.order)switch(c.type){case "shape":this.app.setHoveredShape(c.shape.id);break;
case "selection":"background"!==c.handle&&"center"!==c.handle&&this.tool.transition("hoveringSelectionHandle",c)}});Ab(this,"onPointerLeave",c=>{c.order||"shape"===c.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};Ab(Pv,"id","idle");var Qv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
Ab(Qv,"id","pointing");var Hr=class extends mn{constructor(){super(...arguments);Ab(this,"cursor","crosshair")}};Ab(Hr,"id","line");Ab(Hr,"states",[Pv,Qv,Ov]);Ab(Hr,"initial","idle");var Rv=class extends ii{constructor(){super(...arguments);Ab(this,"cursor","crosshair");Ab(this,"creatingShape");Ab(this,"aspectRatio");Ab(this,"initialBounds",{});Ab(this,"onEnter",()=>{const {currentPage:c,inputs:{originPoint:n}}=this.app,{Shape:N}=this.tool,ba=new N({id:Se(),type:N.id,parentId:c.id,point:[...n],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=ba;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);Nc(()=>{this.app.currentPage.addShapes(ba);const pa=this.app.settings.snapToGrid?te.snap([...n],8):n,{bounds:Ba}=ba;ba.update({point:te.sub(pa,[Ba.width/2,Ba.height/2])});this.app.transition("select");this.app.setSelectedShapes([ba]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
Ab(Rv,"id","creating");var Sv=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerDown",(c,n)=>{c.order||this.app.readOnly||this.tool.transition("creating")});Ab(this,"onPinchStart",(...c)=>{var n,N;this.app.transition("select",{returnTo:this.app.currentState.id});null==(N=(n=this.app._events).onPinchStart)||N.call(n,...c)});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};Ab(Sv,"id","idle");var Ir=class extends mn{constructor(){super(...arguments);
Ab(this,"cursor","crosshair")}};Ab(Ir,"id","box");Ab(Ir,"states",[Sv,Rv]);Ab(Ir,"initial","idle");var Ez=Of(G()),Fz=class extends Ez.default{constructor(){super(...arguments);Ab(this,"toBBox",c=>c.rotatedBounds)}},Tv=class extends ii{constructor(){super(...arguments);Ab(this,"initialSelectedIds",[]);Ab(this,"initialSelectedShapes",[]);Ab(this,"tree",new Fz);Ab(this,"onEnter",()=>{const {selectedShapes:c,currentPage:n,selectedIds:N}=this.app;this.initialSelectedIds=Array.from(N.values());this.initialSelectedShapes=
Array.from(c.values());this.tree.load(n.shapes)});Ab(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});Ab(this,"onPointerMove",()=>{const {inputs:{shiftKey:c,ctrlKey:n,originPoint:N,currentPoint:ba}}=this.app,pa=Qe.getBoundsFromPoints([ba,N],0);this.app.setBrush(pa);const Ba=[...(new Set(this.tree.search(pa).filter(Ia=>n?Qe.boundsContain(pa,Ia.rotatedBounds):Ia.hitTestBounds(pa)).filter(Ia=>"group"!==Ia.type).map(Ia=>{var hb;return null!=(hb=this.app.getParentGroup(Ia))?
hb:Ia})))];c?Ba.every(Ia=>this.initialSelectedShapes.includes(Ia))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(Ia=>!Ba.includes(Ia))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...Ba]))]):this.app.setSelectedShapes(Ba);this.app.viewport.panToPointWhenNearBounds(ba)});Ab(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});Ab(this,"handleModifierKey",(c,n)=>{switch(n.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};Ab(Tv,"id","brushing");var Uv=class extends ii{constructor(){super(...arguments);Ab(this,"onEnter",c=>{var n;const {selectedIds:N,inputs:{shiftKey:ba}}=this.app;if("shape"===c.type&&!N.has(c.shape.id)){const pa=null!=(n=this.app.getParentGroup(c.shape))?n:c.shape;ba?this.app.setSelectedShapes([...Array.from(N.values()),pa.id]):this.app.setSelectedShapes([pa])}});Ab(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Ab(Uv,"id","contextMenu");var Vv=class extends ii{constructor(){super(...arguments);
Ab(this,"onEnter",c=>{"pinching"===c.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});Ab(this,"onExit",()=>{});Ab(this,"onPointerEnter",c=>{if(!c.order)switch(c.type){case "shape":this.app.setHoveredShape(c.shape.id);break;case "selection":"background"!==c.handle&&"center"!==c.handle&&this.tool.transition("hoveringSelectionHandle",c);break;case "canvas":this.app.setHoveredShape(void 0)}});Ab(this,"onPointerDown",(c,n)=>{const {selectedShapes:N,inputs:{ctrlKey:ba}}=this.app;
if(2===n.button)this.tool.transition("contextMenu",c);else if(ba)this.tool.transition("pointingCanvas");else switch(c.type){case "selection":switch(c.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",c)}break;case "shape":if(N.has(c.shape))this.tool.transition("pointingSelectedShape",c);else{const {selectionBounds:pa,inputs:Ba}=this.app;
pa&&uh.pointInBounds(Ba.currentPoint,pa)?this.tool.transition("pointingShapeBehindBounds",c):this.tool.transition("pointingShape",c)}break;case "handle":this.tool.transition("pointingHandle",c);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Ef(Ef({},n),c))}});Ab(this,"onPointerLeave",c=>{c.order||"shape"===c.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",
{info:c,event:n})});Ab(this,"onDoubleClick",c=>{if(!c.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var n=this.app.selectedShapesArray[0];if(n.canEdit&&!n.props.isLocked)switch(c.type){case "shape":this.tool.transition("editingShape",c);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}}});Ab(this,"onKeyDown",(c,n)=>{({selectedShapesArray:c}=this.app);switch(n.key){case "Enter":1===c.length&&c[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:c[0],order:0});break;case "Escape":c.length&&this.app.setSelectedShapes([])}})}};Ab(Vv,"id","idle");var Wv=class extends ii{constructor(){super(...arguments);Ab(this,"onEnter",c=>{var n;const {selectedIds:N,inputs:{shiftKey:ba}}=this.app,pa=null!=(n=this.app.getParentGroup(c.shape))?n:c.shape;ba?this.app.setSelectedShapes([...Array.from(N.values()),pa.id]):this.app.setSelectedShapes([pa])});Ab(this,"onPointerMove",()=>{const {currentPoint:c,
originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});Ab(this,"onPointerUp",()=>{this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};Ab(Wv,"id","pointingShape");var Xv=class extends ii{constructor(){super(...arguments);Ab(this,"cursor","move");Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});
Ab(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};Ab(Xv,"id","pointingBoundsBackground");var Yv=class extends ii{constructor(){super(...arguments);Ab(this,"onEnter",()=>{var c;const {shiftKey:n}=this.app.inputs;n||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(c=window.getSelection())||c.removeAllRanges())});Ab(this,"onPointerMove",()=>{const {currentPoint:c,
originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("brushing")});Ab(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});Ab(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};Ab(Yv,"id","pointingCanvas");var Zv=class extends ii{constructor(){super(...arguments);Ab(this,"cursor","move");Ab(this,
"isCloning",!1);Ab(this,"didClone",!1);Ab(this,"initialPoints",{});Ab(this,"initialShapePoints",{});Ab(this,"initialClonePoints",{});Ab(this,"clones",[]);Ab(this,"onEnter",()=>{var c;this.app.history.pause();const {allSelectedShapesArray:n,inputs:N}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(n.map(({id:ba,props:{point:pa}})=>[ba,pa.slice()]));document.querySelectorAll("input,textarea").forEach(ba=>ba.blur());null==(c=document.getSelection())||c.empty();N.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});Ab(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});Ab(this,"onPointerMove",()=>{const {inputs:{currentPoint:c}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(c)});Ab(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ab(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(N=>{N.update({point:this.initialPoints[N.id]})}),this.tool.transition("idle")}});Ab(this,"onKeyUp",(c,n)=>{switch(n.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:N,allSelectedShapes:ba}=this.app;N.removeShapes(...ba);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:c,originPoint:n,currentPoint:N}}=this.app,{initialPoints:ba}=this,pa=Hd.sub(N,n);c&&(Math.abs(pa[0])<Math.abs(pa[1])?pa[0]=0:pa[1]=0);Nc(()=>{this.app.allSelectedShapesArray.filter(Ba=>!Ba.props.isLocked).forEach(Ba=>{let Ia=Hd.add(ba[Ba.id],pa);this.app.settings.snapToGrid&&(Ia=Hd.snap(Ia,8));Ba.update({point:Ia})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(c=>
{const n=this.app.getShapeClass(c.type);if(!n)throw Error("Could not find that shape class.");return new n(qg(Ef({},c.serialized),{id:Se(),type:c.type,point:this.initialPoints[c.id],rotation:c.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:c,props:{point:n}})=>[c,n.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(c=>{c.update({point:this.initialPoints[c.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};Ab(Zv,"id","translating");var $v=class extends ii{constructor(){super(...arguments);Ab(this,"pointedSelectedShape");Ab(this,"onEnter",c=>{this.pointedSelectedShape=c.shape});Ab(this,"onExit",()=>{this.pointedSelectedShape=void 0});Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});
Ab(this,"onPointerUp",()=>{const {shiftKey:c,currentPoint:n}=this.app.inputs;var {selectedShapesArray:N}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(c)({selectedIds:N}=this.app),N=Array.from(N.values()),N.splice(N.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(N);else{if(1===N.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof wk&&uh.pointInBounds(n,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};Ab($v,"id","pointingSelectedShape");var aw=class extends ii{constructor(){super(...arguments);Ab(this,"info",{});Ab(this,"onEnter",c=>{this.info=c;this.updateCursor()});Ab(this,"onExit",()=>{this.app.cursors.reset()});
Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("resizing",this.info)});Ab(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}updateCursor(){this.app.cursors.setCursor(hi[this.info.handle],this.app.selectionBounds.rotation)}};Ab(aw,"id","pointingResizeHandle");var bw=class extends ii{constructor(){super(...arguments);
Ab(this,"isSingle",!1);Ab(this,"handle","bottom_right_corner");Ab(this,"snapshots",{});Ab(this,"initialCommonBounds",{});Ab(this,"selectionRotation",0);Ab(this,"resizeType","corner");Ab(this,"onEnter",c=>{var n,N;const {history:ba,selectedShapesArray:pa,selectionBounds:Ba}=this.app;if(!Ba)throw Error("Expected a selected bounds.");this.handle=c.handle;this.resizeType="left_edge"===c.handle||"right_edge"===c.handle?"horizontal-edge":"top_edge"===c.handle||"bottom_edge"===c.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(bw.CURSORS[c.handle],null==(n=this.app.selectionBounds)?void 0:n.rotation);ba.pause();const Ia=Qe.getBoundsFromPoints(pa.map(hb=>Qe.getBoundsCenter(hb.bounds)));this.selectionRotation=(this.isSingle=1===pa.length)?null!=(N=pa[0].props.rotation)?N:0:0;this.initialCommonBounds=Ef({},Ba);this.snapshots=Object.fromEntries(pa.map(hb=>{const yb=Ef({},hb.bounds),[Yb,rc]=Qe.getBoundsCenter(yb);return[hb.id,{props:hb.serialized,bounds:yb,transformOrigin:[(Yb-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(rc-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Yb-Ia.minX)/Ia.width,(rc-Ia.minY)/Ia.height],isAspectRatioLocked:hb.props.isAspectRatioLocked||!(hb.canChangeAspectRatio&&!hb.props.rotation)}]}));pa.forEach(hb=>{var yb;null==(yb=hb.onResizeStart)||yb.call(hb,{isSingle:this.isSingle})})});Ab(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
Ab(this,"onPointerMove",()=>{const {inputs:{altKey:c,shiftKey:n,ctrlKey:N,originPoint:ba,currentPoint:pa}}=this.app,{handle:Ba,snapshots:Ia,initialCommonBounds:hb}=this;let yb=Hd.sub(pa,ba);c&&(yb=Hd.mul(yb,2));const Yb=this.app.selectedShapes.values().next().value;let rc=Qe.getTransformedBoundingBox(hb,Ba,yb,this.selectionRotation,n||this.isSingle&&(N?!("clipping"in Yb.props):!Yb.canChangeAspectRatio||Yb.props.isAspectRatioLocked));c&&(rc=Ef(Ef({},rc),Qe.centerBounds(rc,Qe.getBoundsCenter(hb))));
const {scaleX:Ac,scaleY:Yc}=rc;this.app.selectedShapes.forEach(ud=>{var pd,Gd;const {isAspectRatioLocked:Qd,props:hd,bounds:sd,transformOrigin:yd}=Ia[ud.id];let Rd=Qe.getRelativeTransformedBoundingBox(rc,hb,sd,0>Ac,0>Yc);if(ud.canResize.some(Xe=>Xe)||ud.props.isSizeLocked||!this.isSingle){var Id=[Ac,Yc],Ve=null!=(pd=hd.rotation)?pd:0;pd=Qe.getBoundsCenter(Rd);ud.canFlip||(Id=Hd.abs(Id));ud.canScale||(Id=null!=(Gd=hd.scale)?Gd:[1,1]);if(Ve&&0>Ac&&0<=Yc||0>Yc&&0<=Ac)Ve*=-1;this.app.settings.snapToGrid&&
!Qd&&(Rd=Qe.snapBoundsToGrid(Rd,8));ud.onResize(hd,{center:pd,rotation:Ve,scale:Id,bounds:Rd,type:Ba,clip:N,transformOrigin:yd})}});this.updateCursor(Ac,Yc);this.app.viewport.panToPointWhenNearBounds(pa)});Ab(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.selectedShapes.forEach(N=>{N.update(Ef({},this.snapshots[N.id].props))}),this.tool.transition("idle")}})}updateCursor(c,n){var N,
ba,pa,Ba;const Ia=0>c&&0<=n;c=0>n&&0<=c;switch(this.handle){case "top_left_corner":case "bottom_right_corner":Ia||c?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(N=this.app.selectionBounds)?void 0:N.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(ba=this.app.selectionBounds)?void 0:ba.rotation);break;case "top_right_corner":case "bottom_left_corner":Ia||c?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(pa=this.app.selectionBounds)?void 0:pa.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(Ba=this.app.selectionBounds)?void 0:Ba.rotation)}}},ht=bw;Ab(ht,"id","resizing");Ab(ht,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var cw=class extends ii{constructor(){super(...arguments);
Ab(this,"cursor","rotate");Ab(this,"handle","");Ab(this,"onEnter",c=>{this.app.history.pause();this.handle=c.handle;this.updateCursor()});Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("rotating",{handle:this.handle})});Ab(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}updateCursor(){this.app.cursors.setCursor(hi[this.handle],
this.app.selectionRotation)}};Ab(cw,"id","pointingRotateHandle");var dw=class extends ii{constructor(){super(...arguments);Ab(this,"info",{});Ab(this,"onEnter",c=>{this.info=c});Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});Ab(this,"onPointerUp",()=>{const {selectedIds:c,inputs:{shiftKey:n}}=this.app;n?this.app.setSelectedShapes([...Array.from(c.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};Ab(dw,"id","pointingShapeBehindBounds");var it=class extends ii{constructor(){super(...arguments);Ab(this,"cursor","rotate");Ab(this,"snapshot",{});Ab(this,"initialCommonCenter",[0,0]);Ab(this,"initialCommonBounds",{});Ab(this,"initialAngle",0);Ab(this,"initialSelectionRotation",0);Ab(this,"handle","");Ab(this,"onEnter",c=>{const {history:n,selectedShapesArray:N,selectionBounds:ba}=
this.app;if(!ba)throw Error("Expected selected bounds.");n.pause();this.handle=c.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Ef({},ba);this.initialCommonCenter=Qe.getBoundsCenter(ba);this.initialAngle=Hd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(N.map(pa=>[pa.id,{point:[...pa.props.point],center:[...pa.center],rotation:pa.props.rotation,handles:"handles"in pa?so(pa.handles):void 0}]));this.updateCursor()});
Ab(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});Ab(this,"onPointerMove",()=>{const {selectedShapes:c,inputs:{shiftKey:n,currentPoint:N}}=this.app,{snapshot:ba,initialCommonCenter:pa,initialAngle:Ba,initialSelectionRotation:Ia}=this;let hb=Hd.angle(pa,N)-Ba;n&&(hb=Fh.snapAngleToSegments(hb,24));c.forEach(Yb=>{var rc=ba[Yb.id];let Ac=0;if(n){var {rotation:Yc=0}=rc;Ac=Fh.snapAngleToSegments(Yc,24)-Yc}const ud=Hd.sub(rc.center,rc.point);Yc=Hd.rotWith(rc.center,pa,hb);if("handles"in
Yb){rc=rc.handles;const pd=rc.map(Qd=>Hd.rotWith(Qd.point,ud,hb)),Gd=Qe.getCommonTopLeft(pd);Yb.update({point:Hd.add(Gd,Hd.sub(Yc,ud)),handles:rc.map((Qd,hd)=>qg(Ef({},Qd),{point:Hd.sub(pd[hd],Gd)}))})}else Yb.update({point:Hd.sub(Yc,ud),rotation:Fh.clampRadians((rc.rotation||0)+hb+Ac)})});const yb=Fh.clampRadians(Ia+hb);this.app.setSelectionRotation(n?Fh.snapAngleToSegments(yb,24):yb);this.updateCursor()});Ab(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});
Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.selectedShapes.forEach(N=>{N.update(this.snapshot[N.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(hi[this.handle],this.app.selectionRotation)}};Ab(it,"id","rotating");var ew=class extends ii{constructor(){super(...arguments);Ab(this,"onPinch",(c,n)=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])});Ab(this,"onPinchEnd",()=>{this.tool.transition("idle")});Ab(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
Ab(ew,"id","pinching");var fw=class extends gt{constructor(){super(...arguments);Ab(this,"cursor","grabbing");Ab(this,"onEnter",c=>{this.app.history.pause();this.newStartBindingId=Se();this.draggedBindingId=Se();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=c.id;this.currentShape=c.shape;this.initialShape=kb(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};Ab(fw,"id","translatingHandle");var gw=class extends ii{constructor(){super(...arguments);
Ab(this,"cursor","grabbing");Ab(this,"info",{});Ab(this,"onEnter",c=>{this.info=c});Ab(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("translatingHandle",this.info)});Ab(this,"onPointerUp",()=>{this.tool.transition("idle")});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};Ab(gw,"id","pointingHandle");var hw=class extends ii{constructor(){super(...arguments);Ab(this,"handle");Ab(this,"onEnter",
c=>{var n;this.app.cursors.setCursor(hi[c.handle],null!=(n=this.app.selectionBounds.rotation)?n:0);this.handle=c.handle});Ab(this,"onExit",()=>{this.app.cursors.reset()});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});Ab(this,"onPointerDown",c=>{switch(c.type){case "selection":switch(c.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
c);break;default:this.tool.transition("pointingResizeHandle",c)}}});Ab(this,"onPointerLeave",()=>{this.tool.transition("idle")});Ab(this,"onDoubleClick",c=>{var n;if(!c.order&&1===this.app.selectedShapes.size){var N=this.app.selectedShapes.values().next().value;if(!N.canEdit||this.app.readOnly||N.props.isLocked)N.onResetBounds({asset:N.props.assetId?this.app.assets[N.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(c.type){case "shape":this.tool.transition("editingShape",
c);break;case "selection":null==(n=N.onResetBounds)||n.call(N,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:N})}}})}};Ab(hw,"id","hoveringSelectionHandle");var iw=class extends ii{constructor(){super(...arguments);Ab(this,"editingShape",{});Ab(this,"onEnter",c=>{this.editingShape=c.shape;this.app.setEditingShape(c.shape)});Ab(this,"onExit",()=>{var c;if(this.editingShape&&"text"in this.editingShape.props){const n=
this.editingShape.props.text.trim();""===n&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:n}))}this.app.persist();this.app.setEditingShape();null==(c=document.querySelector(".tl-canvas"))||c.focus()});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});Ab(this,"onPointerDown",c=>{switch(c.type){case "shape":if(c.shape===this.editingShape)break;this.tool.transition("idle",
c);break;case "canvas":c.order||this.tool.transition("idle",c)}});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":Nc(()=>{n.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};Ab(iw,"id","editingShape");var jw=class extends ii{constructor(){super(...arguments);Ab(this,"minimapZoom",1);Ab(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});Ab(this,"getCameraPoint",c=>{const n=document.querySelector(".tl-preview-minimap svg");
var N=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(n&&N){const ba=n.getBoundingClientRect();this.minimapRect.height=ba.height;this.minimapRect.width=ba.width;this.minimapRect.minX=ba.left;this.minimapRect.minY=ba.top;this.minimapRect.maxX=ba.right;this.minimapRect.maxY=ba.bottom;this.minimapZoom=+n.dataset.commonBoundWidth/this.minimapRect.width;c=Hd.sub(c,[this.minimapRect.minX,this.minimapRect.minY]);N=N.getBoundingClientRect();N=Hd.mul(Hd.sub(c,[N.left+N.width/2,N.top+
N.height/2]),this.minimapZoom);return Hd.sub(this.app.viewport.camera.point,N)}});Ab(this,"onEnter",c=>{(c=this.getCameraPoint([c.clientX,c.clientY]))?this.app.viewport.update({point:c}):this.tool.transition("idle")});Ab(this,"onPointerMove",(c,n)=>{"clientX"in n&&(c=this.getCameraPoint([n.clientX,n.clientY]))&&this.app.viewport.update({point:c})});Ab(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ab(jw,"id","pointingMinimap");var np=class extends mn{constructor(){super(...arguments);Ab(this,
"returnTo","");Ab(this,"onEnter",c=>{this.returnTo=null==c?void 0:c.returnTo})}};Ab(np,"id","select");Ab(np,"initial","idle");Ab(np,"shortcut","whiteboard/select");Ab(np,"states",[Vv,Tv,Uv,Yv,Wv,dw,$v,Xv,hw,aw,cw,jw,gw,fw,Zv,ht,it,it,ew,iw]);var kw=class extends ii{constructor(){super(...arguments);Ab(this,"cursor","grabbing");Ab(this,"originalScreenPoint",[]);Ab(this,"originalCameraPoint",[]);Ab(this,"prevState","idle");Ab(this,"onEnter",c=>{this.prevState=null==c?void 0:c.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});Ab(this,"onPointerMove",(c,n)=>{c=te.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:te.sub(this.originalCameraPoint,te.div(c,this.app.viewport.camera.zoom))})});Ab(this,"onPointerUp",()=>{var c;this.tool.transition(null!=(c=this.prevState)?c:"idle")})}};Ab(kw,"id","panning");var lw=class extends ii{constructor(){super(...arguments);Ab(this,"onEnter",c=>{this.parent.prevTool&&
c.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});Ab(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("panning")})}};Ab(lw,"id","idle");var mw=class extends ii{constructor(){super(...arguments);Ab(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("panning",{prevState:"idleHold"})});Ab(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};Ab(mw,
"id","idleHold");var nw=class extends ii{constructor(){super(...arguments);Ab(this,"origin",[0,0]);Ab(this,"prevDelta",[0,0]);Ab(this,"onEnter",c=>{this.prevDelta=c.info.delta;this.origin=c.info.point});Ab(this,"onPinch",c=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])});Ab(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Ab(nw,"id","pinching");var op=class extends mn{constructor(){super(...arguments);Ab(this,"cursor","grab");Ab(this,"prevTool",null);Ab(this,"onEnter",c=>{this.prevTool=
null==c?void 0:c.prevTool});Ab(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}});Ab(this,"onPinchStart",(c,n)=>{this.transition("pinching",{info:c,event:n})})}};Ab(op,"id","move");Ab(op,"shortcut","whiteboard/pan");Ab(op,"states",[lw,mw,kw,nw]);Ab(op,"initial","idle");var Zj=class{constructor(c,n={}){Ab(this,"lastShapesNounces",null);Ab(this,"app");Ab(this,"id");Ab(this,"name");Ab(this,"shapes",[]);Ab(this,"bindings",{});Ab(this,"nonce",0);Ab(this,"bringForward",
hb=>{this.bringToFront(hb);return this});Ab(this,"sendBackward",hb=>{this.sendToBack(hb);return this});Ab(this,"bringToFront",hb=>{const yb=this.parseShapesArg(hb);hb=this.shapes.filter(Yb=>!yb.includes(Yb));this.shapes=hb.concat(yb);hb={op:"bringToFront",shapes:yb,before:hb[hb.length-1]};this.app.persist(hb);this.persistInfo=hb;return this});Ab(this,"sendToBack",hb=>{const yb=this.parseShapesArg(hb);hb=this.shapes.filter(Yb=>!yb.includes(Yb));this.shapes=yb.concat(hb);this.app.persist({op:"sendToBack",
shapes:yb,next:hb[0]});return this});Ab(this,"flip",(hb,yb)=>{hb=this.parseShapesArg(hb);const Yb=Qe.getCommonBounds(hb.map(rc=>rc.bounds));hb.forEach(rc=>{var Ac;const Yc=Qe.getRelativeTransformedBoundingBox(Yb,Yb,rc.bounds,"horizontal"===yb,"vertical"===yb);if(rc.serialized)rc.onResize(rc.serialized,{bounds:Yc,center:Qe.getBoundsCenter(Yc),rotation:null!=(Ac=rc.props.rotation)?Ac:-0,type:"top_left_corner",scale:rc.canFlip&&rc.props.scale?"horizontal"===yb?[-rc.props.scale[0],1]:[1,-rc.props.scale[1]]:
[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});Ab(this,"getShapeById",hb=>this.shapes.find(yb=>yb.id===hb));Ab(this,"cleanup",hb=>{hb=uc(this.bindings,hb);const yb=new Set;let Yb=!1;const rc=so(this.bindings);hb.forEach(Ac=>{var Yc;if(this.bindings[Ac.id]){var ud=this.getShapeById(Ac.toId),pd=this.getShapeById(Ac.fromId);ud&&pd?yb.has(pd.id)||(Ac=this.updateArrowBindings(pd),yb.add(pd.id),Ac&&(ud=Ef(Ef({},pd.props),Ac),null==(Yc=this.getShapeById(ud.id))||Yc.update(ud,
!1,(0,Wz.default)(null==Ac?void 0:Ac.handles,null==pd?void 0:pd.props.handles)))):(delete rc[Ac.id],Yb=!0)}});Object.keys(rc).forEach(Ac=>{const Yc=this.bindings[Ac];0===this.shapes.filter(ud=>ud.id===Yc.fromId||ud.id===Yc.toId).length&&(delete rc[Ac],Yb=!0)});Yb&&this.update({bindings:rc})});Ab(this,"updateArrowBindings",hb=>{var yb,Yb,rc,Ac={start:so(hb.props.handles.start),end:so(hb.props.handles.end)},Yc={isBound:!1,handle:hb.props.handles.start,point:te.add(hb.props.handles.start.point,hb.props.point)},
ud={isBound:!1,handle:hb.props.handles.end,point:te.add(hb.props.handles.end.point,hb.props.point)};if(hb.props.handles.start.bindingId){var pd=void 0!==(null==(yb=hb.props.decorations)?void 0:yb.start);yb=hb.props.handles.start;var Gd=this.bindings[hb.props.handles.start.bindingId],Qd=this.getShapeById(null==Gd?void 0:Gd.toId);if(Qd){Yc=Qd.getBounds();var hd=Qd.getExpandedBounds(),sd=Qe.expandBounds(Yc,pd?Gd.distance:1);const {minX:yd,minY:Rd,width:Id,height:Ve}=hd,Xe=te.add([yd,Rd],te.mulV([Id,
Ve],te.rotWith(Gd.point,[.5,.5],Qd.props.rotation||0)));Yc={isBound:!0,hasDecoration:pd,binding:Gd,handle:yb,point:Xe,target:Qd,bounds:Yc,expandedBounds:hd,intersectBounds:sd,center:Qd.getCenter()}}}if(hb.props.handles.end.bindingId&&(pd=void 0!==(null==(Yb=hb.props.decorations)?void 0:Yb.end),Yb=hb.props.handles.end,yb=this.bindings[hb.props.handles.end.bindingId],Gd=this.getShapeById(null==yb?void 0:yb.toId))){ud=Gd.getBounds();Qd=Gd.getExpandedBounds();hd=pd?Qe.expandBounds(ud,yb.distance):ud;
const {minX:yd,minY:Rd,width:Id,height:Ve}=Qd;sd=te.add([yd,Rd],te.mulV([Id,Ve],te.rotWith(yb.point,[.5,.5],Gd.props.rotation||0)));ud={isBound:!0,hasDecoration:pd,binding:yb,handle:Yb,point:sd,target:Gd,bounds:ud,expandedBounds:Qd,intersectBounds:hd,center:Gd.getCenter()}}for(const yd of["end","start"]){Yb="start"===yd?Yc:ud;const Rd="start"===yd?ud:Yc;if(Yb.isBound)if(Yb.binding.distance){if(pd=te.uni(te.sub(Yb.point,Rd.point)),yb=F(Rd.point,pd,Yb.intersectBounds,Yb.target.props.rotation).filter(Id=>
Id.didIntersect).map(Id=>Id.points[0]).sort((Id,Ve)=>te.dist(Id,Rd.point)-te.dist(Ve,Rd.point)),yb[0])if(Gd=void 0,Rd.isBound&&(Gd=F(Rd.point,pd,Rd.intersectBounds,Rd.target.props.rotation).filter(Id=>Id.didIntersect).map(Id=>Id.points[0]).sort((Id,Ve)=>te.dist(Id,Rd.point)-te.dist(Ve,Rd.point))[0]),Rd.isBound&&(2>yb.length||Gd&&yb[0]&&10>Math.ceil(te.dist(yb[0],Gd))||Qe.boundsContain(Yb.expandedBounds,Rd.expandedBounds)||Qe.boundsCollide(Yb.expandedBounds,Rd.expandedBounds)))pd=te.uni(te.sub(Rd.point,
Yb.point)),yb=F(Yb.point,pd,Yb.bounds,Yb.target.props.rotation).filter(Id=>Id.didIntersect).map(Id=>Id.points[0]),yb[0]&&(Ac[yd].point=te.toFixed(te.sub(yb[0],hb.props.point)),Ac["start"===yd?"end":"start"].point=te.toFixed(te.add(te.sub(yb[0],hb.props.point),te.mul(pd,Math.min(te.dist(yb[0],Rd.point),10*(Qe.boundsContain(Rd.bounds,Yb.intersectBounds)?-1:1))))));else{if(!Rd.isBound&&(yb[0]&&10>te.dist(yb[0],Rd.point)||uh.pointInBounds(Rd.point,Yb.intersectBounds)))return Ac=te.uni(te.sub(Yb.center,
Rd.point)),null==(rc=hb.getHandlesChange)?void 0:rc.call(hb,hb.props,{[yd]:qg(Ef({},hb.props.handles[yd]),{point:te.toFixed(te.add(te.sub(Rd.point,hb.props.point),te.mul(Ac,10)))})});yb[0]&&(Ac[yd].point=te.toFixed(te.sub(yb[0],hb.props.point)))}}else Ac[yd].point=te.sub(Yb.point,hb.props.point)}return hb.getHandlesChange(hb.props,Ac)});const {id:N,name:ba,shapes:pa=[],bindings:Ba={},nonce:Ia}=n;this.id=N;this.name=ba;this.bindings=Object.assign({},Ba);this.app=c;this.nonce=Ia||0;this.persistInfo=
null;this.addShapes(...pa);mc(this);ic(()=>{const hb=0<this.shapes.length?Object.fromEntries(this.shapes.map(yb=>[yb.id,yb.nonce])):null;if(this.lastShapesNounces&&hb){const yb=this.lastShapesNounces,Yb=[...(new Set([...Object.keys(hb),...Object.keys(yb)]))].filter(rc=>yb[rc]!==hb[rc]);requestAnimationFrame(()=>{this.cleanup(Yb)})}hb&&(this.lastShapesNounces=hb)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(c=>c.serialized).filter(c=>!!c).map(c=>kb(c)),bindings:so(this.bindings),
nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(c=>[c.id,c]))}update(c){Object.assign(this,c);return this}updateBindings(c){Object.assign(this.bindings,c);return this}updateShapesIndex(c){this.shapes.sort((n,N)=>c.indexOf(n.id)-c.indexOf(N.id));return this}addShapes(...c){if(0!==c.length)return c="getBounds"in c[0]?c:c.map(n=>new (this.app.getShapeClass(n.type))(n)),this.shapes.push(...c),c}parseShapesArg(c){return"string"===typeof c[0]?this.shapes.filter(n=>c.includes(n.id)):
c}removeShapes(...c){const n=this.parseShapesArg(c);this.shapes=this.shapes.filter(N=>!n.includes(N));return n}getBindableShapes(){return this.shapes.filter(c=>c.canBind).sort((c,n)=>n.nonce-c.nonce).map(c=>c.id)}};we([Tg],Zj.prototype,"id",2);we([Tg],Zj.prototype,"name",2);we([Tg],Zj.prototype,"shapes",2);we([Tg],Zj.prototype,"bindings",2);we([$g],Zj.prototype,"serialized",1);we([$g],Zj.prototype,"shapesById",1);we([Tg],Zj.prototype,"nonce",2);we([Eg],Zj.prototype,"update",1);we([Eg],Zj.prototype,
"updateBindings",1);we([Eg],Zj.prototype,"updateShapesIndex",1);we([Eg],Zj.prototype,"addShapes",1);we([Eg],Zj.prototype,"removeShapes",1);we([Eg],Zj.prototype,"bringForward",2);we([Eg],Zj.prototype,"sendBackward",2);we([Eg],Zj.prototype,"bringToFront",2);we([Eg],Zj.prototype,"sendToBack",2);we([Eg],Zj.prototype,"cleanup",2);var hj=class{constructor(){Ab(this,"shiftKey",!1);Ab(this,"ctrlKey",!1);Ab(this,"modKey",!1);Ab(this,"altKey",!1);Ab(this,"spaceKey",!1);Ab(this,"isPinching",!1);Ab(this,"currentScreenPoint",
[0,0]);Ab(this,"currentPoint",[0,0]);Ab(this,"previousScreenPoint",[0,0]);Ab(this,"previousPoint",[0,0]);Ab(this,"originScreenPoint",[0,0]);Ab(this,"originPoint",[0,0]);Ab(this,"pointerIds",new Set);Ab(this,"state","idle");Ab(this,"containerOffset",[0,0]);Ab(this,"onPointerDown",(c,n)=>{this.pointerIds.add(n.pointerId);this.updateModifiers(n);this.originScreenPoint=this.currentScreenPoint;this.originPoint=c;this.state="pointing"});Ab(this,"onPointerMove",(c,n)=>{"pinching"!==this.state&&("panning"===
this.state&&(this.state="idle"),this.updateModifiers(n),this.previousPoint=this.currentPoint,this.currentPoint=c)});Ab(this,"onPointerUp",(c,n)=>{this.pointerIds.clear();this.updateModifiers(n);this.state="idle"});Ab(this,"onKeyDown",c=>{this.updateModifiers(c);switch(c.key){case " ":this.spaceKey=!0}});Ab(this,"onKeyUp",c=>{this.updateModifiers(c);switch(c.key){case " ":this.spaceKey=!1}});Ab(this,"onPinchStart",(c,n)=>{this.updateModifiers(n);this.state="pinching"});Ab(this,"onPinch",(c,n)=>{"pinching"===
this.state&&this.updateModifiers(n)});Ab(this,"onPinchEnd",(c,n)=>{"pinching"===this.state&&(this.updateModifiers(n),this.state="idle")});mc(this)}updateContainerOffset(c){Object.assign(this.containerOffset,c)}updateModifiers(c){c.isPrimary&&("clientX"in c&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=te.sub([c.clientX,c.clientY],this.containerOffset)),"shiftKey"in c&&(this.shiftKey=c.shiftKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.modKey=Vb()?c.metaKey:c.ctrlKey))}};
we([Tg],hj.prototype,"shiftKey",2);we([Tg],hj.prototype,"ctrlKey",2);we([Tg],hj.prototype,"modKey",2);we([Tg],hj.prototype,"altKey",2);we([Tg],hj.prototype,"spaceKey",2);we([Tg],hj.prototype,"isPinching",2);we([Tg],hj.prototype,"currentScreenPoint",2);we([Tg],hj.prototype,"currentPoint",2);we([Tg],hj.prototype,"previousScreenPoint",2);we([Tg],hj.prototype,"previousPoint",2);we([Tg],hj.prototype,"originScreenPoint",2);we([Tg],hj.prototype,"originPoint",2);we([Tg],hj.prototype,"state",2);we([Tg],hj.prototype,
"containerOffset",2);we([Eg],hj.prototype,"updateContainerOffset",1);we([Eg],hj.prototype,"updateModifiers",1);we([Eg],hj.prototype,"onPointerDown",2);we([Eg],hj.prototype,"onPointerMove",2);we([Eg],hj.prototype,"onPointerUp",2);we([Eg],hj.prototype,"onKeyDown",2);we([Eg],hj.prototype,"onKeyUp",2);we([Eg],hj.prototype,"onPinchStart",2);we([Eg],hj.prototype,"onPinch",2);we([Eg],hj.prototype,"onPinchEnd",2);var Gz=(c,n=100)=>-(Math.cos(Math.PI*Hd.clamp(c/n,0,1))-1)/2,ro=class{constructor(){Ab(this,
"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});Ab(this,"camera",{point:[0,0],zoom:1});Ab(this,"updateBounds",c=>{this.bounds=c;return this});Ab(this,"panCamera",c=>this.update({point:Hd.sub(this.camera.point,Hd.div(c,this.camera.zoom))}));Ab(this,"panToPointWhenNearBounds",c=>{const n=Hd.div([ro.panThreshold,ro.panThreshold],this.camera.zoom),N=Hd.sub([this.currentView.maxX,this.currentView.maxY],Hd.add(c,n));c=Hd.sub([this.currentView.minX,this.currentView.minY],Hd.sub(c,n));
this.panCamera(Hd.mul([0>N[0]?N[0]:0<c[0]?c[0]:0,0>N[1]?N[1]:0<c[1]?c[1]:0],-ro.panMultiplier*this.camera.zoom))});Ab(this,"update",({point:c,zoom:n})=>{void 0===c||isNaN(c[0])||isNaN(c[1])||(this.camera.point=c);void 0===n||isNaN(n)||(this.camera.zoom=Math.min(4,Math.max(.1,n)));return this});Ab(this,"getPagePoint",c=>{const {camera:n,bounds:N}=this;return Hd.sub(Hd.div(Hd.sub(c,[N.minX,N.minY]),n.zoom),n.point)});Ab(this,"getScreenPoint",c=>{const {camera:n}=this;return Hd.mul(Hd.add(c,n.point),
n.zoom)});Ab(this,"onZoom",(c,n,N=!1)=>this.pinchZoom(c,[0,0],n,N));Ab(this,"pinchZoom",(c,n,N,ba=!1)=>{var {camera:pa}=this;n=Hd.sub(pa.point,Hd.div(n,pa.zoom));N=Hd.clamp(N,ro.minZoom,ro.maxZoom);pa=Hd.div(c,pa.zoom);c=Hd.div(c,N);c=Hd.toFixed(Hd.add(n,Hd.sub(c,pa)));ba?this.animateCamera({point:c,zoom:N}):this.update({point:c,zoom:N});return this});Ab(this,"setZoom",(c,n=!1)=>{const {bounds:N}=this;this.onZoom([N.width/2,N.height/2],c,n)});Ab(this,"zoomIn",()=>{const {camera:c}=this;this.setZoom(c.zoom/
.8,!0)});Ab(this,"zoomOut",()=>{const {camera:c}=this;this.setZoom(.8*c.zoom,!0)});Ab(this,"resetZoom",()=>{this.setZoom(1,!0);return this});Ab(this,"animateCamera",({point:c,zoom:n})=>this.animateToViewport({minX:-c[0],minY:-c[1],maxX:this.bounds.width/n-c[0],maxY:this.bounds.height/n-c[1],width:this.bounds.width/n,height:this.bounds.height/n}));Ab(this,"animateToViewport",c=>{const n=performance.now(),N=Ef({},this.currentView),ba=()=>{var pa=performance.now()-n;pa=Gz(pa);var Ba=N.minX+(c.minX-N.minX)*
pa;this.update({point:[-Ba,-(N.minY+(c.minY-N.minY)*pa)],zoom:this.bounds.width/(N.maxX+(c.maxX-N.maxX)*pa-Ba)});1>pa&&requestAnimationFrame(ba)};ba()});Ab(this,"zoomToBounds",({width:c,height:n,minX:N,minY:ba})=>{const {bounds:pa,camera:Ba}=this;let Ia=Math.min((pa.width-100)/c,(pa.height-100)/n);Ia=Math.min(1,Math.max(ro.minZoom,Ba.zoom===Ia||1>Ba.zoom?Math.min(1,Ia):Ia));c=Hd.add([-N,-ba],[(pa.width-c*Ia)/2/Ia,(pa.height-n*Ia)/2/Ia]);this.animateCamera({point:c,zoom:Ia})});mc(this)}get currentView(){const {bounds:c,
camera:{point:n,zoom:N}}=this,ba=c.width/N,pa=c.height/N;return{minX:-n[0],minY:-n[1],maxX:ba-n[0],maxY:pa-n[1],width:ba,height:pa}}},xl=ro;Ab(xl,"minZoom",.1);Ab(xl,"maxZoom",4);Ab(xl,"panMultiplier",.05);Ab(xl,"panThreshold",100);we([Tg],xl.prototype,"bounds",2);we([Tg],xl.prototype,"camera",2);we([Eg],xl.prototype,"updateBounds",2);we([Eg],xl.prototype,"update",2);we([$g],xl.prototype,"currentView",1);var Hz=class{constructor(c){Ab(this,"app");Ab(this,"editShape",n=>{(null==n?0:n.props.isLocked)||
this.app.transition("select").selectedTool.transition("editingShape",{shape:n});return this});Ab(this,"hoverShape",n=>{this.app.setHoveredShape(n);return this});Ab(this,"createShapes",(...n)=>{this.app.createShapes(n);return this});Ab(this,"updateShapes",(...n)=>{this.app.updateShapes(n);return this});Ab(this,"deleteShapes",(...n)=>{this.app.deleteShapes(n.length?n:this.app.selectedShapesArray);return this});Ab(this,"selectShapes",(...n)=>{this.app.setSelectedShapes(n);return this});Ab(this,"deselectShapes",
(...n)=>{const N="string"===typeof n[0]?n:n.map(ba=>ba.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(ba=>!N.includes(ba.id)));return this});Ab(this,"flipHorizontal",(...n)=>{this.app.flipHorizontal(n);return this});Ab(this,"flipVertical",(...n)=>{this.app.flipVertical(n);return this});Ab(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(n=>!this.app.shapesInGroups().includes(n)));return this});Ab(this,"deselectAll",()=>{this.app.setSelectedShapes([]);
return this});Ab(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});Ab(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});Ab(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});Ab(this,"zoomToFit",()=>{var {shapes:n}=this.app.currentPage;if(0===n.length)return this;n=Qe.getCommonBounds(n.map(N=>N.bounds));this.app.viewport.zoomToBounds(n);return this});Ab(this,"cameraToCenter",()=>{var {shapes:n}=this.app.currentPage;if(0===n.length)return this;n=Qe.getCommonBounds(n.map(N=>
N.bounds));this.app.viewport.update({point:te.add(te.neg(Qe.getBoundsCenter(n)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});Ab(this,"zoomToSelection",()=>{const {selectionBounds:n}=this.app;if(!n)return this;this.app.viewport.zoomToBounds(n);return this});Ab(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:te.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});Ab(this,"toggleGrid",()=>{const {settings:n}=
this.app;n.update({showGrid:!n.showGrid});return this});Ab(this,"toggleSnapToGrid",()=>{const {settings:n}=this.app;n.update({snapToGrid:!n.snapToGrid});return this});Ab(this,"togglePenMode",()=>{const {settings:n}=this.app;n.update({penMode:!n.penMode});return this});Ab(this,"setColor",n=>{const {settings:N}=this.app;N.update({color:n});this.app.selectedShapesArray.forEach(ba=>{ba.props.isLocked||ba.update({fill:n,stroke:n})});this.app.persist();return this});Ab(this,"setScaleLevel",n=>{const {settings:N}=
this.app;N.update({scaleLevel:n});this.app.selectedShapes.forEach(ba=>{ba.props.isLocked||ba.setScaleLevel(n)});this.app.persist();return this});Ab(this,"undo",()=>{this.app.undo();return this});Ab(this,"redo",()=>{this.app.redo();return this});Ab(this,"persist",()=>{this.app.persist();return this});Ab(this,"createNewLineBinding",(n,N)=>this.app.createNewLineBinding(n,N));Ab(this,"clone",n=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(ob).some(Yc=>Yc===this.app.selectedShapesArray[0].type)){var N=
this.app.allSelectedShapesArray[0],ba=this.app.getShapeClass(N.type),{minX:pa,minY:Ba,maxX:Ia,maxY:hb,width:yb,height:Yb}=N.bounds,rc=[0,0];switch(n){case "down":rc=[pa,hb+100];break;case "up":rc=[pa,Ba-100-Yb];break;case "left":rc=[pa-100-yb,Ba];break;case "right":rc=[Ia+100,Ba]}var Ac=new ba(qg(Ef({},N.serialized),{id:Se(),nonce:Date.now(),refs:[],label:"",point:rc}));this.app.history.pause();this.app.currentPage.addShapes(Ac);this.app.createNewLineBinding(N,Ac);this.app.history.resume();this.app.persist();
setTimeout(()=>this.editShape(Ac))}});Ab(this,"cloneShapes",({shapes:n,assets:N,bindings:ba,point:pa=[0,0]})=>{const Ba=Qe.getCommonBounds(n.filter(yb=>"group"!==yb.type).map(yb=>{var Yb,rc,Ac,Yc,ud,pd,Gd,Qd,hd,sd,yd,Rd,Id,Ve,Xe,hg;return{minX:null!=(rc=null==(Yb=yb.point)?void 0:Yb[0])?rc:pa[0],minY:null!=(Yc=null==(Ac=yb.point)?void 0:Ac[1])?Yc:pa[1],width:null!=(pd=null==(ud=yb.size)?void 0:ud[0])?pd:4,height:null!=(Qd=null==(Gd=yb.size)?void 0:Gd[1])?Qd:4,maxX:(null!=(sd=null==(hd=yb.point)?void 0:
hd[0])?sd:pa[0])+(null!=(Rd=null==(yd=yb.size)?void 0:yd[0])?Rd:4),maxY:(null!=(Ve=null==(Id=yb.point)?void 0:Id[1])?Ve:pa[1])+(null!=(hg=null==(Xe=yb.size)?void 0:Xe[1])?hg:4)}})),Ia=n.map(yb=>qg(Ef({},yb),{id:Se(),point:[pa[0]+yb.point[0]-Ba.minX,pa[1]+yb.point[1]-Ba.minY]}));Ia.forEach(yb=>{var Yb;yb.children&&0<(null==(Yb=yb.children)?void 0:Yb.length)&&(yb.children=yb.children.map(rc=>{var Ac;return null==(Ac=Ia[n.findIndex(Yc=>Yc.id===rc)])?void 0:Ac.id}).filter(Kc))});const hb=[];Ia.flatMap(yb=>
{var Yb;return Object.values(null!=(Yb=yb.handles)?Yb:{})}).forEach(yb=>{if(yb.bindingId){var Yb=ba[yb.bindingId];if(Yb){var rc=n.findIndex(Yc=>Yc.id===Yb.fromId);const Ac=n.findIndex(Yc=>Yc.id===Yb.toId);Yb&&-1!==rc&&-1!==Ac?(rc=qg(Ef({},Yb),{id:Se(),fromId:Ia[rc].id,toId:Ia[Ac].id}),hb.push(rc),yb.bindingId=rc.id):yb.bindingId=void 0}else console.warn("binding not found",yb.bindingId)}});N=N.filter(yb=>Ia.some(Yb=>Yb.assetId===yb.id));return{shapes:Ia,assets:N,bindings:hb}});Ab(this,"getClonedShapesFromTldrString",
(n,N)=>{try{{var ba;const Yb=null==(ba=n.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:ba[1];if(Yb){try{var pa=JSON.parse(Yb)}catch(rc){pa=null}var Ba=pa}else Ba=void 0}n=Ba;if(!n)return null;const {shapes:Ia,bindings:hb,assets:yb}=n;return this.cloneShapes({shapes:Ia,bindings:hb,assets:yb,point:N})}catch(Ia){console.log(Ia)}return null});Ab(this,"cloneShapesIntoCurrentPage",n=>{(n=this.cloneShapes(n))&&this.addClonedShapes(n);return this});Ab(this,"addClonedShapes",n=>{const {shapes:N,
assets:ba,bindings:pa}=n;0<ba.length&&this.app.createAssets(ba);0<N.length&&this.app.createShapes(N);this.app.currentPage.updateBindings(Object.fromEntries(pa.map(Ba=>[Ba.id,Ba])));this.app.selectedTool.transition("idle");return this});Ab(this,"addClonedShapesFromTldrString",(n,N)=>{(n=this.getClonedShapesFromTldrString(n,N))&&this.addClonedShapes(n);return this});Ab(this,"doGroup",(n=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){this.app.history.pause();var N=[...n.filter(ba=>"group"===
ba.type),...n.map(ba=>this.app.getParentGroup(ba))].filter(Kc);this.app.currentPage.removeShapes(...N);n=n.filter(ba=>"group"!==ba.type);1<n.length&&(N=this.app.getShapeClass("group"),N=new N({id:Se(),type:N.id,parentId:this.app.currentPage.id,children:n.map(ba=>ba.id)}),this.app.currentPage.addShapes(N),this.app.setSelectedShapes([N]),n.push(N),this.app.bringForward(n));this.app.history.resume();this.app.persist(this.app.currentPage.persistInfo)}});Ab(this,"unGroup",(n=this.app.allSelectedShapesArray)=>
{if(!this.app.readOnly){n=[...n.filter(ba=>"group"===ba.type),...n.map(ba=>this.app.getParentGroup(ba))].filter(Kc);var N=this.app.shapesInGroups(n);0<n.length&&(this.app.currentPage.removeShapes(...n),this.app.persist(),this.app.setSelectedShapes(N))}});Ab(this,"convertShapes",(n,N=this.app.allSelectedShapesArray)=>{const ba=this.app.getShapeClass(n);this.app.currentPage.removeShapes(...N);N=N.map(pa=>new ba(qg(Ef({},pa.serialized),{type:n,nonce:Date.now()})));this.app.currentPage.addShapes(...N);
this.app.persist();this.app.setSelectedShapes(N)});Ab(this,"setCollapsed",(n,N=this.app.allSelectedShapesArray)=>{N.forEach(ba=>{"logseq-portal"===ba.props.type&&ba.setCollapsed(n)});this.app.persist()});this.app=c}},pp=class{constructor(){Ab(this,"cursor","default");Ab(this,"rotation",0);Ab(this,"reset",()=>{this.cursor="default"});Ab(this,"setCursor",(c,n=0)=>{if(c!==this.cursor||n!==this.rotation)this.cursor=c,this.rotation=n});Ab(this,"setRotation",c=>{c!==this.rotation&&(this.rotation=c)});mc(this)}};
we([Tg],pp.prototype,"cursor",2);we([Tg],pp.prototype,"rotation",2);we([Eg],pp.prototype,"reset",2);we([Eg],pp.prototype,"setCursor",2);we([Eg],pp.prototype,"setRotation",2);var qp=class{constructor(c){Ab(this,"app");Ab(this,"stack",[]);Ab(this,"isPaused",!0);Ab(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});Ab(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});Ab(this,"persist",n=>{this.isPaused||this.creating||this.app.notify("persist",n)});Ab(this,"undo",()=>{this.isPaused||"idle"===
this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});Ab(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});Ab(this,"instantiateShape",n=>new (this.app.getShapeClass(n.type))(n));Ab(this,"deserialize",n=>{Nc(()=>{var N,{pages:ba}=n;const pa=this.isPaused;this.pause();const Ba=[...this.app.selectedIds];try{const Ia=new Map(this.app.pages),hb=[];for(const yb of ba){const Yb=Ia.get(yb.id);if(void 0!==Yb){const rc=
new Map(Yb.shapes.map(Ac=>[Ac.props.id,Ac]));ba=[];for(const Ac of yb.shapes){const Yc=rc.get(Ac.id);void 0!==Yc?(Yc.nonce!==Ac.nonce&&(Yc.update(Ac,!0),Yc.nonce=Ac.nonce,Yc.setLastSerialized(Ac)),rc.delete(Ac.id)):ba.push(this.instantiateShape(Ac))}0<rc.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Yb.removeShapes(...rc.values());0<ba.length&&Yb.addShapes(...ba);Ia.delete(yb.id);Yb.updateBindings(yb.bindings);Yb.nonce=null!=(N=yb.nonce)?N:0}else{const {id:rc,name:Ac,shapes:Yc,
bindings:ud,nonce:pd}=yb;hb.push(new Zj(this.app,{id:rc,name:Ac,nonce:pd,bindings:ud,shapes:Yc.map(Gd=>this.instantiateShape(Gd))}))}}0<hb.length&&this.app.addPages(hb);0<Ia.size&&this.app.removePages(Array.from(Ia.values()));this.app.setSelectedShapes(Ba).setErasingShapes([])}catch(Ia){console.warn(Ia)}pa||this.resume()})});this.app=c;mc(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};we([Tg],qp.prototype,"stack",2);we([Eg],qp.prototype,"persist",2);we([Eg],qp.prototype,
"undo",2);we([Eg],qp.prototype,"redo",2);we([Eg],qp.prototype,"deserialize",2);var nn=class{constructor(){Ab(this,"mode","light");Ab(this,"showGrid",!0);Ab(this,"snapToGrid",!1);Ab(this,"penMode",!1);Ab(this,"scaleLevel","md");Ab(this,"color","");mc(this)}update(c){Object.assign(this,c)}};we([Tg],nn.prototype,"mode",2);we([Tg],nn.prototype,"showGrid",2);we([Tg],nn.prototype,"snapToGrid",2);we([Tg],nn.prototype,"penMode",2);we([Tg],nn.prototype,"scaleLevel",2);we([Tg],nn.prototype,"color",2);we([Eg],
nn.prototype,"update",1);var nh=class extends mp{constructor(c,n,N,ba){var pa,Ba;super();Ab(this,"uuid",Se());Ab(this,"readOnly");Ab(this,"api");Ab(this,"inputs",new hj);Ab(this,"cursors",new pp);Ab(this,"viewport",new xl);Ab(this,"settings",new nn);Ab(this,"Tools",[]);Ab(this,"history",new qp(this));Ab(this,"persist",this.history.persist);Ab(this,"undo",this.history.undo);Ab(this,"redo",this.history.redo);Ab(this,"saving",!1);Ab(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>
{this.saving&&(this.persist(),this.saving=!1)}))});Ab(this,"load",()=>{this.notify("load",null);return this});Ab(this,"save",()=>{this.notify("save",null);return this});Ab(this,"pages",new Map([["page",new Zj(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));Ab(this,"getPageById",Ia=>{const hb=this.pages.get(Ia);if(!hb)throw Error(`Could not find a page named ${Ia}.`);return hb});Ab(this,"getShapeById",(Ia,hb=this.currentPage.id)=>{var yb;return null==(yb=this.getPageById(hb))?void 0:yb.shapesById[Ia]});
Ab(this,"createShapes",Ia=>{if(this.readOnly)return this;(Ia=this.currentPage.addShapes(...Ia))&&this.notify("create-shapes",Ia);this.persist();return this});Ab(this,"updateShapes",Ia=>{if(this.readOnly)return this;Ia.forEach(hb=>{const yb=this.getShapeById(hb.id);null==yb||yb.update(hb);hb.type!==(null==yb?void 0:yb.type)&&this.api.convertShapes(hb.type,[yb])});this.persist();return this});Ab(this,"deleteShapes",Ia=>{if(0===Ia.length||this.readOnly)return this;Ia=Ia.map(rc=>"string"===typeof rc?
this.getShapeById(rc):rc).filter(Kc).filter(rc=>!rc.props.isLocked);const hb=this.shapesInGroups(Ia);Ia.forEach(rc=>{this.getParentGroup(rc)&&hb.push(rc)});let yb=new Set([...Ia,...hb].map(rc=>rc.id));hb.forEach(rc=>{var Ac;const Yc=this.getParentGroup(rc);if(Yc){const ud=null==(Ac=Yc.props.children)?void 0:Ac.filter(pd=>pd!==rc.id);!ud||1>=(null==ud?void 0:ud.length)?yb.add(Yc.id):Yc.update({children:ud})}});const Yb=(rc,Ac)=>{var Yc;[...yb].includes(rc)&&"line"===(null==(Yc=this.getShapeById(Ac))?
void 0:Yc.type)&&yb.add(Ac)};this.currentPage.shapes.filter(rc=>!rc.props.isLocked).flatMap(rc=>{var Ac;return Object.values(null!=(Ac=rc.props.handles)?Ac:{})}).flatMap(rc=>rc.bindingId).filter(Kc).map(rc=>{var Ac,Yc;const ud=null==(Ac=this.currentPage.bindings[rc])?void 0:Ac.toId;rc=null==(Yc=this.currentPage.bindings[rc])?void 0:Yc.fromId;ud&&rc&&(Yb(ud,rc),Yb(rc,ud))});Ia=[...yb].map(rc=>this.getShapeById(rc));this.setSelectedShapes(this.selectedShapesArray.filter(rc=>!yb.has(rc.id)));(Ia=this.currentPage.removeShapes(...Ia))&&
this.notify("delete-shapes",Ia);this.persist();return this});Ab(this,"bringForward",(Ia=this.selectedShapesArray)=>{0<Ia.length&&!this.readOnly&&this.currentPage.bringForward(Ia);return this});Ab(this,"sendBackward",(Ia=this.selectedShapesArray)=>{0<Ia.length&&!this.readOnly&&this.currentPage.sendBackward(Ia);return this});Ab(this,"sendToBack",(Ia=this.selectedShapesArray)=>{0<Ia.length&&!this.readOnly&&this.currentPage.sendToBack(Ia);return this});Ab(this,"bringToFront",(Ia=this.selectedShapesArray)=>
{0<Ia.length&&!this.readOnly&&this.currentPage.bringToFront(Ia);return this});Ab(this,"flipHorizontal",(Ia=this.selectedShapesArray)=>{this.currentPage.flip(Ia,"horizontal");return this});Ab(this,"flipVertical",(Ia=this.selectedShapesArray)=>{this.currentPage.flip(Ia,"vertical");return this});Ab(this,"align",(Ia,hb=this.selectedShapesArray)=>{if(2>hb.length||this.readOnly)return this;const yb=hb.map(ud=>{const pd=ud.getBounds();return{id:ud.id,point:[pd.minX,pd.minY],bounds:pd}}),Yb=Qe.getCommonBounds(yb.map(({bounds:ud})=>
ud)),rc=Yb.minX+Yb.width/2,Ac=Yb.minY+Yb.height/2,Yc=Object.fromEntries(yb.map(({id:ud,point:pd,bounds:Gd})=>[ud,{prev:pd,next:{top:[pd[0],Yb.minY],centerVertical:[pd[0],Ac-Gd.height/2],bottom:[pd[0],Yb.maxY-Gd.height],left:[Yb.minX,pd[1]],centerHorizontal:[rc-Gd.width/2,pd[1]],right:[Yb.maxX-Gd.width,pd[1]]}[Ia]}]));hb.forEach(ud=>{Yc[ud.id]&&ud.update({point:Yc[ud.id].next})});this.persist();return this});Ab(this,"distribute",(Ia,hb=this.selectedShapesArray)=>{if(2>hb.length||this.readOnly)return this;
const yb=Object.fromEntries(Qe.getDistributions(hb,Ia).map(Yb=>[Yb.id,Yb]));hb.forEach(Yb=>{yb[Yb.id]&&Yb.update({point:yb[Yb.id].next})});this.persist();return this});Ab(this,"packIntoRectangle",(Ia=this.selectedShapesArray)=>{if(2>Ia.length||this.readOnly)return this;const hb=Object.fromEntries(Qe.getPackedDistributions(Ia).map(yb=>[yb.id,yb]));Ia.forEach(yb=>{hb[yb.id]&&yb.update({point:hb[yb.id].next})});this.persist();return this});Ab(this,"setLocked",Ia=>{if(0===this.selectedShapesArray.length||
this.readOnly)return this;this.selectedShapesArray.forEach(hb=>{hb.update({isLocked:Ia})});this.persist();return this});Ab(this,"assets",{});Ab(this,"removeUnusedAssets",()=>{const Ia=this.getCleanUpAssets();Object.keys(this.assets).forEach(hb=>{Ia.some(yb=>yb.id===hb)||delete this.assets[hb]});this.persist();return this});Ab(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const hb=this.allSelectedShapesArray;var Ia=JSON.stringify({shapes:hb.map(Yb=>Yb.serialized),assets:this.getCleanUpAssets().filter(Yb=>
hb.some(rc=>rc.props.assetId===Yb.id)),bindings:kb(this.currentPage.bindings)});Ia=encodeURIComponent(`<whiteboard-tldr>${Ia}</whiteboard-tldr>`);const yb=this.selectedShapesArray.map(Yb=>`((${Yb.props.id}))`).join(" ");this.notify("copy",{text:yb,html:Ia})}});Ab(this,"paste",(Ia,hb)=>{var yb;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!hb,dataTransfer:null!=(yb=null==Ia?void 0:Ia.clipboardData)?yb:void 0})});Ab(this,"cut",()=>{this.copy();this.api.deleteShapes()});
Ab(this,"drop",(Ia,hb)=>{this.notify("drop",{dataTransfer:Ia,point:hb?this.viewport.getPagePoint(hb):Qe.getBoundsCenter(this.viewport.currentView)})});Ab(this,"selectTool",(Ia,hb={})=>{this.readOnly&&!["select","move"].includes(Ia)||this.transition(Ia,hb)});Ab(this,"editingId");Ab(this,"setEditingShape",Ia=>{this.editingId="string"===typeof Ia?Ia:null==Ia?void 0:Ia.id;return this});Ab(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});Ab(this,"hoveredId");
Ab(this,"setHoveredShape",Ia=>{this.hoveredId="string"===typeof Ia?Ia:null==Ia?void 0:Ia.id;return this});Ab(this,"selectedIds",new Set);Ab(this,"selectedShapes",new Set);Ab(this,"selectionRotation",0);Ab(this,"setSelectedShapes",Ia=>{var hb;const {selectedIds:yb,selectedShapes:Yb}=this;yb.clear();Yb.clear();Ia[0]&&"string"===typeof Ia[0]?Ia.forEach(Ac=>yb.add(Ac)):Ia.forEach(Ac=>yb.add(Ac.id));const rc=this.currentPage.shapes.filter(Ac=>yb.has(Ac.id));rc.forEach(Ac=>Yb.add(Ac));this.selectionRotation=
1===rc.length?null!=(hb=rc[0].props.rotation)?hb:0:0;0===Ia.length&&this.setEditingShape();return this});Ab(this,"erasingIds",new Set);Ab(this,"erasingShapes",new Set);Ab(this,"setErasingShapes",Ia=>{const {erasingIds:hb,erasingShapes:yb}=this;hb.clear();yb.clear();Ia[0]&&"string"===typeof Ia[0]?Ia.forEach(Yb=>hb.add(Yb)):Ia.forEach(Yb=>hb.add(Yb.id));this.currentPage.shapes.filter(Yb=>hb.has(Yb.id)).forEach(Yb=>yb.add(Yb));return this});Ab(this,"bindingIds");Ab(this,"setBindingShapes",Ia=>{this.bindingIds=
Ia;return this});Ab(this,"clearBindingShape",()=>this.setBindingShapes());Ab(this,"createNewLineBinding",(Ia,hb)=>{Ia="string"===typeof Ia?this.getShapeById(Ia):Ia;hb="string"===typeof hb?this.getShapeById(hb):hb;if((null==Ia?0:Ia.canBind)&&(null==hb?0:hb.canBind)&&(hb=xd(Ia,hb))){const [yb,Yb]=hb;this.createShapes([yb]);this.currentPage.updateBindings(Object.fromEntries(Yb.map(rc=>[rc.id,rc])));this.persist();return!0}return!1});Ab(this,"brush");Ab(this,"setBrush",Ia=>{this.brush=Ia;return this});
Ab(this,"setCamera",(Ia,hb)=>{this.viewport.update({point:Ia,zoom:hb});return this});Ab(this,"getPagePoint",Ia=>{const {camera:hb}=this.viewport;return Hd.sub(Hd.div(Ia,hb.zoom),hb.point)});Ab(this,"getScreenPoint",Ia=>{const {camera:hb}=this.viewport;return Hd.mul(Hd.add(Ia,hb.point),hb.zoom)});Ab(this,"Shapes",new Map);Ab(this,"registerShapes",Ia=>{Ia.forEach(hb=>{if("group"===hb.id){const yb=this;hb.prototype.getShapes=function(){var Yb,rc;return null!=(rc=null==(Yb=this.props.children)?void 0:
Yb.map(Ac=>yb.getShapeById(Ac)).filter(Boolean))?rc:[]}}return this.Shapes.set(hb.id,hb)})});Ab(this,"deregisterShapes",Ia=>{Ia.forEach(hb=>this.Shapes.delete(hb.id))});Ab(this,"getShapeClass",Ia=>{if(!Ia)throw Error("No shape type provided.");const hb=this.Shapes.get(Ia);if(!hb)throw Error(`Could not find shape class for ${Ia}`);return hb});Ab(this,"wrapUpdate",Ia=>{Nc(()=>{const hb=!this.history.isPaused;hb&&this.history.pause();Ia();hb&&(this.history.resume(),this.persist())})});Ab(this,"subscriptions",
new Set([]));Ab(this,"subscribe",(Ia,hb)=>{if(void 0===hb)throw Error("Callback is required.");const yb={event:Ia,callback:hb};this.subscriptions.add(yb);return()=>this.unsubscribe(yb)});Ab(this,"unsubscribe",Ia=>{this.subscriptions.delete(Ia);return this});Ab(this,"notify",(Ia,hb)=>{this.subscriptions.forEach(yb=>{yb.event===Ia&&yb.callback(this,hb)});return this});Ab(this,"onTransition",()=>{});Ab(this,"onPointerDown",(Ia,hb)=>{if(!this.editingShape&&1===hb.button&&!this.isIn("move"))this.temporaryTransitionToMove(hb);
else if(2===hb.button&&!this.editingShape)hb.preventDefault(),this.transition("select");else if("clientX"in hb)this.inputs.onPointerDown([...this.viewport.getPagePoint([hb.clientX,hb.clientY]),hb.pressure],hb)});Ab(this,"onPointerUp",(Ia,hb)=>{if(!this.editingShape&&1===hb.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),hb.stopPropagation(),hb.preventDefault();else if("clientX"in hb)this.inputs.onPointerUp([...this.viewport.getPagePoint([hb.clientX,hb.clientY]),hb.pressure],
hb)});Ab(this,"onPointerMove",(Ia,hb)=>{if("clientX"in hb)this.inputs.onPointerMove([...this.viewport.getPagePoint([hb.clientX,hb.clientY]),hb.pressure],hb)});Ab(this,"onKeyDown",(Ia,hb)=>{if(this.editingShape||" "!==hb.key||this.isIn("move"))this.inputs.onKeyDown(hb);else this.temporaryTransitionToMove(hb)});Ab(this,"onKeyUp",(Ia,hb)=>{if(!this.editingShape&&" "===hb.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),hb.stopPropagation(),hb.preventDefault();else this.inputs.onKeyUp(hb)});
Ab(this,"onPinchStart",(Ia,hb)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(Ia.point),.5],hb)});Ab(this,"onPinch",(Ia,hb)=>{this.inputs.onPinch([...this.viewport.getPagePoint(Ia.point),.5],hb)});Ab(this,"onPinchEnd",(Ia,hb)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(Ia.point),.5],hb)});this._states=[np,op];this.readOnly=ba;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),ba=null!=(pa=this.initial)?pa:this.states[0].id,pa=this.children.get(ba))&&
(this.currentState=pa,null==(Ba=this.currentState)||Ba._events.onEnter({fromId:"initial"}));n&&this.registerShapes(n);N&&this.registerTools(N);this.history.resume();c&&this.history.deserialize(c);this.api=new Hz(this);mc(this);this.notify("mount",null)}loadDocumentModel(c){this.history.deserialize(c);c.assets&&0<c.assets.length&&this.addAssets(c.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(c){c.forEach(n=>
this.pages.set(n.id,n));this.persist();return this}removePages(c){c.forEach(n=>this.pages.delete(n.id));this.persist();return this}shapesInGroups(c=this.shapes){return c.flatMap(n=>n.props.children).filter(Kc).map(n=>this.getShapeById(n)).filter(Kc)}getParentGroup(c){return this.shapes.find(n=>{var N;return null==(N=n.props.children)?void 0:N.includes(c.id)})}addAssets(c){c.forEach(n=>this.assets[n.id]=n);return this}removeAssets(c){"string"===typeof c[0]?c.forEach(n=>delete this.assets[n]):c.forEach(n=>
delete this.assets[n.id]);this.persist();return this}getCleanUpAssets(){const c=new Set;this.pages.forEach(n=>n.shapes.forEach(N=>{N.props.assetId&&this.assets[N.props.assetId]&&c.add(this.assets[N.props.assetId])}));return Array.from(c)}createAssets(c){this.addAssets(c);this.notify("create-assets",{assets:c});this.persist();return this}get selectedTool(){return this.currentState}registerTools(c){this.Tools=c;return this.registerStates(c)}get editingShape(){const {editingId:c,currentPage:n}=this;
return c?n.shapes.find(N=>N.id===c):void 0}get hoveredShape(){const {hoveredId:c,currentPage:n}=this;return c?n.shapes.find(N=>N.id===c):void 0}get hoveredGroup(){const {hoveredShape:c}=this;return c?this.shapes.find(n=>{var N;return"group"===n.type&&(null==(N=n.props.children)?void 0:N.includes(c.id))}):void 0}get selectedShapesArray(){const {selectedShapes:c,selectedTool:n}=this;return"select"!==n.id?[]:Array.from(c.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:c}=
this;return[...(new Set([...c,...this.shapesInGroups(c)]))]}setSelectionRotation(c){this.selectionRotation=c}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var c;const n=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(ba=>{var pa;return Object.values(null!=(pa=ba.props.handles)?pa:{})}).flatMap(ba=>ba.bindingId).filter(Kc).flatMap(ba=>{var pa,Ba;return[null==(pa=this.currentPage.bindings[ba])?void 0:pa.fromId,null==(Ba=this.currentPage.bindings[ba])?
void 0:Ba.toId]}).filter(Kc):[],N=[...(null!=(c=this.bindingIds)?c:[]),...n];return N?this.currentPage.shapes.filter(ba=>null==N?void 0:N.includes(ba.id)):void 0}get currentGrid(){const {zoom:c}=this.viewport.camera;return.15>c?128:1>c?32:8}get shapes(){const {currentPage:{shapes:c}}=this;return Array.from(c.values())}get shapesInViewport(){const {selectedShapes:c,currentPage:n,viewport:{currentView:N}}=this;return n.shapes.filter(ba=>!ba.canUnmount||c.has(ba)||Qe.boundsContain(N,ba.rotatedBounds)||
Qe.boundsCollide(N,ba.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:c,viewport:{currentView:n}}=this;if(c&&!Qe.boundsContain(n,c)&&!Qe.boundsCollide(n,c)){var N=Qe.getBoundsCenter(c);return Hd.clampV([(N[0]-n.minX-n.width/2)/n.width,(N[1]-n.minY-n.height/2)/n.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:c}=this;if(0!==c.length)return 1===c.length?qg(Ef({},c[0].bounds),{rotation:c[0].props.rotation}):Qe.getCommonBounds(this.selectedShapesArray.map(n=>n.rotatedBounds))}get showSelection(){var c;
const {selectedShapesArray:n}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===n.length&&!(null==(c=n[0])?0:c.hideSelection)||1<n.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(c=>c.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:c}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<c.length&&!this.readOnly&&!c.every(n=>n.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<c.length&&!this.readOnly&&!c.some(n=>n.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===c.length&&!this.readOnly&&!c.every(n=>n.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===c.length&&Object.values(ob).some(n=>n===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(c){c.stopPropagation();
c.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};Ab(nh,"id","app");Ab(nh,"initial","select");we([$g],nh.prototype,"serialized",1);we([Tg],nh.prototype,"pages",2);we([$g],nh.prototype,"currentPageId",1);we([$g],nh.prototype,"currentPage",1);we([Eg],nh.prototype,"addPages",1);we([Eg],nh.prototype,"removePages",1);we([Eg],nh.prototype,"createShapes",2);we([Eg],nh.prototype,"updateShapes",2);we([Eg],nh.prototype,"deleteShapes",2);we([Tg],
nh.prototype,"assets",2);we([Eg],nh.prototype,"addAssets",1);we([Eg],nh.prototype,"removeAssets",1);we([Eg],nh.prototype,"removeUnusedAssets",2);we([$g],nh.prototype,"selectedTool",1);we([Tg],nh.prototype,"editingId",2);we([$g],nh.prototype,"editingShape",1);we([Eg],nh.prototype,"setEditingShape",2);we([Tg],nh.prototype,"hoveredId",2);we([$g],nh.prototype,"hoveredShape",1);we([$g],nh.prototype,"hoveredGroup",1);we([Eg],nh.prototype,"setHoveredShape",2);we([Tg],nh.prototype,"selectedIds",2);we([Tg],
nh.prototype,"selectedShapes",2);we([Tg],nh.prototype,"selectionRotation",2);we([$g],nh.prototype,"selectedShapesArray",1);we([$g],nh.prototype,"allSelectedShapes",1);we([$g],nh.prototype,"allSelectedShapesArray",1);we([Eg],nh.prototype,"setSelectedShapes",2);we([Eg],nh.prototype,"setSelectionRotation",1);we([Tg],nh.prototype,"erasingIds",2);we([Tg],nh.prototype,"erasingShapes",2);we([$g],nh.prototype,"erasingShapesArray",1);we([Eg],nh.prototype,"setErasingShapes",2);we([Tg],nh.prototype,"bindingIds",
2);we([$g],nh.prototype,"bindingShapes",1);we([Eg],nh.prototype,"setBindingShapes",2);we([Eg],nh.prototype,"createNewLineBinding",2);we([Tg],nh.prototype,"brush",2);we([Eg],nh.prototype,"setBrush",2);we([Eg],nh.prototype,"setCamera",2);we([$g],nh.prototype,"currentGrid",1);we([$g],nh.prototype,"shapes",1);we([$g],nh.prototype,"shapesInViewport",1);we([$g],nh.prototype,"selectionDirectionHint",1);we([$g],nh.prototype,"selectionBounds",1);we([$g],nh.prototype,"showSelection",1);we([$g],nh.prototype,
"showSelectionDetail",1);we([$g],nh.prototype,"showSelectionRotation",1);we([$g],nh.prototype,"showContextBar",1);we([$g],nh.prototype,"showRotateHandles",1);we([$g],nh.prototype,"showResizeHandles",1);we([$g],nh.prototype,"showCloneHandles",1);var Iz=Function.prototype.toString,jt=Object.create,Jz=Object.prototype.toString,Kz=function(){function c(){this._keys=[];this._values=[]}c.prototype.has=function(n){return!!~this._keys.indexOf(n)};c.prototype.get=function(n){return this._values[this._keys.indexOf(n)]};
c.prototype.set=function(n,N){this._keys.push(n);this._values.push(N)};return c}(),Lz="undefined"!==typeof WeakMap?Ge:oe,Mz="g"===/test/g.flags?rf:uf,Nz="undefined"!==typeof Symbol?of:Sf,Oz=Object.defineProperty,Pz=Object.getOwnPropertyDescriptor,ow=Object.getOwnPropertyNames,kt=Object.getOwnPropertySymbols,pw=Object.prototype,qw=pw.hasOwnProperty,Qz=pw.propertyIsEnumerable,rw="function"===typeof kt,Rz=rw?vg:ow,Sz=Array.isArray,lt=Object.assign,Tz=Object.getPrototypeOf,sw={array:function(c,n){var N=
new n.Constructor;n.cache.set(c,N);for(var ba=0,pa=c.length;ba<pa;++ba)N[ba]=n.copier(c[ba],n);return N},arrayBuffer:function(c,n){return c.slice(0)},blob:function(c,n){return c.slice(0,c.size,c.type)},dataView:function(c,n){return new n.Constructor(c.buffer.slice(0))},date:function(c,n){return new n.Constructor(c.getTime())},error:fh,map:Hg,object:rw?Rg:Af,regExp:function(c,n){n=new n.Constructor(c.source,Mz(c));n.lastIndex=c.lastIndex;return n},set:ai},Uz=lt({},sw,{array:function(c,n){var N=new n.Constructor;
n.cache.set(c,N);return Cg(c,N,n)},map:function(c,n){return Cg(c,Hg(c,n),n)},object:function(c,n){var N=Oe(n.prototype);n.cache.set(c,N);return Cg(c,N,n)},set:function(c,n){return Cg(c,ai(c,n),n)}});oi(lt({},Uz,{}));var Vz=oi({}),Wz=Of(Z()),Xz=Of(ya()),so=Vz,Zk=class{static insertTextFirefox(c,n){c.setRangeText(n,c.selectionStart||0,c.selectionEnd||0,"end");c.dispatchEvent(new InputEvent("input",{data:n,inputType:"insertText",isComposing:!1}))}static insert(c,n){const N=c.ownerDocument,ba=N.activeElement;
ba!==c&&c.focus();N.execCommand("insertText",!1,n)||Zk.insertTextFirefox(c,n);ba===N.body?c.blur():ba instanceof HTMLElement&&ba!==c&&ba.focus()}static set(c,n){c.select();Zk.insert(c,n)}static getSelection(c){const {selectionStart:n,selectionEnd:N}=c;return c.value.slice(n?n:void 0,N?N:void 0)}static wrapSelection(c,n,N){const {selectionStart:ba,selectionEnd:pa}=c,Ba=Zk.getSelection(c);Zk.insert(c,n+Ba+(null!=N?N:n));c.selectionStart=(ba||0)+n.length;c.selectionEnd=(pa||0)+n.length}static replace(c,
n,N){let ba=0;c.value.replace(n,(...pa)=>{const Ba=ba+pa[pa.length-2],Ia=pa[0].length;c.selectionStart=Ba;c.selectionEnd=Ba+Ia;pa="string"===typeof N?N:N(...pa);Zk.insert(c,pa);c.selectionStart=Ba;ba+=pa.length-Ia;return pa})}static findLineEnd(c,n){const N=c.lastIndexOf("\n",n-1)+1;return"\t"!==c.charAt(N)?n:N+1}static indent(c){var n;const {selectionStart:N,selectionEnd:ba,value:pa}=c;var Ba=pa.slice(N,ba);if((Ba=null==(n=/\n/g.exec(Ba))?void 0:n.length)&&0<Ba){n=pa.lastIndexOf("\n",N-1)+1;var Ia=
c.value.slice(n,ba-1);Ba=Ia.replace(/^|\n/g,`$&${Zk.INDENT}`);Ia=Ba.length-Ia.length;c.setSelectionRange(n,ba-1);Zk.insert(c,Ba);c.setSelectionRange(N+1,ba+Ia)}else Zk.insert(c,Zk.INDENT)}static unindent(c){const {selectionStart:n,selectionEnd:N,value:ba}=c;var pa=ba.lastIndexOf("\n",n-1)+1;const Ba=Zk.findLineEnd(ba,N);var Ia=c.value.slice(pa,Ba);const hb=Ia.replace(/(^|\n)(\t| {1,2})/g,"$1");Ia=Ia.length-hb.length;c.setSelectionRange(pa,Ba);Zk.insert(c,hb);pa=(pa=/\t| {1,2}/.exec(ba.slice(pa,n)))?
pa[0].length:0;c.setSelectionRange(n-pa,Math.max(n-pa,N-Ia))}static normalizeText(c){return c.replace(Zk.fixNewLines,"\n")}},rp=Zk;Ab(rp,"fixNewLines",/\r?\n|\r/g);Ab(rp,"INDENT","  ");var on;"undefined"!==typeof window&&(on=Xf());var mt=new Map,tw=Vb()?"⌘":"ctrl",Yz=class extends nh{},uw=Of(X(67)),Zz=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var vw=Of(X(67)),nt={},Gq=Of(X(67)),$z=c=>{for(c=c.parentElement;c&&c!==document.body;){const {overflowY:n}=window.getComputedStyle(c);
if(c.scrollHeight>c.clientHeight&&("auto"===n||"scroll"===n||"overlay"===n))return c;c=c.parentElement}return document},ot=Of(X(67)),pt=new Map,aA={accent:"var(--lx-accent-09, hsl(var(--primary)))",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedStroke)",selectFill:"var(--color-selectedFill)",binding:"var(--color-binding, rgba(65, 132, 244, 0.5))",background:"var(--ls-primary-background-color, hsl(var(--background)))",
foreground:"var(--ls-primary-text-color, hsl(var(--foreground)))",grid:"var(--ls-quaternary-background-color, hsl(var(--secondary)))"},bA=((c,...n)=>c.reduce((N,ba,pa)=>N+ba+(pa<n.length?n[pa]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer;
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,ww=Of(X(67)),xw=Of(X(67)),qt={},ij={toVector(c,n){void 0===c&&(c=n);return Array.isArray(c)?c:[c,c]},add(c,n){return[c[0]+n[0],c[1]+n[1]]},sub(c,n){return[c[0]-n[0],c[1]-n[1]]},addTo(c,n){c[0]+=n[0];c[1]+=n[1]},subTo(c,n){c[0]-=n[0];c[1]-=n[1]}},yw={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},cA=["enter","leave"],dA=["gotpointercapture","lostpointercapture"],
zw=class{constructor(c,n,N){this.ctrl=c;this.args=n;this.key=N;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(c){this.ctrl.state[this.key]=c}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:c,
shared:n,ingKey:N,args:ba}=this;n[N]=c._active=c.active=c._blocked=c._force=!1;c._step=[!1,!1];c.intentional=!1;c._movement=[0,0];c._distance=[0,0];c._direction=[0,0];c._delta=[0,0];c._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];c.args=ba;c.axis=void 0;c.memo=void 0;c.elapsedTime=0;c.direction=[0,0];c.distance=[0,0];c.overflow=[0,0];c._movementBound=[!1,!1];c.velocity=[0,0];c.movement=[0,0];c.delta=[0,0];c.timeStamp=0}start(c){const n=this.state,N=this.config;n._active||(this.reset(),this.computeInitial(),
n._active=!0,n.target=c.target,n.currentTarget=c.currentTarget,n.lastOffset=N.from?de(N.from,n):n.offset,n.offset=n.lastOffset);n.startTime=n.timeStamp=c.timeStamp}computeValues(c){const n=this.state;n._values=c;n.values=this.config.transform(c)}computeInitial(){const c=this.state;c._initial=c._values;c.initial=c.values}compute(c){const {state:n,config:N,shared:ba}=this;n.args=this.args;var pa=0;if(c){n.event=c;N.preventDefault&&c.cancelable&&n.event.preventDefault();n.type=c.type;ba.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;ba.locked=!!document.pointerLockElement;pa=Object;var Ba=pa.assign,Ia={};"buttons"in c&&(Ia.buttons=c.buttons);if("shiftKey"in c){const {shiftKey:Rd,altKey:Id,metaKey:Ve,ctrlKey:Xe}=c;Object.assign(Ia,{shiftKey:Rd,altKey:Id,metaKey:Ve,ctrlKey:Xe})}Ba.call(pa,ba,Ia);ba.down=ba.pressed=1===ba.buttons%2||0<ba.touches;pa=c.timeStamp-n.timeStamp;n.timeStamp=c.timeStamp;n.elapsedTime=n.timeStamp-n.startTime}n._active&&(Ba=n._delta.map(Math.abs),ij.addTo(n._distance,Ba));this.axisIntent&&
this.axisIntent(c);const [hb,yb]=n._movement,[Yb,rc]=N.threshold,{_step:Ac,values:Yc}=n;N.hasCustomTransform?(!1===Ac[0]&&(Ac[0]=Math.abs(hb)>=Yb&&Yc[0]),!1===Ac[1]&&(Ac[1]=Math.abs(yb)>=rc&&Yc[1])):(!1===Ac[0]&&(Ac[0]=Math.abs(hb)>=Yb&&Math.sign(hb)*Yb),!1===Ac[1]&&(Ac[1]=Math.abs(yb)>=rc&&Math.sign(yb)*rc));n.intentional=!1!==Ac[0]||!1!==Ac[1];if(n.intentional){Ba=[0,0];if(N.hasCustomTransform){const [Rd,Id]=Yc;Ba[0]=!1!==Ac[0]?Rd-Ac[0]:0;Ba[1]=!1!==Ac[1]?Id-Ac[1]:0}else Ba[0]=!1!==Ac[0]?hb-Ac[0]:
0,Ba[1]=!1!==Ac[1]?yb-Ac[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(Ba);Ia=n.offset;var ud=n._active&&!n._blocked||n.active;ud&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=ba[this.ingKey]=n._active,c&&(n.first&&("bounds"in N&&(n._bounds=de(N.bounds,n)),this.setup&&this.setup()),n.movement=Ba,this.computeOffset()));var [pd,Gd]=n.offset,[[Qd,hd],[sd,yd]]=n._bounds;n.overflow=[pd<Qd?-1:pd>hd?1:0,Gd<sd?-1:Gd>yd?1:0];n._movementBound[0]=n.overflow[0]?!1===n._movementBound[0]?
n._movement[0]:n._movementBound[0]:!1;n._movementBound[1]=n.overflow[1]?!1===n._movementBound[1]?n._movement[1]:n._movementBound[1]:!1;n.offset=Qf(n._bounds,n.offset,n._active?N.rubberband||[0,0]:[0,0]);n.delta=ij.sub(n.offset,Ia);this.computeMovement();ud&&(!n.last||32<pa)&&(n.delta=ij.sub(n.offset,Ia),c=n.delta.map(Math.abs),ij.addTo(n.distance,c),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&0<pa&&(n.velocity=[c[0]/pa,c[1]/pa]))}}emit(){const c=this.state;var n=
this.shared;const N=this.config;c._active||this.clean();if(!c._blocked&&c.intentional||c._force||N.triggerAllEvents)n=this.handler(vf(vf(vf({},n),c),{},{[this.aliasKey]:c.values})),void 0!==n&&(c.memo=n)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Hq=class extends zw{constructor(...c){super(...c);gf(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ij.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=ij.sub(this.state.offset,this.state.lastOffset)}axisIntent(c){const n=this.state,N=this.config;!n.axis&&c&&(c="object"===typeof N.axisThreshold?N.axisThreshold[Mg(c)]:N.axisThreshold,n.axis=Xc(n._movement,c));n._blocked=(N.lockDirection||!!N.axis)&&!n.axis||!!N.axis&&N.axis!==n.axis}restrictToAxis(c){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":c[1]=0;break;case "y":c[0]=0}}},eA=c=>c,Aw={enabled(c=!0){return c},
eventOptions(c,n,N){return vf(vf({},N.shared.eventOptions),c)},preventDefault(c=!1){return c},triggerAllEvents(c=!1){return c},rubberband(c=0){switch(c){case !0:return[.15,.15];case !1:return[0,0];default:return ij.toVector(c)}},from(c){if("function"===typeof c)return c;if(null!=c)return ij.toVector(c)},transform(c,n,N){c=c||N.shared.transform;this.hasCustomTransform=!!c;return c||eA},threshold(c){return ij.toVector(c,0)}},to=vf(vf({},Aw),{},{axis(c,n,{axis:N}){this.lockDirection="lock"===N;if(!this.lockDirection)return N},
axisThreshold(c=0){return c},bounds(c={}){if("function"===typeof c)return Ba=>to.bounds(c(Ba));if("current"in c)return()=>c.current;if("function"===typeof HTMLElement&&c instanceof HTMLElement)return c;const {left:n=-Infinity,right:N=Infinity,top:ba=-Infinity,bottom:pa=Infinity}=c;return[[n,N],[ba,pa]]}}),Bw={ArrowRight:(c=1)=>[10*c,0],ArrowLeft:(c=1)=>[-10*c,0],ArrowUp:(c=1)=>[0,-10*c],ArrowDown:(c=1)=>[0,10*c]},fA=class extends Hq{constructor(...c){super(...c);gf(this,"ingKey","dragging")}reset(){super.reset();
const c=this.state;c._pointerId=void 0;c._pointerActive=!1;c._keyboardActive=!1;c._preventScroll=!1;c._delayed=!1;c.swipe=[0,0];c.tap=!1;c.canceled=!1;c.cancel=this.cancel.bind(this)}setup(){const c=this.state;if(c._bounds instanceof HTMLElement){const n=c._bounds.getBoundingClientRect(),N=c.currentTarget.getBoundingClientRect();c._bounds=to.bounds({left:n.left-N.left+c.offset[0],right:n.right-N.right+c.offset[0],top:n.top-N.top+c.offset[1],bottom:n.bottom-N.bottom+c.offset[1]})}}cancel(){const c=
this.state;c.canceled||(c.canceled=!0,c._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(c){const n=this.config,N=this.state;if(null==c.buttons||(Array.isArray(n.pointerButtons)?n.pointerButtons.includes(c.buttons):-1===n.pointerButtons||n.pointerButtons===c.buttons)){var ba=this.ctrl.setEventIds(c);
n.pointerCapture&&c.target.setPointerCapture(c.pointerId);ba&&1<ba.size&&N._pointerActive||(this.start(c),this.setupPointer(c),N._pointerId=Vc(c),N._pointerActive=!0,this.computeValues(kd(c)),this.computeInitial(),n.preventScrollAxis&&"mouse"!==Mg(c)?(N._active=!1,this.setupScrollPrevention(c)):0<n.delay?(this.setupDelayTrigger(c),n.triggerAllEvents&&(this.compute(c),this.emit())):this.startPointerDrag(c))}}startPointerDrag(c){const n=this.state;n._active=!0;n._preventScroll=!0;n._delayed=!1;this.compute(c);
this.emit()}pointerMove(c){const n=this.state,N=this.config;if(n._pointerActive&&(n.type!==c.type||c.timeStamp!==n.timeStamp)){var ba=Vc(c);if(void 0===n._pointerId||ba===n._pointerId)ba=kd(c),document.pointerLockElement===c.target?n._delta=[c.movementX,c.movementY]:(n._delta=ij.sub(ba,n._values),this.computeValues(ba)),ij.addTo(n._movement,n._delta),this.compute(c),n._delayed&&n.intentional?(this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(c)):N.preventScrollAxis&&!n._preventScroll?
n.axis&&(n.axis===N.preventScrollAxis||"xy"===N.preventScrollAxis?(n._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(c))):this.emit()}}pointerUp(c){this.ctrl.setEventIds(c);try{this.config.pointerCapture&&c.target.hasPointerCapture(c.pointerId)&&c.target.releasePointerCapture(c.pointerId)}catch(Ia){}const n=this.state,N=this.config;if(n._active&&n._pointerActive){var ba=Vc(c);if(void 0===n._pointerId||ba===n._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(c);var [pa,Ba]=n._distance;n.tap=pa<=N.tapsThreshold&&Ba<=N.tapsThreshold;if(n.tap&&N.filterTaps)n._force=!0;else{const [Ia,hb]=n.direction,[yb,Yb]=n.velocity,[rc,Ac]=n.movement,[Yc,ud]=N.swipe.velocity,[pd,Gd]=N.swipe.distance;n.elapsedTime<N.swipe.duration&&(Math.abs(yb)>Yc&&Math.abs(rc)>pd&&(n.swipe[0]=Ia),Math.abs(Yb)>ud&&Math.abs(Ac)>Gd&&(n.swipe[1]=hb))}this.emit()}}}pointerClick(c){!this.state.tap&&0<c.detail&&(c.preventDefault(),c.stopPropagation())}setupPointer(c){const n=this.config,
N=n.device;n.pointerLock&&c.currentTarget.requestPointerLock();n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,N,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,N,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,N,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(c){this.state._preventScroll&&c.cancelable&&
c.preventDefault()}setupScrollPrevention(c){this.state._preventScroll=!1;"persist"in c&&"function"===typeof c.persist&&c.persist();const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n);this.eventStore.add(this.sharedConfig.window,"touch","cancel",n);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,c)}setupDelayTrigger(c){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(c)},this.config.delay)}keyDown(c){const n=Bw[c.key];if(n){const N=this.state,ba=c.shiftKey?10:c.altKey?.1:1;this.start(c);N._delta=n(ba);N._keyboardActive=!0;ij.addTo(N._movement,N._delta);this.compute(c);this.emit()}}keyUp(c){c.key in Bw&&(this.state._keyboardActive=!1,this.setActive(),this.compute(c),this.emit())}bind(c){const n=this.config.device;c(n,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(c(n,"change",this.pointerMove.bind(this)),c(n,"end",this.pointerUp.bind(this)),c(n,"cancel",this.pointerUp.bind(this)),c("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(c("key","down",this.keyDown.bind(this)),c("key","up",this.keyUp.bind(this)));this.config.filterTaps&&c("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},uo="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Cw="constructor"in GestureEvent}catch(c){Cw=!1}var gA=
Cw,Iq=uo&&"ontouchstart"in window||uo&&1<window.navigator.maxTouchPoints,Dw=uo&&"ontouchstart"in window||uo&&1<window.navigator.maxTouchPoints,Ew=uo&&"onpointerdown"in window,hA=uo&&"exitPointerLock"in window.document,Fw={mouse:0,touch:0,pen:8},iA=vf(vf({},to),{},{device(c,n,{pointer:{touch:N=!1,lock:ba=!1,mouse:pa=!1}={}}){this.pointerLock=ba&&hA;return Iq&&N?"touch":this.pointerLock?"mouse":Ew&&!pa?"pointer":Iq?"touch":"mouse"},preventScrollAxis(c,n,{preventScroll:N}){this.preventScrollDelay="number"===
typeof N?N:N||void 0===N&&c?250:void 0;if(Dw&&!1!==N)return c?c:void 0!==N?"y":void 0},pointerCapture(c,n,{pointer:{capture:N=!0,buttons:ba=1,keys:pa=!0}={}}){this.pointerButtons=ba;this.keys=pa;return!this.pointerLock&&"pointer"===this.device&&N},threshold(c,n,{filterTaps:N=!1,tapsThreshold:ba=3,axis:pa}){c=ij.toVector(c,N?ba:pa?1:0);this.filterTaps=N;this.tapsThreshold=ba;return c},swipe({velocity:c=.5,distance:n=50,duration:N=250}={}){return{velocity:this.transform(ij.toVector(c)),distance:this.transform(ij.toVector(n)),
duration:N}},delay(c=0){switch(c){case !0:return 180;case !1:return 0;default:return c}},axisThreshold(c){return c?vf(vf({},Fw),c):Fw}}),jA=class extends zw{constructor(...c){super(...c);gf(this,"ingKey","pinching");gf(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const c=this.state;c._touchIds=[];c.canceled=!1;c.cancel=this.cancel.bind(this);c.turns=0}computeOffset(){const {type:c,movement:n,lastOffset:N}=
this.state;this.state.offset="wheel"===c?ij.add(n,N):[(1+n[0])*N[0],n[1]+N[1]]}computeMovement(){const {offset:c,lastOffset:n}=this.state;this.state.movement=[c[0]/n[0],c[1]-n[1]]}axisIntent(){const c=this.state,[n,N]=c._movement;if(!c.axis){const ba=30*Math.abs(n)-Math.abs(N);0>ba?c.axis="angle":0<ba&&(c.axis="scale")}}restrictToAxis(c){this.config.lockDirection&&("scale"===this.state.axis?c[1]=0:"angle"===this.state.axis&&(c[0]=0))}cancel(){const c=this.state;c.canceled||setTimeout(()=>{c.canceled=
!0;c._active=!1;this.compute();this.emit()},0)}touchStart(c){this.ctrl.setEventIds(c);var n=this.state;const N=this.ctrl.touchIds;n._active&&n._touchIds.every(ba=>N.has(ba))||2>N.size||(this.start(c),n._touchIds=Array.from(N).slice(0,2),n=oc(c,n._touchIds),this.pinchStart(c,n))}pointerStart(c){if(null==c.buttons||1===c.buttons%2){this.ctrl.setEventIds(c);c.target.setPointerCapture(c.pointerId);var n=this.state,N=n._pointerEvents,ba=this.ctrl.pointerIds;n._active&&Array.from(N.keys()).every(pa=>ba.has(pa))||
(2>N.size&&N.set(c.pointerId,c),2>n._pointerEvents.size||(this.start(c),n=pf(...Array.from(N.values())),this.pinchStart(c,n)))}}pinchStart(c,n){this.state.origin=n.origin;this.computeValues([n.distance,n.angle]);this.computeInitial();this.compute(c);this.emit()}touchMove(c){if(this.state._active){var n=oc(c,this.state._touchIds);this.pinchMove(c,n)}}pointerMove(c){var n=this.state._pointerEvents;n.has(c.pointerId)&&n.set(c.pointerId,c);this.state._active&&(n=pf(...Array.from(n.values())),this.pinchMove(c,
n))}pinchMove(c,n){const N=this.state,ba=n.angle-N._values[1];let pa=0;270<Math.abs(ba)&&(pa+=Math.sign(ba));this.computeValues([n.distance,n.angle-360*pa]);N.origin=n.origin;N.turns=pa;N._movement=[N._values[0]/N._initial[0]-1,N._values[1]-N._initial[1]];this.compute(c);this.emit()}touchEnd(c){this.ctrl.setEventIds(c);this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(c),this.emit())}pointerEnd(c){const n=this.state;this.ctrl.setEventIds(c);
try{c.target.releasePointerCapture(c.pointerId)}catch(N){}n._pointerEvents.has(c.pointerId)&&n._pointerEvents.delete(c.pointerId);n._active&&2>n._pointerEvents.size&&(n._active=!1,this.compute(c),this.emit())}gestureStart(c){c.cancelable&&c.preventDefault();const n=this.state;n._active||(this.start(c),this.computeValues([c.scale,c.rotation]),n.origin=[c.clientX,c.clientY],this.compute(c),this.emit())}gestureMove(c){c.cancelable&&c.preventDefault();if(this.state._active){var n=this.state;this.computeValues([c.scale,
c.rotation]);n.origin=[c.clientX,c.clientY];var N=n._movement;n._movement=[c.scale-1,c.rotation];n._delta=ij.sub(n._movement,N);this.compute(c);this.emit()}}gestureEnd(c){this.state._active&&(this.state._active=!1,this.compute(c),this.emit())}wheel(c){const n=this.config.modifierKey;if(!n||c[n])this.state._active?this.wheelChange(c):this.wheelStart(c),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(c){this.start(c);this.wheelChange(c)}wheelChange(c){"uv"in c||c.cancelable&&c.preventDefault();
const n=this.state;n._delta=[-ze(c)[1]/100*n.offset[0],0];ij.addTo(n._movement,n._delta);rd(n);this.state.origin=[c.clientX,c.clientY];this.compute(c);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){const n=this.config.device;n&&(c(n,"start",this[n+"Start"].bind(this)),c(n,"change",this[n+"Move"].bind(this)),c(n,"end",this[n+"End"].bind(this)),c(n,"cancel",this[n+"End"].bind(this)));this.config.pinchOnWheel&&c("wheel","",this.wheel.bind(this),
{passive:!1})}},kA=vf(vf({},Aw),{},{device(c,n,{shared:N,pointer:{touch:ba=!1}={}}){if(N.target&&!Iq&&gA)return"gesture";if(Iq&&ba)return"touch";if(Dw){if(Ew)return"pointer";if(Iq)return"touch"}},bounds(c,n,{scaleBounds:N={},angleBounds:ba={}}){const pa=Ia=>{Ia=de(N,Ia);Ia=Object.assign({},{min:-Infinity,max:Infinity},Ia||{});return[Ia.min,Ia.max]},Ba=Ia=>{Ia=de(ba,Ia);Ia=Object.assign({},{min:-Infinity,max:Infinity},Ia||{});return[Ia.min,Ia.max]};return"function"!==typeof N&&"function"!==typeof ba?
[pa(),Ba()]:Ia=>[pa(Ia),Ba(Ia)]},threshold(c,n,N){this.lockDirection="lock"===N.axis;return ij.toVector(c,this.lockDirection?[.1,3]:0)},modifierKey(c){return void 0===c?"ctrlKey":c},pinchOnWheel(c=!0){return c}}),lA=class extends Hq{constructor(...c){super(...c);gf(this,"ingKey","moving")}move(c){this.config.mouseOnly&&"mouse"!==c.pointerType||(this.state._active?this.moveChange(c):this.moveStart(c),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(c){this.start(c);this.computeValues(kd(c));
this.compute(c);this.computeInitial();this.emit()}moveChange(c){if(this.state._active){var n=kd(c),N=this.state;N._delta=ij.sub(n,N._values);ij.addTo(N._movement,N._delta);this.computeValues(n);this.compute(c);this.emit()}}moveEnd(c){this.state._active&&(this.state._active=!1,this.compute(c),this.emit())}bind(c){c("pointer","change",this.move.bind(this));c("pointer","leave",this.moveEnd.bind(this))}},mA=vf(vf({},to),{},{mouseOnly:(c=!0)=>c}),nA=class extends Hq{constructor(...c){super(...c);gf(this,
"ingKey","scrolling")}scroll(c){this.state._active||this.start(c);this.scrollChange(c);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(c){c.cancelable&&c.preventDefault();const n=this.state;var N,ba;const {scrollX:pa,scrollY:Ba,scrollLeft:Ia,scrollTop:hb}=c.currentTarget;var yb=[null!==(N=null!==pa&&void 0!==pa?pa:Ia)&&void 0!==N?N:0,null!==(ba=null!==Ba&&void 0!==Ba?Ba:hb)&&void 0!==ba?ba:0];n._delta=ij.sub(yb,n._values);ij.addTo(n._movement,n._delta);this.computeValues(yb);
this.compute(c);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){c("scroll","",this.scroll.bind(this))}},oA=to,pA=class extends Hq{constructor(...c){super(...c);gf(this,"ingKey","wheeling")}wheel(c){this.state._active||this.start(c);this.wheelChange(c);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(c){const n=this.state;n._delta=ze(c);ij.addTo(n._movement,n._delta);rd(n);this.compute(c);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(c){c("wheel","",this.wheel.bind(this))}},qA=to,rA=class extends Hq{constructor(...c){super(...c);gf(this,"ingKey","hovering")}enter(c){this.config.mouseOnly&&"mouse"!==c.pointerType||(this.start(c),this.computeValues(kd(c)),this.compute(c),this.emit())}leave(c){if(!this.config.mouseOnly||"mouse"===c.pointerType){var n=this.state;if(n._active){n._active=!1;var N=kd(c);n._movement=n._delta=ij.sub(N,n._values);this.computeValues(N);this.compute(c);
n.delta=n.movement;this.emit()}}}bind(c){c("pointer","enter",this.enter.bind(this));c("pointer","leave",this.leave.bind(this))}},sA=vf(vf({},to),{},{mouseOnly:(c=!0)=>c}),rt=new Map,st=new Map,tA={key:"drag",engine:fA,resolver:iA},uA={key:"hover",engine:rA,resolver:sA},vA={key:"move",engine:lA,resolver:mA},wA={key:"pinch",engine:jA,resolver:kA},xA={key:"scroll",engine:nA,resolver:oA},yA={key:"wheel",engine:pA,resolver:qA},tt=Of(X(67)),zA={target(c){if(c)return()=>"current"in c?c.current:c},enabled(c=
!0){return c},window(c=uo?window:void 0){return c},eventOptions({passive:c=!0,capture:n=!1}={}){return{passive:c,capture:n}},transform(c){return c}},AA=["target","eventOptions","window","enabled","transform"],Gw=class{constructor(c,n){gf(this,"_listeners",new Set);this._ctrl=c;this._gestureKey=n}add(c,n,N,ba,pa){const Ba=this._listeners,Ia=Nh(n,N),hb=vf(vf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),pa);c.addEventListener(Ia,ba,hb);const yb=()=>{c.removeEventListener(Ia,
ba,hb);Ba.delete(yb)};Ba.add(yb);return yb}clean(){this._listeners.forEach(c=>c());this._listeners.clear()}},BA=class{constructor(){gf(this,"_timeouts",new Map)}add(c,n,N=140,...ba){this.remove(c);this._timeouts.set(c,window.setTimeout(n,N,...ba))}remove(c){(c=this._timeouts.get(c))&&window.clearTimeout(c)}clean(){this._timeouts.forEach(c=>void window.clearTimeout(c));this._timeouts.clear()}},CA=class{constructor(c){gf(this,"gestures",new Set);gf(this,"_targetEventStore",new Gw(this));gf(this,"gestureEventStores",
{});gf(this,"gestureTimeoutStores",{});gf(this,"handlers",{});gf(this,"config",{});gf(this,"pointerIds",new Set);gf(this,"touchIds",new Set);gf(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});c.drag&&ge(this,"drag");c.wheel&&ge(this,"wheel");c.scroll&&ge(this,"scroll");c.move&&ge(this,"move");c.pinch&&ge(this,"pinch");c.hover&&ge(this,"hover")}setEventIds(c){if("touches"in c)return this.touchIds=new Set(Hb(c));if("pointerId"in c)return"pointerup"===c.type||"pointercancel"===c.type?
this.pointerIds.delete(c.pointerId):"pointerdown"===c.type&&this.pointerIds.add(c.pointerId),this.pointerIds}applyHandlers(c,n){this.handlers=c;this.nativeHandlers=n}applyConfig(c,n){this.config=je(c,n,this.config)}clean(){this._targetEventStore.clean();for(const c of this.gestures)this.gestureEventStores[c].clean(),this.gestureTimeoutStores[c].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...c){var n=this.config.shared;const N={};let ba;if(n.target&&
(ba=n.target(),!ba))return;if(n.enabled){for(const pa of this.gestures){const Ba=this.config[pa],Ia=Hw(N,Ba.eventOptions,!!ba);Ba.enabled&&(new (rt.get(pa))(this,c,pa)).bind(Ia)}n=Hw(N,n.eventOptions,!!ba);for(const pa in this.nativeHandlers)n(pa,"",Ba=>this.nativeHandlers[pa](vf(vf({},this.state.shared),{},{event:Ba,args:c})),void 0,!0)}for(const pa in N)N[pa]=ac(...N[pa]);if(!ba)return N;for(const pa in N){const {device:Ba,capture:Ia,passive:hb}=Kf(pa);this._targetEventStore.add(ba,Ba,"",N[pa],
{capture:Ia,passive:hb})}}},Hw=(c,n,N)=>(ba,pa,Ba,Ia={},hb=!1)=>{var yb,Yb;const rc=null!==(yb=Ia.capture)&&void 0!==yb?yb:n.capture;Ia=null!==(Yb=Ia.passive)&&void 0!==Yb?Yb:n.passive;ba=hb?ba:rg(ba,pa,rc);N&&Ia&&(ba+="Passive");c[ba]=c[ba]||[];c[ba].push(Ba)},DA=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Jr=Of(X(67)),ut=Of(X(67)),Iw=Of(X(67)),Jw=Of(X(67)),EA=Of(X(67)),FA=Of(X(67)),GA=Of(X(67)),HA=Of(X(67)),IA={none:(c,n)=>"none",["default"]:(c,n)=>"default",pointer:(c,n)=>"pointer",crosshair:(c,
n)=>"crosshair",move:(c,n)=>"move",wait:(c,n)=>"wait",progress:(c,n)=>"progress",grab:(c,n)=>Cd('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
c,n),grabbing:(c,n)=>Cd("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
c,n),text:(c,n)=>Cd("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
c,n),["resize-edge"]:(c,n)=>Cd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",c,n),["resize-corner"]:(c,n)=>Cd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
c,n),["ew-resize"]:(c,n)=>Cd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",c,n),["ns-resize"]:(c,n)=>Cd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
c+90,n),["nesw-resize"]:(c,n)=>Cd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",c,n),["nwse-resize"]:(c,n)=>Cd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
c+90,n),rotate:(c,n)=>Cd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+45,n),["nwse-rotate"]:(c,n)=>Cd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c,n),["nesw-rotate"]:(c,n)=>Cd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+90,n),["senw-rotate"]:(c,n)=>Cd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+180,n),["swne-rotate"]:(c,n)=>Cd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+270,n)},JA=Of(X(67));Of(X(67));var Kw=X(67),Lw=Of(X(67));if(!X(67).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!mc)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var KA=X(68),Jq=Of(X(67)),Mw="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,LA=1E4,MA=function(c){var n="function"===typeof Symbol&&Symbol.iterator,N=n&&c[n],ba=0;if(N)return N.call(c);if(c&&"number"===typeof c.length)return{next:function(){c&&ba>=
c.length&&(c=void 0);return{value:c&&c[ba++],done:!c}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.");},Nw=Mw?Je(Mw):Ue(),NA=Nw.addReactionToTrack,OA=Nw.recordReactionAsCommitted,Ow=function(c,n){var N="function"===typeof Symbol&&c[Symbol.iterator];if(!N)return c;c=N.call(c);var ba,pa=[];try{for(;(void 0===n||0<n--)&&!(ba=c.next()).done;)pa.push(ba.value)}catch(Ia){var Ba={error:Ia}}finally{try{ba&&!ba.done&&(N=c["return"])&&N.call(c)}finally{if(Ba)throw Ba.error;
}}return pa},PA=function(){return function(){}}(),sp=X(67),Pw="function"===typeof Symbol&&Symbol.for,Qw=Pw?Symbol.for("react.forward_ref"):"function"===typeof sp.forwardRef&&(0,sp.forwardRef)(function(c){return null}).$$typeof,Rw=Pw?Symbol.for("react.memo"):"function"===typeof sp.memo&&(0,sp.memo)(function(c){return null}).$$typeof,QA={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};lg.displayName="Observer";X(67);X(67);X(67);(function(c){c||=Ie;rb({reactionScheduler:c})})(KA.unstable_batchedUpdates);
var RA=Of(X(67)),vt=X(299),$k=RA.forwardRef(function(c,n){var {children:N,opacity:ba,centered:pa,className:Ba=""}=c,Ia=Yi(c,["children","opacity","centered","className"]);return(0,vt.jsx)(lg,{children:()=>(0,vt.jsx)("div",{ref:n,className:`tl-positioned-div ${Ba}`,style:ba?{opacity:ba}:void 0,draggable:!1,children:(0,vt.jsx)("div",qg(Ef({className:`tl-positioned-inner ${pa?"tl-centered":""}`},Ia),{children:N}))})})}),SA=Of(X(67)),wt=X(299),yl=SA.forwardRef(function(c,n){var {id:N,className:ba="",
style:pa,children:Ba}=c,Ia=Yi(c,["id","className","style","children"]);return(0,wt.jsx)(lg,{children:()=>(0,wt.jsx)("svg",{ref:n,style:pa,className:`tl-positioned-svg ${ba}`,children:(0,wt.jsx)("g",qg(Ef({id:N,className:"tl-centered-g"},Ia),{children:Ba}))})})}),Kq=Of(X(67)),Sw=Of(X(67)),Kr=Of(X(67)),TA=X(299),pn=he(function(c){var {id:n,bounds:N,zIndex:ba,rotation:pa=0,className:Ba="",children:Ia}=c;c=Yi(c,"id bounds zIndex rotation className children".split(" "));const hb=Kr.useRef(null);Kr.useLayoutEffect(()=>
{hb.current.style.transform=`translate(
        calc(${N.minX}px - var(--tl-padding)),
        calc(${N.minY}px - var(--tl-padding)))
        rotate(${pa+(N.rotation||0)}rad)`},[N.minX,N.minY,pa,N.rotation]);Kr.useLayoutEffect(()=>{const yb=hb.current;yb.style.width=`calc(${Math.floor(N.width)}px + (var(--tl-padding) * 2))`;yb.style.height=`calc(${Math.floor(N.height)}px + (var(--tl-padding) * 2))`},[N.width,N.height]);Kr.useLayoutEffect(()=>{const yb=hb.current;void 0!==ba&&(yb.style.zIndex=ba.toString())},[ba]);return(0,TA.jsx)("div",qg(Ef({id:n,ref:hb,className:`tl-positioned ${Ba}`,"aria-label":"container"},c),{children:Ia}))}),
UA=Of(X(67)),Tw=X(299),VA=he(function({shapes:c,hidden:n,bounds:N,rotation:ba=0}){const {components:{ContextBar:pa},viewport:{bounds:Ba,camera:{point:[Ia,hb],zoom:yb}}}=vd(),Yb=UA.useRef(null);var rc=Qe.getRotatedBounds(N,ba);rc=Qe.multiplyBounds(rc,yb);yc(Yb,N,ba,10005);if(!pa)throw Error("Expected a ContextBar component.");const Ac=Qe.translateBounds(rc,[Ia*yb,hb*yb]);return(0,Tw.jsx)("div",{ref:Yb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,Tw.jsx)(pa,{hidden:n,shapes:c,bounds:N,offsets:{left:Ac.minX,right:Ba.width-Ac.maxX,top:Ac.minY,bottom:Ba.height-Ac.maxY,width:Ac.width,height:Ac.height},scaledBounds:rc,rotation:ba})})}),Uw=Of(X(67)),WA=X(299),Vw=he(function({children:c}){const n=Uw.useRef(null),{viewport:N}=vd(),ba=n.current,{zoom:pa,point:Ba}=N.camera;Uw.useEffect(()=>{ba&&(ba.style.transform=`scale(${pa}) translate3d(${Ba[0]}px, ${Ba[1]}px, 0)`)},[pa,Ba,ba]);return(0,WA.jsx)("div",{ref:n,className:"tl-absolute tl-layer",
children:c})}),Lr=X(299),Ww=he(function({shape:c,isHovered:n=!1,isSelected:N=!1,isBinding:ba=!1,isEditing:pa=!1,isLocked:Ba=!1,meta:Ia}){const {bounds:hb,props:{scale:yb,rotation:Yb=0},ReactIndicator:rc}=c;return(0,Lr.jsx)(pn,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:hb,rotation:Yb,scale:yb,zIndex:pa?1E3:1E4,children:(0,Lr.jsx)(yl,{children:(0,Lr.jsx)("g",{className:`tl-indicator-container ${N?"tl-selected":"tl-hovered"} ${Ba?"tl-locked":""}`,children:(0,Lr.jsx)(rc,{isEditing:pa,
isBinding:ba,isHovered:n,isLocked:Ba,isSelected:N,isErasing:!1,meta:Ia})})})})}),Xw=Of(X(67)),Mr=X(299),XA=he(function({bounds:c,shape:n}){const {viewport:{camera:{zoom:N}},components:{QuickLinks:ba}}=vd();var pa=Ze();const Ba=Ig(n);if(!ba)throw Error("Expected a QuickLinks component.");pa=50>c.height*N||!pa.selectedShapesArray.includes(n);return(0,Mr.jsx)(pn,{bounds:c,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,Mr.jsx)($k,{children:(0,Mr.jsx)("span",qg(Ef({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},Ba),{onPointerDown:Ia=>Ia.stopPropagation(),children:(0,Mr.jsx)(ba,{className:"tl-backlinks-count "+(pa?"tl-backlinks-count-rounded":""),id:n.id,shape:n})}))})})}),Nr=X(299),YA=he(function({bounds:c,shape:n}){const {viewport:{camera:{zoom:N}},components:{BacklinksCount:ba}}=vd();var pa=Ze();if(!ba)throw Error("Expected a BacklinksCount component.");const Ba=Ia=>Ia.stopPropagation();
pa=50>c.height*N||!pa.selectedShapesArray.includes(n)||n.hideSelection;return(0,Nr.jsx)(pn,{bounds:c,className:"tl-backlinks-count-container",children:(0,Nr.jsx)($k,{children:(0,Nr.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:Ba,onWheelCapture:Ba,onKeyDown:Ba,title:"Shape Backlinks",children:(0,Nr.jsx)(ba,{className:"tl-backlinks-count "+(pa?"tl-backlinks-count-rounded":""),id:n.id,
shape:n})})})})}),ZA=Of(X(67)),Yw=X(299),$A=he(function({bounds:c,hidden:n,shapes:N,rotation:ba=0,detail:pa="size"}){const {components:{SelectionDetail:Ba},viewport:{camera:{zoom:Ia}}}=vd(),hb=ZA.useRef(null),yb=Qe.multiplyBounds(c,Ia);yc(hb,c,ba,10003);if(!Ba)throw Error("Expected a SelectionDetail component.");return(0,Yw.jsx)("div",{ref:hb,className:`tl-counter-scaled-positioned ${n?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,Yw.jsx)(Ba,
{shapes:N,bounds:c,scaledBounds:yb,zoom:Ia,rotation:ba,detail:pa})})}),Zw=X(299),aB=he(function({shape:c,isHovered:n=!1,isSelected:N=!1,isBinding:ba=!1,isErasing:pa=!1,isEditing:Ba=!1,onEditingEnd:Ia,asset:hb,meta:yb,zIndex:Yb}){const {bounds:rc,props:{rotation:Ac,scale:Yc},ReactComponent:ud}=c,pd=Ze(),Gd=Ig(c);var Qd=pd.getParentGroup(c);Qd=pd.selectedIds.has(null==Qd?void 0:Qd.id);return(0,Zw.jsx)(pn,{"data-shape-id":c.id,"data-html2canvas-ignore":!N&&!Qd&&0!==pd.selectedShapes.size||null,zIndex:Yb,
"data-type":"Shape",bounds:rc,rotation:Ac,scale:Yc,children:(0,Zw.jsx)(ud,{meta:yb,isEditing:Ba,isBinding:ba,isHovered:n,isSelected:N,isErasing:pa,events:Gd,asset:hb,onEditingEnd:Ia})})}),tp=X(299),$w=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],bB=he(function({size:c}){const {viewport:{camera:{point:n,zoom:N}}}=vd();return(0,tp.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,tp.jsx)("defs",{children:$w.map(([ba,pa,
Ba],Ia)=>{Ba=Ba*c*N;var hb=n[0]*N,yb=n[1]*N;hb=0<hb?hb%Ba:Ba+hb%Ba;yb=0<yb?yb%Ba:Ba+yb%Ba;ba=Ui(N,[ba,pa],[0,1]);return(0,tp.jsx)("pattern",{id:`grid-${Ia}`,width:Ba,height:Ba,patternUnits:"userSpaceOnUse",children:!(2<ba||.1>ba)&&(0,tp.jsx)("circle",{className:"tl-grid-dot",cx:hb,cy:yb,r:1.5,opacity:Math.max(0,Math.min(ba,1))})},`grid-pattern-${Ia}`)})}),$w.map((ba,pa)=>(0,tp.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${pa})`},`grid-rect-${pa}`))]})}),ax=he(function({size:c}){return(0,tp.jsx)(bB,
{size:c})}),bx=X(299),cx=he(function({bounds:c}){const n=$d("background");return(0,bx.jsx)(yl,qg(Ef({"data-html2canvas-ignore":"true"},n),{children:(0,bx.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,c.width),height:Math.max(1,c.height),pointerEvents:"all",rx:8,ry:8})}))});X(67);var dx=X(299),ex=he(function({scaledBounds:c,shapes:n,detail:N="size",rotation:ba=0}){var pa;const Ba=1===n.length?ba:null!=(pa=c.rotation)?pa:0;return(0,dx.jsx)($k,{centered:!0,children:(0,dx.jsx)("div",{className:"tl-bounds-detail",
style:{transform:Ba<gi||Ba>3*gi?`rotate(${Ba}rad) translateY(${c.height/2+24}px)`:`rotate(${Math.PI+Ba}rad) translateY(${c.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===n.length&&"line"===n[0].type?`${te.dist(n[0].props.handles.start.point,n[0].props.handles.end.point).toFixed()}`:"size"===N?`${c.width.toFixed()} \xD7 ${c.height.toFixed()}`:`\u2220${Fh.radiansToDegrees(Fh.clampRadians(ba)).toFixed()}\xB0`})})}),xt=X(299),cB={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Or=he(function({cx:c,cy:n,size:N,targetSize:ba,corner:pa,isHidden:Ba}){const Ia=$d(pa);return(0,xt.jsxs)("g",qg(Ef({opacity:Ba?0:1},Ia),{children:[(0,xt.jsx)("rect",{className:"tl-transparent "+(Ba?"":cB[pa]),"aria-label":`${pa} target`,x:c-1.25*ba,y:n-1.25*ba,width:2.5*ba,height:2.5*ba,pointerEvents:Ba?"none":"all"}),(0,xt.jsx)("rect",{className:"tl-corner-handle","aria-label":`${pa} handle`,x:c-N/2,y:n-N/2,width:N,height:N,
pointerEvents:"none"})]}))}),Pr=X(299),yt=he(function({cx:c,cy:n,size:N,direction:ba,isHidden:pa}){const Ba=Ze();return(0,Pr.jsxs)("g",{className:"tl-clone-handle",opacity:pa?0:1,children:[(0,Pr.jsx)("circle",{"aria-label":`${ba} handle`,pointerEvents:"all",onPointerDown:Ia=>Ba.api.clone(ba),cx:c,cy:n,r:N}),(0,Pr.jsx)("line",{x1:c-N/2,y1:n,x2:c+N/2,y2:n}),(0,Pr.jsx)("line",{x1:c,y1:n-N/2,x2:c,y2:n+N/2})]})}),dB=X(299),eB={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",
left_edge:"tl-cursor-ew"},Qr=he(function({x:c,y:n,width:N,height:ba,targetSize:pa,edge:Ba,disabled:Ia,isHidden:hb}){const yb=$d(Ba);return(0,dB.jsx)("rect",Ef({pointerEvents:hb||Ia?"none":"all",className:"tl-transparent tl-edge-handle "+(hb?"":eB[Ba]),"aria-label":`${Ba} target`,opacity:hb?0:1,x:c-pa,y:n-pa,width:Math.max(1,N+2*pa),height:Math.max(1,ba+2*pa)},yb))}),zt=X(299);he(function({cx:c,cy:n,size:N,targetSize:ba,isHidden:pa}){const Ba=$d("rotate");return(0,zt.jsxs)("g",qg(Ef({opacity:pa?0:
1},Ba),{children:[(0,zt.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:c,cy:n,r:ba,pointerEvents:pa?"none":"all"}),(0,zt.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:c,cy:n,r:N/2,pointerEvents:"none"})]}))});X(67);var fx=X(299),Rr=he(function({cx:c,cy:n,targetSize:N,corner:ba,isHidden:pa}){const Ba=$d(ba);return(0,fx.jsx)("g",qg(Ef({opacity:pa?0:1},Ba),{children:(0,fx.jsx)("rect",{className:"tl-transparent","aria-label":`${ba} target`,x:c-
2.5*N,y:n-2.5*N,width:3*N,height:3*N,pointerEvents:pa?"none":"all"})}))}),Hj=X(299),gx=he(function({bounds:c,showResizeHandles:n,showRotateHandles:N,showCloneHandles:ba,shapes:pa}){var Ba,Ia;const hb=Ze();let {width:yb,height:Yb}=c;var rc=hb.viewport.camera.zoom;c=8/rc;const Ac=6/rc;rc=30/rc;const Yc=2*c,ud=1===pa.length?pa[0].canResize:[!0,!0],pd=null!=(Ia=null==(Ba=hb.editingShape)?void 0:Ba.props.borderRadius)?Ia:0;return(0,Hj.jsx)(Hj.Fragment,{children:0<pa.length&&(0,Hj.jsxs)(yl,{children:[!hb.editingShape&&
(0,Hj.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(yb,1),height:Math.max(Yb,1),rx:pd,ry:pd,pointerEvents:"none"}),(0,Hj.jsx)(Qr,{x:2*Ac,y:0,width:yb-4*Ac,height:0,targetSize:Ac,edge:"top_edge",disabled:!ud[1],isHidden:!n}),(0,Hj.jsx)(Qr,{x:yb,y:2*Ac,width:0,height:Yb-4*Ac,targetSize:Ac,edge:"right_edge",disabled:!ud[0],isHidden:!n}),(0,Hj.jsx)(Qr,{x:2*Ac,y:Yb,width:yb-4*Ac,height:0,targetSize:Ac,edge:"bottom_edge",disabled:!ud[1],isHidden:!n}),(0,Hj.jsx)(Qr,{x:0,y:2*Ac,width:0,height:Yb-4*
Ac,targetSize:Ac,edge:"left_edge",disabled:!ud[0],isHidden:!n}),(0,Hj.jsx)(Rr,{cx:0,cy:0,targetSize:Ac,corner:"top_left_resize_corner",isHidden:!N}),(0,Hj.jsx)(Rr,{cx:yb+2*Ac,cy:0,targetSize:Ac,corner:"top_right_resize_corner",isHidden:!N}),(0,Hj.jsx)(Rr,{cx:yb+2*Ac,cy:Yb+2*Ac,targetSize:Ac,corner:"bottom_right_resize_corner",isHidden:!N}),(0,Hj.jsx)(Rr,{cx:0,cy:Yb+2*Ac,targetSize:Ac,corner:"bottom_left_resize_corner",isHidden:!N}),(0,Hj.jsx)(yt,{cx:-rc,cy:Yb/2,size:Yc,direction:"left",isHidden:!ba}),
(0,Hj.jsx)(yt,{cx:yb+rc,cy:Yb/2,size:Yc,direction:"right",isHidden:!ba}),(0,Hj.jsx)(yt,{cx:yb/2,cy:Yb+rc,size:Yc,direction:"down",isHidden:!ba}),(null==ud?void 0:ud.every(Gd=>Gd))&&(0,Hj.jsxs)(Hj.Fragment,{children:[(0,Hj.jsx)(Or,{cx:0,cy:0,size:c,targetSize:Ac,corner:"top_left_corner",isHidden:!n}),(0,Hj.jsx)(Or,{cx:yb,cy:0,size:c,targetSize:Ac,corner:"top_right_corner",isHidden:!n}),(0,Hj.jsx)(Or,{cx:yb,cy:Yb,size:c,targetSize:Ac,corner:"bottom_right_corner",isHidden:!n}),(0,Hj.jsx)(Or,{cx:0,cy:Yb,
size:c,targetSize:Ac,corner:"bottom_left_corner",isHidden:!n})]})]})})}),At=X(299),hx=he(function({bounds:c}){return(0,At.jsx)(pn,{bounds:c,zIndex:10001,children:(0,At.jsx)(yl,{children:(0,At.jsx)("rect",{className:"tl-brush",x:0,y:0,width:c.width,height:c.height})})})}),ix=X(299);he(function(){return(0,ix.jsx)(ix.Fragment,{})});var Bt=X(299),jx=he(function({shape:c,handle:n,id:N}){c=Dd(c,N);const [ba,pa]=n.point;return(0,Bt.jsxs)("g",qg(Ef({className:"tl-handle","aria-label":"handle"},c),{transform:`translate(${ba}, ${pa})`,
children:[(0,Bt.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Bt.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),kx=Of(X(67)),Ct=X(299),Dt=he(function({direction:c}){const {viewport:{bounds:n}}=vd(),N=kx.useRef(null);kx.useLayoutEffect(()=>{const ba=N.current;if(ba){var pa=[n.width/2,n.height/2],Ba=Qe.getRectangleSides([12,12],[n.width-24,n.height-24]);for(const [,[Ia,hb]]of Ba)Ba=q(pa,c,Ia,hb),Ba.didIntersect&&(Ba=Ba.points[0],ba.style.transform=
`translate(${Ba[0]-6}px,${Ba[1]-6}px) rotate(${te.toAngle(c)}rad)`)}},[c,n]);return(0,Ct.jsx)("div",{ref:N,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Ct.jsx)("svg",{height:12,width:12,children:(0,Ct.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),jj=X(299),fB=he(function({id:c,className:n,brush:N,shapes:ba,assets:pa,bindingShapes:Ba,editingShape:Ia,hoveredShape:hb,hoveredGroup:yb,selectionBounds:Yb,selectedShapes:rc,erasingShapes:Ac,selectionDirectionHint:Yc,cursor:ud=
"default",cursorRotation:pd=0,selectionRotation:Gd=0,showSelection:Qd=!0,showHandles:hd=!0,showSelectionRotation:sd=!1,showResizeHandles:yd=!0,showRotateHandles:Rd=!0,showCloneHandles:Id=!0,showSelectionDetail:Ve=!0,showContextBar:Xe=!0,showGrid:hg=!0,gridSize:kf=8,onEditingEnd:Rf=Zz,theme:Lg=Ai,children:ah}){var Gg;const bh=Kq.useRef(null),{viewport:Df,components:If,meta:zf}=vd(),Yf=Ze(),ch=Kq.useCallback(Xg=>{Yf.inputs.updateContainerOffset([Xg.minX,Xg.minY])},[]);De(Lg,c);wd(bh);xe(bh,Df,ch);xb(bh);
re();Vd(bh,ud,pd);ae(bh);fg(bh);c=cg();const Hh=(ud=1===(null==rc?void 0:rc.length)&&rc[0])&&"handles"in ud.props?null==rc?void 0:rc[0]:void 0,Wi=Kq.useMemo(()=>new Set(rc||[]),[rc]),$h=Kq.useMemo(()=>new Set(Ac||[]),[Ac]);ud=1===(null==rc?void 0:rc.length)?rc[0]:void 0;yb=[...(new Set([yb,hb]))].filter(Kc);return(0,jj.jsxs)("div",{ref:bh,className:`tl-container ${null!=n?n:""}`,children:[(0,jj.jsxs)("div",qg(Ef({tabIndex:-1,className:"tl-absolute tl-canvas"},c),{children:[hg&&If.Grid&&(0,jj.jsx)(If.Grid,
{size:kf}),(0,jj.jsxs)(Vw,{children:[If.SelectionBackground&&rc&&Yb&&Qd&&(0,jj.jsx)(pn,{"data-type":"SelectionBackground",bounds:Yb,zIndex:2,"data-html2canvas-ignore":"true",children:(0,jj.jsx)(If.SelectionBackground,{shapes:rc,bounds:Yb,showResizeHandles:yd,showRotateHandles:Rd})}),ba&&ba.map((Xg,Li)=>(0,jj.jsx)(aB,{shape:Xg,asset:pa&&Xg.props.assetId?pa[Xg.props.assetId]:void 0,isEditing:Xg===Ia,isHovered:Xg===hb,isBinding:null==Ba?void 0:Ba.includes(Xg),isSelected:Wi.has(Xg),isErasing:$h.has(Xg),
meta:zf,zIndex:1E3+Li,onEditingEnd:Rf},"shape_"+Xg.id)),!Yf.isIn("select.pinching")&&(null==rc?void 0:rc.map(Xg=>(0,jj.jsx)(Ww,{shape:Xg,isEditing:Xg===Ia,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Xg.props.isLocked},"selected_indicator_"+Xg.id))),yb.map(Xg=>Xg!==Ia&&(0,jj.jsx)(Ww,{shape:Xg},"hovered_indicator_"+Xg.id)),ud&&If.BacklinksCount&&(0,jj.jsx)(YA,{hidden:!1,bounds:ud.bounds,shape:ud}),hb&&hb!==ud&&If.QuickLinks&&(0,jj.jsx)(XA,{hidden:!1,bounds:hb.bounds,shape:hb}),N&&If.Brush&&(0,jj.jsx)(If.Brush,
{bounds:N}),rc&&Yb&&(0,jj.jsxs)(jj.Fragment,{children:[Qd&&If.SelectionForeground&&(0,jj.jsx)(pn,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Yb,zIndex:Ia&&rc.includes(Ia)?1002:10002,children:(0,jj.jsx)(If.SelectionForeground,{shapes:rc.filter(Xg=>!Xg.props.isLocked),bounds:Yb,showResizeHandles:yd,showRotateHandles:Rd,showCloneHandles:Id})}),hd&&Hh&&If.Handle&&(0,jj.jsx)(pn,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Yb,zIndex:10003,
children:(0,jj.jsx)(yl,{children:Object.entries(null!=(Gg=Hh.props.handles)?Gg:{}).map(([Xg,Li])=>Kq.createElement(If.Handle,{key:`${Li.id}_handle_${Li.id}`,shape:Hh,handle:Li,id:Xg}))})}),rc&&If.SelectionDetail&&(0,jj.jsx)($A,{"data-html2canvas-ignore":"true",shapes:rc,bounds:Yb,detail:sd?"rotation":"size",hidden:!Ve,rotation:Gd},"detail"+rc.map(Xg=>Xg.id).join(""))]})]}),Yc&&Yb&&rc&&(0,jj.jsx)(Dt,{direction:Yc,bounds:Yb,shapes:rc}),(0,jj.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),
(0,jj.jsx)(Vw,{children:rc&&Yb&&(0,jj.jsx)(jj.Fragment,{children:rc&&If.ContextBar&&(0,jj.jsx)(VA,{shapes:rc.filter(Xg=>!Xg.props.isLocked),hidden:!Xe,bounds:ud?ud.bounds:Yb,rotation:ud?ud.props.rotation:0},"context"+rc.map(Xg=>Xg.id).join(""))})}),ah]})}),lx=Of(X(67)),mx=Of(X(67)),nx=X(299);he(function({children:c}){const n=mx.useRef(null),{viewport:N}=vd();mx.useEffect(()=>ic(()=>{const ba=n.current;if(ba){var {zoom:pa,point:Ba}=N.camera;ba.style.transform=`scale(${pa}) translateX(${Ba[0]}px) translateY(${Ba[1]}px)`}}),
[]);return(0,nx.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,nx.jsx)("g",{ref:n,pointerEvents:"none",children:c})})});var gB=X(299),hB=he(function(c){const n=Uc(c),N=We(c.id);jd(n,c);wc(n,c);return(0,gB.jsx)(N.Provider,{value:n,children:c.children})}),iB=X(299),jB=he(function({id:c="noid",viewport:n,inputs:N,callbacks:ba=Ai,meta:pa=Ai,components:Ba=Ai,children:Ia}){const [hb,yb]=lx.useState(()=>{const {Brush:rc,ContextBar:Ac,DirectionIndicator:Yc,Grid:ud,Handle:pd,
SelectionBackground:Gd,SelectionDetail:Qd,SelectionForeground:hd}=Ba,sd=Yi(Ba,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:c,viewport:n,inputs:N,callbacks:ba,meta:pa,components:qg(Ef({},sd),{Brush:null===rc?void 0:hx,ContextBar:Ac,DirectionIndicator:null===Yc?void 0:Dt,Grid:null===ud?void 0:ax,Handle:null===pd?void 0:jx,SelectionBackground:null===Gd?void 0:cx,SelectionDetail:null===Qd?void 0:ex,SelectionForeground:null===
hd?void 0:gx})}});lx.useLayoutEffect(()=>{const {Brush:rc,ContextBar:Ac,DirectionIndicator:Yc,Grid:ud,Handle:pd,SelectionBackground:Gd,SelectionDetail:Qd,SelectionForeground:hd}=Ba,sd=Yi(Ba,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return ic(()=>{yb({id:c,viewport:n,inputs:N,callbacks:ba,meta:pa,components:qg(Ef({},sd),{Brush:null===rc?void 0:hx,ContextBar:Ac,DirectionIndicator:null===Yc?void 0:Dt,Grid:null===ud?void 0:ax,
Handle:null===pd?void 0:jx,SelectionBackground:null===Gd?void 0:cx,SelectionDetail:null===Qd?void 0:ex,SelectionForeground:null===hd?void 0:gx})})})},[]);const Yb=id(c);return(0,iB.jsx)(Yb.Provider,{value:hb,children:Ia})}),ox=X(299),kB=X(299),lB=he(function(c){const n=Ze();return(0,kB.jsx)(yh,Ef({viewport:n.viewport,inputs:n.inputs,callbacks:n._events,brush:n.brush,editingShape:n.editingShape,hoveredShape:n.hoveredShape,hoveredGroup:n.hoveredGroup,bindingShapes:n.bindingShapes,selectionDirectionHint:n.selectionDirectionHint,
selectionBounds:n.selectionBounds,selectedShapes:n.selectedShapesArray,erasingShapes:n.erasingShapesArray,shapes:n.shapes,assets:n.assets,showGrid:n.settings.showGrid,penMode:n.settings.penMode,showSelection:n.showSelection,showSelectionRotation:n.showSelectionRotation,showResizeHandles:n.showResizeHandles,showRotateHandles:n.showRotateHandles,showCloneHandles:n.showCloneHandles,showSelectionDetail:n.showSelectionDetail,showContextBar:n.showContextBar,cursor:n.cursors.cursor,cursorRotation:n.cursors.rotation,
selectionRotation:n.selectionRotation,onEditingEnd:n.clearEditingState},c))});X(299);var up=Of(X(67)),qn=Of(X(67)),mB=X(299),nB="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),hh=c=>{var {name:n,className:N}=c;c=Yi(c,["name","className"]);const ba=nB.includes(n)?
"tie tie-":"ti ti-";return(0,mB.jsx)("i",Ef({className:[ba+n,N].join(" ")},c))},vo=X(299),Lq=window.LSUI,px=X(299),Et=X(299),oB=({style:c,icon:n,onClick:N})=>(0,Et.jsx)("button",{"data-html2canvas-ignore":"true",style:c,className:"tl-circle-button",onPointerDown:N,children:(0,Et.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,Et.jsx)(hh,{name:n})})}),Ft=X(299),pB=window.LSUI,vi=Of(X(67)).default.createContext({}),qB=Of(X(67)),qx=X(299),ak=c=>{var {action:n,shortcut:N,opts:ba}=c;
c=Yi(c,["action","shortcut","opts"]);var {renderers:pa}=qB.useContext(vi);pa=null==pa?void 0:pa.KeyboardShortcut;return(0,qx.jsx)("div",qg(Ef({className:"tl-menu-right-slot"},c),{children:(0,qx.jsx)(pa,{action:n,shortcut:N,opts:ba})}))},al=X(299),rn=window.LSUI,rB=he(function(){const c=Ze(),n=N=>{N.preventDefault()};return(0,al.jsxs)(rn.DropdownMenu,{children:[(0,al.jsx)(rn.DropdownMenuTrigger,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*c.viewport.camera.zoom).toFixed(0)+
"%"}),(0,al.jsxs)(rn.DropdownMenuContent,{onCloseAutoFocus:N=>N.preventDefault(),id:"zoomPopup",sideOffset:12,children:[(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.zoomToFit,children:["Zoom to drawing",(0,al.jsx)(ak,{action:"whiteboard/zoom-to-fit"})]}),(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.zoomToSelection,disabled:0===c.selectedShapesArray.length,children:["Zoom to fit selection",(0,al.jsx)(ak,{action:"whiteboard/zoom-to-selection"})]}),(0,al.jsxs)(rn.DropdownMenuItem,
{onSelect:n,onClick:c.api.zoomIn,children:["Zoom in",(0,al.jsx)(ak,{action:"whiteboard/zoom-in"})]}),(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.zoomOut,children:["Zoom out",(0,al.jsx)(ak,{action:"whiteboard/zoom-out"})]}),(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.resetZoom,children:["Reset zoom",(0,al.jsx)(ak,{action:"whiteboard/reset-zoom"})]})]})]})}),Ij=X(299),sB=window.LSUI,tB=he(function(){const c=Ze(),{handlers:{t:n}}=qn.useContext(vi),N=qn.useCallback(()=>{c.api.undo()},
[c]),ba=qn.useCallback(()=>{c.api.redo()},[c]),pa=qn.useCallback(()=>{c.api.zoomIn()},[c]),Ba=qn.useCallback(()=>{c.api.zoomOut()},[c]),Ia=qn.useCallback(()=>{c.api.toggleGrid()},[c]),hb=qn.useCallback(()=>{c.api.toggleSnapToGrid()},[c]),yb=qn.useCallback(()=>{c.api.togglePenMode()},[c]);return(0,Ij.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!c.readOnly&&(0,Ij.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,Ij.jsx)(Bh,{tooltip:n("whiteboard/undo"),
onClick:N,children:(0,Ij.jsx)(hh,{name:"arrow-back-up"})}),(0,Ij.jsx)(Bh,{tooltip:n("whiteboard/redo"),onClick:ba,children:(0,Ij.jsx)(hh,{name:"arrow-forward-up"})})]}),(0,Ij.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,Ij.jsx)(Bh,{tooltip:n("whiteboard/zoom-in"),onClick:pa,id:"tl-zoom-in",children:(0,Ij.jsx)(hh,{name:"plus"})}),(0,Ij.jsx)(Bh,{tooltip:n("whiteboard/zoom-out"),onClick:Ba,id:"tl-zoom-out",children:(0,Ij.jsx)(hh,{name:"minus"})}),(0,Ij.jsx)(sB.Separator,{orientation:"vertical"}),
(0,Ij.jsx)(rB,{})]}),(0,Ij.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,Ij.jsx)(Jg,{tooltip:n("whiteboard/toggle-grid"),className:"tl-button",pressed:c.settings.showGrid,id:"tl-show-grid",onPressedChange:Ia,children:(0,Ij.jsx)(hh,{name:"grid-dots"})}),!c.readOnly&&(0,Ij.jsx)(Jg,{tooltip:n("whiteboard/snap-to-grid"),className:"tl-button",pressed:c.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:hb,children:(0,Ij.jsx)(hh,{name:c.settings.snapToGrid?"magnet":"magnet-off"})})]}),
!c.readOnly&&(0,Ij.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,Ij.jsx)(Jg,{tooltip:n("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:c.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:yb,children:(0,Ij.jsx)(hh,{name:c.settings.penMode?"pencil":"pencil-off"})})})]})}),rx=Of(X(67)),uB=Of(X(68)),Gt=X(299),Sr=c=>`[${c.map(n=>{var N;return null!=(N=null==n?void 0:n.toFixed(2))?N:"-"}).join(", ")}]`,vB=he(()=>{var c;const {viewport:{bounds:n,camera:{point:N,zoom:ba}},
inputs:pa}=vd(),Ba=rx.default.useRef();rx.default.useEffect(()=>{const hb=document.getElementById("tl-statusbar-anchor");Ba.current=hb},[]);const Ia=[["Z",null!=(c=null==ba?void 0:ba.toFixed(2))?c:"null"],["MP",Sr(pa.currentPoint)],["MS",Sr(pa.currentScreenPoint)],["VP",Sr(N)],["VBR",Sr([n.maxX,n.maxY])]].map(hb=>hb.join("")).join("|");c=Ba.current?uB.default.createPortal((0,Gt.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:Ia}),Ba.current):null;return(0,Gt.jsx)(Gt.Fragment,
{children:c})}),Mq=Of(X(67)),Tr=X(299),jm=he(c=>{var {id:n,icon:N,tooltip:ba,tooltipSide:pa="left",handleClick:Ba}=c;c=Yi(c,["id","icon","tooltip","tooltipSide","handleClick"]);var Ia;const hb=Ze(),yb=null==(Ia=[...hb.Tools,np,op])?void 0:Ia.find(Yb=>Yb.id===n);Ia=(Ia=null==yb?void 0:yb.shortcut)&&ba?(0,Tr.jsxs)("div",{className:"flex",children:[ba,(0,Tr.jsx)(ak,{action:Ia})]}):ba;return(0,Tr.jsx)(Bh,qg(Ef({},c),{tooltipSide:pa,tooltip:Ia,"data-tool":n,"data-selected":n===hb.selectedTool.id,onClick:Ba,
children:"string"===typeof N?(0,Tr.jsx)(hh,{name:N}):N}))}),wB=Of(X(67)),sn=X(299),Ht=window.LSUI,sx=he(function(c){var {popoverSide:n="left",setGeometry:N,activeGeometry:ba,chevron:pa=!0}=c;c=Yi(c,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:Ba}}=wB.default.useContext(vi);const Ia=[{id:"box",icon:"square",tooltip:Ba("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:Ba("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:Ba("whiteboard/triangle")}];
Ba={id:"shapes",icon:"triangle-square-circle",tooltip:Ba("whiteboard/shape")};Ba=ba?Ia.find(hb=>hb.id===ba):Ba;return(0,sn.jsxs)(Ht.Popover,{children:[(0,sn.jsx)(Ht.PopoverTrigger,{asChild:!0,children:(0,sn.jsxs)("div",qg(Ef({},c),{className:"tl-geometry-tools-pane-anchor",children:[(0,sn.jsx)(jm,qg(Ef({},Ba),{tooltipSide:n})),pa&&(0,sn.jsx)(hh,{"data-selected":ba,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,sn.jsx)(Ht.PopoverContent,{className:"p-0 w-auto",side:n,sideOffset:15,
collisionBoundary:document.querySelector(".logseq-tldraw"),children:(0,sn.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(n)?"flex-col":"flex-row"}`,children:Ia.map(hb=>(0,sn.jsx)(jm,{id:hb.id,icon:hb.icon,handleClick:N,tooltipSide:n},hb.id))})})]})}),Ur=X(299),Vr=window.LSUI,tx=Of(X(67)),bk=X(299),Wr=window.LSUI,xB=Of(X(67)),It=X(67),yB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",
strokeLinejoin:"round"},zB=((c,n)=>{const N=(0,It.forwardRef)((ba,pa)=>{var {color:Ba="currentColor",size:Ia=24,strokeWidth:hb=2,absoluteStrokeWidth:yb,children:Yb}=ba;ba=Yi(ba,["color","size","strokeWidth","absoluteStrokeWidth","children"]);return(0,It.createElement)("svg",Ef(qg(Ef({ref:pa},yB),{width:Ia,height:Ia,stroke:Ba,strokeWidth:yb?24*Number(hb)/Number(Ia):hb,className:`lucide lucide-${c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`}),ba),[...n.map(([rc,Ac])=>(0,It.createElement)(rc,
Ac)),...((Array.isArray(Yb)?Yb:[Yb])||[])])});N.displayName=`${c}`;return N})("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Fm=X(299),vp=window.LSUI,AB=Of(X(67)),BB=X(299),Dk=X(299),ux=window.LSUI,CB=he(function(){const c=Ze(),{handlers:{t:n}}=Mq.useContext(vi),N=Mq.useCallback(Ia=>{c.api.setColor(Ia)},[]),ba=Mq.useCallback(Ia=>{(Ia=Ia.currentTarget.dataset.tool)&&c.selectTool(Ia)},[]),[pa,Ba]=Mq.useState(()=>{var Ia;return null!=(Ia=Object.values(ob).find(hb=>hb===c.selectedTool.id))?
Ia:Object.values(ob)[0]});Mq.useEffect(()=>{Ba(Ia=>{var hb;return null!=(hb=Object.values(ob).find(yb=>yb===c.selectedTool.id))?hb:Ia})},[c.selectedTool.id]);return(0,Dk.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,Dk.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("select"),tooltip:n("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("move"),
tooltip:n("whiteboard/pan"),id:"move",icon:c.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Dk.jsx)(ux.Separator,{orientation:"horizontal"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("logseq-portal"),tooltip:n("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("pencil"),tooltip:n("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("highlighter"),tooltip:n("whiteboard/highlight"),id:"highlighter",
icon:"highlight"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("erase"),tooltip:n("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("line"),tooltip:n("whiteboard/connector"),id:"line",icon:"connector"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("text"),tooltip:n("whiteboard/text"),id:"text",icon:"text"}),(0,Dk.jsx)(sx,{activeGeometry:pa,setGeometry:ba}),(0,Dk.jsx)(ux.Separator,{orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Dk.jsx)(Vh,{popoverSide:"left",
color:c.settings.color,setColor:N}),(0,Dk.jsx)(Hi,{scaleLevel:c.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Jt=X(299),DB=he(function(){const c=Ze();return(0,Jt.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[c.selectedTool.id," | ",c.selectedTool.currentState.id,(0,Jt.jsx)("div",{style:{flex:1}}),(0,Jt.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),wp=X(299),EB=he(function(){const c=Ze();return(0,wp.jsxs)(wp.Fragment,{children:[hc()&&
(0,wp.jsx)(DB,{}),hc()&&(0,wp.jsx)(vB,{}),!c.readOnly&&(0,wp.jsx)(CB,{}),(0,wp.jsx)(tB,{})]})}),Nq=Of(X(67)),ck=Of(X(67)),vx=Of(X(67)),FB=Of(X(67)),tn=X(299),wx=({id:c,showReferenceContent:n=!1})=>{var N;const {handlers:{isWhiteboardPage:ba,redirectToPage:pa,sidebarAddBlock:Ba,queryBlockByUUID:Ia},renderers:{Breadcrumb:hb,PageName:yb}}=FB.default.useContext(vi);var Yb="";let rc=mg(c)?"B":"P",Ac="";if(mg(c)){Yb=Ia(c);if(!Yb)return(0,tn.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});
Ac=Yb.title;Yb="whiteboard-shape"===(null==(N=Yb.properties)?void 0:N["ls-type"])?"link-to-whiteboard":"link-to-block"}else Yb=ba(c)?"link-to-whiteboard":"link-to-page";N=Ac&&23<Ac.length?Ac.slice(0,20)+"...":Ac;return(0,tn.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Yc=>{Yc.stopPropagation();Yc.shiftKey?Ba(c,"B"===rc?"block":"page"):pa(c)},children:[(0,tn.jsx)(hh,{name:Yb}),(0,tn.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===
rc?(0,tn.jsx)(yb,{pageName:c}):(0,tn.jsxs)(tn.Fragment,{children:[(0,tn.jsx)(hb,{levelLimit:1,blockId:c,endSeparator:n}),n&&N]})})]})},kk=Of(X(67)),Lk=X(67),GB=["children"],Xr="undefined"!==typeof document?Lk.useLayoutEffect:Lk.useEffect,sh=Of(X(67)),Uh=X(67),HB=X(68),Oq,dk,IB="undefined"!=typeof document?Uh.useLayoutEffect:Uh.useEffect;!function(c){c[c.DEBUG=0]="DEBUG";c[c.INFO=1]="INFO";c[c.WARN=2]="WARN";c[c.ERROR=3]="ERROR"}(dk||={});var JB=((Oq={})[dk.DEBUG]="debug",Oq[dk.INFO]="log",Oq[dk.WARN]=
"warn",Oq[dk.ERROR]="error",Oq),un=rh(function(){var c=ag(dk.ERROR);return{log:ag(function(n,N,ba){var pa;void 0===ba&&(ba=dk.INFO);ba>=(null!=(pa=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?pa:c(4))&&console[JB[ba]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",n,N)}),logLevel:c}},[],{singleton:!0}),Mk=rh(function(){var c=dh(),n=dh(),N=ag(0),ba=dh(),pa=ag(0),Ba=dh(),Ia=dh(),hb=ag(0),yb=ag(0),Yb=ag(0),rc=ag(0),Ac=dh(),Yc=dh(),ud=ag(!1),
pd=ag(!1);return Sg($f(c,Fg(function(Gd){return Gd.scrollTop})),n),Sg($f(c,Fg(function(Gd){return Gd.scrollHeight})),Ia),Sg(n,pa),{scrollContainerState:c,scrollTop:n,viewportHeight:Ba,headerHeight:hb,fixedHeaderHeight:yb,fixedFooterHeight:Yb,footerHeight:rc,scrollHeight:Ia,smoothScrollTargetReached:ba,react18ConcurrentRendering:pd,scrollTo:Ac,scrollBy:Yc,statefulScrollTop:pa,deviation:N,scrollingInProgress:ud}},[],{singleton:!0}),qi={lvl:0},Kt=rh(function(){return{recalcInProgress:ag(!1)}},[],{singleton:!0}),
KB={offsetHeight:"height",offsetWidth:"width"},Gm=rh(function(c){var n=c[0].log,N=c[1].recalcInProgress;c=dh();var ba=dh(),pa=gj(ba,0),Ba=dh(),Ia=dh(),hb=ag(0),yb=ag([]),Yb=ag(void 0),rc=ag(void 0),Ac=ag(function(sd,yd){return Sb(sd,KB[yd])}),Yc=ag(void 0),ud=ag(0),pd={offsetTree:[],sizeTree:qi,groupOffsetTree:qi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},Gd=gj($f(c,xh(yb,n,ud),zi(th,pd),vh()),pd);Sg($f(yb,Ah(function(sd){return 0<sd.length}),xh(Gd,ud),Fg(function(sd){var yd=sd[0],Rd=sd[1],
Id=sd[2];sd=yd.reduce(function(Ve,Xe,hg){return Ld(Ve,Xe,Zi(Xe,Rd.offsetTree,Id)||hg)},qi);return Fa({},Rd,{groupIndices:yd,groupOffsetTree:sd})})),Gd);Sg($f(ba,xh(Gd),Ah(function(sd){return sd[0]<sd[1].lastIndex}),Fg(function(sd){var yd=sd[1];return[{startIndex:sd[0],endIndex:yd.lastIndex,size:yd.lastSize}]})),c);Sg(Yb,rc);var Qd=gj($f(Yb,Fg(function(sd){return void 0===sd})),!0);Sg($f(rc,Ah(function(sd){return void 0!==sd&&Gd(4).sizeTree===qi}),Fg(function(sd){return[{startIndex:0,endIndex:0,size:sd}]})),
c);pd=Oi($f(c,xh(Gd),zi(function(sd,yd){yd=yd[1];return{changed:yd!==sd.sizes,sizes:yd}},{changed:!1,sizes:pd}),Fg(function(sd){return sd.changed})));fi($f(hb,zi(function(sd,yd){return{diff:sd.prev-yd,prev:yd}},{diff:0,prev:0}),Fg(function(sd){return sd.diff})),function(sd){0<sd?(N(0,!0),Ba(0,sd)):0>sd&&Ia(0,sd)});fi($f(hb,xh(n)),function(sd){0>sd[0]&&(0,sd[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:hb},
dk.ERROR)});n=Oi(Ba);Sg($f(Ba,xh(Gd),Fg(function(sd){var yd=sd[0];sd=sd[1];if(0<sd.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return ye(sd.sizeTree).reduce(function(Rd,Id){var Ve=Id.k;Id=Id.v;return{ranges:[].concat(Rd.ranges,[{startIndex:Rd.prevIndex,endIndex:Ve+yd-1,size:Rd.prevSize}]),prevIndex:Ve+yd,prevSize:Id}},{ranges:[],prevIndex:0,prevSize:sd.lastSize}).ranges})),c);var hd=Oi($f(Ia,xh(Gd,ud),Fg(function(sd){return Zi(-sd[0],sd[1].offsetTree,sd[2])})));
return Sg($f(Ia,xh(Gd,ud),Fg(function(sd){var yd=sd[0],Rd=sd[1];sd=sd[2];if(0<Rd.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Id=ye(Rd.sizeTree).reduce(function(Ve,Xe){return Ld(Ve,Math.max(0,Xe.k+yd),Xe.v)},qi);return Fa({},Rd,{sizeTree:Id},ji(Rd.offsetTree,0,Id,sd))})),Gd),{data:Yc,totalCount:ba,sizeRanges:c,groupIndices:yb,defaultItemSize:rc,fixedItemSize:Yb,unshiftWith:Ba,shiftWith:Ia,shiftWithOffset:hd,beforeUnshiftWith:n,firstItemIndex:hb,gap:ud,
sizes:Gd,listRefresh:pd,statefulTotalCount:pa,trackItemSizes:Qd,itemSize:Ac}},Ph(un,Kt),{singleton:!0}),LB="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Pq=rh(function(c){function n(){Qd&&(Qd(),Qd=null);sd&&(sd(),sd=null);hd&&(clearTimeout(hd),hd=null);hb(0,!1)}var N=c[0],ba=N.sizes,pa=N.totalCount,Ba=N.listRefresh;N=N.gap;var Ia=c[1],hb=Ia.scrollingInProgress,yb=Ia.viewportHeight,Yb=Ia.scrollTo,rc=Ia.smoothScrollTargetReached,Ac=Ia.headerHeight,Yc=Ia.footerHeight,
ud=Ia.fixedHeaderHeight;Ia=Ia.fixedFooterHeight;c=c[2].log;var pd=dh(),Gd=ag(0),Qd=null,hd=null,sd=null;return Sg($f(pd,xh(ba,yb,pa,Gd,Ac,Yc,c),xh(N,ud,Ia),Fg(function(yd){var Rd=yd[0],Id=Rd[0],Ve=Rd[1],Xe=Rd[2],hg=Rd[3],kf=Rd[4],Rf=Rd[5],Lg=Rd[6],ah=Rd[7],Gg=yd[1];Rd=yd[2];yd=yd[3];var bh=pj(Id),Df=bh.align,If=bh.behavior,zf=bh.offset;--hg;bh=Ih(bh,Ve,hg);Rf=Zi(bh,Ve.offsetTree,Gg)+Rf;"end"===Df?(Rf+=Rd+Fd(Ve.sizeTree,bh)[1]-Xe+yd,bh===hg&&(Rf+=Lg)):"center"===Df?Rf+=(Rd+Fd(Ve.sizeTree,bh)[1]-Xe+
yd)/2:Rf-=kf;zf&&(Rf+=zf);var Yf=function(Hh){n();Hh?(ah("retrying to scroll to",{location:Id},dk.DEBUG),pd(0,Id)):ah("list did not change, scroll successful",{},dk.DEBUG)};if(n(),"smooth"===If){var ch=!1;sd=fi(Ba,function(Hh){ch=ch||Hh});Qd=Sj(rc,function(){Yf(ch)})}else Qd=Sj($f(Ba,function(Hh){var Wi=setTimeout(function(){Hh(!1)},150);return function($h){$h&&(Hh(!0),clearTimeout(Wi))}}),Yf);hd=setTimeout(function(){n()},1200);hb(0,!0);return ah("scrolling from index to",{index:bh,top:Rf,behavior:If},
dk.DEBUG),{top:Rf,behavior:If}})),Yb),{scrollToIndex:pd,topListHeight:Gd}},Ph(Gm,Mk,un),{singleton:!0}),MB={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Qq=rh(function(c){var n=c[0],N=n.scrollContainerState;c=n.scrollTop;var ba=n.viewportHeight,pa=n.headerHeight,Ba=n.footerHeight,Ia=n.scrollBy;n=ag(!1);var hb=ag(!0),yb=dh(),Yb=dh(),rc=ag(4),Ac=ag(0),Yc=gj($f(Am($f(Mh(c),gk(1),Jj(!0)),$f(Mh(c),gk(1),Jj(!1),Fl(100))),vh()),
!1),ud=gj($f(Am($f(Ia,Jj(!0)),$f(Ia,Jj(!1),Fl(200))),vh()),!1);Sg($f(Ci(Mh(c),Mh(Ac)),Fg(function(pd){return pd[0]<=pd[1]}),vh()),hb);Sg($f(hb,hk(50)),Yb);ba=Oi($f(Ci(N,Mh(ba),Mh(pa),Mh(Ba),Mh(rc)),zi(function(pd,Gd){var Qd,hd,sd=Gd[0],yd=sd.scrollTop;sd=sd.scrollHeight;var Rd=Gd[1],Id={viewportHeight:Rd,scrollTop:yd,scrollHeight:sd};return yd+Rd-sd>-Gd[4]?(yd>pd.state.scrollTop?(Qd="SCROLLED_DOWN",hd=pd.state.scrollTop-yd):(Qd="SIZE_DECREASED",hd=pd.state.scrollTop-yd||pd.scrollTopDelta),{atBottom:!0,
state:Id,atBottomBecause:Qd,scrollTopDelta:hd}):{atBottom:!1,notAtBottomBecause:Id.scrollHeight>pd.state.scrollHeight?"SIZE_INCREASED":Rd<pd.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":yd<pd.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Id}},MB),vh(function(pd,Gd){return pd&&pd.atBottom===Gd.atBottom})));pa=gj($f(N,zi(function(pd,Gd){var Qd=Gd.scrollTop,hd=Gd.scrollHeight;Gd=Gd.viewportHeight;return 1.01>Math.abs(pd.scrollHeight-hd)?{scrollTop:Qd,scrollHeight:hd,
jump:0,changed:!1}:pd.scrollTop!==Qd&&1>hd-(Qd+Gd)?{scrollHeight:hd,scrollTop:Qd,jump:pd.scrollTop-Qd,changed:!0}:{scrollHeight:hd,scrollTop:Qd,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ah(function(pd){return pd.changed}),Fg(function(pd){return pd.jump})),0);Sg($f(ba,Fg(function(pd){return pd.atBottom})),n);Sg($f(n,hk(50)),yb);Ba=ag("down");Sg($f(N,Fg(function(pd){return pd.scrollTop}),vh(),zi(function(pd,Gd){return ud(4)?{direction:pd.direction,prevScrollTop:Gd}:{direction:Gd<
pd.prevScrollTop?"up":"down",prevScrollTop:Gd}},{direction:"down",prevScrollTop:0}),Fg(function(pd){return pd.direction})),Ba);Sg($f(N,hk(50),Jj("none")),Ba);N=ag(0);return Sg($f(Yc,Ah(function(pd){return!pd}),Jj(0)),N),Sg($f(c,hk(100),xh(Yc),Ah(function(pd){return!!pd[1]}),zi(function(pd,Gd){return[pd[1],Gd[0]]},[0,0]),Fg(function(pd){return pd[1]-pd[0]})),N),{isScrolling:Yc,isAtTop:hb,isAtBottom:n,atBottomState:ba,atTopStateChange:Yb,atBottomStateChange:yb,scrollDirection:Ba,atBottomThreshold:rc,
atTopThreshold:Ac,scrollVelocity:N,lastJumpDueToItemResize:pa}},Ph(Mk)),wo=rh(function(c){var n=c[0].log;c=ag(!1);var N=Oi($f(c,Ah(function(ba){return ba}),vh()));return fi(c,function(ba){ba&&n(4)("props updated",{},dk.DEBUG)}),{propsReady:c,didMount:N}},Ph(un),{singleton:!0}),Lt=rh(function(c){var n=c[0],N=n.sizes,ba=n.listRefresh;n=n.defaultItemSize;var pa=c[1].scrollTop,Ba=c[2].scrollToIndex;c=c[3].didMount;var Ia=ag(!0),hb=ag(0);return Sg($f(c,xh(hb),Ah(function(yb){return!!yb[1]}),Jj(!1)),Ia),
fi($f(Ci(ba,c),xh(Ia,N,n),Ah(function(yb){var Yb=yb[1],rc=yb[3];return yb[0][1]&&(yb[2].sizeTree!==qi||void 0!==rc)&&!Yb}),xh(hb)),function(yb){var Yb=yb[1];setTimeout(function(){Sj(pa,function(){Ia(0,!0)});Ba(0,Yb)})}),{scrolledToInitialItem:Ia,initialTopMostItemIndex:hb}},Ph(Gm,Mk,Pq,wo),{singleton:!0}),NB=rh(function(c){function n(Gd){yb(0,{index:"LAST",align:"end",behavior:Gd})}function N(Gd){var Qd=Sj(hb,function(hd){!Gd||hd.atBottom||"SIZE_INCREASED"!==hd.notAtBottomBecause||pd||(Ac(4)("scrolling to bottom due to increased size",
{},dk.DEBUG),n("auto"))});setTimeout(Qd,100)}var ba=c[0],pa=ba.totalCount,Ba=ba.listRefresh,Ia=c[1];ba=Ia.isAtBottom;var hb=Ia.atBottomState,yb=c[2].scrollToIndex;Ia=c[3].scrolledToInitialItem;var Yb=c[4],rc=Yb.propsReady;Yb=Yb.didMount;var Ac=c[5].log;c=c[6].scrollingInProgress;var Yc=ag(!1),ud=dh(),pd=null;return fi($f(Ci($f(Mh(pa),gk(1)),Yb),xh(Mh(Yc),ba,Ia,c),Fg(function(Gd){var Qd=Gd[0],hd=Qd[0];Qd=Qd[1]&&Gd[3];var sd="auto";Qd&&(sd=Gd[1],Gd=Gd[2]||Gd[4],sd="function"==typeof sd?Pn(sd(Gd)):Gd&&
Pn(sd),Qd=Qd&&!!sd);return{totalCount:hd,shouldFollow:Qd,followOutputBehavior:sd}}),Ah(function(Gd){return Gd.shouldFollow})),function(Gd){var Qd=Gd.totalCount,hd=Gd.followOutputBehavior;pd&&(pd(),pd=null);pd=Sj(Ba,function(){Ac(4)("following output to ",{totalCount:Qd},dk.DEBUG);n(hd);pd=null})}),fi($f(Ci(Mh(Yc),pa,rc),Ah(function(Gd){return Gd[0]&&Gd[2]}),zi(function(Gd,Qd){Qd=Qd[1];return{refreshed:Gd.value===Qd,value:Qd}},{refreshed:!1,value:0}),Ah(function(Gd){return Gd.refreshed}),xh(Yc,pa)),
function(Gd){N(!1!==Gd[1])}),fi(ud,function(){N(!1!==Yc(4))}),fi(Ci(Mh(Yc),hb),function(Gd){var Qd=Gd[1];Gd[0]&&!Qd.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===Qd.notAtBottomBecause&&n("auto")}),{followOutput:Yc,autoscrollToBottom:ud}},Ph(Gm,Qq,Pq,Lt,wo,un,Mk)),xx=rh(function(c){var n=c[0],N=n.totalCount,ba=n.groupIndices;n=n.sizes;var pa=c[1];c=pa.scrollTop;pa=pa.headerHeight;var Ba=dh(),Ia=dh(),hb=Oi($f(Ba,Fg(ll)));return Sg($f(hb,Fg(function(yb){return yb.totalCount})),N),Sg($f(hb,Fg(function(yb){return yb.groupIndices})),
ba),Sg($f(Ci(c,n,pa),Ah(function(yb){return yb[1].groupOffsetTree!==qi}),Fg(function(yb){return Fd(yb[1].groupOffsetTree,Math.max(yb[0]-yb[2],0),"v")[0]}),vh(),Fg(function(yb){return[yb]})),Ia),{groupCounts:Ba,topItemsIndexes:Ia}},Ph(Gm,Mk)),Mt=rh(function(c){var n=c[0];c=n.scrollTop;var N=n.viewportHeight,ba=n.deviation,pa=n.headerHeight,Ba=n.fixedHeaderHeight;n=dh();var Ia=ag(0),hb=ag(0),yb=ag(0);c=gj($f(Ci(Mh(c),Mh(N),Mh(pa),Mh(n,Pm),Mh(yb),Mh(Ia),Mh(Ba),Mh(ba),Mh(hb)),Fg(function(Yb){var rc=Yb[0],
Ac=Yb[1],Yc=Yb[2],ud=Yb[3],pd=ud[0];ud=ud[1];var Gd=Yb[4],Qd=Yb[6],hd=Yb[7],sd=Yb[8],yd=rc-hd;Yb=Yb[5]+Qd;var Rd=Math.max(Yc-yd,0),Id="none",Ve="number"==typeof sd?sd:sd.top||0;sd="number"==typeof sd?sd:sd.bottom||0;return pd-=hd,ud+=Yc+Qd,pd+(Yc+Qd)>rc+Yb-Ve&&(Id="up"),ud-hd<rc-Rd+Ac+sd&&(Id="down"),"none"!==Id?[Math.max(yd-Yc-Qn(Gd,"top",Id)-Ve,0),yd-Rd-Qd+Ac+Qn(Gd,"bottom",Id)+sd]:null}),Ah(function(Yb){return null!=Yb}),vh(Pm)),[0,0]);return{listBoundary:n,overscan:yb,topListHeight:Ia,increaseViewportBy:hb,
visibleRange:c}},Ph(Mk),{singleton:!0}),yx={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},xp=rh(function(c){var n=c[0],N=n.sizes,ba=n.totalCount,pa=n.data,Ba=n.firstItemIndex,Ia=n.gap,hb=c[1],yb=c[2],Yb=yb.visibleRange;n=yb.listBoundary;yb=yb.topListHeight;var rc=c[3],Ac=rc.scrolledToInitialItem,Yc=rc.initialTopMostItemIndex;rc=c[4].topListHeight;var ud=c[5],pd=c[6].didMount,Gd=c[7].recalcInProgress;c=ag([]);var Qd=dh();Sg(hb.topItemsIndexes,
c);N=gj($f(Ci(pd,Gd,Mh(Yb,Pm),Mh(ba),Mh(N),Mh(Yc),Ac,Mh(c),Mh(Ba),Mh(Ia),pa),Ah(function(hd){return hd[0]&&!hd[1]}),Fg(function(hd){var sd=hd[2],yd=sd[0],Rd=sd[1];sd=hd[3];var Id=hd[5],Ve=hd[6],Xe=hd[7],hg=hd[8],kf=hd[9],Rf=hd[10];hd=hd[4];var Lg=hd.sizeTree,ah=hd.offsetTree;if(0===sd||0===yd&&0===Rd)return Fa({},yx,{totalCount:sd});if(Lg===qi)return Ko(function($h,Xg,Li){return Xg.groupOffsetTree!==qi?($h=Di($h,Xg),[{index:Fd(Xg.groupOffsetTree,$h)[0],size:0,offset:0},{index:$h,size:0,offset:0,data:Li&&
Li[0]}]):[{index:$h,size:0,offset:0,data:Li&&Li[0]}]}("number"==typeof Id?Id:"LAST"===Id.index?sd-1:Id.index,hd,Rf),[],sd,kf,hd,hg);Id=[];if(0<Xe.length){var Gg,bh=Xe[0],Df=Xe[Xe.length-1],If=0;for(Lg=Tb(Vg(Lg,bh,Df));!(Gg=Lg()).done;){var zf=Gg.value;Gg=zf.value;var Yf=Math.min(zf.end,Df);for(zf=Math.max(zf.start,bh);zf<=Yf;zf++)Id.push({index:zf,size:Gg,offset:If,data:Rf&&Rf[zf]}),If+=Gg}}if(!Ve)return Ko([],Id,sd,kf,hd,hg);var ch=0<Xe.length?Xe[Xe.length-1]+1:0,Hh=function($h,Xg,Li,Qi){var nj,
Ek;return void 0===Qi&&(Qi=0),0<Qi&&(Xg=Math.max(Xg,$h[mh($h,Qi,Gf)].offset)),Dg((Ek=mh($h,Xg,pi),nj=mh($h,Li,pi,Ek),$h.slice(Ek,nj+1)),Eh)}(ah,yd,Rd,ch);if(0===Hh.length)return null;var Wi=sd-1;return Ko(Pj([],function($h){for(var Xg,Li=Tb(Hh);!(Xg=Li()).done;){var Qi=Xg.value,nj=Qi.value;Xg=nj.offset;var Ek=Qi.start,br=nj.size;nj.offset<yd&&(nj=(Ek+=Math.floor((yd-nj.offset+kf)/(br+kf)))-Qi.start,Xg+=nj*br+nj*kf);Ek<ch&&(Xg+=(ch-Ek)*br,Ek=ch);for(Qi=Math.min(Qi.end,Wi);Ek<=Qi&&!(Xg>=Rd);Ek++)$h.push({index:Ek,
size:br,offset:Xg,data:Rf&&Rf[Ek]}),Xg+=br+kf}}),Id,sd,kf,hd,hg)}),Ah(function(hd){return null!==hd}),vh()),yx);return Sg($f(pa,Ah(function(hd){return void 0!==hd}),Fg(function(hd){return hd.length})),ba),Sg($f(N,Fg(function(hd){return hd.topListHeight})),rc),Sg(rc,yb),Sg($f(N,Fg(function(hd){return[hd.top,hd.bottom]})),n),Sg($f(N,Fg(function(hd){return hd.items})),Qd),Fa({listState:N,topItemsIndexes:c,endReached:Oi($f(N,Ah(function(hd){return 0<hd.items.length}),xh(ba,pa),Ah(function(hd){var sd=
hd[0].items;return sd[sd.length-1].originalIndex===hd[1]-1}),Fg(function(hd){return[hd[1]-1,hd[2]]}),vh(Pm),Fg(function(hd){return hd[0]}))),startReached:Oi($f(N,hk(200),Ah(function(hd){var sd=hd.items;return 0<sd.length&&sd[0].originalIndex===hd.topItems.length}),Fg(function(hd){return hd.items[0].index}),vh())),rangeChanged:Oi($f(N,Ah(function(hd){return 0<hd.items.length}),Fg(function(hd){hd=hd.items;for(var sd=0,yd=hd.length-1;"group"===hd[sd].type&&sd<yd;)sd++;for(;"group"===hd[yd].type&&yd>
sd;)yd--;return{startIndex:hd[sd].index,endIndex:hd[yd].index}}),vh(Gk))),itemsRendered:Qd},ud)},Ph(Gm,xx,Mt,Lt,Pq,Qq,wo,Kt),{singleton:!0}),OB=rh(function(c){var n=c[0],N=n.sizes,ba=n.firstItemIndex,pa=n.data;n=n.gap;var Ba=c[1].listState;c=c[2].didMount;var Ia=ag(0);return Sg($f(c,xh(Ia),Ah(function(hb){return 0!==hb[1]}),xh(N,ba,n,pa),Fg(function(hb){var yb=hb[0][1],Yb=hb[1],rc=hb[2],Ac=hb[3];hb=hb[4];var Yc=void 0===hb?[]:hb;hb=0;if(0<Yb.groupIndices.length)for(var ud,pd=Tb(Yb.groupIndices);!((ud=
pd()).done||ud.value-hb>=yb);)hb++;yb+=hb;return Ko(Array.from({length:yb}).map(function(Gd,Qd){return{index:Qd,size:0,offset:0,data:Yc[Qd]}}),[],yb,Ac,Yb,rc)})),Ba),{initialItemCount:Ia}},Ph(Gm,xp,wo),{singleton:!0}),zx=rh(function(c){c=c[0].scrollVelocity;var n=ag(!1),N=dh(),ba=ag(!1);return Sg($f(c,xh(ba,n,N),Ah(function(pa){return!!pa[1]}),Fg(function(pa){var Ba=pa[0],Ia=pa[1],hb=pa[2];pa=pa[3];var yb=Ia.enter;if(hb){if((0,Ia.exit)(Ba,pa))return!1}else if(yb(Ba,pa))return!0;return hb}),vh()),
n),fi($f(Ci(n,c,N),xh(ba)),function(pa){var Ba=pa[0];pa=pa[1];return Ba[0]&&pa&&pa.change&&pa.change(Ba[1],Ba[2])}),{isSeeking:n,scrollSeekConfiguration:ba,scrollVelocity:c,scrollSeekRangeChanged:N}},Ph(Qq),{singleton:!0}),PB=rh(function(c){c=c[0].topItemsIndexes;var n=ag(0);return Sg($f(n,Ah(function(N){return 0<N}),Fg(function(N){return Array.from({length:N}).map(function(ba,pa){return pa})})),c),{topItemCount:n}},Ph(xp)),Nt=rh(function(c){var n=c[0],N=n.footerHeight,ba=n.headerHeight,pa=n.fixedHeaderHeight;
n=n.fixedFooterHeight;var Ba=c[1].listState;c=dh();N=gj($f(Ci(N,n,ba,pa,Ba),Fg(function(Ia){var hb=Ia[4];return Ia[0]+Ia[1]+Ia[2]+Ia[3]+hb.offsetBottom+hb.bottom})),0);return Sg(Mh(N),c),{totalListHeight:N,totalListHeightChanged:c}},Ph(Mk,xp),{singleton:!0}),QB=Qm(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),RB=rh(function(c){function n(Qd){0<Qd?(ba(0,{top:-Qd,behavior:"auto"}),Ba(0,0)):(Ba(0,0),ba(0,{top:-Qd,behavior:"auto"}))}var N=c[0],ba=N.scrollBy,pa=
N.scrollTop,Ba=N.deviation,Ia=N.scrollingInProgress,hb=c[1];N=hb.isScrolling;var yb=hb.isAtBottom,Yb=hb.scrollDirection,rc=c[3],Ac=rc.beforeUnshiftWith,Yc=rc.shiftWithOffset,ud=rc.sizes;rc=rc.gap;var pd=c[4].log,Gd=c[5].recalcInProgress;c=Oi($f(c[2].listState,xh(hb.lastJumpDueToItemResize),zi(function(Qd,hd){var sd=Qd[1],yd=hd[0],Rd=yd.items,Id=yd.totalCount;yd=yd.bottom+yd.offsetBottom;var Ve=0;return Qd[2]===Id&&0<sd.length&&0<Rd.length&&(0===Rd[0].originalIndex&&0===sd[0].originalIndex||0!=(Ve=
yd-Qd[3])&&(Ve+=hd[1])),[Ve,Rd,Id,yd]},[0,[],0,0]),Ah(function(Qd){return 0!==Qd[0]}),xh(pa,Yb,Ia,yb,pd),Ah(function(Qd){return!Qd[3]&&0!==Qd[1]&&"up"===Qd[2]}),Fg(function(Qd){var hd=Qd[0][0];return(0,Qd[5])("Upward scrolling compensation",{amount:hd},dk.DEBUG),hd})));return fi($f(c,xh(Ba,N)),function(Qd){var hd=Qd[0],sd=Qd[1];Qd[2]&&QB()?Ba(0,sd-hd):n(-hd)}),fi($f(Ci(gj(N,!1),Ba,Gd),Ah(function(Qd){return!Qd[0]&&!Qd[2]&&0!==Qd[1]}),Fg(function(Qd){return Qd[1]}),hk(1)),n),Sg($f(Yc,Fg(function(Qd){return{top:-Qd}})),
ba),fi($f(Ac,xh(ud,rc),Fg(function(Qd){var hd=Qd[0];return hd*Qd[1].lastSize+hd*Qd[2]})),function(Qd){Ba(0,Qd);requestAnimationFrame(function(){Rj(ba,{top:Qd});requestAnimationFrame(function(){Ba(0,0);Gd(0,!1)})})}),{deviation:Ba}},Ph(Mk,Qq,xp,Gm,un,Kt)),SB=rh(function(c){var n=c[0].totalListHeight,N=c[1].didMount,ba=c[2].scrollTo;c=ag(0);return fi($f(N,xh(c),Ah(function(pa){return 0!==pa[1]}),Fg(function(pa){return{top:pa[1]}})),function(pa){Sj($f(n,Ah(function(Ba){return 0!==Ba})),function(){setTimeout(function(){ba(0,
pa)})})}),{initialScrollTop:c}},Ph(Nt,wo,Mk),{singleton:!0}),TB=rh(function(c){var n=c[0].viewportHeight;c=c[1].totalListHeight;var N=ag(!1);return{alignToBottom:N,paddingTopAddition:gj($f(Ci(N,n,c),Ah(function(ba){return ba[0]}),Fg(function(ba){return Math.max(0,ba[1]-ba[2])}),vh()),0)}},Ph(Mk,Nt),{singleton:!0}),Ax=rh(function(c){var n=c[0];c=n.scrollTo;n=n.scrollContainerState;var N=dh(),ba=dh(),pa=dh(),Ba=ag(!1),Ia=ag(void 0);return Sg($f(Ci(N,ba),Fg(function(hb){var yb=hb[0];return{scrollTop:Math.max(0,
yb.scrollTop-hb[1].offsetTop),scrollHeight:yb.scrollHeight,viewportHeight:yb.viewportHeight}})),n),Sg($f(c,xh(ba),Fg(function(hb){var yb=hb[0];return Fa({},yb,{top:yb.top+hb[1].offsetTop})})),pa),{useWindowScroll:Ba,customScrollParent:Ia,windowScrollContainerState:N,windowViewportRect:ba,windowScrollTo:pa}},Ph(Mk)),UB=["done","behavior","align"],VB=rh(function(c){var n=c[0],N=n.sizes,ba=n.totalCount;n=n.gap;var pa=c[1],Ba=pa.scrollTop,Ia=pa.viewportHeight,hb=pa.headerHeight,yb=pa.fixedHeaderHeight,
Yb=pa.fixedFooterHeight,rc=pa.scrollingInProgress;c=c[2].scrollToIndex;pa=dh();return Sg($f(pa,xh(N,Ia,ba,hb,yb,Yb,Ba),xh(n),Fg(function(Ac){var Yc=Ac[0],ud=Yc[0],pd=Yc[1],Gd=Yc[2],Qd=Yc[3],hd=Yc[4],sd=Yc[5],yd=Yc[6];Yc=Yc[7];var Rd=Ac[1];Ac=ud.done;var Id=ud.behavior,Ve=ud.align,Xe=Ec(ud,UB),hg=null;ud=Ih(ud,pd,Qd-1);hd=Zi(ud,pd.offsetTree,Rd)+hd+sd;return hd<Yc+sd?hg=Fa({},Xe,{behavior:Id,align:null!=Ve?Ve:"start"}):hd+Fd(pd.sizeTree,ud)[1]>Yc+Gd-yd&&(hg=Fa({},Xe,{behavior:Id,align:null!=Ve?Ve:
"end"})),hg?Ac&&Sj($f(rc,gk(1),Ah(function(kf){return!1===kf})),Ac):Ac&&Ac(),hg}),Ah(function(Ac){return null!==Ac})),c),{scrollIntoView:pa}},Ph(Gm,Mk,Pq,xp,un),{singleton:!0}),WB=["listState","topItemsIndexes"],XB=rh(function(c){return Fa({},c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},Ph(Mt,OB,wo,zx,Nt,SB,TB,Ax,VB)),Bx=rh(function(c){var n=c[0],N=n.totalCount,ba=n.sizeRanges,pa=n.fixedItemSize,Ba=n.defaultItemSize,Ia=n.trackItemSizes,hb=n.itemSize,yb=n.data,Yb=n.firstItemIndex,rc=n.groupIndices,
Ac=n.statefulTotalCount;n=n.gap;var Yc=c[1],ud=Yc.initialTopMostItemIndex;Yc=Yc.scrolledToInitialItem;var pd=c[2],Gd=c[3],Qd=c[4],hd=Qd.listState,sd=Qd.topItemsIndexes;Qd=Ec(Qd,WB);var yd=c[5].scrollToIndex,Rd=c[7].topItemCount,Id=c[8].groupCounts,Ve=c[9];c=c[10];return Sg(Qd.rangeChanged,Ve.scrollSeekRangeChanged),Sg($f(Ve.windowViewportRect,Fg(function(Xe){return Xe.visibleHeight})),pd.viewportHeight),Fa({totalCount:N,data:yb,firstItemIndex:Yb,sizeRanges:ba,initialTopMostItemIndex:ud,scrolledToInitialItem:Yc,
topItemsIndexes:sd,topItemCount:Rd,groupCounts:Id,fixedItemHeight:pa,defaultItemHeight:Ba,gap:n},Gd,{statefulTotalCount:Ac,listState:hd,scrollToIndex:yd,trackItemSizes:Ia,itemSize:hb,groupIndices:rc},Qd,Ve,pd,c)},Ph(Gm,Lt,Mk,NB,xp,Pq,RB,PB,xx,XB,un)),Cx=Qm(function(){if("undefined"==typeof document)return"sticky";var c=document.createElement("div");return c.style.position="-webkit-sticky","-webkit-sticky"===c.style.position?"-webkit-sticky":"sticky"}),Yr=sh.createContext(void 0),Dx=sh.createContext(void 0),
YB=["placeholder"],ZB=["style","children"],$B=["style","children"],aC=rh(function(){var c=ag(function(yb){return"Item "+yb}),n=ag(null),N=ag(function(yb){return"Group "+yb}),ba=ag({}),pa=ag(um),Ba=ag("div"),Ia=ag(fj),hb=function(yb,Yb){return void 0===Yb&&(Yb=null),gj($f(ba,Fg(function(rc){return rc[yb]}),vh()),Yb)};return{context:n,itemContent:c,groupContent:N,components:ba,computeItemKey:pa,headerFooterTag:Ba,scrollerRef:Ia,FooterComponent:hb("Footer"),HeaderComponent:hb("Header"),TopItemListComponent:hb("TopItemList"),
ListComponent:hb("List","div"),ItemComponent:hb("Item","div"),GroupComponent:hb("Group","div"),ScrollerComponent:hb("Scroller","div"),EmptyPlaceholder:hb("EmptyPlaceholder"),ScrollSeekPlaceholder:hb("ScrollSeekPlaceholder")}}),bC=rh(function(c){function n(pa,Ba,Ia){Sg($f(pa,xh(ba.components),Fg(function(hb){var yb,Yb=hb[0];hb=hb[1];return console.warn("react-virtuoso: "+Ia+" property is deprecated. Pass components."+Ba+" instead."),Fa({},hb,((yb={})[Ba]=Yb,yb))})),ba.components)}var N=c[0],ba=c[1];
c={item:Vj(ba.itemContent,"Rename the %citem%c prop to %citemContent."),group:Vj(ba.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Vj(N.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Vj(N.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Vj(N.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:dh(),maxHeightCacheSize:dh(),footer:dh(),header:dh(),HeaderContainer:dh(),
FooterContainer:dh(),ItemContainer:dh(),ScrollContainer:dh(),GroupContainer:dh(),ListContainer:dh(),emptyComponent:dh(),scrollSeek:dh()};return fi(c.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),fi(c.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
fi(c.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),fi(c.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),fi(c.scrollSeek,function(pa){var Ba=pa.placeholder;
pa=Ec(pa,YB);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");var Ia=ba.components;Ba=Fa({},(0,ba.components)(4),{ScrollSeekPlaceholder:Ba});Ia(0,Ba);(0,N.scrollSeekConfiguration)(0,pa)}),n(c.footer,"Footer","footer"),n(c.header,"Header","header"),n(c.ItemContainer,"Item","ItemContainer"),n(c.ListContainer,"List","ListContainer"),n(c.ScrollContainer,"Scroller","ScrollContainer"),
n(c.emptyComponent,"EmptyPlaceholder","emptyComponent"),n(c.GroupContainer,"Group","GroupContainer"),Fa({},N,ba,c)},Ph(Bx,aC)),cC=function(c){return sh.createElement("div",{style:{height:c.height}})},dC={position:Cx(),zIndex:1,overflowAnchor:"none"},eC={overflowAnchor:"none"},Ex=sh.memo(function(c){c=c.showTopList;c=void 0!==c&&c;var n=Bi("listState"),N=zl("sizeRanges"),ba=Bi("useWindowScroll"),pa=Bi("customScrollParent"),Ba=zl("windowScrollContainerState"),Ia=zl("scrollContainerState");ba=pa||ba?
Ba:Ia;var hb=Bi("itemContent"),yb=Bi("context"),Yb=Bi("groupContent");Ba=Bi("trackItemSizes");Ia=Bi("itemSize");var rc=Bi("log"),Ac=zl("gap");N=Xb(N,Ia,Ba,c?fj:ba,rc,Ac,pa).callbackRef;pa=sh.useState(0);var Yc=pa[0],ud=pa[1];Ot("deviation",function(Rd){Yc!==Rd&&ud(Rd)});pa=Bi("EmptyPlaceholder");var pd=Bi("ScrollSeekPlaceholder")||cC;ba=Bi("ListComponent");var Gd=Bi("ItemComponent"),Qd=Bi("GroupComponent"),hd=Bi("computeItemKey"),sd=Bi("isSeeking"),yd=0<Bi("groupIndices").length;Ba=Bi("paddingTopAddition");
Ba=c?{}:{boxSizing:"border-box",paddingTop:n.offsetTop+Ba,paddingBottom:n.offsetBottom,marginTop:Yc};return!c&&0===n.totalCount&&pa?(0,Uh.createElement)(pa,tj(pa,yb)):(0,Uh.createElement)(ba,Fa({},tj(ba,yb),{ref:N,style:Ba,"data-test-id":c?"virtuoso-top-item-list":"virtuoso-item-list"}),(c?n.topItems:n.items).map(function(Rd){var Id=Rd.originalIndex,Ve=hd(Id+n.firstItemIndex,Rd.data,yb);return sd?(0,Uh.createElement)(pd,Fa({},tj(pd,yb),{key:Ve,index:Rd.index,height:Rd.size,type:Rd.type||"item"},"group"===
Rd.type?{}:{groupIndex:Rd.groupIndex})):"group"===Rd.type?(0,Uh.createElement)(Qd,Fa({},tj(Qd,yb),{key:Ve,"data-index":Id,"data-known-size":Rd.size,"data-item-index":Rd.index,style:dC}),Yb(Rd.index)):(0,Uh.createElement)(Gd,Fa({},tj(Gd,yb),{key:Ve,"data-index":Id,"data-known-size":Rd.size,"data-item-index":Rd.index,"data-item-group-index":Rd.groupIndex,style:eC}),yd?hb(Rd.index,Rd.groupIndex,Rd.data,yb):hb(Rd.index,Rd.data,yb))}))}),fC={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},yp={width:"100%",height:"100%",position:"absolute",top:0},gC={width:"100%",position:Cx(),top:0},hC=sh.memo(function(){var c=Bi("HeaderComponent"),n=zl("headerHeight"),N=Bi("headerFooterTag"),ba=qc(function(Ba){return n(Sb(Ba,"height"))}),pa=Bi("context");return c?(0,Uh.createElement)(N,{ref:ba},(0,Uh.createElement)(c,tj(c,pa))):null}),iC=sh.memo(function(){var c=Bi("FooterComponent"),n=zl("footerHeight"),N=Bi("headerFooterTag"),ba=qc(function(Ba){return n(Sb(Ba,"height"))}),
pa=Bi("context");return c?(0,Uh.createElement)(N,{ref:ba},(0,Uh.createElement)(c,tj(c,pa))):null}),jC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),N=zl("viewportHeight"),ba=zl("fixedItemHeight"),pa=qc(Ni(N,function(Ba){return Sb(Ba,"height")}));return sh.useEffect(function(){n&&(N(n.viewportHeight),ba(n.itemHeight))},[n,N,ba]),sh.createElement("div",{style:yp,ref:pa,"data-viewport-type":"element"},c)},kC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),N=zl("windowViewportRect"),ba=zl("fixedItemHeight"),
pa=Bi("customScrollParent");pa=Rm(N,pa);return sh.useEffect(function(){n&&(ba(n.itemHeight),N({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:100}))},[n,N,ba]),sh.createElement("div",{ref:pa,style:yp,"data-viewport-type":"window"},c)},lC=function(c){c=c.children;var n=Bi("TopItemListComponent"),N=Bi("headerHeight");N=Fa({},gC,{marginTop:N+"px"});var ba=Bi("context");return(0,Uh.createElement)(n||"div",{style:N,context:ba},c)},Zr=tc(bC,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},sh.memo(function(c){var n=Bi("useWindowScroll"),N=0<Bi("topItemsIndexes").length,ba=Bi("customScrollParent"),pa=ba||n?kC:jC;return sh.createElement(ba||n?oC:nC,Fa({},c),sh.createElement(pa,null,sh.createElement(hC,null),sh.createElement(Ex,null),sh.createElement(iC,
null)),N&&sh.createElement(lC,null,sh.createElement(Ex,{showTopList:!0})))})),mC=Zr.Component,zl=Zr.usePublisher,Bi=Zr.useEmitterValue,Ot=Zr.useEmitter,nC=uq({usePublisher:zl,useEmitterValue:Bi,useEmitter:Ot}),oC=fm({usePublisher:zl,useEmitterValue:Bi,useEmitter:Ot}),Fx={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},pC={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Gx=Math.round,Hx=Math.ceil,$r=Math.floor,Pt=Math.min,zp=Math.max,
qC=rh(function(c){var n=c[0],N=n.overscan,ba=n.visibleRange,pa=n.listBoundary,Ba=c[1];n=Ba.scrollTop;var Ia=Ba.viewportHeight,hb=Ba.scrollBy,yb=Ba.scrollTo,Yb=Ba.smoothScrollTargetReached,rc=Ba.scrollContainerState,Ac=Ba.footerHeight;Ba=Ba.headerHeight;var Yc=c[2],ud=c[3],pd=c[4],Gd=pd.propsReady,Qd=pd.didMount,hd=c[5];pd=hd.windowViewportRect;var sd=hd.windowScrollTo,yd=hd.useWindowScroll,Rd=hd.customScrollParent;hd=hd.windowScrollContainerState;c=c[6];var Id=ag(0),Ve=ag(0),Xe=ag(Fx),hg=ag({height:0,
width:0}),kf=ag({height:0,width:0}),Rf=dh(),Lg=dh(),ah=ag(0),Gg=ag(void 0),bh=ag({row:0,column:0});Sg($f(Ci(Qd,Ve,Gg),Ah(function(Df){return 0!==Df[1]}),Fg(function(Df){return{items:Zo(0,Df[1]-1,Df[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Xe);Sg($f(Ci(Mh(Id),ba,Mh(bh,pq),Mh(kf,function(Df,If){return Df&&Df.width===If.width&&Df.height===If.height}),Gg),xh(hg),Fg(function(Df){var If=Df[0],zf=If[0],Yf=If[1],ch=Yf[0],Hh=Yf[1],Wi=If[2],$h=If[3],Xg=If[4],Li=Df[1];Df=Wi.row;
var Qi=Wi.column;If=$h.height;Yf=$h.width;var nj=Li.width;if(0===zf||0===nj)return Fx;if(0===Yf)return Fa({},pC,{items:Zo(0,0,Xg)});Qi=zp(1,$r((nj+Qi)/(Yf+Qi)));ch=Qi*$r((ch+Df)/(If+Df));Hh=Qi*Hx((Hh+Df)/(If+Df))-1;Hh=Pt(zf-1,zp(Hh,Qi-1));ch=Zo(Pt(Hh,zp(0,ch)),Hh,Xg);$h=em(Li,Wi,$h,ch);Wi=$h.top;$h=$h.bottom;zf=Hx(zf/Qi);return{items:ch,offsetTop:Wi,offsetBottom:zf*If+(zf-1)*Df-$h,top:Wi,bottom:$h,itemHeight:If,itemWidth:Yf}})),Xe);Sg($f(Gg,Ah(function(Df){return void 0!==Df}),Fg(function(Df){return Df.length})),
Id);Sg($f(hg,Fg(function(Df){return Df.height})),Ia);Sg($f(Ci(hg,kf,Xe,bh),Fg(function(Df){Df=em(Df[0],Df[3],Df[1],Df[2].items);return[Df.top,Df.bottom]}),vh(Pm)),pa);ba=Oi($f(Mh(Xe),Ah(function(Df){return 0<Df.items.length}),xh(Id),Ah(function(Df){var If=Df[0].items;return If[If.length-1].index===Df[1]-1}),Fg(function(Df){return Df[1]-1}),vh()));pa=Oi($f(Mh(Xe),Ah(function(Df){Df=Df.items;return 0<Df.length&&0===Df[0].index}),Jj(0),vh()));Ia=Oi($f(Mh(Xe),Ah(function(Df){return 0<Df.items.length}),
Fg(function(Df){Df=Df.items;return{startIndex:Df[0].index,endIndex:Df[Df.length-1].index}}),vh(Gk)));Sg(Ia,ud.scrollSeekRangeChanged);Sg($f(Rf,xh(hg,kf,Id,bh),Fg(function(Df){var If=Df[1],zf=Df[2],Yf=Df[3],ch=Df[4],Hh=pj(Df[0]);Df=Hh.align;var Wi=Hh.behavior,$h=Hh.offset;Hh=Hh.index;"LAST"===Hh&&(Hh=Yf-1);Yf=ym(If,ch,zf,zp(0,Hh,Pt(Yf-1,Hh)));return"end"===Df?Yf=Gx(Yf-If.height+zf.height):"center"===Df&&(Yf=Gx(Yf-If.height/2+zf.height/2)),$h&&(Yf+=$h),{top:Yf,behavior:Wi}})),yb);Qd=gj($f(Xe,Fg(function(Df){return Df.offsetBottom+
Df.bottom})),0);return Sg($f(pd,Fg(function(Df){return{width:Df.visibleWidth,height:Df.visibleHeight}})),hg),Fa({data:Gg,totalCount:Id,viewportDimensions:hg,itemDimensions:kf,scrollTop:n,scrollHeight:Lg,overscan:N,scrollBy:hb,scrollTo:yb,scrollToIndex:Rf,smoothScrollTargetReached:Yb,windowViewportRect:pd,windowScrollTo:sd,useWindowScroll:yd,customScrollParent:Rd,windowScrollContainerState:hd,deviation:ah,scrollContainerState:rc,footerHeight:Ac,headerHeight:Ba,initialItemCount:Ve,gap:bh},ud,{gridState:Xe,
totalListHeight:Qd},Yc,{startReached:pa,endReached:ba,rangeChanged:Ia,propsReady:Gd},c)},Ph(Mt,Mk,Qq,zx,wo,Ax,un)),rC=["placeholder"],sC=rh(function(){var c=ag(function(Yb){return"Item "+Yb}),n=ag({}),N=ag(null),ba=ag("virtuoso-grid-item"),pa=ag("virtuoso-grid-list"),Ba=ag(um),Ia=ag("div"),hb=ag(fj),yb=function(Yb,rc){return void 0===rc&&(rc=null),gj($f(n,Fg(function(Ac){return Ac[Yb]}),vh()),rc)};return{context:N,itemContent:c,components:n,computeItemKey:Ba,itemClassName:ba,listClassName:pa,headerFooterTag:Ia,
scrollerRef:hb,FooterComponent:yb("Footer"),HeaderComponent:yb("Header"),ListComponent:yb("List","div"),ItemComponent:yb("Item","div"),ScrollerComponent:yb("Scroller","div"),ScrollSeekPlaceholder:yb("ScrollSeekPlaceholder","div")}}),tC=rh(function(c){function n(pa,Ba,Ia){Sg($f(pa,xh(ba.components),Fg(function(hb){var yb,Yb=hb[0];hb=hb[1];return console.warn("react-virtuoso: "+Ia+" property is deprecated. Pass components."+Ba+" instead."),Fa({},hb,((yb={})[Ba]=Yb,yb))})),ba.components)}var N=c[0],
ba=c[1];c={item:Vj(ba.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:dh(),ScrollContainer:dh(),ListContainer:dh(),emptyComponent:dh(),scrollSeek:dh()};return fi(c.scrollSeek,function(pa){var Ba=pa.placeholder;pa=Ec(pa,rC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");var Ia=ba.components;Ba=Fa({},(0,ba.components)(4),{ScrollSeekPlaceholder:Ba});Ia(0,Ba);
(0,N.scrollSeekConfiguration)(0,pa)}),n(c.ItemContainer,"Item","ItemContainer"),n(c.ListContainer,"List","ListContainer"),n(c.ScrollContainer,"Scroller","ScrollContainer"),Fa({},N,ba,c)},Ph(qC,sC)),uC=sh.memo(function(){var c=Dj("gridState"),n=Dj("listClassName"),N=Dj("itemClassName"),ba=Dj("itemContent"),pa=Dj("computeItemKey"),Ba=Dj("isSeeking"),Ia=Ml("scrollHeight"),hb=Dj("ItemComponent"),yb=Dj("ListComponent"),Yb=Dj("ScrollSeekPlaceholder"),rc=Dj("context"),Ac=Ml("itemDimensions"),Yc=Ml("gap"),
ud=Dj("log"),pd=qc(function(Gd){Ia(Gd.parentElement.parentElement.scrollHeight);var Qd=Gd.firstChild;Qd&&Ac(Qd.getBoundingClientRect());Yc({row:Um("row-gap",getComputedStyle(Gd).rowGap,ud),column:Um("column-gap",getComputedStyle(Gd).columnGap,ud)})});return(0,Uh.createElement)(yb,Fa({ref:pd,className:n},tj(yb,rc),{style:{paddingTop:c.offsetTop,paddingBottom:c.offsetBottom}}),c.items.map(function(Gd){var Qd=pa(Gd.index,Gd.data,rc);return Ba?(0,Uh.createElement)(Yb,Fa({key:Qd},tj(Yb,rc),{index:Gd.index,
height:c.itemHeight,width:c.itemWidth})):(0,Uh.createElement)(hb,Fa({},tj(hb,rc),{className:N,"data-index":Gd.index,key:Qd}),ba(Gd.index,Gd.data,rc))}))}),vC=sh.memo(function(){var c=Dj("HeaderComponent"),n=Ml("headerHeight"),N=Dj("headerFooterTag"),ba=qc(function(Ba){return n(Sb(Ba,"height"))}),pa=Dj("context");return c?(0,Uh.createElement)(N,{ref:ba},(0,Uh.createElement)(c,tj(c,pa))):null}),wC=sh.memo(function(){var c=Dj("FooterComponent"),n=Ml("footerHeight"),N=Dj("headerFooterTag"),ba=qc(function(Ba){return n(Sb(Ba,
"height"))}),pa=Dj("context");return c?(0,Uh.createElement)(N,{ref:ba},(0,Uh.createElement)(c,tj(c,pa))):null}),xC=function(c){c=c.children;var n=(0,Uh.useContext)(Dx),N=Ml("itemDimensions"),ba=Ml("viewportDimensions"),pa=qc(function(Ba){ba(Ba.getBoundingClientRect())});return sh.useEffect(function(){n&&(ba({height:n.viewportHeight,width:n.viewportWidth}),N({height:n.itemHeight,width:n.itemWidth}))},[n,ba,N]),sh.createElement("div",{style:yp,ref:pa},c)},yC=function(c){c=c.children;var n=(0,Uh.useContext)(Dx),
N=Ml("windowViewportRect"),ba=Ml("itemDimensions"),pa=Dj("customScrollParent");pa=Rm(N,pa);return sh.useEffect(function(){n&&(ba({height:n.itemHeight,width:n.itemWidth}),N({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:n.viewportWidth}))},[n,N,ba]),sh.createElement("div",{ref:pa,style:yp},c)},Qt=tc(tC,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",
scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},sh.memo(function(c){c=Fa({},c);var n=Dj("useWindowScroll"),N=Dj("customScrollParent"),ba=N||n?yC:xC;return sh.createElement(N||n?AC:zC,Fa({},c),sh.createElement(ba,null,sh.createElement(vC,null),sh.createElement(uC,null),sh.createElement(wC,null)))})),Ml=Qt.usePublisher,Dj=Qt.useEmitterValue,Ix=Qt.useEmitter,zC=uq({usePublisher:Ml,useEmitterValue:Dj,useEmitter:Ix}),
AC=fm({usePublisher:Ml,useEmitterValue:Dj,useEmitter:Ix}),BC=rh(function(){var c=ag(function(yb){return sh.createElement("td",null,"Item $",yb)}),n=ag(null),N=ag(null),ba=ag(null),pa=ag({}),Ba=ag(um),Ia=ag(fj),hb=function(yb,Yb){return void 0===Yb&&(Yb=null),gj($f(pa,Fg(function(rc){return rc[yb]}),vh()),Yb)};return{context:n,itemContent:c,fixedHeaderContent:N,fixedFooterContent:ba,components:pa,computeItemKey:Ba,scrollerRef:Ia,TableComponent:hb("Table","table"),TableHeadComponent:hb("TableHead",
"thead"),TableFooterComponent:hb("TableFoot","tfoot"),TableBodyComponent:hb("TableBody","tbody"),TableRowComponent:hb("TableRow","tr"),ScrollerComponent:hb("Scroller","div"),EmptyPlaceholder:hb("EmptyPlaceholder"),ScrollSeekPlaceholder:hb("ScrollSeekPlaceholder"),FillerRow:hb("FillerRow")}}),CC=rh(function(c){return Fa({},c[0],c[1])},Ph(Bx,BC)),DC=function(c){return sh.createElement("tr",null,sh.createElement("td",{style:{height:c.height}}))},EC=function(c){return sh.createElement("tr",null,sh.createElement("td",
{style:{height:c.height,padding:0,border:0}}))},FC=sh.memo(function(){var c=Pi("listState"),n=Nl("sizeRanges"),N=Pi("useWindowScroll"),ba=Pi("customScrollParent"),pa=Nl("windowScrollContainerState"),Ba=Nl("scrollContainerState");N=ba||N?pa:Ba;var Ia=Pi("itemContent");pa=Pi("trackItemSizes");ba=Xb(n,Pi("itemSize"),pa,N,Pi("log"),void 0,ba);n=ba.callbackRef;var hb=ba.ref;ba=sh.useState(0);var yb=ba[0],Yb=ba[1];St("deviation",function(hd){yb!==hd&&(hb.current.style.marginTop=hd+"px",Yb(hd))});pa=Pi("EmptyPlaceholder");
var rc=Pi("ScrollSeekPlaceholder")||DC;N=Pi("FillerRow")||EC;ba=Pi("TableBodyComponent");var Ac=Pi("TableRowComponent"),Yc=Pi("computeItemKey"),ud=Pi("isSeeking");Ba=Pi("paddingTopAddition");var pd=Pi("firstItemIndex"),Gd=Pi("statefulTotalCount"),Qd=Pi("context");if(0===Gd&&pa)return(0,Uh.createElement)(pa,tj(pa,Qd));pa=c.offsetTop+Ba+yb;Ba=c.offsetBottom;pa=0<pa?sh.createElement(N,{height:pa,key:"padding-top"}):null;N=0<Ba?sh.createElement(N,{height:Ba,key:"padding-bottom"}):null;c=c.items.map(function(hd){var sd=
hd.originalIndex,yd=Yc(sd+pd,hd.data,Qd);return ud?(0,Uh.createElement)(rc,Fa({},tj(rc,Qd),{key:yd,index:hd.index,height:hd.size,type:hd.type||"item"})):(0,Uh.createElement)(Ac,Fa({},tj(Ac,Qd),{key:yd,"data-index":sd,"data-known-size":hd.size,"data-item-index":hd.index,style:{overflowAnchor:"none"}}),Ia(hd.index,hd.data,Qd))});return(0,Uh.createElement)(ba,Fa({ref:n,"data-test-id":"virtuoso-item-list"},tj(ba,Qd)),[pa].concat(c,[N]))}),GC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),N=Nl("viewportHeight"),
ba=Nl("fixedItemHeight"),pa=qc(Ni(N,function(Ba){return Sb(Ba,"height")}));return sh.useEffect(function(){n&&(N(n.viewportHeight),ba(n.itemHeight))},[n,N,ba]),sh.createElement("div",{style:yp,ref:pa,"data-viewport-type":"element"},c)},HC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),N=Nl("windowViewportRect"),ba=Nl("fixedItemHeight"),pa=Pi("customScrollParent");pa=Rm(N,pa);return sh.useEffect(function(){n&&(ba(n.itemHeight),N({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:100}))},
[n,N,ba]),sh.createElement("div",{ref:pa,style:yp,"data-viewport-type":"window"},c)},Rt=tc(CC,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",
atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},
methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},sh.memo(function(c){var n=Pi("useWindowScroll"),N=Pi("customScrollParent"),ba=Nl("fixedHeaderHeight"),
pa=Nl("fixedFooterHeight"),Ba=Pi("fixedHeaderContent"),Ia=Pi("fixedFooterContent"),hb=Pi("context");ba=qc(Ni(ba,function(Ac){return Sb(Ac,"height")}));var yb=qc(Ni(pa,function(Ac){return Sb(Ac,"height")}));pa=N||n?JC:IC;n=N||n?HC:GC;N=Pi("TableComponent");var Yb=Pi("TableHeadComponent"),rc=Pi("TableFooterComponent");Ba=Ba?sh.createElement(Yb,Fa({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:ba},tj(Yb,hb)),Ba()):null;Ia=Ia?sh.createElement(rc,Fa({key:"TableFoot",style:{zIndex:1,position:"sticky",
bottom:0},ref:yb},tj(rc,hb)),Ia()):null;return sh.createElement(pa,Fa({},c),sh.createElement(n,null,sh.createElement(N,Fa({style:{borderSpacing:0}},tj(N,hb)),[Ba,sh.createElement(FC,{key:"TableBody"}),Ia])))})),Nl=Rt.usePublisher,Pi=Rt.useEmitterValue,St=Rt.useEmitter,IC=uq({usePublisher:Nl,useEmitterValue:Pi,useEmitter:St}),JC=fm({usePublisher:Nl,useEmitterValue:Pi,useEmitter:St}),Jx=Of(X(67)),km=function(c){function n(N){N=c.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+
N+" for more information.")||this;if(void 0===N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}rl(n,c);return n}(kq(Error)),Kx={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",
crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",
firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",
lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",
midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",
salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},KC=/^#[a-fA-F0-9]{6}$/,LC=/^#[a-fA-F0-9]{8}$/,MC=/^#[a-fA-F0-9]{3}$/,NC=/^#[a-fA-F0-9]{4}$/,
Tt=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,OC=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,PC=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,QC=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ut=function(c){return 7===c.length&&c[1]===c[2]&&
c[3]===c[4]&&c[5]===c[6]?"#"+c[1]+c[3]+c[5]:c},RC=Oo($o,$o.length,[]),Lx=X(299),Ol=Of(X(67)),bl=class{static insertTextFirefox(c,n){c.setRangeText(n,c.selectionStart||0,c.selectionEnd||0,"end");c.dispatchEvent(new InputEvent("input",{data:n,inputType:"insertText",isComposing:!1}))}static insert(c,n){const N=c.ownerDocument,ba=N.activeElement;ba!==c&&c.focus();N.execCommand("insertText",!1,n)||bl.insertTextFirefox(c,n);ba===N.body?c.blur():ba instanceof HTMLElement&&ba!==c&&ba.focus()}static set(c,
n){c.select();bl.insert(c,n)}static getSelection(c){const {selectionStart:n,selectionEnd:N}=c;return c.value.slice(n?n:void 0,N?N:void 0)}static wrapSelection(c,n,N){const {selectionStart:ba,selectionEnd:pa}=c,Ba=bl.getSelection(c);bl.insert(c,n+Ba+(null!=N?N:n));c.selectionStart=(ba||0)+n.length;c.selectionEnd=(pa||0)+n.length}static replace(c,n,N){let ba=0;c.value.replace(n,(...pa)=>{const Ba=ba+pa[pa.length-2],Ia=pa[0].length;c.selectionStart=Ba;c.selectionEnd=Ba+Ia;pa="string"===typeof N?N:N(...pa);
bl.insert(c,pa);c.selectionStart=Ba;ba+=pa.length-Ia;return pa})}static findLineEnd(c,n){const N=c.lastIndexOf("\n",n-1)+1;return"\t"!==c.charAt(N)?n:N+1}static indent(c){var n;const {selectionStart:N,selectionEnd:ba,value:pa}=c;var Ba=pa.slice(N,ba);if((Ba=null==(n=/\n/g.exec(Ba))?void 0:n.length)&&0<Ba){n=pa.lastIndexOf("\n",N-1)+1;var Ia=c.value.slice(n,ba-1);Ba=Ia.replace(/^|\n/g,"$\x26  ");Ia=Ba.length-Ia.length;c.setSelectionRange(n,ba-1);bl.insert(c,Ba);c.setSelectionRange(N+1,ba+Ia)}else bl.insert(c,
"  ")}static unindent(c){const {selectionStart:n,selectionEnd:N,value:ba}=c;var pa=ba.lastIndexOf("\n",n-1)+1;const Ba=bl.findLineEnd(ba,N);var Ia=c.value.slice(pa,Ba);const hb=Ia.replace(/(^|\n)(\t| {1,2})/g,"$1");Ia=Ia.length-hb.length;c.setSelectionRange(pa,Ba);bl.insert(c,hb);pa=(pa=/\t| {1,2}/.exec(ba.slice(pa,n)))?pa[0].length:0;c.setSelectionRange(n-pa,Math.max(n-pa,N-Ia))}},Vt=X(299),as=c=>c.stopPropagation(),bs=Ol.memo(function({font:c,text:n,color:N,fontStyle:ba,fontSize:pa,fontWeight:Ba,
offsetX:Ia=0,offsetY:hb=0,scale:yb=1,isEditing:Yb=!1,pointerEvents:rc=!1,onBlur:Ac,onChange:Yc}){const ud=Ol.useRef(null),pd=Ol.useRef(!1),Gd=Ol.useCallback(Id=>{Yc(rp.normalizeText(Id.currentTarget.value))},[Yc]),Qd=Ol.useCallback(Id=>{if("Escape"!==Id.key)if("Tab"===Id.key&&0===n.length)Id.preventDefault();else{if("Meta"!==Id.key&&!Id.metaKey)Id.stopPropagation();else if("z"===Id.key&&Id.metaKey){document.execCommand(Id.shiftKey?"redo":"undo",!1);Id.stopPropagation();Id.preventDefault();return}"Tab"===
Id.key&&(Id.preventDefault(),Id.shiftKey?bl.unindent(Id.currentTarget):bl.indent(Id.currentTarget),null==Yc||Yc(rp.normalizeText(Id.currentTarget.value)))}},[Yc]),hd=Ol.useCallback(Id=>{Yb&&(Id.currentTarget.setSelectionRange(0,0),null==Ac||Ac())},[Ac]),sd=Ol.useCallback(Id=>{Yb&&pd.current&&document.activeElement===Id.currentTarget&&Id.currentTarget.select()},[Yb]),yd=Ol.useCallback(Id=>{Yb&&Id.stopPropagation()},[Yb]);Ol.useEffect(()=>{Yb&&requestAnimationFrame(()=>{pd.current=!0;const Id=ud.current;
Id&&(Id.focus(),Id.select())})},[Yb,Ac]);const Rd=Ol.useRef(null);Ol.useLayoutEffect(()=>{const Id=Rd.current;if(Id){var Ve=pg(n||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:pa,lineHeight:1,fontWeight:Ba},4);Id.style.transform=`scale(${yb}, ${yb}) translate(${Ia}px, ${hb}px)`;Id.style.width=Ve[0]+1+"px";Id.style.height=Ve[1]+1+"px"}},[n,Ba,pa,hb,Ia,yb]);return(0,Vt.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Vt.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Rd,
style:{font:c,fontStyle:ba,fontSize:pa,fontWeight:Ba,color:N,pointerEvents:rc?"all":"none",userSelect:Yb?"text":"none"},children:[Yb?(0,Vt.jsx)("textarea",{ref:ud,style:{font:c,color:N,fontStyle:ba,fontSize:pa,fontWeight:Ba},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,color:N,onFocus:sd,onChange:Gd,
onKeyDown:Qd,onBlur:hd,onPointerDown:yd,onContextMenu:as,onCopy:as,onPaste:as,onCut:as}):n,"​"]})})}),vn=X(299),Mx={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ap=class extends wk{constructor(){super(...arguments);Ab(this,"canEdit",!0);Ab(this,"ReactComponent",he(({events:c,isErasing:n,isBinding:N,isSelected:ba,isEditing:pa,onEditingEnd:Ba})=>{const {props:{size:[Ia,hb],stroke:yb,fill:Yb,noFill:rc,strokeWidth:Ac,strokeType:Yc,borderRadius:ud,opacity:pd,label:Gd,italic:Qd,fontWeight:hd,fontSize:sd}}=this;
var yd=Gd||pa?pg(Gd,{fontFamily:"var(--ls-font-family)",fontSize:sd,lineHeight:1,fontWeight:hd},4):[0,0];const Rd=te.mul(this.props.size,.5);yd=Math.max(.5,Math.min(1,Ia/yd[0],hb/yd[1]));const Id=this.getBounds(),Ve=Jx.useMemo(()=>te.sub(Rd,te.toFixed([Id.width/2,Id.height/2])),[Id,yd,Rd]),Xe=Jx.useCallback(hg=>{var kf;null==(kf=this.update)||kf.call(this,{label:hg})},[Gd]);return(0,vn.jsxs)("div",qg(Ef({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,vn.jsx)(bs,
{font:"20px / 1 var(--ls-font-family)",text:Gd,color:Pe(yb,"text"),offsetX:Ve[0],offsetY:Ve[1],fontSize:sd,scale:yd,isEditing:pa,onChange:Xe,onBlur:Ba,fontStyle:Qd?"italic":"normal",fontWeight:hd,pointerEvents:!!Gd}),(0,vn.jsxs)(yl,{opacity:n?.2:pd,children:[N&&(0,vn.jsx)(rq,{mode:"svg",strokeWidth:Ac,size:[Ia,hb]}),(0,vn.jsx)("rect",{className:ba||!rc?"tl-hitarea-fill":"tl-hitarea-stroke",x:Ac/2,y:Ac/2,rx:ud,ry:ud,width:Math.max(.01,Ia-Ac),height:Math.max(.01,hb-Ac),pointerEvents:"all"}),(0,vn.jsx)("rect",
{x:Ac/2,y:Ac/2,rx:ud,ry:ud,width:Math.max(.01,Ia-Ac),height:Math.max(.01,hb-Ac),strokeWidth:Ac,stroke:Pe(yb,"stroke"),strokeDasharray:"dashed"===Yc?"8 2":void 0,fill:rc?"none":Pe(Yb,"background")})]})]}))}));Ab(this,"setScaleLevel",c=>Zh(this,null,function*(){this.update({scaleLevel:c,fontSize:Mx[null!=c?c:"md"],strokeWidth:Mx[null!=c?c:"md"]/10});this.onResetBounds()}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],borderRadius:N,isLocked:ba}}=this;return(0,vn.jsx)("g",{children:(0,vn.jsx)("rect",
{width:c,height:n,rx:N,ry:N,fill:"transparent",strokeDasharray:ba?"8 2":void 0})})}));Ab(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));void 0!==c.borderRadius&&(c.borderRadius=Math.max(0,c.borderRadius));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}};Ab(Ap,"id","box");Ab(Ap,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,
fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});we([$g],Ap.prototype,"scaleLevel",1);we([Eg],Ap.prototype,"setScaleLevel",2);var Nx=Of(X(67)),lm=X(299),Ox={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Bp=class extends ct{constructor(){super(...arguments);Ab(this,"canEdit",!0);Ab(this,"ReactComponent",he(({isSelected:c,isErasing:n,events:N,isEditing:ba,onEditingEnd:pa})=>{const {size:[Ba,Ia],stroke:hb,fill:yb,noFill:Yb,strokeWidth:rc,strokeType:Ac,opacity:Yc,label:ud,
italic:pd,fontWeight:Gd,fontSize:Qd}=this.props;var hd=ud||ba?pg(ud,{fontFamily:"var(--ls-font-family)",fontSize:Qd,lineHeight:1,fontWeight:Gd},4):[0,0];const sd=te.mul(this.props.size,.5);hd=Math.max(.5,Math.min(1,Ba/hd[0],Ia/hd[1]));const yd=this.getBounds(),Rd=Nx.useMemo(()=>te.sub(sd,te.toFixed([yd.width/2,yd.height/2])),[yd,hd,sd]),Id=Nx.useCallback(Ve=>{var Xe;null==(Xe=this.update)||Xe.call(this,{label:Ve})},[ud]);return(0,lm.jsxs)("div",qg(Ef({},N),{style:{width:"100%",height:"100%",overflow:"hidden"},
className:"tl-ellipse-container",children:[(0,lm.jsx)(bs,{font:"18px / 1 var(--ls-font-family)",text:ud,color:Pe(hb,"text"),offsetX:Rd[0],offsetY:Rd[1],scale:hd,isEditing:ba,onChange:Id,onBlur:pa,fontStyle:pd?"italic":"normal",fontSize:Qd,fontWeight:Gd,pointerEvents:!!ud}),(0,lm.jsxs)(yl,qg(Ef({},N),{opacity:n?.2:Yc,children:[(0,lm.jsx)("ellipse",{className:c||!Yb?"tl-hitarea-fill":"tl-hitarea-stroke",cx:Ba/2,cy:Ia/2,rx:Math.max(.01,(Ba-rc)/2),ry:Math.max(.01,(Ia-rc)/2)}),(0,lm.jsx)("ellipse",{cx:Ba/
2,cy:Ia/2,rx:Math.max(.01,(Ba-rc)/2),ry:Math.max(.01,(Ia-rc)/2),strokeWidth:rc,stroke:Pe(hb,"stroke"),strokeDasharray:"dashed"===Ac?"8 2":void 0,fill:Yb?"none":Pe(yb,"background")})]}))]}))}));Ab(this,"setScaleLevel",c=>Zh(this,null,function*(){this.update({scaleLevel:c,fontSize:Ox[null!=c?c:"md"],strokeWidth:Ox[null!=c?c:"md"]/10});this.onResetBounds()}));Ab(this,"ReactIndicator",he(()=>{const {size:[c,n],isLocked:N}=this.props;return(0,lm.jsx)("g",{children:(0,lm.jsx)("ellipse",{cx:c/2,cy:n/2,rx:c/
2,ry:n/2,strokeWidth:2,fill:"transparent",strokeDasharray:N?"8 2":"undefined"})})}));Ab(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(c){const {size:[n,N],stroke:ba,fill:pa,noFill:Ba,strokeWidth:Ia,strokeType:hb,opacity:yb}=this.props;return(0,lm.jsxs)("g",{opacity:yb,children:[(0,lm.jsx)("ellipse",{className:Ba?"tl-hitarea-stroke":"tl-hitarea-fill",
cx:n/2,cy:N/2,rx:Math.max(.01,(n-Ia)/2),ry:Math.max(.01,(N-Ia)/2)}),(0,lm.jsx)("ellipse",{cx:n/2,cy:N/2,rx:Math.max(.01,(n-Ia)/2),ry:Math.max(.01,(N-Ia)/2),strokeWidth:Ia,stroke:Pe(ba,"stroke"),strokeDasharray:"dashed"===hb?"8 2":void 0,fill:Ba?"none":Pe(pa,"background")})]})}};Ab(Bp,"id","ellipse");Ab(Bp,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,
label:""});we([$g],Bp.prototype,"scaleLevel",1);we([Eg],Bp.prototype,"setScaleLevel",2);var Rq=X(299),Wt=class extends Fr{constructor(){super(...arguments);Ab(this,"ReactComponent",he(({events:c})=>{const n=this.getBounds(),N=Ze(),ba=N.selectedShapesArray.some(Ba=>N.shapesInGroups([this]).includes(Ba)),pa=this.ReactIndicator;return(0,Rq.jsxs)(yl,qg(Ef({},c),{className:"tl-group-container",children:[(0,Rq.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,n.width-2),height:Math.max(.01,
n.height-2),pointerEvents:"all"}),ba&&(0,Rq.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,Rq.jsx)(pa,{})})]}))}));Ab(this,"ReactIndicator",he(()=>{const c=this.getBounds();return(0,Rq.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:c.width+16,height:c.height+16,fill:"transparent"})}))}};Ab(Wt,"id","group");Ab(Wt,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var cs=X(299),SC={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},xo=class extends kp{constructor(c=
{}){super(c);Ab(this,"ReactComponent",he(({events:n,isErasing:N})=>{const {pointsPath:ba,props:{stroke:pa,strokeWidth:Ba,opacity:Ia}}=this;return(0,cs.jsx)(yl,qg(Ef({},n),{opacity:N?.2:1,children:(0,cs.jsx)("path",{d:ba,strokeWidth:16*Ba,stroke:Pe(pa,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:Ia})}))}));Ab(this,"setScaleLevel",n=>Zh(this,null,function*(){this.update({scaleLevel:n,strokeWidth:SC[null!=n?n:"md"]});this.onResetBounds()}));Ab(this,"ReactIndicator",
he(()=>{const {pointsPath:n,props:N}=this;return(0,cs.jsx)("path",{d:n,fill:"none",strokeDasharray:N.isLocked?"8 2":"undefined"})}));Ab(this,"validateProps",n=>{n=Vk(this,n);void 0!==n.strokeWidth&&(n.strokeWidth=Math.max(n.strokeWidth,1));return n});mc(this)}get pointsPath(){const {points:c}=this.props;return Xj.getCurvedPathForPoints(c)}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(){const {pointsPath:c,props:{stroke:n,strokeWidth:N,opacity:ba}}=this;return(0,cs.jsx)("path",
{d:c,strokeWidth:16*N,stroke:Pe(n,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:ba})}};Ab(xo,"id","highlighter");Ab(xo,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});we([$g],xo.prototype,"pointsPath",1);we([$g],xo.prototype,"scaleLevel",1);we([Eg],xo.prototype,"setScaleLevel",2);var Xt=Of(X(67)),ds=X(299),Yt={xs:.5,sm:.8,
md:1,lg:1.5,xl:2,xxl:3},wn=class extends wk{constructor(){super(...arguments);Ab(this,"canChangeAspectRatio",!0);Ab(this,"canFlip",!1);Ab(this,"canEdit",!0);Ab(this,"htmlAnchorRef",Xt.createRef());Ab(this,"setScaleLevel",c=>Zh(this,null,function*(){var n;const N=te.mul(this.props.size,Yt[null!=c?c:"md"]/Yt[null!=(n=this.props.scaleLevel)?n:"md"]);this.update({scaleLevel:c});yield Dc();this.update({size:N})}));Ab(this,"onResetBounds",c=>{var n;if(this.htmlAnchorRef.current){const N=this.htmlAnchorRef.current.getBoundingClientRect(),
[ba,pa]=te.div([N.width,N.height],null!=(n=null==c?void 0:c.zoom)?n:1);this.update({size:[Math.max(Math.min(ba||400,1400),10),Math.max(Math.min(pa||400,1400),10)]})}return this});Ab(this,"ReactComponent",he(({events:c,isErasing:n,isEditing:N})=>{const {props:{html:ba,scaleLevel:pa}}=this,Ba=Sm(),Ia=Ze(),hb=Ia.selectedIds.has(this.id),yb=Ba||hb&&!N||"select"!==Ia.selectedTool.id,Yb=Xt.useCallback(Ac=>{yb||Ac.stopPropagation()},[yb]),rc=Yt[null!=pa?pa:"md"];Xt.useEffect(()=>{0===this.props.size[1]&&
(this.onResetBounds({zoom:Ia.viewport.camera.zoom}),Ia.persist())},[]);return(0,ds.jsx)($k,qg(Ef({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,ds.jsx)("div",{onWheelCapture:Yb,onPointerDown:Yb,onPointerUp:Yb,className:"tl-html-container",style:{pointerEvents:Ba||!N&&!hb?"none":"all",overflow:N?"auto":"hidden",width:`calc(100% / ${rc})`,height:`calc(100% / ${rc})`,transform:`scale(${rc})`},children:(0,ds.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",
dangerouslySetInnerHTML:{__html:ba.trim()}})})}))}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],isLocked:N}}=this;return(0,ds.jsx)("rect",{width:c,height:n,fill:"transparent",strokeDasharray:N?"8 2":"undefined"})}));Ab(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}};Ab(wn,"id","html");Ab(wn,"defaultProps",{id:"html",type:"html",parentId:"page",
point:[0,0],size:[600,0],html:""});we([$g],wn.prototype,"scaleLevel",1);we([Eg],wn.prototype,"setScaleLevel",2);var Px=Of(X(67)),Sq=X(299),yo=class extends wk{constructor(){super(...arguments);Ab(this,"frameRef",Px.createRef());Ab(this,"canEdit",!0);Ab(this,"onIFrameSourceChange",c=>{this.update({url:c})});Ab(this,"reload",()=>{var c,n;this.frameRef.current&&(this.frameRef.current.src=null==(n=null==(c=this.frameRef)?void 0:c.current)?void 0:n.src)});Ab(this,"ReactComponent",he(({events:c,isErasing:n,
isEditing:N})=>{Px.useRef(null);const ba=Ze();return(0,Sq.jsx)($k,qg(Ef({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,Sq.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:N||ba.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,Sq.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Sq.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,
frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],isLocked:N}}=this;return(0,Sq.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:N?"8 2":"undefined"})}))}};Ab(yo,"id","iframe");Ab(yo,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});we([Eg],yo.prototype,"onIFrameSourceChange",2);we([Eg],yo.prototype,"reload",2);var TC=Of(X(67)),Cp=X(299),
es=class extends dt{constructor(){super(...arguments);Ab(this,"ReactComponent",he(({events:c,isErasing:n,isBinding:N,asset:ba})=>{const {props:{opacity:pa,objectFit:Ba,clipping:Ia,size:[hb,yb]}}=this,[Yb,rc,Ac,Yc]=Array.isArray(Ia)?Ia:[Ia,Ia,Ia,Ia],{handlers:ud}=TC.useContext(vi);return(0,Cp.jsxs)($k,qg(Ef({},c),{opacity:n?.2:pa,children:[N&&(0,Cp.jsx)(rq,{mode:"html",strokeWidth:4,size:[hb,yb]}),(0,Cp.jsx)("div",{"data-asset-loaded":!!ba,className:"tl-image-shape-container",children:ba?(0,Cp.jsx)("img",
{src:ud?ud.makeAssetUrl(ba.src):ba.src,draggable:!1,style:{position:"relative",top:-Yb,left:-Yc,width:hb+(Yc-rc),height:yb+(Yb-Ac),objectFit:Ba}}):"Asset is missing"})]}))}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],isLocked:N}}=this;return(0,Cp.jsx)("rect",{width:c,height:n,fill:"transparent",strokeDasharray:N?"8 2":"undefined"})}))}getShapeSVGJsx({assets:c}){var n,N;const ba=this.getBounds(),{assetId:pa,clipping:Ba}=this.props;if(c=c.find(Ia=>Ia.id===pa)){Array.isArray(Ba);const Ia=
null==(N=null==(n=window.logseq)?void 0:n.api)?void 0:N.make_asset_url;return(0,Cp.jsx)("image",{width:ba.width,height:ba.height,href:Ia?Ia(c.src):c.src})}return super.getShapeSVGJsx({})}};Ab(es,"id","image");Ab(es,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Zt=Of(X(67)),UC=Of(X(67)),$t=X(299),Dp=X(299),Qx={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},VC=UC.memo(function({style:c,start:n,
end:N,decorationStart:ba,decorationEnd:pa,scaleLevel:Ba}){const Ia=te.dist(n,N);if(2>Ia)return null;const {strokeWidth:hb}=c,yb=1+hb*Qx[null!=Ba?Ba:"md"]/10,Yb="M"+te.toFixed(n)+"L"+te.toFixed(N);Ba=Math.min(Ia/3,hb*Qx[null!=Ba?Ba:"md"]);ba=ba?Wl(n,N,Ba):null;pa=pa?Wl(N,n,Ba):null;return(0,Dp.jsxs)(Dp.Fragment,{children:[(0,Dp.jsx)("path",{className:"tl-stroke-hitarea",d:Yb}),(0,Dp.jsx)("path",{d:Yb,strokeWidth:yb,stroke:c.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===
c.strokeType?"8 4":void 0,pointerEvents:"stroke"}),ba&&(0,Dp.jsx)(Mo,{left:ba.left,middle:n,right:ba.right,stroke:c.stroke,strokeWidth:yb}),pa&&(0,Dp.jsx)(Mo,{left:pa.left,middle:N,right:pa.right,stroke:c.stroke,strokeWidth:yb})]})}),fs=X(299),Nk=X(299),WC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ep=class extends Eq{constructor(){super(...arguments);Ab(this,"hideSelection",!0);Ab(this,"canEdit",!0);Ab(this,"ReactComponent",he(({events:c,isErasing:n,isEditing:N,onEditingEnd:ba})=>{const {stroke:pa,handles:{start:Ba,
end:Ia},opacity:hb,label:yb,italic:Yb,fontWeight:rc,fontSize:Ac,id:Yc}=this.props,ud=yb||N?pg(yb||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:Ac,lineHeight:1,fontWeight:rc},6):[0,0],pd=te.med(Ba.point,Ia.point);var Gd=te.dist(Ba.point,Ia.point);Gd=Math.max(.5,Math.min(1,Math.max(Gd/(ud[1]+128),Gd/(ud[0]+128))));const Qd=this.getBounds(),hd=Zt.useMemo(()=>te.sub(pd,te.toFixed([Qd.width/2,Qd.height/2])),[Qd,Gd,pd]),sd=Zt.useCallback(yd=>{var Rd;null==(Rd=this.update)||Rd.call(this,{label:yd})},
[yb]);return(0,Nk.jsxs)("div",qg(Ef({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,Nk.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:yb,fontSize:Ac,color:Pe(pa,"text"),offsetX:hd[0],offsetY:hd[1],scale:Gd,isEditing:N,onChange:sd,onBlur:ba,fontStyle:Yb?"italic":"normal",fontWeight:rc,pointerEvents:!!yb}),(0,Nk.jsxs)(yl,{opacity:n?.2:hb,id:Yc+"_svg",children:[(0,Nk.jsx)(ap,{id:Yc,bounds:Qd,labelSize:ud,offset:hd,scale:Gd}),(0,Nk.jsx)("g",
{pointerEvents:"none",mask:yb||N?`url(#${Yc}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));Ab(this,"setScaleLevel",c=>Zh(this,null,function*(){this.update({scaleLevel:c,fontSize:WC[null!=c?c:"md"]});this.onResetBounds()}));Ab(this,"ReactIndicator",he(({isEditing:c})=>{const {id:n,decorations:N,label:ba,strokeWidth:pa,fontSize:Ba,fontWeight:Ia,handles:{start:hb,end:yb},isLocked:Yb}=this.props,rc=this.getBounds(),Ac=ba||c?pg(ba,{fontFamily:"var(--ls-font-family)",fontSize:Ba,lineHeight:1,
fontWeight:Ia},6):[0,0],Yc=te.med(hb.point,yb.point);var ud=te.dist(hb.point,yb.point);ud=Math.max(.5,Math.min(1,Math.max(ud/(Ac[1]+128),ud/(Ac[0]+128))));const pd=Zt.useMemo(()=>te.sub(Yc,te.toFixed([rc.width/2,rc.height/2])),[rc,ud,Yc]);return(0,Nk.jsxs)("g",{children:[(0,Nk.jsx)("path",{mask:ba?`url(#${n}_clip)`:"",d:Aj({strokeWidth:pa},hb.point,yb.point,null==N?void 0:N.start,null==N?void 0:N.end),strokeDasharray:Yb?"8 2":"undefined"}),ba&&!c&&(0,Nk.jsx)("rect",{x:rc.width/2-Ac[0]/2*ud+pd[0],
y:rc.height/2-Ac[1]/2*ud+pd[1],width:Ac[0]*ud,height:Ac[1]*ud,rx:4*ud,ry:4*ud,fill:"transparent"})]})}));Ab(this,"validateProps",c=>Vk(this,c))}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx({preview:c}){const {stroke:n,fill:N,strokeWidth:ba,strokeType:pa,decorations:Ba,label:Ia,scaleLevel:hb,handles:{start:yb,end:Yb}}=this.props,rc=te.med(yb.point,Yb.point);return(0,Nk.jsxs)(Nk.Fragment,{children:[(0,Nk.jsx)(VC,{style:{stroke:Pe(n,"text"),fill:N,strokeWidth:ba,
strokeType:pa},scaleLevel:hb,start:yb.point,end:Yb.point,decorationStart:null==Ba?void 0:Ba.start,decorationEnd:null==Ba?void 0:Ba.end}),c&&(0,Nk.jsx)(Nk.Fragment,{children:(0,Nk.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${rc[0]}, ${rc[1]})`,textAnchor:"middle",fill:Pe(n,"text"),stroke:Pe(n,"text"),children:Ia})})]})}};Ab(Ep,"id","line");Ab(Ep,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,
point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});we([$g],Ep.prototype,"scaleLevel",1);we([Eg],Ep.prototype,"setScaleLevel",2);var Ok=Of(X(67)),kj=X(299),Tq={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},XC=he(({type:c,fill:n,opacity:N,children:ba})=>{const pa="var(--ls-secondary-background-color)"!==n?Pe(n,"background"):"var(--ls-tertiary-background-color)";n=n&&
"var(--ls-secondary-background-color)"!==n?xf(n)?`var(--ls-highlight-color-${n})`:n:"var(--ls-secondary-background-color)";return(0,kj.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===c?"page":"block"}`,children:[(0,kj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:N,background:"P"===c?pa:`linear-gradient(0deg, ${n}, ${pa})`}}),(0,kj.jsx)("div",{className:"relative",children:ba})]})}),Ej=class extends wk{constructor(c={}){var n;super(c);
Ab(this,"hideRotateHandle",!0);Ab(this,"canChangeAspectRatio",!0);Ab(this,"canFlip",!0);Ab(this,"canEdit",!0);Ab(this,"persist",null);Ab(this,"initialHeightCalculated",!0);Ab(this,"getInnerHeight",null);Ab(this,"setCollapsed",N=>Zh(this,null,function*(){var ba;if("B"===this.props.blockType){if(this.update({compact:N}),this.canResize[1]=!N,!N)this.onResetBounds()}else{const pa=this.props.size[1];this.canResize[1]=!N;this.update({isAutoResizing:!N,collapsed:N,size:[this.props.size[0],N?this.getHeaderHeight():
this.props.collapsedHeight],collapsedHeight:N?pa:this.props.collapsedHeight})}null==(ba=this.persist)||ba.call(this)}));Ab(this,"setScaleLevel",N=>Zh(this,null,function*(){var ba;const pa=te.mul(this.props.size,Tq[null!=N?N:"md"]/Tq[null!=(ba=this.props.scaleLevel)?ba:"md"]);this.update({scaleLevel:N});yield Dc();this.update({size:pa})}));Ab(this,"onResetBounds",N=>{N=this.getAutoResizeHeight();null!==N&&1<Math.abs(N-this.props.size[1])&&(this.update({size:[this.props.size[0],N]}),this.initialHeightCalculated=
!0);return this});Ab(this,"onResize",(N,ba)=>{var pa;const {bounds:Ba,rotation:Ia,scale:[hb,yb]}=ba;N=[...this.scale];0>hb&&(N[0]*=-1);0>yb&&(N[1]*=-1);ba=Ba.height;this.props.isAutoResizing&&(ba=null!=(pa=this.getAutoResizeHeight())?pa:ba);return this.update({point:[Ba.minX,Ba.minY],size:[Math.max(1,Ba.width),Math.max(1,ba)],scale:N,rotation:Ia})});Ab(this,"PortalComponent",he(({})=>{const {props:{pageId:N,fill:ba,opacity:pa}}=this,{renderers:Ba}=Ok.useContext(vi),Ia=Ze(),hb=Ok.useRef(null),[,yb]=
this.useComponentSize(hb,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==Ba||!Ba.Page)return null;const {Page:Yb,Block:rc}=Ba,[Ac,Yc]=Ok.useState(!1);Ok.useEffect(()=>{var ud,pd;if(this.props.isAutoResizing){const Gd=(null!=(pd=null==(ud=this.getInnerHeight)?void 0:ud.call(this))?pd:yb)+this.getHeaderHeight();yb&&1<Math.abs(Gd-this.props.size[1])&&(this.update({size:[this.props.size[0],Gd]}),Ac&&Ia.persist({}))}},[yb,this.props.isAutoResizing]);
Ok.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();Ia.persist({})})},[this.initialHeightCalculated]);Ok.useEffect(()=>{setTimeout(function(){Yc(!0)})},[]);return(0,kj.jsxs)(kj.Fragment,{children:[(0,kj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>Ia.viewport.camera.zoom?"optimizeSpeed":"auto",background:ba&&"var(--ls-secondary-background-color)"!==ba?xf(ba)?`var(--ls-highlight-color-${ba})`:ba:"var(--ls-secondary-background-color)",
opacity:pa}}),(0,kj.jsx)("div",{ref:hb,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(Ac||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,kj.jsx)(rc,{blockId:N}):(0,kj.jsx)(Yb,{pageName:N}))})]})}));Ab(this,"ReactComponent",he(N=>{var ba;const {events:pa,isErasing:Ba,isEditing:Ia,isBinding:hb}=N,{props:{opacity:yb,pageId:Yb,fill:rc,scaleLevel:Ac,strokeWidth:Yc,size:ud}}=this,pd=Ze(),{renderers:Gd,
handlers:Qd}=Ok.useContext(vi);this.persist=()=>pd.persist();const hd=Sm(),sd=pd.selectedIds.has(this.id)&&1===pd.selectedIds.size,yd=pd.isIn("logseq-portal.creating")&&!Yb,Rd=(hd||sd&&!Ia||"select"!==pd.selectedTool.id)&&!yd,Id=Ok.useCallback(Df=>{Rd||Df.stopPropagation()},[Rd]),Ve=1===pd.selectedShapesArray.length&&pd.selectedShapesArray.some(Df=>"logseq-portal"===Df.type&&Df.props.id!==this.props.id&&Yb&&Df.props.pageId===Yb),Xe=Tq[null!=Ac?Ac:"md"];Ok.useEffect(()=>this.props.collapsed&&Ia?(this.update({size:[this.props.size[0],
this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[Ia,this.props.collapsed]);Ok.useEffect(()=>{if(yd){const Df=[pd.viewport.bounds.width,pd.viewport.bounds.height],If=pd.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(If[0]>Df[0]-400||If[1]>Df[1]-240||1.5<pd.viewport.camera.zoom||.5>pd.viewport.camera.zoom)&&pd.viewport.zoomToBounds(qg(Ef({},this.bounds),{minY:this.bounds.maxY+25}))}},[pd.viewport.bounds.height.toFixed(2)]);const hg=
Ok.useCallback((Df,If)=>{this.initialHeightCalculated=!1;const zf=If?"P":"B";this.update({pageId:Df,size:[400,If?320:40],blockType:zf,compact:"B"===zf});pd.selectTool("select");pd.history.resume();pd.history.persist()},[]),kf=this.PortalComponent;var Rf=Ok.useMemo(()=>{var Df;if(Yb&&"B"===this.props.blockType)return null==(Df=null==Qd?void 0:Qd.queryBlockByUUID(Yb))?void 0:Df.title},[null==Qd?void 0:Qd.queryBlockByUUID,Yb]);Rf="B"===this.props.blockType&&"string"!==typeof Rf;const Lg=(!this.props.collapsed||
Ia)&&!Rf;if(null==Gd||!Gd.Page)return null;const {Breadcrumb:ah,PageName:Gg}=Gd,bh={width:`calc(100% / ${Xe})`,height:`calc(100% / ${Xe})`,opacity:Ba?.2:1};1!==Xe&&(bh.transform=`scale(${Xe})`);return(0,kj.jsxs)($k,qg(Ef({style:{pointerEvents:"all"}},pa),{children:[hb&&(0,kj.jsx)(rq,{mode:"html",strokeWidth:Yc,size:ud}),(0,kj.jsx)("div",{"data-inner-events":!Rd,onWheelCapture:Id,onPointerDown:Id,onPointerUp:Id,style:{width:"100%",height:"100%",pointerEvents:hd||!Ia&&!sd?"none":"all"},children:yd?
(0,kj.jsx)(Vs,{onChange:hg,onAddBlock:Df=>{setTimeout(()=>{var If,zf,Yf;pd.api.editShape(this);null==(Yf=null==(zf=null==(If=window.logseq)?void 0:If.api)?void 0:zf.edit_block)||Yf.call(zf,Df)},128)},placeholder:"Create or search your graph..."}):(0,kj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":Yb,"data-portal-selected":Ve,"data-editing":Ia,style:bh,children:[!this.props.compact&&!Rf&&(0,kj.jsx)(XC,{type:null!=(ba=this.props.blockType)?ba:"P",
fill:rc,opacity:yb,children:"P"===this.props.blockType?(0,kj.jsx)(Gg,{pageName:Yb}):(0,kj.jsx)(ah,{blockId:Yb})}),Rf&&(0,kj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Lg&&(0,kj.jsx)(kf,Ef({},N))]})})]}))}));Ab(this,"ReactIndicator",he(()=>{const N=this.getBounds();return(0,kj.jsx)("rect",{width:N.width,height:N.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));Ab(this,"validateProps",N=>{var ba;if(void 0!==N.size){const pa=
Tq[null!=(ba=this.props.scaleLevel)?ba:"md"];N.size[0]=Math.max(N.size[0],60*pa);N.size[1]=Math.max(N.size[1],40*pa)}return Vk(this,N)});mc(this);c.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(n=c.size)?void 0:n[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(c){return c?/^\(\(.*\)\)$/.test(c)&&40===c.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:
"md"}useComponentSize(c,n=""){const [N,ba]=Ok.useState([0,0]),pa=Ze();Ok.useEffect(()=>{setTimeout(()=>{if(null==c?0:c.current){const Ba=n?c.current.querySelector(n):c.current;if(Ba){const Ia=()=>{const {width:yb,height:Yb}=Ba.getBoundingClientRect(),rc=te.div([yb,Yb],pa.viewport.camera.zoom);ba(rc);return rc};Ia();this.getInnerHeight=()=>Ia()[1];const hb=new ResizeObserver(()=>{Ia()});hb.observe(Ba);return()=>{hb.disconnect()}}}return()=>{}},10)},[c,n]);return N}getHeaderHeight(){var c;const n=Tq[null!=
(c=this.props.scaleLevel)?c:"md"];return this.props.compact?0:40*n}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var c,n,N;const ba=this.getBounds();return(0,kj.jsxs)(kj.Fragment,{children:[(0,kj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?xf(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Pe(this.props.fill,
"background"),strokeWidth:null!=(c=this.props.strokeWidth)?c:2,fillOpacity:null!=(n=this.props.opacity)?n:.2,width:ba.width,rx:8,ry:8,height:ba.height}),!this.props.compact&&(0,kj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Pe(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(N=this.props.opacity)?N:.2,x:1,y:1,width:ba.width-2,height:38,rx:8,ry:8}),(0,kj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${ba.width/
2}, ${10+ba.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageName:""})]})}};Ab(Ej,"id","logseq-portal");Ab(Ej,"defaultSearchQuery","");Ab(Ej,"defaultSearchFilter",null);Ab(Ej,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,
strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});we([$g],Ej.prototype,"collapsed",1);we([Eg],Ej.prototype,"setCollapsed",2);we([$g],Ej.prototype,"scaleLevel",1);we([Eg],Ej.prototype,"setScaleLevel",2);var {min:Fp,PI:YC}=Math,Uq=YC+1E-4,au=X(299),ZC={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},$C={easing:c=>Math.sin(c*Math.PI/2),simulatePressure:!0},aD={easing:c=>c*c,simulatePressure:!1},zo=class extends kp{constructor(c={}){super(c);Ab(this,"ReactComponent",
he(({events:n,isErasing:N})=>{const {props:{opacity:ba}}=this;return(0,au.jsx)(yl,qg(Ef({},n),{opacity:N?.2:ba,children:this.getShapeSVGJsx()}))}));Ab(this,"setScaleLevel",n=>Zh(this,null,function*(){this.update({scaleLevel:n,strokeWidth:ZC[null!=n?n:"md"]});this.onResetBounds()}));Ab(this,"ReactIndicator",he(()=>{const {pointsPath:n}=this;return(0,au.jsx)("path",{d:n,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));Ab(this,"validateProps",n=>{n=Vk(this,n);void 0!==n.strokeWidth&&(n.strokeWidth=
Math.max(n.strokeWidth,1));return n});mc(this)}get pointsPath(){var c=this.props;if(2>c.points.length)var n="";else n=qg(Ef({size:1+1.5*c.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===c.points[1][2]?$C:aD),{last:c.isComplete}),c=Ws(c.points,n),n=Xj.getSvgPathFromStroke(tq(c,n));return n}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(){const {pointsPath:c,props:{stroke:n,strokeWidth:N,strokeType:ba}}=this;return(0,au.jsx)("path",{pointerEvents:"all",
d:c,strokeWidth:N/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Pe(n,"text"),fill:Pe(n,"text"),strokeDasharray:"dashed"===ba?"12 4":void 0})}};Ab(zo,"id","pencil");Ab(zo,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});we([$g],zo.prototype,"pointsPath",1);we([$g],zo.prototype,"scaleLevel",1);we([Eg],zo.prototype,"setScaleLevel",2);var Rx=Of(X(67)),Pl=X(299),Sx={xs:10,sm:16,
md:20,lg:32,xl:48,xxl:60},Gp=class extends ln{constructor(){super(...arguments);Ab(this,"canEdit",!0);Ab(this,"ReactComponent",he(({events:c,isErasing:n,isSelected:N,isEditing:ba,onEditingEnd:pa})=>{const {offset:[Ba,Ia],props:{stroke:hb,fill:yb,noFill:Yb,strokeWidth:rc,opacity:Ac,strokeType:Yc,label:ud,italic:pd,fontWeight:Gd,fontSize:Qd}}=this,hd=this.getVertices(rc/2).join();var sd=ud||ba?pg(ud,{fontFamily:"var(--ls-font-family)",fontSize:Qd,lineHeight:1,fontWeight:Gd},4):[0,0];const yd=[this.props.size[0]/
2,2*this.props.size[1]/3];sd=Math.max(.5,Math.min(1,this.props.size[0]/(2*sd[0]),this.props.size[1]/(2*sd[1])));const Rd=this.getBounds(),Id=Rx.useMemo(()=>te.sub(yd,te.toFixed([Rd.width/2,Rd.height/2])),[Rd,sd,yd]),Ve=Rx.useCallback(Xe=>{var hg;null==(hg=this.update)||hg.call(this,{label:Xe})},[ud]);return(0,Pl.jsxs)("div",qg(Ef({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Pl.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:ud,fontSize:Qd,color:Pe(hb,"text"),offsetX:Id[0],
offsetY:Id[1]/sd,scale:sd,isEditing:ba,onChange:Ve,onBlur:pa,fontStyle:pd?"italic":"normal",fontWeight:Gd,pointerEvents:!!ud}),(0,Pl.jsx)(yl,{opacity:n?.2:Ac,children:(0,Pl.jsxs)("g",{transform:`translate(${Ba}, ${Ia})`,children:[(0,Pl.jsx)("polygon",{className:N||!Yb?"tl-hitarea-fill":"tl-hitarea-stroke",points:hd}),(0,Pl.jsx)("polygon",{points:hd,stroke:Pe(hb,"stroke"),fill:Yb?"none":Pe(yb,"background"),strokeWidth:rc,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Yc?"8 2":void 0})]})})]}))}));
Ab(this,"setScaleLevel",c=>Zh(this,null,function*(){this.update({scaleLevel:c,fontSize:Sx[null!=c?c:"md"],strokeWidth:Sx[null!=c?c:"md"]/10});this.onResetBounds()}));Ab(this,"ReactIndicator",he(()=>{const {offset:[c,n],props:{strokeWidth:N,isLocked:ba}}=this;return(0,Pl.jsx)("g",{children:(0,Pl.jsx)("polygon",{transform:`translate(${c}, ${n})`,points:this.getVertices(N/2).join(),strokeDasharray:ba?"8 2":"undefined"})})}));Ab(this,"validateProps",c=>{void 0!==c.sides&&(c.sides=Math.max(c.sides,3));
return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(c){const {offset:[n,N],props:{stroke:ba,fill:pa,noFill:Ba,strokeWidth:Ia,opacity:hb,strokeType:yb}}=this;c=this.getVertices(Ia/2).join();return(0,Pl.jsxs)("g",{transform:`translate(${n}, ${N})`,opacity:hb,children:[(0,Pl.jsx)("polygon",{className:Ba?"tl-hitarea-stroke":"tl-hitarea-fill",points:c}),(0,Pl.jsx)("polygon",{points:c,stroke:Pe(ba,"stroke"),fill:Ba?"none":Pe(pa,"background"),strokeWidth:Ia,
rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===yb?"8 2":void 0})]})}};Ab(Gp,"id","polygon");Ab(Gp,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});we([$g],Gp.prototype,"scaleLevel",1);we([Eg],Gp.prototype,"setScaleLevel",2);var mm=Of(X(67)),xn=X(299),bD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Hp=class extends et{constructor(){super(...arguments);
Ab(this,"ReactComponent",he(({events:c,isErasing:n,isEditing:N,onEditingEnd:ba})=>{const {props:{opacity:pa,fontFamily:Ba,fontSize:Ia,fontWeight:hb,italic:yb,lineHeight:Yb,text:rc,stroke:Ac,padding:Yc}}=this,ud=mm.useRef(null),pd=mm.useRef(!1),Gd=mm.useRef(null),Qd=mm.useCallback(Id=>{const {isSizeLocked:Ve}=this.props;Id=rp.normalizeText(Id.currentTarget.value);Ve?this.update({text:Id,size:this.getAutoSizedBoundingBox({text:Id})}):this.update({text:Id})},[]),hd=mm.useCallback(Id=>{if("Escape"!==
Id.key)if("Tab"===Id.key&&0===rc.length)Id.preventDefault();else{if("Meta"!==Id.key&&!Id.metaKey)Id.stopPropagation();else if("z"===Id.key&&Id.metaKey){Id.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Id.stopPropagation();Id.preventDefault();return}"Tab"===Id.key&&(Id.preventDefault(),Id.shiftKey?bl.unindent(Id.currentTarget):bl.indent(Id.currentTarget),this.update({text:rp.normalizeText(Id.currentTarget.value)}))}},[]),sd=mm.useCallback(Id=>{N&&(null==ba||ba())},[ba]),
yd=mm.useCallback(Id=>{N&&pd.current&&document.activeElement===Id.currentTarget&&Id.currentTarget.select()},[N]),Rd=mm.useCallback(Id=>{N&&Id.stopPropagation()},[N]);mm.useEffect(()=>{N&&requestAnimationFrame(()=>{pd.current=!0;const Id=ud.current;Id&&(Id.focus(),Id.select())})},[N,ba]);mm.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,xn.jsx)($k,qg(Ef({},c),{opacity:n?.2:pa,children:(0,xn.jsx)("div",{ref:Gd,className:"tl-text-shape-wrapper",
"data-hastext":!!rc,"data-isediting":N,style:{fontFamily:Ba,fontStyle:yb?"italic":"normal",fontSize:Ia,fontWeight:hb,padding:Yc,lineHeight:Yb,color:Pe(Ac,"text")},children:N?(0,xn.jsx)("textarea",{ref:ud,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:rc,onFocus:yd,onChange:Qd,onKeyDown:hd,onBlur:sd,onPointerDown:Rd}):(0,xn.jsxs)(xn.Fragment,
{children:[rc,"​"]})})}))}));Ab(this,"setScaleLevel",c=>Zh(this,null,function*(){this.update({scaleLevel:c,fontSize:bD[null!=c?c:"md"]});this.onResetBounds()}));Ab(this,"ReactIndicator",he(({isEditing:c})=>{const {props:{borderRadius:n,isLocked:N},bounds:ba}=this;return c?null:(0,xn.jsx)("rect",{width:ba.width,height:ba.height,rx:n,ry:n,fill:"transparent",strokeDasharray:N?"8 2":"undefined"})}));Ab(this,"validateProps",c=>Vk(this,c));Ab(this,"getBounds",()=>{const [c,n]=this.props.point,[N,ba]=this.props.size;
return{minX:c,minY:n,maxX:c+N,maxY:n+ba,width:N,height:ba}});Ab(this,"onResizeStart",({isSingle:c})=>{var n;if(!c)return this;this.scale=[...(null!=(n=this.props.scale)?n:[1,1])];return this.update({isSizeLocked:!1})});Ab(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getAutoSizedBoundingBox(c={}){const {text:n=this.props.text,fontFamily:N=this.props.fontFamily,fontSize:ba=
this.props.fontSize,fontWeight:pa=this.props.fontWeight,lineHeight:Ba=this.props.lineHeight,padding:Ia=this.props.padding}=c,[hb,yb]=pg(n,{fontFamily:N,fontSize:ba,lineHeight:Ba,fontWeight:pa},Ia);return[hb,yb]}getShapeSVGJsx(){var c=window.navigator.userAgent.toLowerCase();if(c.includes("webkit")&&!c.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:n,stroke:N,fontSize:ba,fontFamily:pa}}=this;c=this.getBounds();return(0,xn.jsx)("foreignObject",{width:c.width,height:c.height,
children:(0,xn.jsx)("div",{style:{color:Pe(N,"text"),fontSize:ba,fontFamily:pa,display:"contents"},children:n})})}};Ab(Hp,"id","text");Ab(Hp,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});we([$g],Hp.prototype,"scaleLevel",1);we([Eg],Hp.prototype,"setScaleLevel",2);
var Tx=Of(X(67)),gs=X(299),hs=class extends wk{constructor(){super(...arguments);Ab(this,"canFlip",!1);Ab(this,"canEdit",!0);Ab(this,"canChangeAspectRatio",!1);Ab(this,"ReactComponent",he(({events:c,isErasing:n,asset:N,isEditing:ba})=>{const {props:{opacity:pa}}=this,Ba=Sm();var Ia=Ze();const hb=Ia.selectedIds.has(this.id),yb=Ba||hb&&!ba||"select"!==Ia.selectedTool.id;Ia=Tx.useCallback(rc=>{yb||rc.stopPropagation()},[yb]);const {handlers:Yb}=Tx.useContext(vi);return(0,gs.jsx)($k,qg(Ef({style:{overflow:"hidden",
pointerEvents:"all",opacity:n?.2:pa}},c),{children:(0,gs.jsx)("div",{onWheelCapture:Ia,onPointerDown:Ia,onPointerUp:Ia,className:"tl-video-container",style:{pointerEvents:Ba||!ba&&!hb?"none":"all",overflow:ba?"auto":"hidden"},children:N&&(0,gs.jsx)("video",{controls:!0,src:Yb?Yb.makeAssetUrl(N.src):N.src})})}))}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],isLocked:N}}=this;return(0,gs.jsx)("rect",{width:c,height:n,fill:"transparent",strokeDasharray:N?"8 2":"undefined"})}))}};Ab(hs,
"id","video");Ab(hs,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var lk=X(299),Ux=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Vx=class extends wk{constructor(){super(...arguments);Ab(this,"aspectRatio",480/853);Ab(this,"canChangeAspectRatio",!1);Ab(this,"canFlip",!1);Ab(this,"canEdit",!0);Ab(this,"onYoutubeLinkChange",c=>{this.update({url:c,
size:Vx.defaultProps.size})});Ab(this,"ReactComponent",he(({events:c,isErasing:n,isEditing:N})=>{const ba=Ze();return(0,lk.jsx)($k,qg(Ef({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,lk.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:N||ba.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?
(0,lk.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,lk.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,lk.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,lk.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,lk.jsxs)("g",{children:[(0,lk.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,lk.jsx)("g",{children:(0,lk.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,lk.jsxs)("g",{fill:"#fff",children:[(0,lk.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,lk.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],isLocked:N}}=this;return(0,lk.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:N?"8 2":"undefined"})}));Ab(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[0]*this.aspectRatio,1));return Vk(this,c)})}get embedId(){var c,n;const N=this.props.url,
ba=N.match(Ux);return null!=(n=null!=(c=null==ba?void 0:ba[1])?c:N)?n:""}getShapeSVGJsx(){const c=this.getBounds(),n=this.embedId;return n?(0,lk.jsxs)("g",{children:[(0,lk.jsx)("image",{width:c.width,height:c.height,href:`https://img.youtube.com/vi/${n}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,lk.jsx)("svg",{x:c.width/4,y:c.height/4,width:c.width/2,height:c.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,lk.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Ao=Vx;Ab(Ao,"id","youtube");Ab(Ao,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});we([$g],Ao.prototype,"embedId",1);we([Eg],Ao.prototype,"onYoutubeLinkChange",2);var Ip=Of(X(67)),Hm=X(299),Wx=/https?:\/\/(x|twitter).com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,Xx=class extends wk{constructor(){super(...arguments);Ab(this,"canFlip",!1);Ab(this,"canEdit",!0);Ab(this,"initialHeightCalculated",
!0);Ab(this,"getInnerHeight",null);Ab(this,"onTwitterLinkChange",c=>{this.update({url:c,size:Xx.defaultProps.size})});Ab(this,"ReactComponent",he(({events:c,isErasing:n,isEditing:N})=>{const {renderers:{Tweet:ba}}=Ip.useContext(vi),pa=Ze(),Ba=Ip.useRef(null),[,Ia]=this.useComponentSize(Ba);Ip.useEffect(()=>{var hb,yb;const Yb=null!=(yb=null==(hb=this.getInnerHeight)?void 0:hb.call(this))?yb:Ia;Ia&&1<Math.abs(Yb-this.props.size[1])&&(this.update({size:[this.props.size[0],Yb]}),pa.persist())},[Ia]);
Ip.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();pa.persist()})},[this.initialHeightCalculated]);return(0,Hm.jsx)($k,qg(Ef({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,Hm.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:N||pa.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Hm.jsx)("div",{ref:Ba,children:(0,Hm.jsx)(ba,{tweetId:this.embedId})}):null})}))}));
Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,n],isLocked:N}}=this;return(0,Hm.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:N?"8 2":"undefined"})}));Ab(this,"onResetBounds",c=>{c=this.getAutoResizeHeight();null!==c&&1<Math.abs(c-this.props.size[1])&&(this.update({size:[this.props.size[0],c]}),this.initialHeightCalculated=!0);return this});Ab(this,"onResize",(c,n)=>{var N;const {bounds:ba,rotation:pa,scale:[Ba,Ia]}=n;c=[...this.scale];0>Ba&&(c[0]*=-1);0>Ia&&(c[1]*=
-1);n=null!=(N=this.getAutoResizeHeight())?N:ba.height;return this.update({point:[ba.minX,ba.minY],size:[Math.max(1,ba.width),Math.max(1,n)],scale:c,rotation:pa})});Ab(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.min(Math.max(c.size[0],300),550),c.size[1]=Math.max(c.size[1],1));return Vk(this,c)})}get embedId(){var c,n;const N=this.props.url,ba=N.match(Wx);return null!=(n=null!=(c=null==ba?void 0:ba[1])?c:N)?n:""}useComponentSize(c,n=""){const [N,ba]=Ip.useState([0,0]),pa=Ze();Ip.useEffect(()=>
{if(null==c?0:c.current){const Ba=n?c.current.querySelector(n):c.current;if(Ba){const Ia=()=>{const {width:yb,height:Yb}=Ba.getBoundingClientRect(),rc=te.div([yb,Yb],pa.viewport.camera.zoom);ba(rc);return rc};Ia();this.getInnerHeight=()=>Ia()[1];const hb=new ResizeObserver(()=>{Ia()});hb.observe(Ba);return()=>{hb.disconnect()}}}return()=>{}},[c,n]);return N}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const c=this.getBounds();return this.embedId?(0,Hm.jsxs)("g",
{children:[(0,Hm.jsx)("rect",{width:c.width,height:c.height,fill:"#15202b",rx:8,ry:8}),(0,Hm.jsx)("svg",{x:c.width/4,y:c.height/4,width:c.width/2,height:c.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Hm.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Jp=Xx;Ab(Jp,"id","tweet");Ab(Jp,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});we([$g],Jp.prototype,"embedId",1);we([Eg],Jp.prototype,"onTwitterLinkChange",2);var bu=Of(X(67)),cu=X(299),Vq=class extends wk{constructor(){super(...arguments);Ab(this,"frameRef",bu.createRef());Ab(this,"canChangeAspectRatio",!0);Ab(this,"canFlip",!0);Ab(this,"canEdit",!0);Ab(this,"ReactComponent",
he(({events:c,asset:n,isErasing:N,isEditing:ba})=>{bu.useRef(null);const {handlers:pa}=bu.useContext(vi);Ze();const Ba=Sm();return(0,cu.jsx)($k,qg(Ef({style:{overflow:"hidden",pointerEvents:"all",opacity:N?.2:1}},c),{children:n?(0,cu.jsx)("embed",{src:pa?pa.inflateAsset(n.src).url:n.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!Ba&&ba?"all":"none"}}):null}))}));Ab(this,"ReactIndicator",he(()=>{const {props:{size:[c,
n],isLocked:N}}=this;return(0,cu.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:N?"8 2":"undefined"})}))}};Ab(Vq,"id","pdf");Ab(Vq,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});X(299);var Yx=[Ap,Bp,xo,es,hs,Ep,zo,Gp,Hp,Ao,Jp,yo,wn,Vq,Ej,Wt],du=class extends Em{constructor(){super(...arguments);Ab(this,"Shape",Ap)}};Ab(du,"id","box");Ab(du,"shortcut","whiteboard/rectangle");var eu=class extends Em{constructor(){super(...arguments);
Ab(this,"Shape",Bp)}};Ab(eu,"id","ellipse");Ab(eu,"shortcut","whiteboard/ellipse");var fu=class extends Gr{};Ab(fu,"id","erase");Ab(fu,"shortcut","whiteboard/eraser");var gu=class extends Fq{constructor(){super(...arguments);Ab(this,"Shape",xo);Ab(this,"simplify",!0);Ab(this,"simplifyTolerance",.618)}};Ab(gu,"id","highlighter");Ab(gu,"shortcut","whiteboard/highlighter");var cl=class extends Hr{constructor(){super(...arguments);Ab(this,"Shape",Ep)}};Ab(cl,"id","line");Ab(cl,"shortcut","whiteboard/connector");
var hu=class extends Fq{constructor(){super(...arguments);Ab(this,"Shape",zo);Ab(this,"simplify",!1)}};Ab(hu,"id","pencil");Ab(hu,"shortcut","whiteboard/pencil");var Zx=class extends Em{constructor(){super(...arguments);Ab(this,"Shape",Gp)}};Ab(Zx,"id","polygon");var iu=class extends Ir{constructor(){super(...arguments);Ab(this,"Shape",Hp)}};Ab(iu,"id","text");Ab(iu,"shortcut","whiteboard/text");var ju=class extends Em{constructor(){super(...arguments);Ab(this,"Shape",Ao)}};Ab(ju,"id","youtube");
var pk=class extends ii{constructor(){super(...arguments);Ab(this,"creatingShape");Ab(this,"offset",[0,0]);Ab(this,"onEnter",()=>{this.app.history.pause();Nc(()=>{var c=te.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(c=te.snap(c,8));this.creatingShape=c=new Ej({id:Se(),parentId:this.app.currentPage.id,point:c,size:Ej.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(c);this.app.setEditingShape(c);this.app.setSelectedShapes([c])})});
Ab(this,"onPointerDown",c=>{switch(c.type){case "shape":if(c.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":c.order||this.app.selectTool("select")}});Ab(this,"onExit",()=>{var c;this.creatingShape&&(this.app.history.resume(),(null==(c=this.creatingShape)?0:c.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};Ab(pk,"id","creating");var Pk=class extends ii{constructor(){super(...arguments);
Ab(this,"cursor","crosshair");Ab(this,"onPointerDown",c=>{this.tool.transition("creating")})}};Ab(Pk,"id","idle");var On=class extends mn{constructor(){super(...arguments);Ab(this,"Shape",Ej);Ab(this,"onPinch",c=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])})}};Ab(On,"id","logseq-portal");Ab(On,"shortcut","whiteboard/portal");Ab(On,"states",[Pk,pk]);Ab(On,"initial","idle");var gv=class extends Em{constructor(){super(...arguments);Ab(this,"Shape",wn)}};Ab(gv,"id","youtube");var hv=class extends Em{constructor(){super(...arguments);
Ab(this,"Shape",yo)}};Ab(hv,"id","iframe");var iv=Of(X(672)),sl=X(299),Lo=new Map(Yx.map(c=>[c.id,c])),sq=class{constructor(c){Ab(this,"shapes");Ab(this,"pageId");Ab(this,"assets");c&&this.load(c)}load(c){var n;const N=null==(n=null==c?void 0:c.pages)?void 0:n[0];this.pageId=null==N?void 0:N.id;this.assets=c.assets;this.shapes=null==N?void 0:N.shapes.map(ba=>{var pa=ba.type;if(!pa)throw Error("No shape type provided.");const Ba=Lo.get(pa);if(!Ba)throw Error(`Could not find shape class for ${pa}`);
return new Ba(ba)}).filter(ba=>"group"!==ba.type)}generatePreviewJsx(c,n){var N,ba;const pa=[...(null!=(N=this.shapes)?N:[]).map(Yb=>Yb.getRotatedBounds())];(N=null==c?void 0:c.currentView)&&pa.push(N);let Ba=Qe.getCommonBounds(pa);if(!Ba)return null;Ba=Qe.expandBounds(Ba,16);Ba=n?Qe.ensureRatio(Ba,n):Ba;const Ia=Yb=>[(Yb[0]-Ba.minX).toFixed(2),(Yb[1]-Ba.minY).toFixed(2)],[hb,yb]=N?Ia([N.minX,N.minY]):[0,0];return Ba&&(0,sl.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":Ba.minX.toFixed(2),
"data-common-bound-y":Ba.minY.toFixed(2),"data-common-bound-width":Ba.width.toFixed(2),"data-common-bound-height":Ba.height.toFixed(2),viewBox:[0,0,Ba.width,Ba.height].join(" "),children:[(0,sl.jsx)("defs",{children:N&&(0,sl.jsxs)(sl.Fragment,{children:[(0,sl.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${hb}, ${yb})`,width:N.width,height:N.height}),(0,sl.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,sl.jsx)("rect",{width:Ba.width,height:Ba.height,fill:"white"}),(0,sl.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,sl.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(ba=this.shapes)?void 0:ba.map(Yb=>{var rc,Ac;const {bounds:Yc,props:{rotation:ud}}=Yb,[pd,Gd]=Ia([Yc.minX,Yc.minY]),Qd=+(180*((null!=ud?ud:0)+(null!=(rc=Yc.rotation)?rc:0))/Math.PI).toFixed(2),[hd,sd]=[(Yc.width/2).toFixed(2),(Yc.height/2).toFixed(2)];return(0,sl.jsx)("g",{transform:[`translate(${pd}, ${Gd})`,`rotate(${Qd}, ${hd}, ${sd})`].join(" "),children:Yb.getShapeSVGJsx({assets:null!=
(Ac=this.assets)?Ac:[]})},Yb.id)})}),(0,sl.jsx)("rect",{mask:N?`url(#${this.pageId}-camera-mask)`:"",width:Ba.width,height:Ba.height,fill:"transparent"}),N&&(0,sl.jsx)("use",{id:"minimap-camera-rect","data-x":hb,"data-y":yb,"data-width":N.width,"data-height":N.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/c.camera.zoom})]})}exportAsSVG(c){return(c=this.generatePreviewJsx(void 0,c))?iv.default.renderToString(c):""}},cD=Of(X(67)),Wq=X(299),Xq=cD.forwardRef((c,
n)=>{var {value:N,className:ba}=c;c=Yi(c,["autoResize","value","className"]);return(0,Wq.jsx)("div",{className:"tl-input"+(ba?" "+ba:""),children:(0,Wq.jsxs)("div",{className:"tl-input-sizer",children:[(0,Wq.jsx)("div",{className:"tl-input-hidden",children:N}),(0,Wq.jsx)("input",Ef({ref:n,value:N,className:"tl-text-input",type:"text"},c))]})})}),ci=X(299),Im=({type:c,active:n})=>(0,ci.jsx)("span",{className:"tl-type-tag","data-active":n,children:(0,ci.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[c]}`})}),jv=(c,n)=>(0,ci.jsx)("span",{children:c.split(new RegExp(`(${n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((N,ba)=>1===ba%2?(0,ci.jsx)("mark",{className:"tl-highlighted",children:N}):N).map((N,ba)=>(0,ci.jsx)(kk.default.Fragment,{children:N},ba))}),tr=(c,n)=>{const {handlers:N}=kk.default.useContext(vi),[ba,pa]=kk.default.useState(null),Ba=ke(c,200);kk.default.useEffect(()=>
{let Ia=!1;if(0<Ba.length){const hb={"pages?":!0,"blocks?":!0,"files?":!1};"B"===n?hb["pages?"]=!1:"P"===n&&(hb["blocks?"]=!1);N.search(Ba,hb).then(yb=>{Ia||pa(yb)})}else pa(null);return()=>{Ia=!0}},[Ba,null==N?void 0:N.search]);return ba},Vs=he(({className:c,style:n,placeholder:N,onChange:ba,onBlur:pa,onAddBlock:Ba})=>{const [Ia,hb]=kk.default.useState(Ej.defaultSearchQuery),[yb,Yb]=kk.default.useState(Ej.defaultSearchFilter),rc=kk.default.useRef(null),{handlers:Ac,renderers:Yc}=kk.default.useContext(vi),
ud=Ac.t,pd=kk.default.useCallback((kf,Rf)=>{var Lg;console.log({id:kf,isPage:Rf});setTimeout(()=>ba(kf,Rf));null==(Lg=rc.current)||Lg.blur();kf&&(Ej.defaultSearchQuery="",Ej.defaultSearchFilter=null)},[]),Gd=kk.default.useCallback(kf=>Zh(void 0,null,function*(){const Rf=yield null==Ac?void 0:Ac.addNewBlock(kf);Rf&&(pd(Rf),null==Ba||Ba(Rf));return Rf}),[Ba]),Qd=kk.default.useRef(null),[hd,sd]=kk.default.useState(0),yd=tr(Ia,yb),[Rd,Id]=kk.default.useState("circle-plus"),[Ve,Xe]=kk.default.useState(!1);
kk.default.useEffect(()=>{setTimeout(()=>{var kf;null==(kf=rc.current)||kf.focus()})},[yb]);kk.default.useEffect(()=>{Ej.defaultSearchQuery=Ia;Ej.defaultSearchFilter=yb},[Ia,yb]);const hg=kk.default.useMemo(()=>{var kf;const Rf=[];if(null==Yc||!Yc.Breadcrumb||!Ac)return[];Ba&&Rf.push({actionIcon:"circle-plus",onChosen:()=>!!Gd(Ia),element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,{active:!0,type:"BA"}),0<Ia.length?(0,ci.jsxs)(ci.Fragment,{children:[(0,ci.jsx)("strong",
{children:ud("whiteboard/new-block")}),Ia]}):(0,ci.jsx)("strong",{children:ud("whiteboard/new-block-no-colon")})]})});(null==(kf=null==yd?void 0:yd.pages)?0:kf.some(Lg=>Lg.title.toLowerCase()===Ia.toLowerCase()))||!Ia||Rf.push({actionIcon:"circle-plus",onChosen:()=>Zh(void 0,null,function*(){let Lg=yield null==Ac?void 0:Ac.addNewPage(Ia);pd(Lg,!0);return!0}),element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,{active:!0,type:"PA"}),(0,ci.jsx)("strong",{children:ud("whiteboard/new-page")}),
Ia]})},{actionIcon:"circle-plus",onChosen:()=>Zh(void 0,null,function*(){let Lg=yield null==Ac?void 0:Ac.addNewWhiteboard(Ia);pd(Lg,!0);return!0}),element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,{active:!0,type:"WA"}),(0,ci.jsx)("strong",{children:ud("whiteboard/new-whiteboard")}),Ia]})});0===Ia.length&&null===yb&&Rf.push({actionIcon:"search",onChosen:()=>{Yb("B");return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,
{type:"BS"}),ud("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{Yb("P");return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,{type:"PS"}),ud("whiteboard/search-only-pages")]})});yb&&"P"!==yb||!yd||!yd.pages||Rf.push(...yd.pages.map(Lg=>({actionIcon:"search",onChosen:()=>{pd(Lg.id,!0);return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,{type:Ac.isWhiteboardPage(Lg.id)?"WP":"P"}),jv(Lg.title,
Ia)]})})));yb&&"B"!==yb||!yd||!yd.blocks||Rf.push(...yd.blocks.filter(Lg=>Lg.title&&Lg.uuid).map(({title:Lg,uuid:ah})=>{const Gg=Ac.queryBlockByUUID(ah);return{actionIcon:"search",onChosen:()=>{var bh,Df,If;return Gg?(pd(ah),null==(If=null==(Df=null==(bh=window.logseq)?void 0:bh.api)?void 0:Df.set_blocks_id)||If.call(Df,[ah]),!0):!1},element:(0,ci.jsx)(ci.Fragment,{children:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(Im,{type:"B"}),jv(Lg,Ia)]})})}}));return Rf},
[Ia,yb,yd,null==Yc?void 0:Yc.Breadcrumb,Ac]);kk.default.useEffect(()=>{const kf=Rf=>{var Lg,ah;let Gg=hd;"ArrowDown"===Rf.key?Gg=Math.min(hg.length-1,hd+1):"ArrowUp"===Rf.key?Gg=Math.max(0,hd-1):"Enter"===Rf.key?(null==(Lg=hg[hd])||Lg.onChosen(),Rf.stopPropagation(),Rf.preventDefault()):"Backspace"===Rf.key&&0===Ia.length?Yb(null):"Escape"===Rf.key&&pd("");Gg!==hd&&(Lg=hg[Gg],sd(Gg),Id(Lg.actionIcon),Rf.stopPropagation(),Rf.preventDefault(),(Rf=null==(ah=Qd.current)?void 0:ah.querySelector(".tl-quick-search-option:nth-child("+
(Gg+1)+")"))&&(null==Rf||Rf.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",kf,!0);return()=>{document.removeEventListener("keydown",kf,!0)}},[hg,hd,Ia]);return(0,ci.jsxs)("div",{className:"tl-quick-search "+(null!=c?c:""),style:n,children:[(0,ci.jsx)(oB,{icon:Rd,onClick:()=>{var kf;null==(kf=hg[hd])||kf.onChosen()}}),(0,ci.jsxs)("div",{className:"tl-quick-search-input-container",children:[yb&&(0,ci.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ci.jsx)(Im,{type:yb}),
"B"===yb?"Search blocks":"Search pages",(0,ci.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Yb(null),children:(0,ci.jsx)(hh,{name:"x"})})]}),(0,ci.jsx)(Xq,{ref:rc,type:"text",value:Ia,className:"tl-quick-search-input",placeholder:null!=N?N:"Create or search your graph...",onChange:kf=>hb(kf.target.value),onKeyDown:kf=>{"Enter"===kf.key&&pd(Ia);kf.stopPropagation()},onFocus:()=>{Xe(!0)},onBlur:()=>{Xe(!1);null==pa||pa()}})]}),0<hg.length&&(0,ci.jsx)("div",{onWheelCapture:kf=>
kf.stopPropagation(),className:"tl-quick-search-options",ref:Qd,style:{visibility:Ve?"visible":"hidden",pointerEvents:Ve?"all":"none"},children:(0,ci.jsx)(mC,{style:{height:40*Math.min(Math.max(1,hg.length),12)},totalCount:hg.length,itemContent:kf=>{const {actionIcon:Rf,onChosen:Lg,element:ah}=hg[kf];return(0,ci.jsx)("div",{"data-focused":kf===hd,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Id(Rf);sd(kf)},onPointerDownCapture:Gg=>{Lg()&&(Gg.stopPropagation(),Gg.preventDefault())},
children:ah},kf)}})})]})}),Xi=X(299),dD=he(function(c){var {pageId:n,portalType:N,refs:ba,side:pa,onRefsChange:Ba}=c;c=Yi(c,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:Ia}}=vx.default.useContext(vi),hb=ba.length+(n?1:0),yb=0===ba.length,Yb=Ac=>{Ac&&!ba.includes(Ac)&&yb&&Ba([...ba,Ac])},rc=!(!n||!N);return(0,Xi.jsx)(yf,qg(Ef({},c),{side:pa,align:"start",alignOffset:-6,label:(0,Xi.jsx)(Oh,{content:Ia("whiteboard/link"),sideOffset:14,children:(0,Xi.jsxs)("div",
{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,Xi.jsx)(hh,{name:0<hb?"link":"add-link"}),0<hb&&(0,Xi.jsx)("div",{className:"tl-shape-links-count",children:hb})]})}),children:(0,Xi.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":rc,children:[rc&&(0,Xi.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,Xi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Xi.jsx)(hh,{className:"opacity-50",name:"internal-link"}),
Ia("whiteboard/references")]}),(0,Xi.jsx)(ul,{type:N,id:n})]}),(0,Xi.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,Xi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Xi.jsx)(hh,{className:"opacity-50",name:"add-link"}),Ia("whiteboard/link-to-any-page-or-block")]}),yb&&(0,Xi.jsx)(Vs,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:Ia("whiteboard/start-typing-to-search"),onChange:Yb}),0<ba.length&&(0,Xi.jsx)("div",{className:"flex flex-col items-stretch gap-2",
children:ba.map((Ac,Yc)=>(0,Xi.jsx)(ul,{id:Ac,type:mg(Ac)?"B":"P",onRemove:()=>{Ba(ba.filter((ud,pd)=>Yc!==pd))},showContent:!0},Ac))})]})]})}))}),yn=X(299),is=window.LSUI,ri=X(299),js="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),lj=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],mj=new Map,qj={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing",
"Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle",
"Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},Bo=Object.entries(qj).filter(([,c])=>c.includes("NoFill")&&c.includes("Swatch")).map(([c])=>c),mk=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("AutoResizing"),ba=N.every(pa=>pa.props.isAutoResizing);return(0,ri.jsx)(Jg,{tooltip:n("whiteboard/auto-resize"),toggle:N.every(pa=>"logseq-portal"===pa.props.type),className:"tl-button",pressed:ba,
onPressedChange:pa=>{N.forEach(Ba=>{if("logseq-portal"===Ba.props.type)Ba.update({isAutoResizing:pa});else Ba.onResetBounds({zoom:c.viewport.camera.zoom})});c.persist()},children:(0,ri.jsx)(hh,{name:"dimensions"})})}),dl=he(()=>{const c=Ze();var {handlers:{t:n}}=ck.default.useContext(vi);const N=sk("LogseqPortalViewMode"),ba=N.every(pa=>pa.collapsed);if(!ba&&!N.every(pa=>!pa.collapsed))return null;n=(0,ri.jsxs)("div",{className:"flex",children:[ba?n("whiteboard/expand"):n("whiteboard/collapse"),(0,ri.jsx)(ak,
{action:ba?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,ri.jsx)(Jg,{tooltip:n,toggle:N.every(pa=>"logseq-portal"===pa.props.type),className:"tl-button",pressed:ba,onPressedChange:()=>c.api.setCollapsed(!ba),children:(0,ri.jsx)(hh,{name:ba?"object-expanded":"object-compact"})})}),wi=he(()=>{const {handlers:{isMobile:c}}=ck.default.useContext(vi);var n=sk("ScaleLevel");n=1<(new Set(n.map(N=>N.scaleLevel))).size?"":n[0].scaleLevel;return(0,ri.jsx)(Hi,{scaleLevel:n,compact:c()})}),
$x=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("IFrameSource")[0],ba=ck.default.useCallback(Ba=>{N.onIFrameSourceChange(Ba.target.value.trim().toLowerCase());c.persist()},[]),pa=ck.default.useCallback(()=>{N.reload()},[]);return(0,ri.jsxs)("span",{className:"flex gap-3",children:[(0,ri.jsx)(Bh,{tooltip:n("whiteboard/reload"),type:"button",onClick:pa,children:(0,ri.jsx)(hh,{name:"refresh"})}),(0,ri.jsx)(Xq,{title:n("whiteboard/website-url"),className:"tl-iframe-src",value:`${N.props.url}`,
onChange:ba}),(0,ri.jsx)(Bh,{tooltip:n("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(N.props.url),children:(0,ri.jsx)(hh,{name:"external-link"})})]})}),ks=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("YoutubeLink")[0],ba=ck.default.useCallback(pa=>{N.onYoutubeLinkChange(pa.target.value);c.persist()},[]);return(0,ri.jsxs)("span",{className:"flex gap-3",children:[(0,ri.jsx)(Xq,{title:n("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${N.props.url}`,
onChange:ba}),(0,ri.jsx)(Bh,{tooltip:n("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var pa,Ba,Ia;return null==(Ia=null==(Ba=null==(pa=window.logseq)?void 0:pa.api)?void 0:Ba.open_external_link)?void 0:Ia.call(Ba,N.props.url)},children:(0,ri.jsx)(hh,{name:"external-link"})})]})}),ls=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("TwitterLink")[0],ba=ck.default.useCallback(pa=>{N.onTwitterLinkChange(pa.target.value);c.persist()},[]);return(0,ri.jsxs)("span",{className:"flex gap-3",
children:[(0,ri.jsx)(Xq,{title:n("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${N.props.url}`,onChange:ba}),(0,ri.jsx)(Bh,{tooltip:n("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var pa,Ba,Ia;return null==(Ia=null==(Ba=null==(pa=window.logseq)?void 0:pa.api)?void 0:Ba.open_external_link)?void 0:Ia.call(Ba,N.props.url)},children:(0,ri.jsx)(hh,{name:"external-link"})})]})}),ku=he(()=>{const c=Ze(),{handlers:{t:n,setCurrentPdf:N}}=ck.default.useContext(vi),ba=c.selectedShapesArray[0];
return(0,ri.jsx)(Bh,{tooltip:n("whiteboard/edit-pdf"),type:"button",onClick:()=>N(c.assets[ba.props.assetId].src),children:(0,ri.jsx)(hh,{name:"edit"})})}),ay=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi);var N=sk("NoFill");const ba=ck.default.useCallback(pa=>{c.selectedShapesArray.forEach(Ba=>Ba.update({noFill:pa}));c.persist()},[]);N=N.every(pa=>pa.props.noFill);return(0,ri.jsx)(Jg,{tooltip:n("whiteboard/fill"),className:"tl-button",pressed:N,onPressedChange:ba,children:(0,ri.jsx)(hh,
{name:N?"droplet-off":"droplet"})})}),lu=he(()=>{const c=Ze(),n=sk("Swatch"),N=ck.default.useCallback(pa=>{c.selectedShapesArray.forEach(Ba=>{Ba.update({fill:pa,stroke:pa})});c.persist()},[]),ba=ck.default.useCallback(pa=>{c.selectedShapesArray.forEach(Ba=>{Ba.update({opacity:pa})});c.persist()},[]);return(0,ri.jsx)(Vh,{popoverSide:"top",color:n[0].props.noFill?n[0].props.stroke:n[0].props.fill,opacity:n[0].props.opacity,setOpacity:ba,setColor:N})}),xi=he(()=>{const c=Ze(),n=ck.default.useCallback(N=>
{c.api.convertShapes(N.currentTarget.dataset.tool)},[]);return(0,ri.jsx)(sx,{popoverSide:"top",chevron:!1,setGeometry:n})}),mu=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("StrokeType"),ba=N.every(pa=>"dashed"===pa.props.strokeType)?"dashed":N.every(pa=>"line"===pa.props.strokeType)?"line":"mixed";return(0,ri.jsx)(Bk,{title:n("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:ba,onValueChange:pa=>
{N.forEach(Ba=>{Ba.update({strokeType:pa})});c.persist()}})}),nu=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("ArrowMode");var ba=N.every(Ba=>{var Ia;return"arrow"===(null==(Ia=Ba.props.decorations)?void 0:Ia.start)});const pa=N.every(Ba=>{var Ia;return"arrow"===(null==(Ia=Ba.props.decorations)?void 0:Ia.end)});ba=[ba?"start":null,pa?"end":null].filter(Kc);return(0,ri.jsx)(ui,{title:n("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],
value:ba,onValueChange:Ba=>{N.forEach(Ia=>{var hb=Ia.update;var yb={start:Ba.includes("start")?"arrow":null,end:Ba.includes("end")?"arrow":null};hb.call(Ia,{decorations:yb})});c.persist()}})}),ou=he(()=>{const c=Ze(),{handlers:{t:n}}=ck.default.useContext(vi),N=sk("TextStyle"),ba=N.every(Ba=>500<Ba.props.fontWeight),pa=N.every(Ba=>Ba.props.italic);return(0,ri.jsxs)("span",{className:"flex gap-1",children:[(0,ri.jsx)(Jg,{tooltip:n("whiteboard/bold"),className:"tl-button",pressed:ba,onPressedChange:Ba=>
{N.forEach(Ia=>{Ia.update({fontWeight:Ba?700:400});Ia.onResetBounds()});c.persist()},children:(0,ri.jsx)(hh,{name:"bold"})}),(0,ri.jsx)(Jg,{tooltip:n("whiteboard/italic"),className:"tl-button",pressed:pa,onPressedChange:Ba=>{N.forEach(Ia=>{Ia.update({italic:Ba});Ia.onResetBounds()});c.persist()},children:(0,ri.jsx)(hh,{name:"italic"})})]})}),Kp=he(()=>{var c;const n=Ze(),N=n.selectedShapesArray[0];return(0,ri.jsx)(dD,{onRefsChange:ba=>{N.update({refs:ba});n.persist()},refs:null!=(c=N.props.refs)?
c:[],shapeType:N.props.type,side:"right",pageId:"logseq-portal"===N.props.type?N.props.pageId:void 0,portalType:"logseq-portal"===N.props.type?N.props.blockType:void 0})});mj.set("Geometry",xi);mj.set("AutoResizing",mk);mj.set("LogseqPortalViewMode",dl);mj.set("ScaleLevel",wi);mj.set("YoutubeLink",ks);mj.set("TwitterLink",ls);mj.set("IFrameSource",$x);mj.set("NoFill",ay);mj.set("Swatch",lu);mj.set("StrokeType",mu);mj.set("ArrowMode",nu);mj.set("TextStyle",ou);mj.set("Links",Kp);mj.set("EditPdf",ku);
var pu=c=>{var n;return(null!=(n=qj[c])?n:[]).filter(Kc)},Co=c=>{const n=c.map(ba=>ba.props.type),N=new Set(0<c.length?pu(n[0]):[]);for(let ba=1;ba<n.length&&0<N.size;ba++){const pa=pu(n[ba]);N.forEach(Ba=>{pa.includes(Ba)||N.delete(Ba)})}1<c.length&&lj.forEach(ba=>{N.has(ba)&&N.delete(ba)});return Array.from(N).sort((ba,pa)=>js.indexOf(ba)-js.indexOf(pa)).map(ba=>mj.get(ba))},Yq=X(299),ms=window.LSUI,ns=he(({shapes:c,offsets:n,hidden:N})=>{const ba=Ze(),pa=Nq.useRef(null),Ba=Nq.useRef(null);Nq.useLayoutEffect(()=>
{setTimeout(()=>{const hb=Ba.current;if(hb){var {offsetWidth:yb,offsetHeight:Yb}=hb;pa.current=[yb,Yb]}})});Nq.useLayoutEffect(()=>{var hb;const yb=Ba.current;if(yb){var Yb=null!=(hb=pa.current)?hb:[0,0];hb=0;if(116>n.top){var rc=n.height/2+40;140>n.bottom&&(rc+=n.bottom-140)}else rc=-(n.height/2+40);16>n.left+n.width/2-Yb[0]/2?hb+=-(n.left+n.width/2-Yb[0]/2-16):16>n.right+n.width/2-Yb[0]/2&&(hb+=n.right+n.width/2-Yb[0]/2-16);var [Ac,Yc]=[hb,rc];yb.style.transform=`translateX(${Ac}px) translateY(${Yc}px)`}},
[n]);if(!ba)return null;const Ia=Co(c);return(0,Yq.jsx)($k,{centered:!0,children:0<Ia.length&&(0,Yq.jsx)("div",{ref:Ba,className:"tl-toolbar tl-context-bar",style:{visibility:N?"hidden":"visible",pointerEvents:N?"none":"all"},children:Ia.map((hb,yb)=>(0,Yq.jsxs)(Nq.Fragment,{children:[(0,Yq.jsx)(hb,{}),yb<Ia.length-1&&(0,Yq.jsx)(ms.Separator,{className:"tl-toolbar-separator",orientation:"vertical"})]},yb))})})}),Zq=Of(X(67)),Pf=X(299),si=window.LSUI,$q=he(function({children:c,collisionRef:n}){var N,
ba,pa,Ba,Ia,hb,yb,Yb,rc,Ac,Yc,ud,pd,Gd,Qd,hd,sd;const yd=Ze(),{handlers:Rd}=Zq.useContext(vi),Id=Rd.t,Ve=Zq.useRef(null),Xe=kf=>{kf();yd.transition("select")},hg=Zq.useMemo(()=>hc(),[]);return(0,Pf.jsxs)(si.ContextMenu,{onOpenChange:kf=>{kf&&!yd.isIn("select.contextMenu")?yd.transition("select").selectedTool.transition("contextMenu"):!kf&&yd.isIn("select.contextMenu")&&yd.selectedTool.transition("idle")},children:[(0,Pf.jsx)(si.ContextMenuTrigger,{disabled:yd.editingShape&&0!==Object.keys(yd.editingShape).length,
children:c}),(0,Pf.jsx)(si.ContextMenuContent,{className:"tl-menu tl-context-menu",ref:Ve,onEscapeKeyDown:()=>yd.transition("select"),collisionBoundary:n.current,asChild:!0,tabIndex:-1,children:(0,Pf.jsxs)("div",{children:[1<(null==(N=yd.selectedShapes)?void 0:N.size)&&!yd.readOnly&&(null==(ba=yd.selectedShapesArray)?void 0:ba.some(kf=>!kf.props.isLocked))&&(0,Pf.jsxs)(Pf.Fragment,{children:[(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-button-row-wrap",children:[(0,Pf.jsxs)("div",{className:"tl-menu-button-row pb-0",
children:[(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/align-left"),onClick:()=>Xe(()=>yd.align("left")),children:(0,Pf.jsx)(hh,{name:"layout-align-left"})}),(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/align-center-horizontally"),onClick:()=>Xe(()=>yd.align("centerHorizontal")),children:(0,Pf.jsx)(hh,{name:"layout-align-center"})}),(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/align-right"),onClick:()=>Xe(()=>yd.align("right")),children:(0,Pf.jsx)(hh,{name:"layout-align-right"})}),(0,Pf.jsx)(si.Separator,{className:"tl-toolbar-separator",
orientation:"vertical"}),(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/distribute-horizontally"),onClick:()=>Xe(()=>yd.distribute("horizontal")),children:(0,Pf.jsx)(hh,{name:"layout-distribute-vertical"})})]}),(0,Pf.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/align-top"),onClick:()=>Xe(()=>yd.align("top")),children:(0,Pf.jsx)(hh,{name:"layout-align-top"})}),(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/align-center-vertically"),onClick:()=>Xe(()=>yd.align("centerVertical")),
children:(0,Pf.jsx)(hh,{name:"layout-align-middle"})}),(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/align-bottom"),onClick:()=>Xe(()=>yd.align("bottom")),children:(0,Pf.jsx)(hh,{name:"layout-align-bottom"})}),(0,Pf.jsx)(si.Separator,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Pf.jsx)(Bh,{tooltip:Id("whiteboard/distribute-vertically"),onClick:()=>Xe(()=>yd.distribute("vertical")),children:(0,Pf.jsx)(hh,{name:"layout-distribute-horizontal"})})]})]}),(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"}),
(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.packIntoRectangle),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"layout-grid"}),Id("whiteboard/pack-into-rectangle")]}),(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"})]}),0<(null==(pa=yd.selectedShapes)?void 0:pa.size)&&(0,Pf.jsxs)(Pf.Fragment,{children:[(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.api.zoomToSelection),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",
name:"circle-dotted"}),Id("whiteboard/zoom-to-fit"),(0,Pf.jsx)(ak,{action:"whiteboard/zoom-to-fit"})]}),(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"})]}),(yd.selectedShapesArray.some(kf=>"group"===kf.type||yd.getParentGroup(kf))||1<yd.selectedShapesArray.length)&&(null==(Ba=yd.selectedShapesArray)?void 0:Ba.some(kf=>!kf.props.isLocked))&&!yd.readOnly&&(0,Pf.jsxs)(Pf.Fragment,{children:[yd.selectedShapesArray.some(kf=>"group"===kf.type||yd.getParentGroup(kf))&&(0,Pf.jsxs)(si.ContextMenuItem,
{className:"tl-menu-item",onClick:()=>Xe(yd.api.unGroup),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"ungroup"}),Id("whiteboard/ungroup"),(0,Pf.jsx)(ak,{action:"whiteboard/ungroup"})]}),1<yd.selectedShapesArray.length&&(null==(Ia=yd.selectedShapesArray)?void 0:Ia.some(kf=>!kf.props.isLocked))&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.api.doGroup),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"group"}),Id("whiteboard/group"),(0,Pf.jsx)(ak,{action:"whiteboard/group"})]}),
(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"})]}),0<(null==(hb=yd.selectedShapes)?void 0:hb.size)&&(null==(yb=yd.selectedShapesArray)?void 0:yb.some(kf=>!kf.props.isLocked))&&(0,Pf.jsxs)(Pf.Fragment,{children:[!yd.readOnly&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.cut),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"cut"}),Id("whiteboard/cut")]}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.copy),children:[(0,Pf.jsx)(hh,
{className:"tl-menu-icon",name:"copy"}),Id("whiteboard/copy"),(0,Pf.jsx)(ak,{action:"editor/copy"})]})]}),!yd.readOnly&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.paste),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"clipboard"}),Id("whiteboard/paste"),(0,Pf.jsx)(ak,{shortcut:`${tw}+v`})]}),1===(null==(Yb=yd.selectedShapes)?void 0:Yb.size)&&!yd.readOnly&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(()=>yd.paste(void 0,!0)),children:[(0,Pf.jsx)(hh,
{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/paste-as-link"),(0,Pf.jsx)(ak,{shortcut:`${tw}+\u21E7+v`})]}),0<(null==(rc=yd.selectedShapes)?void 0:rc.size)&&(0,Pf.jsxs)(Pf.Fragment,{children:[(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(()=>{var kf,Rf;return Rd.exportToImage(yd.currentPageId,{x:yd.selectionBounds.minX+yd.viewport.camera.point[0]-8,y:yd.selectionBounds.minY+yd.viewport.camera.point[1]-
8,width:(null==(kf=yd.selectionBounds)?void 0:kf.width)+16,height:(null==(Rf=yd.selectionBounds)?void 0:Rf.height)+16,zoom:yd.viewport.camera.zoom})}),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"file-export"}),Id("whiteboard/export"),(0,Pf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Pf.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.api.selectAll),
children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/select-all"),(0,Pf.jsx)(ak,{action:"editor/select-parent"})]}),1<(null==(Ac=yd.selectedShapes)?void 0:Ac.size)&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.api.deselectAll),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/deselect-all")]}),!yd.readOnly&&0<(null==(Yc=yd.selectedShapes)?void 0:Yc.size)&&(null==(ud=yd.selectedShapesArray)?void 0:
ud.some(kf=>!kf.props.isLocked))&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(()=>yd.setLocked(!0)),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"lock"}),Id("whiteboard/lock"),(0,Pf.jsx)(ak,{action:"whiteboard/lock"})]}),!yd.readOnly&&0<(null==(pd=yd.selectedShapes)?void 0:pd.size)&&(null==(Gd=yd.selectedShapesArray)?void 0:Gd.some(kf=>kf.props.isLocked))&&(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(()=>yd.setLocked(!1)),children:[(0,Pf.jsx)(hh,
{className:"tl-menu-icon",name:"lock-open"}),Id("whiteboard/unlock"),(0,Pf.jsx)(ak,{action:"whiteboard/unlock"})]}),0<(null==(Qd=yd.selectedShapes)?void 0:Qd.size)&&!yd.readOnly&&(null==(hd=yd.selectedShapesArray)?void 0:hd.some(kf=>!kf.props.isLocked))&&(0,Pf.jsxs)(Pf.Fragment,{children:[(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.api.deleteShapes),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"backspace"}),Id("whiteboard/delete"),(0,Pf.jsx)(ak,{action:"editor/delete"})]}),
1<(null==(sd=yd.selectedShapes)?void 0:sd.size)&&!yd.readOnly&&(0,Pf.jsxs)(Pf.Fragment,{children:[(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.flipHorizontal),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"flip-horizontal"}),Id("whiteboard/flip-horizontally")]}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.flipVertical),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",
name:"flip-vertical"}),Id("whiteboard/flip-vertically")]})]}),!yd.readOnly&&(0,Pf.jsxs)(Pf.Fragment,{children:[(0,Pf.jsx)(si.ContextMenuSeparator,{className:"menu-separator"}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.bringToFront),children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/move-to-front"),(0,Pf.jsx)(ak,{action:"whiteboard/bring-to-front"})]}),(0,Pf.jsxs)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>Xe(yd.sendToBack),
children:[(0,Pf.jsx)(hh,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/move-to-back"),(0,Pf.jsx)(ak,{action:"whiteboard/send-to-back"})]})]}),hg&&(0,Pf.jsx)(si.ContextMenuItem,{className:"tl-menu-item",onClick:()=>{1===yd.selectedShapesArray.length?console.log(kb(yd.selectedShapesArray[0].serialized)):console.log(yd.selectedShapesArray.map(kf=>kb(kf.serialized)))},children:Id("whiteboard/dev-print-shape-props")})]})]})})]})}),qu=Of(X(67)),os=X(299),eD=he(({shape:c})=>{const n=Ze();
var {handlers:N}=qu.default.useContext(vi);N=N.t;const ba=qu.default.useMemo(()=>{var pa;const Ba=[...(null!=(pa=c.props.refs)?pa:[])].map(Ia=>[Ia,!0]);"logseq-portal"===c.props.type&&c.props.pageId&&Ba.unshift([c.props.pageId,!1]);return Ba.filter(Ia=>Ia[0].toLowerCase()!==n.currentPage.id&&Ia[0]!==c.props.pageId)},[c.props.id,c.props.type,c.props.parentId,c.props.refs]);return 0===ba.length?null:(0,os.jsx)("div",{className:"tl-quick-links",title:N("whiteboard/shape-quick-links"),children:ba.map(([pa,
Ba])=>(0,os.jsx)("div",{className:"tl-quick-links-row",children:(0,os.jsx)(wx,{id:pa,showReferenceContent:Ba})},pa))})}),Lp=Of(X(67)),Mp=Of(X(67)),ps={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},qs=(c,n,N)=>Zh(void 0,[c,n,N],function*(ba,{point:pa,shiftKey:Ba,dataTransfer:Ia,fromDrop:hb},yb){function Yb(zf,Yf){return Zh(this,null,function*(){const ch=Object.values(ba.assets).find(Hh=>Hh.src===zf);return ch?ch:{id:Se(),type:Yf,src:zf,size:yield Kh(yb.makeAssetUrl(zf),
Yf)}})}function rc(zf){return Zh(this,null,function*(){const Yf=zf.filter(ch=>"unknown"!==vq(ch.name)).map(ch=>Zh(this,null,function*(){try{const Hh=yield yb.saveAsset(ch);return yield Yb(Hh,vq(ch.name))}catch(Hh){console.error(Hh)}return null}));return(yield Promise.all(Yf)).filter(Kc)})}function Ac(zf){return[qg(Ef({},wn.defaultProps),{html:zf,point:[pa[0],pa[1]]})]}function Yc(zf){return Zh(this,null,function*(){return Xk(pd,Gd,sd,hd,yd,Qd,hg)(zf)})}function ud(){return Zh(this,null,function*(){const zf=
yield navigator.clipboard.read(),Yf=Xk(yd,Qd,hg);return(yield Promise.all(zf.map(ch=>Yf(ch)))).flat().filter(Kc)})}function pd(zf){return Zh(this,null,function*(){var Yf=zf.getData("file");if(!Yf)return null;const ch=yield Yb(Yf,"pdf");ba.addAssets([ch]);Yf=qg(Ef({},Vq.defaultProps),{id:Se(),assetId:ch.id,url:Yf,opacity:1});ch.size&&Object.assign(Yf,{point:[pa[0]-ch.size[0]/4+16,pa[1]-ch.size[1]/4+16],size:te.div(ch.size,2)});return[Yf]})}function Gd(zf){return Zh(this,null,function*(){var Yf=Array.from(zf.files);
return 0<Yf.length?(Lg=Yf=yield rc(Yf),Yf.map((ch,Hh)=>{switch(ch.type){case "video":var Wi=hs.defaultProps;break;case "image":Wi=es.defaultProps;break;case "pdf":Wi=Vq.defaultProps;break;default:return null}Wi=qg(Ef({},Wi),{id:Se(),assetId:ch.id,opacity:1});ch.size&&Object.assign(Wi,{point:[pa[0]-ch.size[0]/4+16*Hh,pa[1]-ch.size[1]/4+16*Hh],size:te.div(ch.size,2)});return Wi})):null})}function Qd(zf){return Zh(this,null,function*(){if(zf.types.includes("text/plain")&&(Ba||hb))return null;const Yf=
yield Bm(zf,"text/html");return Yf?Xk(Rd,Ac)(Yf):null})}function hd(zf){return Zh(this,null,function*(){var Yf,ch,Hh,Wi,$h,Xg,Li=zf.getData("block-uuid");if(Li){Li=Li.trim();const Qi=null==(Hh=null==(ch=null==(Yf=window.logseq)?void 0:Yf.api)?void 0:ch.get_selected_blocks)?void 0:Hh.call(ch);Yf=Qi&&1<(null==Qi?void 0:Qi.length)?Qi.map(nj=>nj.uuid):[Li];null==(Xg=null==($h=null==(Wi=window.logseq)?void 0:Wi.api)?void 0:$h.set_blocks_id)||Xg.call($h,Yf);Wi=Yf.map(nj=>Xe(`((${nj}))`));return(yield Promise.all(Wi)).flat().filter(Kc).map((nj,
Ek)=>qg(Ef({},nj),{point:[pa[0]+(Ej.defaultProps.size[0]+16)*Ek,pa[1]]}))}return null})}function sd(zf){return Zh(this,null,function*(){var Yf=zf.getData("page-name");return Yf?(Yf=Yf.trim(),Xe(`[[${Yf}]]`)):null})}function yd(zf){return Zh(this,null,function*(){var Yf=yield Bm(zf,"text/plain");return Yf?(Yf=Yf.trim(),Xk(Id,Ve)(Yf)):null})}function Rd(zf){if(zf=ba.api.getClonedShapesFromTldrString(decodeURIComponent(zf),pa)){const {shapes:Yf,assets:ch,bindings:Hh}=zf;ah.push(...ch);Gg.push(...Hh);
return Yf}return null}function Id(zf){return Zh(this,null,function*(){try{const ch=new URL(zf);var Yf=ch.host&&["http:","https:"].includes(ch.protocol)}catch(ch){Yf=!1}return Yf&&!Ba?Ux.test(zf)?[qg(Ef({},Ao.defaultProps),{url:zf,point:[pa[0],pa[1]]})]:Wx.test(zf)?[qg(Ef({},Jp.defaultProps),{url:zf,point:[pa[0],pa[1]]})]:[qg(Ef({},yo.defaultProps),{url:zf,point:[pa[0],pa[1]]})]:null})}function Ve(zf){return zf.startsWith("\x3ciframe")?[qg(Ef({},wn.defaultProps),{html:zf,point:[pa[0],pa[1]]})]:null}
function Xe(zf){return Zh(this,null,function*(){if(/^\(\(.*\)\)$/.test(zf)&&40===zf.length){var Yf=zf.slice(2,-2);if(mg(Yf))return[qg(Ef({},Ej.defaultProps),{point:[pa[0],pa[1]],size:[400,0],pageId:Yf,fill:ba.settings.color,stroke:ba.settings.color,scaleLevel:ba.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(zf))return Yf=zf.slice(2,-2),[qg(Ef({},Ej.defaultProps),{point:[pa[0],pa[1]],size:[400,0],pageId:Yf,fill:ba.settings.color,stroke:ba.settings.color,scaleLevel:ba.settings.scaleLevel,
blockType:"P"})];return null})}function hg(zf){return Zh(this,null,function*(){var Yf=yield Bm(zf,"text/plain");return Yf&&(Yf=Yf.trim(),Yf=yield null==yb?void 0:yb.addNewBlock(Yf))?[qg(Ef({},Ej.defaultProps),{size:[400,0],point:[pa[0],pa[1]],pageId:Yf,fill:ba.settings.color,stroke:ba.settings.color,scaleLevel:ba.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var kf,Rf;let Lg=[],ah=[];const Gg=[];ba.cursors.setCursor("progress");let bh=[];try{Ia?bh.push(...(null!=(kf=yield Yc(Ia))?kf:[])):
bh.push(...(null!=(Rf=yield ud())?Rf:[]))}catch(zf){console.error(zf)}const Df=bh.map(zf=>qg(Ef({},zf),{parentId:ba.currentPageId,isLocked:!1,id:mg(zf.id)?zf.id:Se()})),If=null==Ia?void 0:Ia.types.every(zf=>"Files"===zf);ba.wrapUpdate(()=>{var zf=[...Lg,...ah];0<zf.length&&ba.createAssets(zf);0<Df.length&&ba.createShapes(Df);ba.currentPage.updateBindings(Object.fromEntries(Gg.map(Yf=>[Yf.id,Yf])));if(1===ba.selectedShapesArray.length&&1===Df.length&&hb){zf=ba.selectedShapesArray[0];const Yf=ba.getShapeById(Df[0].id);
ba.createNewLineBinding(zf,Yf)}ba.setSelectedShapes(Df.map(Yf=>Yf.id));ba.selectedTool.transition("idle");ba.cursors.setCursor("default");(hb||If)&&ba.packIntoRectangle()})}),ru=Of(X(67)),rs=Of(X(67)),Jm=X(299),su=[du,eu,Zx,fu,gu,cl,hu,iu,ju,hv,gv,On],fD=c=>{const {renderers:n}=up.useContext(vi);return(0,Jm.jsx)(n.BacklinksCount,qg(Ef({},c),{options:{"portal?":!1}}))},by=()=>{const c=up.useRef(null),n=Ze(),N=up.useMemo(()=>({ContextBar:ns,BacklinksCount:fD,QuickLinks:eD}),[]);return(0,Jm.jsx)($q,
{collisionRef:c,children:(0,Jm.jsx)("div",{ref:c,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":n.uuid,children:(0,Jm.jsx)(lB,{components:N,children:(0,Jm.jsx)(EB,{})})})})},gD=c=>{var {onPersist:n,readOnly:N,model:ba}=c;c=Yi(c,["onPersist","readOnly","model"]);const pa=tk(),Ba=vr(),Ia=wr(),hb=N?null:xr(),yb=up.useCallback((Yb,rc)=>{null==n||n(Yb,rc)},[ba]);return(0,Jm.jsx)(hB,qg(Ef({Shapes:Yx,Tools:su,onDrop:pa,onPaste:Ba,onCopy:Ia,readOnly:N,onCanvasDBClick:hb,onPersist:yb,model:ba},
c),{children:(0,Jm.jsx)(by,{})}))},ar=function(c){var {renderers:n,handlers:N}=c;c=Yi(c,["renderers","handlers"]);const ba={renderers:up.useMemo(()=>Object.fromEntries(Object.entries(n).map(([pa,Ba])=>[pa,up.memo(Ba)])),[]),handlers:N};return(0,Jm.jsx)(vi.Provider,{value:ba,children:(0,Jm.jsx)(gD,Ef({},c))})}};
'use strict';var LAe=function(a,b){var c=$APP.FN.A(a),d=c?$APP.Wy:$APP.hYa;a=$APP.RN.A(b);return $APP.qn.C(function(e){var f=$APP.Se(e);e=$APP.J.C(f,$APP.Zv);f=c?$APP.J.C(f,d):$APP.J.C($APP.ww.A(f),d);return $APP.m(f)?new $APP.l(null,2,[$APP.Ur,$APP.p.A(e),$APP.GGd,$APP.GGd.A(f)],null):null},$APP.Nx.A(a))},MAe=function(a){return $APP.wq.G(a,$APP.I([$APP.xq,!0]))},NAe=function(a,b,c,d){c=new $APP.l(null,5,[$APP.Ur,$APP.ua(c,"id"),$APP.Cl,$APP.ua(c,"name"),$APP.Bt,MAe($APP.ua(c,"bindings")),$APP.GGd,
$APP.ua(c,"nonce"),$APP.FC,MAe(d)],null);d=$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null);var e=$APP.Lq.A(a);e=$APP.m(e)?e:$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null);return $APP.eg([$APP.Kq,$APP.Lq,$APP.Vy,$APP.Zy,$APP.Oy,$APP.Cv,$APP.Yv,$APP.$k,$APP.ix],[d,e,c,$APP.h4a,$APP.Bq,$APP.Kv,b,$APP.$k.A(a),$APP.yq.A?$APP.yq.A(b):$APP.yq.call(null,b)])},OAe=function(a,b,c,d){var e=$APP.yq.A?$APP.yq.A(b):$APP.yq.call(null,b);c=$APP.Qe([$APP.rO($APP.Zy),$APP.h4a,$APP.rO($APP.Vy),new $APP.l(null,5,[$APP.Ur,$APP.ua(c,
"id"),$APP.Cl,$APP.ua(c,"name"),$APP.Bt,MAe($APP.ua(c,"bindings")),$APP.GGd,$APP.ua(c,"nonce"),$APP.FC,MAe(d)],null)]);d=$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null);a=$APP.Lq.A(a);a=$APP.m(a)?a:$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null);return new $APP.l(null,6,[$APP.Yv,b,$APP.ix,e,$APP.Bv,"whiteboard",$APP.ww,c,$APP.Kq,d,$APP.Lq,a],null)},PAe=function(a,b,c,d){var e=$APP.FN.A($APP.rM())?NAe:OAe;return e.J?e.J(a,b,c,d):e.call(null,a,b,c,d)},QAe=function(a,b,c,d,e,f){var g=$APP.aO.A?$APP.aO.A(e):$APP.aO.call(null,
e);a=MAe(a.getCleanUpAssets());var h=$APP.wg($APP.Sg.C(function(y){y=$APP.Se(y);y=$APP.J.C(y,$APP.Ur);return MAe(b.getShapeById(y).serialized)},$APP.Ej.C(c,d)));d=$APP.wg($APP.Sg.C($APP.Ur,d));var n=$APP.wg($APP.Sg.C($APP.Ur,c)),q=$APP.wg($APP.vj.C($APP.hi,$APP.Ej.C(n,d)));c=$APP.z(q)?function(){var y=$APP.Dc($APP.Nh.A($APP.Sg.C($APP.Aw,$APP.Nx.A(g))));return $APP.QTa($APP.sc(q),y,null)}():null;var r=$APP.z(q)?$APP.Ag(q,c):null;c=$APP.wg($APP.yf.C(function(y){y=$APP.Ur.A(y);return q.A?q.A(y):q.call(null,
y)},h));var t=$APP.vj.C($APP.hi,$APP.Ej.C(d,n)),v=$APP.rM();d=$APP.z(t)?$APP.vj.C($APP.fb,$APP.Ok.C(function(y){return $APP.X7b(y,$APP.Wy)},function(){var y=new $APP.O(null,1,5,$APP.S,[$APP.Vl],null),C=$APP.Ok.C(function(D){return new $APP.O(null,2,5,$APP.S,[$APP.Zv,$APP.qh(D)],null)},t);return $APP.b4b?$APP.b4b(v,y,C):$APP.c4b.call(null,v,y,C)}())):null;n=$APP.Ok.C(function(y){return new $APP.O(null,2,5,$APP.S,[$APP.Ew,new $APP.O(null,2,5,$APP.S,[$APP.Zv,$APP.qh(y)],null)],null)},t);h=$APP.Sg.C(function(y){var C=
$APP.m(r)?$APP.J.C(r,$APP.p.A($APP.Zv.A(y))):null;return $APP.m(C)?$APP.U.F(y,$APP.Aw,C):y},$APP.Sg.C($APP.Mq,$APP.Sg.C(function(y){var C=$APP.$k.A(g),D=$APP.rM();return $APP.n4a(D,y,C)},h)));var x=function(){var y=$APP.Yv.A(g);return $APP.m(y)?y:$APP.p.A(e)}();a=PAe(g,x,b,a);return $APP.z(h)||$APP.z(n)||$APP.pg.C($APP.ww.A(a),$APP.ww.A(g))?new $APP.l(null,6,[$APP.Kxc,a,$APP.Tnd,h,$APP.MC,n,$APP.P2d,d,$APP.uid,c,$APP.RG,new $APP.l(null,2,[$APP.abb,!0,$APP.JE,f],null)],null):null},RAe=function(a){return $APP.qh(a.id)},
SAe=function(a,b){var c=$APP.wt.A(b),d=$APP.mEc.A(b);d=$APP.Ok.C(RAe,d);switch(c){case "sendToBack":c=function(){var f=RAe($APP.bOb.A(b));if($APP.m(f)){var g=$APP.Aw.A;f=new $APP.O(null,2,5,$APP.S,[$APP.Zv,f],null);f=$APP.RN.A?$APP.RN.A(f):$APP.RN.call(null,f);g=g.call($APP.Aw,f)}else g=null;return g}();var e=$APP.QTa($APP.sc(d),null,c);return a=$APP.fe.C($APP.Jo.C(function(f,g){return new $APP.l(null,2,[$APP.Zv,g,$APP.Aw,$APP.F.C(e,f)],null)},d),$APP.hz(new $APP.l(null,1,[$APP.$k,$APP.$k.A(a)],null)));
case "bringToFront":return c=function(){var f=RAe($APP.IN.A(b));if($APP.m(f)){var g=$APP.Aw.A;f=new $APP.O(null,2,5,$APP.S,[$APP.Zv,f],null);f=$APP.RN.A?$APP.RN.A(f):$APP.RN.call(null,f);g=g.call($APP.Aw,f)}else g=null;return g}(),e=$APP.QTa($APP.sc(d),c,null),a=$APP.fe.C($APP.vj.C($APP.fb,$APP.Jo.C(function(f,g){var h=new $APP.O(null,2,5,$APP.S,[$APP.Zv,g],null);h=$APP.RN.A?$APP.RN.A(h):$APP.RN.call(null,h);return $APP.m(h)?new $APP.l(null,2,[$APP.Zv,g,$APP.Aw,$APP.F.C(e,f)],null):null},d)),$APP.hz(new $APP.l(null,
1,[$APP.$k,$APP.$k.A(a)],null)));default:throw Error(["No matching clause: ",$APP.p.A(c)].join(""));}},TAe=function(a,b,c){c=$APP.oj(c);var d=$APP.V$b.A(c),e=$APP.xc($APP.A(b.pages)),f=$APP.aO(a),g=$APP.xd(new $APP.rg(null,new $APP.l(null,2,["sendToBack",null,"bringToFront",null],null),null),$APP.wt.A(c))?SAe(f,c):null;c=$APP.wg($APP.Jo.C(function(v,x){v=x.id;x=x.nonce;x=$APP.m(x)?x:Date.now();return new $APP.l(null,2,[$APP.Ur,v,$APP.GGd,x],null)},e.shapes));var h=$APP.rM(),n=function(){var v=$APP.en.C($APP.u($APP.uge),
new $APP.O(null,2,5,$APP.S,[h,a],null));return $APP.m(v)?v:$APP.wg($APP.Sg.C(function(x){return $APP.xk.F(x,$APP.Ur,$APP.p)},LAe(h,$APP.$k.A(f))))}();b=QAe(b,e,c,n,a,d);e=$APP.Se(b);n=$APP.J.C(e,$APP.Kxc);b=$APP.J.C(e,$APP.uid);var q=$APP.J.C(e,$APP.P2d),r=$APP.J.C(e,$APP.Tnd),t=$APP.J.C(e,$APP.MC);d=$APP.J.C(e,$APP.RG);if($APP.z(e)||$APP.z(g)){g=$APP.al.G(t,new $APP.O(null,1,5,$APP.S,[n],null),$APP.I([r,g]));b=$APP.m($APP.Ye(function(v){return $APP.B.C("group",$APP.Bi.A(v))},b))?$APP.U.F(d,$APP.JG,
$APP.NE):$APP.m(function(){var v=$APP.Ue(q);return $APP.m(v)?$APP.Xe(function(x){return $APP.B.C("group",$APP.Bi.A(x))},q):v}())?$APP.U.F(d,$APP.JG,$APP.lRd):$APP.m($APP.Ye(function(v){return $APP.B.C("line",$APP.Bi.A(v))&&$APP.B.C("arrow ",$APP.po.A($APP.Hjd.A(v)))},b))?$APP.U.F(d,$APP.JG,$APP.Lbd):$APP.U.F(d,$APP.JG,$APP.I4d);$APP.fh.J($APP.uge,$APP.Wk,new $APP.O(null,2,5,$APP.S,[h,a],null),c);if($APP.xd(new $APP.rg(null,new $APP.l(null,1,[$APP.Lbd,null],null),null),$APP.JG.A(b)))return $APP.tM($APP.d3d,
new $APP.l(null,2,[$APP.Yk,g,$APP.RG,b],null));c=$APP.d3d.A($APP.u($APP.qM));g=$APP.al.C($APP.Yk.A(c),g);c=$APP.aj.G($APP.I([b,$APP.RG.A(c)]));$APP.tM($APP.d3d,$APP.Re);return $APP.gO(h,g,c)}return null},UAe=function(a,b){var c=$APP.FN.A($APP.rM()),d=new $APP.l(null,6,[$APP.Ur,$APP.p.A(b),$APP.Cl,a,$APP.lYa,$APP.h4a,$APP.Bt,$APP.Re,$APP.GGd,1,$APP.FC,$APP.Cf],null);d=$APP.Qe([$APP.rO($APP.Zy),$APP.h4a,$APP.rO($APP.Vy),d]);a=new $APP.l(null,7,[$APP.Zv,b,$APP.ix,$APP.yq.A?$APP.yq.A(a):$APP.yq.call(null,
a),$APP.Yv,a,$APP.Bv,"whiteboard",$APP.Oy,$APP.Bq,$APP.Kq,$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null),$APP.Lq,$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null)],null);c=c?$APP.aj.G($APP.I([a,d])):$APP.U.F(a,$APP.ww,d);return new $APP.O(null,1,5,$APP.S,[c],null)},VAe=function(a){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W(function(){var b=$APP.m(a)?$APP.Uh(a):a;return $APP.m(b)?b:$APP.Kj?$APP.Kj():$APP.Lj.call(null)}()),function(b){return $APP.hA($APP.W($APP.m(a)?a:$APP.p.A(b)),function(c){return $APP.hA($APP.W($APP.gO($APP.rM(),
UAe(c,b),new $APP.l(null,1,[$APP.JG,$APP.gbb],null))),function(){return $APP.W(b)})})})})},WAe=function(a,b){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W($APP.rM()),function(c){return $APP.hA($APP.W($APP.Px.I?$APP.Px.I():$APP.Px.call(null)),function(d){return $APP.hA($APP.W($APP.aO(a)),function(e){return $APP.hA($APP.W(function(){var f=new $APP.l(null,5,[$APP.Zv,d,$APP.Yv,$APP.m(b)?b:"",$APP.Oy,$APP.Bq,$APP.Ex,$APP.$k.A(e),$APP.Gx,$APP.$k.A(e)],null);return $APP.Mq.A?$APP.Mq.A(f):
$APP.Mq.call(null,f)}()),function(f){return $APP.hA($APP.W($APP.gO(c,new $APP.O(null,1,5,$APP.S,[f],null),new $APP.l(null,2,[$APP.JG,$APP.SD,$APP.abb,!0],null))),function(){return $APP.W(d)})})})})})})},XAe=function(){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W(fetch("./whiteboard/onboarding.edn")),function(a){return $APP.hA($APP.W(a.text()),function(b){return $APP.hA($APP.W($APP.Dq(b)),function(c){return $APP.W(c)})})})})},YAe=function(a,b){var c=$APP.Se(a);a=$APP.J.C(c,$APP.Mx);
c=$APP.J.C(c,$APP.nA);var d=$APP.A(a);a=$APP.jEc(c);d=$APP.X7b(d,$APP.Vy);c=$APP.FC.A(d);d=$APP.Bt.A(d);return b.cloneShapesIntoCurrentPage($APP.rj(new $APP.l(null,3,[$APP.mEc,a,$APP.FC,c,$APP.Bt,d],null)))},ZAe=function(a){var b=$APP.rM();if($APP.m($APP.FN.I())){var c=new $APP.O(null,5,5,$APP.S,[$APP.Wm,new $APP.O(null,2,5,$APP.S,[$APP.Si($APP.xm,$APP.Ix,new $APP.O(null,6,5,$APP.S,[$APP.$k,$APP.Zv,$APP.ix,$APP.Yv,$APP.Lq,$APP.Kq],null)),$APP.Wl],null),$APP.Zm,new $APP.O(null,2,5,$APP.S,[$APP.Ix,
$APP.ix],null),new $APP.O(null,3,5,$APP.S,[$APP.Ix,$APP.Cv,$APP.Kv],null)],null);b=$APP.KN(b);b=$APP.dw.C?$APP.dw.C(c,b):$APP.dw.call(null,c,b)}else c=new $APP.O(null,5,5,$APP.S,[$APP.Wm,new $APP.O(null,2,5,$APP.S,[$APP.Si($APP.xm,$APP.Ix,new $APP.O(null,6,5,$APP.S,[$APP.$k,$APP.Zv,$APP.ix,$APP.Yv,$APP.Lq,$APP.Kq],null)),$APP.Wl],null),$APP.Zm,new $APP.O(null,2,5,$APP.S,[$APP.Ix,$APP.ix],null),new $APP.O(null,3,5,$APP.S,[$APP.Ix,$APP.Bv,"whiteboard"],null)],null),b=$APP.KN(b),b=$APP.dw.C?$APP.dw.C(c,
b):$APP.dw.call(null,c,b);return($APP.Mc(b)||$APP.B.C(1,$APP.sc(b))&&$APP.B.C($APP.p.A(a),$APP.p.A($APP.Zv.A($APP.A(b)))))&&$APP.jb($APP.en.C($APP.u($APP.qM),new $APP.O(null,1,5,$APP.S,[$APP.q2b],null)))},$Ae=function(a){var b=$APP.iN();$APP.m(b)&&$APP.$e.C(b.api.updateShapes,$APP.sj(a))},aBe=function(a){var b=$APP.iN();if($APP.m(b)&&(b=$APP.xc($APP.A(b.pages)),$APP.m(b))){var c=$APP.aO.A?$APP.aO.A(a):$APP.aO.call(null,a);if($APP.m(c)){a=$APP.Sg;var d=a.C,e=$APP.dl.C($APP.p,$APP.Zv);c=$APP.Nx.A(c);
c=$APP.Dx.A?$APP.Dx.A(c):$APP.Dx.call(null,c);a=d.call(a,e,c);$APP.z(a)&&b.updateShapesIndex($APP.sj(a))}}},bBe=function(a){return null!=a?$APP.Mn($APP.hA($APP.W(null),function(){return $APP.hA($APP.W(XAe()),function(b){return $APP.hA($APP.W(YAe(b,a)),function(){return $APP.W($APP.s2b())})})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},cBe=function(a){a.cleanup($APP.Sg.C(function(b){return b.id},a.shapes))},dBe=function(a,b){b=$APP.wq.G(b,$APP.I([new $APP.l(null,
1,[$APP.xq,!0],null)]));b=$APP.Se(b);var c=$APP.J.C(b,$APP.oQ),d=$APP.rM();return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W($APP.m(c)?$APP.thc(d,a,new $APP.l(null,1,[$APP.Bl,100],null)):null),function(e){return $APP.hA($APP.W($APP.Sg.C(function(f){return $APP.xk.F($APP.xk.F(f,$APP.Zv,$APP.p),$APP.Yv,function(g){return $APP.$e.C($APP.p,$APP.D3b(g))})},e)),function(f){return $APP.W($APP.rj(new $APP.l(null,1,[$APP.nA,f],null)))})})})},eBe=function(a){return $APP.Nn.C($APP.Ioc($APP.rM(),new $APP.O(null,
1,5,$APP.S,[$APP.wq.A(a)],null)),function(b){var c=(c=$APP.z(b))?$APP.A(b):c;return $APP.m(c)?(b=$APP.F.F(c,0,null),$APP.F.F(c,1,null),c=$APP.F.F(c,2,null),$APP.Koc($APP.m(c)?c:b)):null})},fBe=function(){return $APP.ege.A?$APP.ege.A(null):$APP.ege.call(null,null)},gBe=function(){return $APP.gge.A?$APP.gge.A(null):$APP.gge.call(null,null)},xBe=function(a){return $APP.eg([hBe,iBe,jBe,kBe,lBe,mBe,nBe,oBe,$APP.kB,pBe,qBe,rBe,sBe,$APP.Ju,tBe,uBe,vBe,wBe],[function(b){return $APP.m($APP.Fq.A?$APP.Fq.A(b):
$APP.Fq.call(null,b))?$APP.p.A($APP.Zv.A($APP.r5b($APP.rM(),$APP.Uh(b)))):$APP.p.A($APP.Zv.A($APP.aO.A?$APP.aO.A(b):$APP.aO.call(null,b)))},function(b){return $APP.rj($APP.xPc(b))},function(b){return $APP.v5b(b)},function(b){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W(function(){var c=new $APP.l(null,1,[$APP.fR,!1],null);return $APP.dR?$APP.dR(b,c):$APP.eR.call(null,b,c)}()),function(c){return $APP.W($APP.p.A($APP.Zv.A(c)))})})},function(b){return $APP.A2b($APP.m(b)?$APP.xPc(b):null)},
function(b){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W(VAe(b)),function(c){return $APP.W($APP.p.A(c))})})},$APP.MK,function(b){b=$APP.aO.A?$APP.aO.A(b):$APP.aO.call(null,b);return $APP.m(b)?$APP.bO(b):null},dBe,eBe,$APP.ddc,function(b,c){return $APP.vPb(b,$APP.I([$APP.bE,c]))},function(b){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W(WAe(a,b)),function(c){return $APP.W($APP.p.A(c))})})},function(b){return $APP.pP.G($APP.I([$APP.Tg.A(b)]))},function(b,c){function d(){return(0,$APP.t0c)(new $APP.O(null,
1,5,$APP.S,[$APP.qh(b)],null),$APP.aj.G($APP.I([$APP.wq.G(c,$APP.I([$APP.xq,!0])),new $APP.l(null,1,[$APP.sG,!0],null)])))}return $APP.$L.A?$APP.$L.A(d):$APP.$L.call(null,d)},function(b,c){return $APP.kN($APP.rM(),$APP.$k.A($APP.aO(b)),$APP.Tg.A(c))},function(b){return $APP.m(b)?$APP.hA($APP.W(null),function(){return $APP.hA($APP.W($APP.Uh(b)),function(c){return $APP.hA($APP.W($APP.m(c)?$APP.oO($APP.rM(),c):null),function(){return $APP.hA($APP.W(function(){var d=$APP.m(c)?$APP.r5b($APP.rM(),c):null;
return $APP.m(d)?d:$APP.aO.A?$APP.aO.A(b):$APP.aO.call(null,b)}()),function(d){return $APP.hA($APP.W($APP.bO(d)),function(e){return $APP.W($APP.hA($APP.W(null),function(){return $APP.hA($APP.W(null==d?function(){var f=new $APP.l(null,1,[$APP.fR,!1],null);return $APP.dR?$APP.dR(b,f):$APP.eR.call(null,b,f)}():null),function(f){return $APP.hA($APP.W($APP.m(f)?f:d),function(g){return $APP.W($APP.SQ.C($APP.m(e)?$APP.Zv.A(g):$APP.v5b($APP.Zv.A(g)),$APP.m($APP.m(c)?$APP.pg.C(c,$APP.Zv.A(g)):c)?new $APP.l(null,
1,[$APP.qE,c],null):null))})})}))})})})})}):null},function(b){return $APP.rj($APP.R4b(b))}])},zBe=function(a,b,c){return $APP.Mn($APP.hA($APP.W(null),function(){return $APP.hA($APP.W($APP.u(yBe)),function(){return $APP.hA($APP.W($APP.hA($APP.W(null),function(){return $APP.hA($APP.W($APP.tM(new $APP.O(null,2,5,$APP.S,[$APP.BMd,$APP.rM()],null),$APP.Hq.I?$APP.Hq.I():$APP.Hq.call(null))),function(){return $APP.W(TAe(a,b,c))})})),function(d){return $APP.W($APP.jf(yBe,d))})})}),function(d){console.error(d);
return $APP.FI.A(new $APP.O(null,2,5,$APP.S,[$APP.CF,["Save whiteboard failed, error:",$APP.p.A(d.cause)].join("")],null))})},ABe=new $APP.M(null,"Block","Block",-1959785792),BBe=new $APP.M(null,"Tweet","Tweet",-452258680),wBe=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),nBe=new $APP.M(null,"isMobile","isMobile",-2043133877),CBe=new $APP.M(null,"renderers","renderers",-1460292282),hBe=new $APP.M(null,"getBlockPageName","getBlockPageName",-1656908032),qBe=new $APP.M(null,"makeAssetUrl",
"makeAssetUrl",217779988),tBe=new $APP.M(null,"exportToImage","exportToImage",-154356643),pBe=new $APP.M(null,"saveAsset","saveAsset",-668047853),DBe=new $APP.M(null,"PageName","PageName",-164991013),oBe=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579),kBe=new $APP.M(null,"addNewPage","addNewPage",1998524678),EBe=new $APP.M(null,"BlockReference","BlockReference",-120254741),FBe=new $APP.M(null,"BacklinksCount","BacklinksCount",364670631),GBe=new $APP.M(null,"Page","Page",-1267059506),
sBe=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),HBe=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),mBe=new $APP.M(null,"addNewWhiteboard","addNewWhiteboard",554297706),uBe=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),IBe=new $APP.M(null,"onMount","onMount",-876858467),JBe=new $APP.M(null,"KeyboardShortcut","KeyboardShortcut",1250004264),vBe=new $APP.M(null,"redirectToPage","redirectToPage",87147838),KBe=new $APP.M(null,"model","model",331153215),iBe=new $APP.M(null,
"inflateAsset","inflateAsset",-1449040639),LBe=new $APP.M(null,"onPersist","onPersist",-1848738852),lBe=new $APP.M(null,"setCurrentPdf","setCurrentPdf",-63289336),jBe=new $APP.M(null,"getRedirectPageName","getRedirectPageName",-1858136925),rBe=new $APP.M(null,"copyToClipboard","copyToClipboard",1092115063);$APP.mAb("tldraw");var MBe=$APP.ij(673);var NBe,OBe,yBe,PBe,QBe;$APP.xpe={};NBe=$APP.BQ($APP.ua(MBe,"App"));$APP.Ape=$APP.ua(MBe,"generateJSXFromModel");
OBe=new $APP.l(null,8,[GBe,$APP.qJ($APP.tJ,function(a){return(0,$APP.VW)(new $APP.l(null,2,[$APP.jA,$APP.ua(a,"pageName"),$APP.sG,!0],null))},null,"frontend.extensions.tldraw/page-cp"),ABe,$APP.qJ($APP.tJ,function(a){a=$APP.qh($APP.ua(a,"blockId"));var b=new $APP.l(null,2,[$APP.Ur,$APP.p.A(a),$APP.sG,!0],null),c=$APP.oN($APP.Cad);a=c.C?c.C(b,a):c.call(null,b,a);return $APP.kJ(a)},null,"frontend.extensions.tldraw/block-cp"),HBe,$APP.qJ($APP.tJ,function(a){return(0,$APP.qV)(new $APP.l(null,1,[$APP.K_,
!0],null),$APP.rM(),$APP.qh($APP.ua(a,"blockId")),new $APP.l(null,1,[$APP.Hbd,$APP.ua(a,"endSeparator")],null))},null,"frontend.extensions.tldraw/breadcrumb"),BBe,$APP.qJ($APP.tJ,function(a){return(0,$APP.lYc)($APP.ua(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),DBe,$APP.qJ($APP.tJ,function(a){a=$APP.ua(a,"pageName");$APP.m(a)?(a=$APP.aO.A?$APP.aO.A(a):$APP.aO.call(null,a),a=$APP.m(a)?(0,$APP.CT)(new $APP.l(null,1,[$APP.K_,!0],null),a):null):a=null;return $APP.kJ(a)},null,"frontend.extensions.tldraw/page-name-link"),
FBe,function(a){return $APP.$e.C($APP.Bpe,$APP.Sg.C(function(b){return $APP.wq.G($APP.ua(a,b),$APP.I([new $APP.l(null,1,[$APP.xq,!0],null)]))},new $APP.O(null,3,5,$APP.S,["id","className","options"],null)))},EBe,$APP.qJ($APP.tJ,function(a){return(0,$APP.xXc)($APP.Re,$APP.ua(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),JBe,$APP.qJ($APP.tJ,function(a){return $APP.kJ(function(){var b=$APP.oj(a);if($APP.m(b)){var c=$APP.Se(b);b=$APP.J.C(c,$APP.tD);var d=$APP.J.C(c,$APP.QR);c=
$APP.J.C(c,$APP.dB);b="string"===typeof b?$APP.YR($APP.Tg.A(b)):d;var e=$APP.aj.G($APP.I([new $APP.l(null,1,[$APP.T7,!1],null),c]));return"string"===typeof b?$APP.cGc(b,$APP.I([e])):$APP.Ai.C(" | ",$APP.Sg.C(function(f){return $APP.cGc(f,$APP.I([e]))},b))}return null}())},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);yBe=$APP.eh.A(null);
PBe=$APP.qJ($APP.tJ,function(a,b,c,d,e){return $APP.Z("div",{style:{overscrollBehavior:"none"},onBlur:function(f){f=$APP.ua(f,"target").tagName;var g=new $APP.rg(null,new $APP.l(null,2,["INPUT",null,"TEXTAREA",null],null),null);f=g.A?g.A(f):g.call(null,f);return $APP.m(f)?$APP.bN():null},onWheel:$APP.wK,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.m($APP.m(c)?$APP.jb(d):c)?$APP.Z("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.kJ($APP.ZR("Loading onboarding whiteboard ..."))]):
null,$APP.kJ(function(){var f=new $APP.l(null,6,[CBe,OBe,$APP.bx,xBe(a),IBe,e,$APP.HCd,!0,LBe,function(g,h){return zBe(a,g,h)},KBe,b],null);return NBe.A?NBe.A(f):NBe.call(null,f)}())])},new $APP.O(null,2,5,$APP.S,[$APP.sJ,new $APP.l(null,1,[$APP.jKb,function(a,b){var c=$APP.A($APP.rJ.A(a)),d=$APP.F.C($APP.rJ.A(a),1),e=$APP.F.C($APP.rJ.A(b),1),f=function(){var g=function(){var h=$APP.ua(d,"pages");h=null==h?null:$APP.A(h);return null==h?null:$APP.ua(h,"shapes")}();return $APP.Ag($APP.Sg.C(function(h){return $APP.ua(h,
"id")},g),g)}();a=function(){var g=$APP.ua(e,"pages");g=null==g?null:$APP.A(g);return null==g?null:$APP.ua(g,"shapes")}();a=$APP.yf.C(function(g){var h=$APP.J.C(f,$APP.ua(g,"id"));return $APP.m(h)?$APP.pg.C($APP.ua(g,"type"),$APP.ua(h,"type")):null},a);$APP.z(a)&&$Ae(a);aBe(c);return b}],null)],null),"frontend.extensions.tldraw/tldraw-inner");QBe=$APP.qJ($APP.tJ,function(a,b,c,d){var e=$APP.uEc(a);return $APP.m(e)?PBe(a,e,b,c,d):null},new $APP.O(null,2,5,$APP.S,[$APP.r8,$APP.o9],null),"frontend.extensions.tldraw/tldraw-app-react");
$APP.ype=$APP.qJ($APP.tJ,function(a,b){var c=$APP.yJ.A?$APP.yJ.A(!0):$APP.yJ.call(null,!0),d=$APP.F.F(c,0,null),e=$APP.F.F(c,1,null);c=$APP.yJ(null);var f=$APP.F.F(c,0,null),g=$APP.F.F(c,1,null);$APP.WL(function(){return $APP.hA($APP.W(null),function(){return $APP.hA($APP.W($APP.oO($APP.rM(),a)),function(){return $APP.W(e.A?e.A(!1):e.call(null,!1))})})},$APP.Cf);$APP.WL(function(){$APP.m($APP.m(f)?b:f)&&$APP.B2b(f,b);return function(){return $APP.$b}},new $APP.O(null,2,5,$APP.S,[b,f],null));if($APP.m(d))return null;
var h=ZAe(a);return QBe(a,h,f,function(n){if($APP.m(n)){n.appUndo=fBe;n.appRedo=gBe;var q=$APP.ua(n,"api");return $APP.m(q)?$APP.Nn.C(h?bBe(q):null,function(){cBe(n.currentPage);$APP.B2b(n,b);return g.A?g.A(n):g.call(null,n)}):null}return null})},null,"frontend.extensions.tldraw/tldraw-app");$APP.IA.Ei();
}).call(this);
//# sourceMappingURL=tldraw.js.map
